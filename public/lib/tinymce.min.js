(function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};n.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};n.t=function(e,t){if(t&1)e=n(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var r=Object.create(null);n.r(r);Object.defineProperty(r,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=555)})({10:function(e,t,n){try{var r=n(7);if(typeof r.inherits!=="function")throw"";e.exports=r.inherits}catch(t){e.exports=n(11)}},108:function(e,t,n){(function(e){var r=typeof e!=="undefined"&&e||typeof self!=="undefined"&&self||window;var i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)};t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){if(e){e.close()}};function a(e,t){this._id=e;this._clearFn=t}a.prototype.unref=a.prototype.ref=function(){};a.prototype.close=function(){this._clearFn.call(r,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout((function t(){if(e._onTimeout)e._onTimeout()}),t)}};n(109);t.setImmediate=typeof self!=="undefined"&&self.setImmediate||typeof e!=="undefined"&&e.setImmediate||this&&this.setImmediate;t.clearImmediate=typeof self!=="undefined"&&self.clearImmediate||typeof e!=="undefined"&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},109:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(e.setImmediate){return}var r=1;var i={};var a=false;var o=e.document;var u;function s(e){if(typeof e!=="function"){e=new Function(""+e)}var t=new Array(arguments.length-1);for(var n=0;n<t.length;n++){t[n]=arguments[n+1]}var a={callback:e,args:t};i[r]=a;u(r);return r++}function l(e){delete i[e]}function f(e){var t=e.callback;var r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r);break}}function c(e){if(a){setTimeout(c,0,e)}else{var t=i[e];if(t){a=true;try{f(t)}finally{l(e);a=false}}}}function d(){u=function(e){t.nextTick((function(){c(e)}))}}function v(){if(e.postMessage&&!e.importScripts){var t=true;var n=e.onmessage;e.onmessage=function(){t=false};e.postMessage("","*");e.onmessage=n;return t}}function m(){var t="setImmediate$"+Math.random()+"$";var n=function(n){if(n.source===e&&typeof n.data==="string"&&n.data.indexOf(t)===0){c(+n.data.slice(t.length))}};if(e.addEventListener){e.addEventListener("message",n,false)}else{e.attachEvent("onmessage",n)}u=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;c(t)};u=function(t){e.port2.postMessage(t)}}function p(){var e=o.documentElement;u=function(t){var n=o.createElement("script");n.onreadystatechange=function(){c(t);n.onreadystatechange=null;e.removeChild(n);n=null};e.appendChild(n)}}function h(){u=function(e){setTimeout(c,0,e)}}var b=Object.getPrototypeOf&&Object.getPrototypeOf(e);b=b&&b.setTimeout?b:e;if({}.toString.call(e.process)==="[object process]"){d()}else if(v()){m()}else if(e.MessageChannel){g()}else if(o&&"onreadystatechange"in o.createElement("script")){p()}else{h()}b.setImmediate=s;b.clearImmediate=l})(typeof self==="undefined"?typeof e==="undefined"?this:e:self)}).call(this,n(6),n(8))},11:function(e,t){if(typeof Object.create==="function"){e.exports=function e(t,n){t.super_=n;t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{e.exports=function e(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype;t.prototype=new r;t.prototype.constructor=t}}},12:function(e,t,n){"use strict";(function(t){var r=n(13);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t){return 0}var n=e.length;var r=t.length;for(var i=0,a=Math.min(n,r);i<a;++i){if(e[i]!==t[i]){n=e[i];r=t[i];break}}if(n<r){return-1}if(r<n){return 1}return 0}function a(e){if(t.Buffer&&typeof t.Buffer.isBuffer==="function"){return t.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var o=n(7);var u=Object.prototype.hasOwnProperty;var s=Array.prototype.slice;var l=function(){return function e(){}.name==="foo"}();function f(e){return Object.prototype.toString.call(e)}function c(e){if(a(e)){return false}if(typeof t.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var d=e.exports=y;var v=/\s*function\s+([^\(\s]*)\s*/;function m(e){if(!o.isFunction(e)){return}if(l){return e.name}var t=e.toString();var n=t.match(v);return n&&n[1]}d.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=h(this);this.generatedMessage=true}var n=t.stackStartFunction||b;if(Error.captureStackTrace){Error.captureStackTrace(this,n)}else{var r=new Error;if(r.stack){var i=r.stack;var a=m(n);var o=i.indexOf("\n"+a);if(o>=0){var u=i.indexOf("\n",o+1);i=i.substring(u+1)}this.stack=i}}};o.inherits(d.AssertionError,Error);function g(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function p(e){if(l||!o.isFunction(e)){return o.inspect(e)}var t=m(e);var n=t?": "+t:"";return"[Function"+n+"]"}function h(e){return g(p(e.actual),128)+" "+e.operator+" "+g(p(e.expected),128)}function b(e,t,n,r,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}d.fail=b;function y(e,t){if(!e)b(e,true,t,"==",d.ok)}d.ok=y;d.equal=function e(t,n,r){if(t!=n)b(t,n,r,"==",d.equal)};d.notEqual=function e(t,n,r){if(t==n){b(t,n,r,"!=",d.notEqual)}};d.deepEqual=function e(t,n,r){if(!w(t,n,false)){b(t,n,r,"deepEqual",d.deepEqual)}};d.deepStrictEqual=function e(t,n,r){if(!w(t,n,true)){b(t,n,r,"deepStrictEqual",d.deepStrictEqual)}};function w(e,t,n,r){if(e===t){return true}else if(a(e)&&a(t)){return i(e,t)===0}else if(o.isDate(e)&&o.isDate(t)){return e.getTime()===t.getTime()}else if(o.isRegExp(e)&&o.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return n?e===t:e==t}else if(c(e)&&c(t)&&f(e)===f(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return i(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(a(e)!==a(t)){return false}else{r=r||{actual:[],expected:[]};var u=r.actual.indexOf(e);if(u!==-1){if(u===r.expected.indexOf(t)){return true}}r.actual.push(e);r.expected.push(t);return C(e,t,n,r)}}function x(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function C(e,t,n,r){if(e===null||e===undefined||t===null||t===undefined)return false;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var i=x(e);var a=x(t);if(i&&!a||!i&&a)return false;if(i){e=s.call(e);t=s.call(t);return w(e,t,n)}var u=R(e);var l=R(t);var f,c;if(u.length!==l.length)return false;u.sort();l.sort();for(c=u.length-1;c>=0;c--){if(u[c]!==l[c])return false}for(c=u.length-1;c>=0;c--){f=u[c];if(!w(e[f],t[f],n,r))return false}return true}d.notDeepEqual=function e(t,n,r){if(w(t,n,false)){b(t,n,r,"notDeepEqual",d.notDeepEqual)}};d.notDeepStrictEqual=k;function k(e,t,n){if(w(e,t,true)){b(e,t,n,"notDeepStrictEqual",k)}}d.strictEqual=function e(t,n,r){if(t!==n){b(t,n,r,"===",d.strictEqual)}};d.notStrictEqual=function e(t,n,r){if(t===n){b(t,n,r,"!==",d.notStrictEqual)}};function S(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function T(e){var t;try{e()}catch(e){t=e}return t}function E(e,t,n,r){var i;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof n==="string"){r=n;n=null}i=T(t);r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:".");if(e&&!i){b(i,n,"Missing expected exception"+r)}var a=typeof r==="string";var u=!e&&o.isError(i);var s=!e&&i&&!n;if(u&&a&&S(i,n)||s){b(i,n,"Got unwanted exception"+r)}if(e&&i&&n&&!S(i,n)||!e&&i){throw i}}d.throws=function(e,t,n){E(true,e,t,n)};d.doesNotThrow=function(e,t,n){E(false,e,t,n)};d.ifError=function(e){if(e)throw e};function N(e,t){if(!e)b(e,true,t,"==",N)}d.strict=r(N,d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual});d.strict.strict=d.strict;var R=Object.keys||function(e){var t=[];for(var n in e){if(u.call(e,n))t.push(n)}return t}}).call(this,n(6))},13:function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty;var a=Object.prototype.propertyIsEnumerable;function o(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function u(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e}));if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}e.exports=u()?Object.assign:function(e,t){var n;var u=o(e);var s;for(var l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var f in n){if(i.call(n,f)){u[f]=n[f]}}if(r){s=r(n);for(var c=0;c<s.length;c++){if(a.call(n,s[c])){u[s[c]]=n[s[c]]}}}}return u}},5:function(e,t,n){(function(t){var r=n(7);var i=n(12);function a(){return(new Date).getTime()}var o=Array.prototype.slice;var u;var s={};if(typeof t!=="undefined"&&t.console){u=t.console}else if(typeof window!=="undefined"&&window.console){u=window.console}else{u={}}var l=[[m,"log"],[g,"info"],[p,"warn"],[h,"error"],[b,"time"],[y,"timeEnd"],[w,"trace"],[x,"dir"],[C,"assert"]];for(var f=0;f<l.length;f++){var c=l[f];var d=c[0];var v=c[1];if(!u[v]){u[v]=d}}e.exports=u;function m(){}function g(){u.log.apply(u,arguments)}function p(){u.log.apply(u,arguments)}function h(){u.warn.apply(u,arguments)}function b(e){s[e]=a()}function y(e){var t=s[e];if(!t){throw new Error("No such label: "+e)}delete s[e];var n=a()-t;u.log(e+": "+n+"ms")}function w(){var e=new Error;e.name="Trace";e.message=r.format.apply(null,arguments);u.error(e.stack)}function x(e){u.log(r.inspect(e)+"\n")}function C(e){if(!e){var t=o.call(arguments,1);i.ok(false,r.format.apply(null,t))}}}).call(this,n(6))},555:function(e,t,n){window.tinymce=window.tinyMCE=n(556);n(557);n(558);n(560);n(562);n(564);n(566);n(568);n(570);n(572);n(574);n(576);n(578);n(580);n(582);n(584)},556:function(e,t,n){(function(t,n,r){(function(){(function(i){"use strict";var a=function(){};var o=function(e,t){return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}return e(t.apply(null,n))}};var u=function(e){return function(){return e}};var s=function(e){return e};function l(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}}var f=function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return!e.apply(null,t)}};var c=function(e){return function(){throw new Error(e)}};var d=u(false);var v=u(true);var m=function(){return g};var g=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r={fold:function(e,t){return e()},is:d,isSome:d,isNone:v,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(undefined),or:n,orThunk:t,map:m,each:a,bind:m,exists:d,forall:v,filter:m,equals:e,equals_:e,toArray:function(){return[]},toString:u("none()")};if(Object.freeze){Object.freeze(r)}return r}();var p=function(e){var t=u(e);var n=function(){return i};var r=function(t){return t(e)};var i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:v,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:g},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(d,(function(t){return n(e,t)}))}};return i};var h=function(e){return e===null||e===undefined?g:p(e)};var b={some:p,none:m,from:h};var y=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var w=function(e){return function(t){return y(t)===e}};var x=w("string");var C=w("object");var k=w("array");var S=w("null");var T=w("boolean");var E=w("function");var N=w("number");var R=Array.prototype.slice;var _=Array.prototype.indexOf;var D=Array.prototype.push;var O=function(e,t){return _.call(e,t)};var P=function(e,t){var n=O(e,t);return n===-1?b.none():b.some(n)};var A=function(e,t){return O(e,t)>-1};var B=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return true}}return false};var I=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i)}return r};var L=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}};var M=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n)}};var F=function(e,t){var n=[];var r=[];for(var i=0,a=e.length;i<a;i++){var o=e[i];var u=t(o,i)?n:r;u.push(o)}return{pass:n,fail:r}};var H=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r)){n.push(a)}}return n};var z=function(e,t,n){M(e,(function(e){n=t(n,e)}));return n};var U=function(e,t,n){L(e,(function(e){n=t(n,e)}));return n};var W=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return b.some(i)}}return b.none()};var j=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return b.some(n)}}return b.none()};var V=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!k(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}D.apply(t,e[n])}return t};var q=function(e,t){var n=I(e,t);return V(n)};var $=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n)!==true){return false}}return true};var K=function(e){var t=R.call(e,0);t.reverse();return t};var Y=function(e,t){return H(e,(function(e){return!A(t,e)}))};var X=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++){var a=e[r];n[String(a)]=t(a,r)}return n};var G=function(e,t){var n=R.call(e,0);n.sort(t);return n};var J=function(e){return e.length===0?b.none():b.some(e[0])};var Z=function(e){return e.length===0?b.none():b.some(e[e.length-1])};var Q=E(Array.from)?Array.from:function(e){return R.call(e)};var ee=typeof i.window!=="undefined"?i.window:Function("return this;")();var te=function(e,t){var n=t!==undefined&&t!==null?t:ee;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var ne=function(e,t){var n=e.split(".");return te(n,t)};var re=function(e,t){return ne(e,t)};var ie=function(e,t){var n=re(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};var ae={getOrDie:ie};var oe=function(){return ae.getOrDie("URL")};var ue=function(e){return oe().createObjectURL(e)};var se=function(e){oe().revokeObjectURL(e)};var le={createObjectURL:ue,revokeObjectURL:se};var fe=i.navigator,ce=fe.userAgent;var de,ve,me,ge,pe,he,be,ye,we,xe,Ce,ke,Se;var Te=function(e){return"matchMedia"in i.window?i.matchMedia(e).matches:false};de=false;we=/Android/.test(ce);ve=/WebKit/.test(ce);me=!ve&&!de&&/MSIE/gi.test(ce)&&/Explorer/gi.test(fe.appName);me=me&&/MSIE (\w+)\./.exec(ce)[1];ge=ce.indexOf("Trident/")!==-1&&(ce.indexOf("rv:")!==-1||fe.appName.indexOf("Netscape")!==-1)?11:false;pe=ce.indexOf("Edge/")!==-1&&!me&&!ge?12:false;me=me||ge||pe;he=!ve&&!ge&&/Gecko/.test(ce);be=ce.indexOf("Mac")!==-1;ye=/(iPad|iPhone)/.test(ce);xe="FormData"in i.window&&"FileReader"in i.window&&"URL"in i.window&&!!le.createObjectURL;Ce=Te("only screen and (max-device-width: 480px)")&&(we||ye);ke=Te("only screen and (min-width: 800px)")&&(we||ye);Se=ce.indexOf("Windows Phone")!==-1;if(pe){ve=false}var Ee=!ye||xe||parseInt(ce.match(/AppleWebKit\/(\d*)/)[1],10)>=534;var Ne={opera:de,webkit:ve,ie:me,gecko:he,mac:be,iOS:ye,android:we,contentEditable:Ee,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:me!==8,range:i.window.getSelection&&"Range"in i.window,documentMode:me&&!pe?i.document.documentMode||7:10,fileApi:xe,ceFalse:me===false||me>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:false,canHaveCSP:me===false||me>11,desktop:!Ce&&!ke,windowsPhone:Se};var Re=function(){function e(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var r=function(t){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=null;this._value=null;this._deferreds=[];f(t,e(o,this),e(u,this))};var i=r.immediateFn||typeof t==="function"&&t||function(e){setTimeout(e,1)};function a(e){var t=this;if(this._state===null){this._deferreds.push(e);return}i((function(){var n=t._state?e.onFulfilled:e.onRejected;if(n===null){(t._state?e.resolve:e.reject)(t._value);return}var r;try{r=n(t._value)}catch(t){e.reject(t);return}e.resolve(r)}))}function o(t){try{if(t===this){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(typeof n==="function"){f(e(n,t),e(o,this),e(u,this));return}}this._state=true;this._value=t;s.call(this)}catch(e){u.call(this,e)}}function u(e){this._state=false;this._value=e;s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++){a.call(this,this._deferreds[e])}this._deferreds=null}function l(e,t,n,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r}function f(e,t,n){var r=false;try{e((function(e){if(r){return}r=true;t(e)}),(function(e){if(r){return}r=true;n(e)}))}catch(e){if(r){return}r=true;n(e)}}r.prototype.catch=function(e){return this.then(null,e)};r.prototype.then=function(e,t){var n=this;return new r((function(r,i){a.call(n,new l(e,t,r,i))}))};r.all=function(){var e=Array.prototype.slice.call(arguments.length===1&&n(arguments[0])?arguments[0]:arguments);return new r((function(t,n){if(e.length===0){return t([])}var r=e.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var u=o.then;if(typeof u==="function"){u.call(o,(function(e){i(a,e)}),n);return}}e[a]=o;if(--r===0){t(e)}}catch(e){n(e)}}for(var a=0;a<e.length;a++){i(a,e[a])}}))};r.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===r){return e}return new r((function(t){t(e)}))};r.reject=function(e){return new r((function(t,n){n(e)}))};r.race=function(e){return new r((function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}}))};return r};var _e=window.Promise?window.Promise:Re();var De;var Oe=function(e,t){var n,r=i.window.requestAnimationFrame;var a=["ms","moz","webkit"];var o=function(e){i.window.setTimeout(e,0)};for(n=0;n<a.length&&!r;n++){r=i.window[a[n]+"RequestAnimationFrame"]}if(!r){r=o}r(e,t)};var Pe=function(e,t){if(typeof t!=="number"){t=0}return setTimeout(e,t)};var Ae=function(e,t){if(typeof t!=="number"){t=1}return setInterval(e,t)};var Be=function(e){return clearTimeout(e)};var Ie=function(e){return clearInterval(e)};var Le=function(e,t){var n,r;r=function(){var r=arguments;clearTimeout(n);n=Pe((function(){e.apply(this,r)}),t)};r.stop=function(){clearTimeout(n)};return r};var Me={requestAnimationFrame:function(e,t){if(De){De.then(e);return}De=new _e((function(e){if(!t){t=i.document.body}Oe(e,t)})).then(e)},setTimeout:Pe,setInterval:Ae,setEditorTimeout:function(e,t,n){return Pe((function(){if(!e.removed){t()}}),n)},setEditorInterval:function(e,t,n){var r;r=Ae((function(){if(!e.removed){t()}else{clearInterval(r)}}),n);return r},debounce:Le,throttle:Le,clearInterval:Ie,clearTimeout:Be};var Fe="mce-data-";var He=/^(?:mouse|contextmenu)|click/;var ze={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};var Ue=function(e){return e.isDefaultPrevented===je||e.isDefaultPrevented===We};var We=function(){return false};var je=function(){return true};var Ve=function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r||false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}};var qe=function(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r||false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}};var $e=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0){return n[0]}}return t};var Ke=function(e,t){var n;var r=t||{};for(n in e){if(!ze[n]){r[n]=e[n]}}if(!r.target){r.target=r.srcElement||i.document}if(Ne.experimentalShadowDom){r.target=$e(e,r.target)}if(e&&He.test(e.type)&&e.pageX===undefined&&e.clientX!==undefined){var a=r.target.ownerDocument||i.document;var o=a.documentElement;var u=a.body;r.pageX=e.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0);r.pageY=e.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0)}r.preventDefault=function(){r.isDefaultPrevented=je;if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};r.stopPropagation=function(){r.isPropagationStopped=je;if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=je;r.stopPropagation()};if(Ue(r)===false){r.isDefaultPrevented=We;r.isPropagationStopped=We;r.isImmediatePropagationStopped=We}if(typeof r.metaKey==="undefined"){r.metaKey=false}return r};var Ye=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded){t(i);return}var a=function(){return r.readyState==="complete"||r.readyState==="interactive"&&r.body};var o=function(){if(!n.domLoaded){n.domLoaded=true;t(i)}};var u=function(){if(a()){qe(r,"readystatechange",u);o()}};var s=function(){try{r.documentElement.doScroll("left")}catch(e){Me.setTimeout(s);return}o()};if(r.addEventListener&&!(Ne.ie&&Ne.ie<11)){if(a()){o()}else{Ve(e,"DOMContentLoaded",o)}}else{Ve(r,"readystatechange",u);if(r.documentElement.doScroll&&e.self===e.top){s()}}Ve(e,"load",o)};var Xe=function(){var e=this;var t={},n,r,a,o,u;r=Fe+(+new Date).toString(32);o="onmouseenter"in i.document.documentElement;a="onfocusin"in i.document.documentElement;u={mouseenter:"mouseover",mouseleave:"mouseout"};n=1;e.domLoaded=false;e.events=t;var s=function(e,n){var r,i,a,o;var u=t[n];r=u&&u[e.type];if(r){for(i=0,a=r.length;i<a;i++){o=r[i];if(o&&o.func.call(o.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}};e.bind=function(l,f,c,d){var v,m,g,p,h,b,y;var w=i.window;var x=function(e){s(Ke(e||w.event),v)};if(!l||l.nodeType===3||l.nodeType===8){return}if(!l[r]){v=n++;l[r]=v;t[v]={}}else{v=l[r]}d=d||l;f=f.split(" ");g=f.length;while(g--){p=f[g];b=x;h=y=false;if(p==="DOMContentLoaded"){p="ready"}if(e.domLoaded&&p==="ready"&&l.readyState==="complete"){c.call(d,Ke({type:p}));continue}if(!o){h=u[p];if(h){b=function(e){var t,n;t=e.currentTarget;n=e.relatedTarget;if(n&&t.contains){n=t.contains(n)}else{while(n&&n!==t){n=n.parentNode}}if(!n){e=Ke(e||w.event);e.type=e.type==="mouseout"?"mouseleave":"mouseenter";e.target=t;s(e,v)}}}}if(!a&&(p==="focusin"||p==="focusout")){y=true;h=p==="focusin"?"focus":"blur";b=function(e){e=Ke(e||w.event);e.type=e.type==="focus"?"focusin":"focusout";s(e,v)}}m=t[v][p];if(!m){t[v][p]=m=[{func:c,scope:d}];m.fakeName=h;m.capture=y;m.nativeHandler=b;if(p==="ready"){Ye(l,b,e)}else{Ve(l,h||p,b,y)}}else{if(p==="ready"&&e.domLoaded){c({type:p})}else{m.push({func:c,scope:d})}}}l=m=0;return c};e.unbind=function(n,i,a){var o,u,s,l,f,c;if(!n||n.nodeType===3||n.nodeType===8){return e}o=n[r];if(o){c=t[o];if(i){i=i.split(" ");s=i.length;while(s--){f=i[s];u=c[f];if(u){if(a){l=u.length;while(l--){if(u[l].func===a){var d=u.nativeHandler;var v=u.fakeName,m=u.capture;u=u.slice(0,l).concat(u.slice(l+1));u.nativeHandler=d;u.fakeName=v;u.capture=m;c[f]=u}}}if(!a||u.length===0){delete c[f];qe(n,u.fakeName||f,u.nativeHandler,u.capture)}}}}else{for(f in c){u=c[f];qe(n,u.fakeName||f,u.nativeHandler,u.capture)}c={}}for(f in c){return e}delete t[o];try{delete n[r]}catch(e){n[r]=null}}return e};e.fire=function(t,n,i){var a;if(!t||t.nodeType===3||t.nodeType===8){return e}i=Ke(null,i);i.type=n;i.target=t;do{a=t[r];if(a){s(i,a)}t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!i.isPropagationStopped());return e};e.clean=function(t){var n,i;var a=e.unbind;if(!t||t.nodeType===3||t.nodeType===8){return e}if(t[r]){a(t)}if(!t.getElementsByTagName){t=t.document}if(t&&t.getElementsByTagName){a(t);i=t.getElementsByTagName("*");n=i.length;while(n--){t=i[n];if(t[r]){a(t)}}}return e};e.destroy=function(){t={}};e.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return false}};Xe.Event=new Xe;Xe.Event.bind(i.window,"ready",(function(){}));var Ge,Je,Ze,Qe,et,tt,nt,rt,it,at,ot,ut,st,lt,ft,ct,dt,vt,mt,gt="sizzle"+-new Date,pt=i.window.document,ht=0,bt=0,yt=Qt(),wt=Qt(),xt=Qt(),Ct=function(e,t){if(e===t){ot=true}return 0},kt=typeof undefined,St=1<<31,Tt={}.hasOwnProperty,Et=[],Nt=Et.pop,Rt=Et.push,_t=Et.push,Dt=Et.slice,Ot=Et.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return-1},Pt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",At="[\\x20\\t\\r\\n\\f]",Bt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",It="\\["+At+"*("+Bt+")(?:"+At+"*([*^$|!~]?=)"+At+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Bt+"))|)"+At+"*\\]",Lt=":("+Bt+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+It+")*)|"+".*"+")\\)|)",Mt=new RegExp("^"+At+"+|((?:^|[^\\\\])(?:\\\\.)*)"+At+"+$","g"),Ft=new RegExp("^"+At+"*,"+At+"*"),Ht=new RegExp("^"+At+"*([>+~]|"+At+")"+At+"*"),zt=new RegExp("="+At+"*([^\\]'\"]*?)"+At+"*\\]","g"),Ut=new RegExp(Lt),Wt=new RegExp("^"+Bt+"$"),jt={ID:new RegExp("^#("+Bt+")"),CLASS:new RegExp("^\\.("+Bt+")"),TAG:new RegExp("^("+Bt+"|[*])"),ATTR:new RegExp("^"+It),PSEUDO:new RegExp("^"+Lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+At+"*(even|odd|(([+-]|)(\\d*)n|)"+At+"*(?:([+-]|)"+At+"*(\\d+)|))"+At+"*\\)|)","i"),bool:new RegExp("^(?:"+Pt+")$","i"),needsContext:new RegExp("^"+At+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+At+"*((?:-\\d)?\\d*)"+At+"*\\)|)(?=[^-]|$)","i")},Vt=/^(?:input|select|textarea|button)$/i,qt=/^h\d$/i,$t=/^[^{]+\{\s*\[native \w/,Kt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Yt=/[+~]/,Xt=/'|\\/g,Gt=new RegExp("\\\\([\\da-f]{1,6}"+At+"?|("+At+")|.)","ig"),Jt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{_t.apply(Et=Dt.call(pt.childNodes),pt.childNodes);Et[pt.childNodes.length].nodeType}catch(e){_t={apply:Et.length?function(e,t){Rt.apply(e,Dt.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}var Zt=function(e,t,n,r){var i,a,o,u,s,l,f,c,d,v;if((t?t.ownerDocument||t:pt)!==st){ut(t)}t=t||st;n=n||[];if(!e||typeof e!=="string"){return n}if((u=t.nodeType)!==1&&u!==9){return[]}if(ft&&!r){if(i=Kt.exec(e)){if(o=i[1]){if(u===9){a=t.getElementById(o);if(a&&a.parentNode){if(a.id===o){n.push(a);return n}}else{return n}}else{if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&mt(t,a)&&a.id===o){n.push(a);return n}}}else if(i[2]){_t.apply(n,t.getElementsByTagName(e));return n}else if((o=i[3])&&Je.getElementsByClassName){_t.apply(n,t.getElementsByClassName(o));return n}}if(Je.qsa&&(!ct||!ct.test(e))){c=f=gt;d=t;v=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){l=tt(e);if(f=t.getAttribute("id")){c=f.replace(Xt,"\\$&")}else{t.setAttribute("id",c)}c="[id='"+c+"'] ";s=l.length;while(s--){l[s]=c+sn(l[s])}d=Yt.test(e)&&on(t.parentNode)||t;v=l.join(",")}if(v){try{_t.apply(n,d.querySelectorAll(v));return n}catch(e){}finally{if(!f){t.removeAttribute("id")}}}}}return rt(e.replace(Mt,"$1"),t,n,r)};function Qt(){var e=[];function t(n,r){if(e.push(n+" ")>Ze.cacheLength){delete t[e.shift()]}return t[n+" "]=r}return t}function en(e){e[gt]=true;return e}function tn(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||St)-(~e.sourceIndex||St);if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function nn(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function rn(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function an(e){return en((function(t){t=+t;return en((function(n,r){var i,a=e([],n.length,t),o=a.length;while(o--){if(n[i=a[o]]){n[i]=!(r[i]=n[i])}}}))}))}function on(e){return e&&typeof e.getElementsByTagName!==kt&&e}Je=Zt.support={};et=Zt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};ut=Zt.setDocument=function(e){var t,n=e?e.ownerDocument||e:pt,r=n.defaultView;function i(e){try{return e.top}catch(e){}return null}if(n===st||n.nodeType!==9||!n.documentElement){return st}st=n;lt=n.documentElement;ft=!et(n);if(r&&r!==i(r)){if(r.addEventListener){r.addEventListener("unload",(function(){ut()}),false)}else if(r.attachEvent){r.attachEvent("onunload",(function(){ut()}))}}Je.attributes=true;Je.getElementsByTagName=true;Je.getElementsByClassName=$t.test(n.getElementsByClassName);Je.getById=true;Ze.find.ID=function(e,t){if(typeof t.getElementById!==kt&&ft){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};Ze.filter.ID=function(e){var t=e.replace(Gt,Jt);return function(e){return e.getAttribute("id")===t}};Ze.find.TAG=Je.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==kt){return t.getElementsByTagName(e)}}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if(e==="*"){while(n=a[i++]){if(n.nodeType===1){r.push(n)}}return r}return a};Ze.find.CLASS=Je.getElementsByClassName&&function(e,t){if(ft){return t.getElementsByClassName(e)}};dt=[];ct=[];Je.disconnectedMatch=true;ct=ct.length&&new RegExp(ct.join("|"));dt=dt.length&&new RegExp(dt.join("|"));t=$t.test(lt.compareDocumentPosition);mt=t||$t.test(lt.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};Ct=t?function(e,t){if(e===t){ot=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!Je.sortDetached&&t.compareDocumentPosition(e)===r){if(e===n||e.ownerDocument===pt&&mt(pt,e)){return-1}if(t===n||t.ownerDocument===pt&&mt(pt,t)){return 1}return at?Ot.call(at,e)-Ot.call(at,t):0}return r&4?-1:1}:function(e,t){if(e===t){ot=true;return 0}var r,i=0,a=e.parentNode,o=t.parentNode,u=[e],s=[t];if(!a||!o){return e===n?-1:t===n?1:a?-1:o?1:at?Ot.call(at,e)-Ot.call(at,t):0}else if(a===o){return tn(e,t)}r=e;while(r=r.parentNode){u.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(u[i]===s[i]){i++}return i?tn(u[i],s[i]):u[i]===pt?-1:s[i]===pt?1:0};return n};Zt.matches=function(e,t){return Zt(e,null,null,t)};Zt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==st){ut(e)}t=t.replace(zt,"='$1']");if(Je.matchesSelector&&ft&&(!dt||!dt.test(t))&&(!ct||!ct.test(t))){try{var n=vt.call(e,t);if(n||Je.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return Zt(t,st,null,[e]).length>0};Zt.contains=function(e,t){if((e.ownerDocument||e)!==st){ut(e)}return mt(e,t)};Zt.attr=function(e,t){if((e.ownerDocument||e)!==st){ut(e)}var n=Ze.attrHandle[t.toLowerCase()],r=n&&Tt.call(Ze.attrHandle,t.toLowerCase())?n(e,t,!ft):undefined;return r!==undefined?r:Je.attributes||!ft?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null};Zt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};Zt.uniqueSort=function(e){var t,n=[],r=0,i=0;ot=!Je.detectDuplicates;at=!Je.sortStable&&e.slice(0);e.sort(Ct);if(ot){while(t=e[i++]){if(t===e[i]){r=n.push(i)}}while(r--){e.splice(n[r],1)}}at=null;return e};Qe=Zt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i){while(t=e[r++]){n+=Qe(t)}}else if(i===1||i===9||i===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=Qe(e)}}}else if(i===3||i===4){return e.nodeValue}return n};Ze=Zt.selectors={cacheLength:50,createPseudo:en,match:jt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Gt,Jt);e[3]=(e[3]||e[4]||e[5]||"").replace(Gt,Jt);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){Zt.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){Zt.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(jt.CHILD.test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&Ut.test(n)&&(t=tt(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Gt,Jt).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=yt[e+" "];return t||(t=new RegExp("(^|"+At+")"+e+"("+At+"|$)"))&&yt(e,(function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!==kt&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Zt.attr(r,e);if(i==null){return t==="!="}if(!t){return true}i+="";return t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,r,i){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,s){var l,f,c,d,v,m,g=a!==o?"nextSibling":"previousSibling",p=t.parentNode,h=u&&t.nodeName.toLowerCase(),b=!s&&!u;if(p){if(a){while(g){c=t;while(c=c[g]){if(u?c.nodeName.toLowerCase()===h:c.nodeType===1){return false}}m=g=e==="only"&&!m&&"nextSibling"}return true}m=[o?p.firstChild:p.lastChild];if(o&&b){f=p[gt]||(p[gt]={});l=f[e]||[];v=l[0]===ht&&l[1];d=l[0]===ht&&l[2];c=v&&p.childNodes[v];while(c=++v&&c&&c[g]||(d=v=0)||m.pop()){if(c.nodeType===1&&++d&&c===t){f[e]=[ht,v,d];break}}}else if(b&&(l=(t[gt]||(t[gt]={}))[e])&&l[0]===ht){d=l[1]}else{while(c=++v&&c&&c[g]||(d=v=0)||m.pop()){if((u?c.nodeName.toLowerCase()===h:c.nodeType===1)&&++d){if(b){(c[gt]||(c[gt]={}))[e]=[ht,d]}if(c===t){break}}}}d-=i;return d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,t){var n,r=Ze.pseudos[e]||Ze.setFilters[e.toLowerCase()]||Zt.error("unsupported pseudo: "+e);if(r[gt]){return r(t)}if(r.length>1){n=[e,e,"",t];return Ze.setFilters.hasOwnProperty(e.toLowerCase())?en((function(e,n){var i,a=r(e,t),o=a.length;while(o--){i=Ot.call(e,a[o]);e[i]=!(n[i]=a[o])}})):function(e){return r(e,0,n)}}return r}},pseudos:{not:en((function(e){var t=[],n=[],r=nt(e.replace(Mt,"$1"));return r[gt]?en((function(e,t,n,i){var a,o=r(e,null,i,[]),u=e.length;while(u--){if(a=o[u]){e[u]=!(t[u]=a)}}})):function(e,i,a){t[0]=e;r(t,null,a,n);return!n.pop()}})),has:en((function(e){return function(t){return Zt(e,t).length>0}})),contains:en((function(e){e=e.replace(Gt,Jt);return function(t){return(t.textContent||t.innerText||Qe(t)).indexOf(e)>-1}})),lang:en((function(e){if(!Wt.test(e||"")){Zt.error("unsupported lang: "+e)}e=e.replace(Gt,Jt).toLowerCase();return function(t){var n;do{if(n=ft?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}})),target:function(e){var t=i.window.location&&i.window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===lt},focus:function(e){return e===st.activeElement&&(!st.hasFocus||st.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!Ze.pseudos.empty(e)},header:function(e){return qt.test(e.nodeName)},input:function(e){return Vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:an((function(){return[0]})),last:an((function(e,t){return[t-1]})),eq:an((function(e,t,n){return[n<0?n+t:n]})),even:an((function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e})),odd:an((function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e})),lt:an((function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;){e.push(r)}return e})),gt:an((function(e,t,n){var r=n<0?n+t:n;for(;++r<t;){e.push(r)}return e}))}};Ze.pseudos.nth=Ze.pseudos.eq;for(Ge in{radio:true,checkbox:true,file:true,password:true,image:true}){Ze.pseudos[Ge]=nn(Ge)}for(Ge in{submit:true,reset:true}){Ze.pseudos[Ge]=rn(Ge)}function un(){}un.prototype=Ze.filters=Ze.pseudos;Ze.setFilters=new un;tt=Zt.tokenize=function(e,t){var n,r,i,a,o,u,s,l=wt[e+" "];if(l){return t?0:l.slice(0)}o=e;u=[];s=Ze.preFilter;while(o){if(!n||(r=Ft.exec(o))){if(r){o=o.slice(r[0].length)||o}u.push(i=[])}n=false;if(r=Ht.exec(o)){n=r.shift();i.push({value:n,type:r[0].replace(Mt," ")});o=o.slice(n.length)}for(a in Ze.filter){if((r=jt[a].exec(o))&&(!s[a]||(r=s[a](r)))){n=r.shift();i.push({value:n,type:a,matches:r});o=o.slice(n.length)}}if(!n){break}}return t?o.length:o?Zt.error(e):wt(e,u).slice(0)};function sn(e){var t=0,n=e.length,r="";for(;t<n;t++){r+=e[t].value}return r}function ln(e,t,n){var r=t.dir,i=n&&r==="parentNode",a=bt++;return t.first?function(t,n,a){while(t=t[r]){if(t.nodeType===1||i){return e(t,n,a)}}}:function(t,n,o){var u,s,l=[ht,a];if(o){while(t=t[r]){if(t.nodeType===1||i){if(e(t,n,o)){return true}}}}else{while(t=t[r]){if(t.nodeType===1||i){s=t[gt]||(t[gt]={});if((u=s[r])&&u[0]===ht&&u[1]===a){return l[2]=u[2]}else{s[r]=l;if(l[2]=e(t,n,o)){return true}}}}}}}function fn(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return false}}return true}:e[0]}function cn(e,t,n){var r=0,i=t.length;for(;r<i;r++){Zt(e,t[r],n)}return n}function dn(e,t,n,r,i){var a,o=[],u=0,s=e.length,l=t!=null;for(;u<s;u++){if(a=e[u]){if(!n||n(a,r,i)){o.push(a);if(l){t.push(u)}}}}return o}function vn(e,t,n,r,i,a){if(r&&!r[gt]){r=vn(r)}if(i&&!i[gt]){i=vn(i,a)}return en((function(a,o,u,s){var l,f,c,d=[],v=[],m=o.length,g=a||cn(t||"*",u.nodeType?[u]:u,[]),p=e&&(a||!t)?dn(g,d,e,u,s):g,h=n?i||(a?e:m||r)?[]:o:p;if(n){n(p,h,u,s)}if(r){l=dn(h,v);r(l,[],u,s);f=l.length;while(f--){if(c=l[f]){h[v[f]]=!(p[v[f]]=c)}}}if(a){if(i||e){if(i){l=[];f=h.length;while(f--){if(c=h[f]){l.push(p[f]=c)}}i(null,h=[],l,s)}f=h.length;while(f--){if((c=h[f])&&(l=i?Ot.call(a,c):d[f])>-1){a[l]=!(o[l]=c)}}}}else{h=dn(h===o?h.splice(m,h.length):h);if(i){i(null,o,h,s)}else{_t.apply(o,h)}}}))}function mn(e){var t,n,r,i=e.length,a=Ze.relative[e[0].type],o=a||Ze.relative[" "],u=a?1:0,s=ln((function(e){return e===t}),o,true),l=ln((function(e){return Ot.call(t,e)>-1}),o,true),f=[function(e,n,r){return!a&&(r||n!==it)||((t=n).nodeType?s(e,n,r):l(e,n,r))}];for(;u<i;u++){if(n=Ze.relative[e[u].type]){f=[ln(fn(f),n)]}else{n=Ze.filter[e[u].type].apply(null,e[u].matches);if(n[gt]){r=++u;for(;r<i;r++){if(Ze.relative[e[r].type]){break}}return vn(u>1&&fn(f),u>1&&sn(e.slice(0,u-1).concat({value:e[u-2].type===" "?"*":""})).replace(Mt,"$1"),n,u<r&&mn(e.slice(u,r)),r<i&&mn(e=e.slice(r)),r<i&&sn(e))}f.push(n)}}return fn(f)}function gn(e,t){var n=t.length>0,r=e.length>0,i=function(i,a,o,u,s){var l,f,c,d=0,v="0",m=i&&[],g=[],p=it,h=i||r&&Ze.find.TAG("*",s),b=ht+=p==null?1:Math.random()||.1,y=h.length;if(s){it=a!==st&&a}for(;v!==y&&(l=h[v])!=null;v++){if(r&&l){f=0;while(c=e[f++]){if(c(l,a,o)){u.push(l);break}}if(s){ht=b}}if(n){if(l=!c&&l){d--}if(i){m.push(l)}}}d+=v;if(n&&v!==d){f=0;while(c=t[f++]){c(m,g,a,o)}if(i){if(d>0){while(v--){if(!(m[v]||g[v])){g[v]=Nt.call(u)}}}g=dn(g)}_t.apply(u,g);if(s&&!i&&g.length>0&&d+t.length>1){Zt.uniqueSort(u)}}if(s){ht=b;it=p}return m};return n?en(i):i}nt=Zt.compile=function(e,t){var n,r=[],i=[],a=xt[e+" "];if(!a){if(!t){t=tt(e)}n=t.length;while(n--){a=mn(t[n]);if(a[gt]){r.push(a)}else{i.push(a)}}a=xt(e,gn(i,r));a.selector=e}return a};rt=Zt.select=function(e,t,n,r){var i,a,o,u,s,l=typeof e==="function"&&e,f=!r&&tt(e=l.selector||e);n=n||[];if(f.length===1){a=f[0]=f[0].slice(0);if(a.length>2&&(o=a[0]).type==="ID"&&Je.getById&&t.nodeType===9&&ft&&Ze.relative[a[1].type]){t=(Ze.find.ID(o.matches[0].replace(Gt,Jt),t)||[])[0];if(!t){return n}else if(l){t=t.parentNode}e=e.slice(a.shift().value.length)}i=jt.needsContext.test(e)?0:a.length;while(i--){o=a[i];if(Ze.relative[u=o.type]){break}if(s=Ze.find[u]){if(r=s(o.matches[0].replace(Gt,Jt),Yt.test(a[0].type)&&on(t.parentNode)||t)){a.splice(i,1);e=r.length&&sn(a);if(!e){_t.apply(n,r);return n}break}}}}(l||nt(e,f))(r,t,!ft,n,Yt.test(e)&&on(t.parentNode)||t);return n};Je.sortStable=gt.split("").sort(Ct).join("")===gt;Je.detectDuplicates=!!ot;ut();Je.sortDetached=true;var pn=Array.isArray;var hn=function(e){var t=e,n,r;if(!pn(e)){t=[];for(n=0,r=e.length;n<r;n++){t[n]=e[n]}}return t};var bn=function(e,t,n){var r,i;if(!e){return 0}n=n||e;if(e.length!==undefined){for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)===false){return 0}}}else{for(r in e){if(e.hasOwnProperty(r)){if(t.call(n,e[r],r,e)===false){return 0}}}}return 1};var yn=function(e,t){var n=[];bn(e,(function(r,i){n.push(t(r,i,e))}));return n};var wn=function(e,t){var n=[];bn(e,(function(r,i){if(!t||t(r,i,e)){n.push(r)}}));return n};var xn=function(e,t){var n,r;if(e){for(n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}}return-1};var Cn=function(e,t,n,r){var i=0;if(arguments.length<3){n=e[0]}for(;i<e.length;i++){n=t.call(r,n,e[i],i)}return n};var kn=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)){return r}}return-1};var Sn=function(e,t,n){var r=kn(e,t,n);if(r!==-1){return e[r]}return undefined};var Tn=function(e){return e[e.length-1]};var En={isArray:pn,toArray:hn,each:bn,map:yn,filter:wn,indexOf:xn,reduce:Cn,findIndex:kn,find:Sn,last:Tn};var Nn=/^\s*|\s*$/g;var Rn=function(e){return e===null||e===undefined?"":(""+e).replace(Nn,"")};var _n=function(e,t){if(!t){return e!==undefined}if(t==="array"&&En.isArray(e)){return true}return typeof e===t};var Dn=function(e,t,n){var r;e=e||[];t=t||",";if(typeof e==="string"){e=e.split(t)}n=n||{};r=e.length;while(r--){n[e[r]]={}}return n};var On=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var Pn=function(e,t,n){var r=this;var i,a,o,u,s,l=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);o=e[3].match(/(^|\.)(\w+)$/i)[2];a=r.createNS(e[3].replace(/\.\w+$/,""),n);if(a[o]){return}if(e[2]==="static"){a[o]=t;if(this.onCreate){this.onCreate(e[2],e[3],a[o])}return}if(!t[o]){t[o]=function(){};l=1}a[o]=t[o];r.extend(a[o].prototype,t);if(e[5]){i=r.resolve(e[5]).prototype;u=e[5].match(/\.(\w+)$/i)[1];s=a[o];if(l){a[o]=function(){return i[u].apply(this,arguments)}}else{a[o]=function(){this.parent=i[u];return s.apply(this,arguments)}}a[o].prototype[o]=a[o];r.each(i,(function(e,t){a[o].prototype[t]=i[t]}));r.each(t,(function(e,t){if(i[t]){a[o].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}}else{if(t!==o){a[o].prototype[t]=e}}}))}r.each(t.static,(function(e,t){a[o][t]=e}))};var An=function(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var i,a,o;var u=arguments;var s;for(i=1,a=u.length;i<a;i++){t=u[i];for(o in t){if(t.hasOwnProperty(o)){s=t[o];if(s!==undefined){e[o]=s}}}}return e};var Bn=function(e,t,n,r){r=r||this;if(e){if(n){e=e[n]}En.each(e,(function(e,i){if(t.call(r,e,i,n)===false){return false}Bn(e,t,n,r)}))}};var In=function(e,t){var n,r;t=t||i.window;e=e.split(".");for(n=0;n<e.length;n++){r=e[n];if(!t[r]){t[r]={}}t=t[r]}return t};var Ln=function(e,t){var n,r;t=t||i.window;e=e.split(".");for(n=0,r=e.length;n<r;n++){t=t[e[n]];if(!t){break}}return t};var Mn=function(e,t){if(!e||_n(e,"array")){return e}return En.map(e.split(t||","),Rn)};var Fn=function(e){var t=Ne.cacheSuffix;if(t){e+=(e.indexOf("?")===-1?"?":"&")+t}return e};var Hn={trim:Rn,isArray:En.isArray,is:_n,toArray:En.toArray,makeMap:Dn,each:En.each,map:En.map,grep:En.filter,inArray:En.indexOf,hasOwn:On,extend:An,create:Pn,walk:Bn,createNS:In,resolve:Ln,explode:Mn,_addCacheSuffix:Fn};var zn=i.document,Un=Array.prototype.push,Wn=Array.prototype.slice;var jn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;var Vn=Xe.Event;var qn=Hn.makeMap("children,contents,next,prev");var $n=function(e){return typeof e!=="undefined"};var Kn=function(e){return typeof e==="string"};var Yn=function(e){return e&&e===e.window};var Xn=function(e,t){var n,r,i;t=t||zn;i=t.createElement("div");n=t.createDocumentFragment();i.innerHTML=e;while(r=i.firstChild){n.appendChild(r)}return n};var Gn=function(e,t,n,r){var i;if(Kn(t)){t=Xn(t,cr(e[0]))}else if(t.length&&!t.nodeType){t=ar.makeArray(t);if(r){for(i=t.length-1;i>=0;i--){Gn(e,t[i],n,r)}}else{for(i=0;i<t.length;i++){Gn(e,t[i],n,r)}}return e}if(t.nodeType){i=e.length;while(i--){n.call(e[i],t)}}return e};var Jn=function(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1};var Zn=function(e,t,n){var r,i;t=ar(t)[0];e.each((function(){var e=this;if(!n||r!==e.parentNode){r=e.parentNode;i=t.cloneNode(false);e.parentNode.insertBefore(i,e);i.appendChild(e)}else{i.appendChild(e)}}));return e};var Qn=Hn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");var er=Hn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," ");var tr={for:"htmlFor",class:"className",readonly:"readOnly"};var nr={float:"cssFloat"};var rr={},ir={};var ar=function(e,t){return new ar.fn.init(e,t)};var or=function(e,t){var n;if(t.indexOf){return t.indexOf(e)}n=t.length;while(n--){if(t[n]===e){return n}}return-1};var ur=/^\s*|\s*$/g;var sr=function(e){return e===null||e===undefined?"":(""+e).replace(ur,"")};var lr=function(e,t){var n,r,i,a;if(e){n=e.length;if(n===undefined){for(r in e){if(e.hasOwnProperty(r)){a=e[r];if(t.call(a,r,a)===false){break}}}}else{for(i=0;i<n;i++){a=e[i];if(t.call(a,i,a)===false){break}}}}return e};var fr=function(e,t){var n=[];lr(e,(function(e,r){if(t(r,e)){n.push(r)}}));return n};var cr=function(e){if(!e){return zn}if(e.nodeType===9){return e}return e.ownerDocument};ar.fn=ar.prototype={constructor:ar,selector:"",context:null,length:0,init:function(e,t){var n=this;var r,a;if(!e){return n}if(e.nodeType){n.context=n[0]=e;n.length=1;return n}if(t&&t.nodeType){n.context=t}else{if(t){return ar(e).attr(t)}n.context=t=i.document}if(Kn(e)){n.selector=e;if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){r=[null,e,null]}else{r=jn.exec(e)}if(r){if(r[1]){a=Xn(e,cr(t)).firstChild;while(a){Un.call(n,a);a=a.nextSibling}}else{a=cr(t).getElementById(r[2]);if(!a){return n}if(a.id!==r[2]){return n.find(e)}n.length=1;n[0]=a}}else{return ar(t).find(e)}}else{this.add(e,false)}return n},toArray:function(){return Hn.toArray(this)},add:function(e,t){var n=this;var r,i;if(Kn(e)){return n.add(ar(e))}if(t!==false){r=ar.unique(n.toArray().concat(ar.makeArray(e)));n.length=r.length;for(i=0;i<r.length;i++){n[i]=r[i]}}else{Un.apply(n,ar.makeArray(e))}return n},attr:function(e,t){var n=this;var r;if(typeof e==="object"){lr(e,(function(e,t){n.attr(e,t)}))}else if($n(t)){this.each((function(){var n;if(this.nodeType===1){n=rr[e];if(n&&n.set){n.set(this,t);return}if(t===null){this.removeAttribute(e,2)}else{this.setAttribute(e,t,2)}}}))}else{if(n[0]&&n[0].nodeType===1){r=rr[e];if(r&&r.get){return r.get(n[0],e)}if(er[e]){return n.prop(e)?e:undefined}t=n[0].getAttribute(e,2);if(t===null){t=undefined}}return t}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;e=tr[e]||e;if(typeof e==="object"){lr(e,(function(e,t){n.prop(e,t)}))}else if($n(t)){this.each((function(){if(this.nodeType===1){this[e]=t}}))}else{if(n[0]&&n[0].nodeType&&e in n[0]){return n[0][e]}return t}return n},css:function(e,t){var n=this;var r,i;var a=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))};var o=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if(typeof e==="object"){lr(e,(function(e,t){n.css(e,t)}))}else{if($n(t)){e=a(e);if(typeof t==="number"&&!Qn[e]){t=t.toString()+"px"}n.each((function(){var n=this.style;i=ir[e];if(i&&i.set){i.set(this,t);return}try{this.style[nr[e]||e]=t}catch(e){}if(t===null||t===""){if(n.removeProperty){n.removeProperty(o(e))}else{n.removeAttribute(e)}}}))}else{r=n[0];i=ir[e];if(i&&i.get){return i.get(r)}if(r.ownerDocument.defaultView){try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(o(e))}catch(e){return undefined}}else if(r.currentStyle){return r.currentStyle[a(e)]}else{return""}}}return n},remove:function(){var e=this;var t,n=this.length;while(n--){t=e[n];Vn.clean(t);if(t.parentNode){t.parentNode.removeChild(t)}}return this},empty:function(){var e=this;var t,n=this.length;while(n--){t=e[n];while(t.firstChild){t.removeChild(t.firstChild)}}return this},html:function(e){var t=this;var n;if($n(e)){n=t.length;try{while(n--){t[n].innerHTML=e}}catch(r){ar(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this;var n;if($n(e)){n=t.length;while(n--){if("innerText"in t[n]){t[n].innerText=e}else{t[0].textContent=e}}return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return Gn(this,arguments,(function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.appendChild(e)}}))},prepend:function(){return Gn(this,arguments,(function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.insertBefore(e,this.firstChild)}}),true)},before:function(){var e=this;if(e[0]&&e[0].parentNode){return Gn(e,arguments,(function(e){this.parentNode.insertBefore(e,this)}))}return e},after:function(){var e=this;if(e[0]&&e[0].parentNode){return Gn(e,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),true)}return e},appendTo:function(e){ar(e).append(this);return this},prependTo:function(e){ar(e).prepend(this);return this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Zn(this,e)},wrapAll:function(e){return Zn(this,e,true)},wrapInner:function(e){this.each((function(){ar(this).contents().wrapAll(e)}));return this},unwrap:function(){return this.parent().each((function(){ar(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];this.each((function(){e.push(this.cloneNode(true))}));return ar(e)},addClass:function(e){return this.toggleClass(e,true)},removeClass:function(e){return this.toggleClass(e,false)},toggleClass:function(e,t){var n=this;if(typeof e!=="string"){return n}if(e.indexOf(" ")!==-1){lr(e.split(" "),(function(){n.toggleClass(this,t)}))}else{n.each((function(n,r){var i,a;a=Jn(r,e);if(a!==t){i=r.className;if(a){r.className=sr((" "+i+" ").replace(" "+e+" "," "))}else{r.className+=i?" "+e:e}}}))}return n},hasClass:function(e){return Jn(this[0],e)},each:function(e){return lr(this,e)},on:function(e,t){return this.each((function(){Vn.bind(this,e,t)}))},off:function(e,t){return this.each((function(){Vn.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){if(typeof e==="object"){Vn.fire(this,e.type,e)}else{Vn.fire(this,e)}}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new ar(Wn.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n;var r=[];for(t=0,n=this.length;t<n;t++){ar.find(e,this[t],r)}return ar(r)},filter:function(e){if(typeof e==="function"){return ar(fr(this.toArray(),(function(t,n){return e(n,t)})))}return ar(ar.filter(e,this.toArray()))},closest:function(e){var t=[];if(e instanceof ar){e=e[0]}this.each((function(n,r){while(r){if(typeof e==="string"&&ar(r).is(e)){t.push(r);break}else if(r===e){t.push(r);break}r=r.parentNode}}));return ar(t)},offset:function(e){var t,n,r;var i=0,a=0,o;if(!e){t=this[0];if(t){n=t.ownerDocument;r=n.documentElement;if(t.getBoundingClientRect){o=t.getBoundingClientRect();i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft;a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop}}return{left:i,top:a}}return this.css(e)},push:Un,sort:[].sort,splice:[].splice};Hn.extend(ar,{extend:Hn.extend,makeArray:function(e){if(Yn(e)||e.nodeType){return[e]}return Hn.toArray(e)},inArray:or,isArray:Hn.isArray,each:lr,trim:sr,grep:fr,find:Zt,expr:Zt.selectors,unique:Zt.uniqueSort,text:Zt.getText,contains:Zt.contains,filter:function(e,t,n){var r=t.length;if(n){e=":not("+e+")"}while(r--){if(t[r].nodeType!==1){t.splice(r,1)}}if(t.length===1){t=ar.find.matchesSelector(t[0],e)?[t[0]]:[]}else{t=ar.find.matches(e,t)}return t}});var dr=function(e,t,n){var r=[];var i=e[t];if(typeof n!=="string"&&n instanceof ar){n=n[0]}while(i&&i.nodeType!==9){if(n!==undefined){if(i===n){break}if(typeof n==="string"&&ar(i).is(n)){break}}if(i.nodeType===1){r.push(i)}i=i[t]}return r};var vr=function(e,t,n,r){var i=[];if(r instanceof ar){r=r[0]}for(;e;e=e[t]){if(n&&e.nodeType!==n){continue}if(r!==undefined){if(e===r){break}if(typeof r==="string"&&ar(e).is(r)){break}}i.push(e)}return i};var mr=function(e,t,n){for(e=e[t];e;e=e[t]){if(e.nodeType===n){return e}}return null};lr({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return dr(e,"parentNode")},next:function(e){return mr(e,"nextSibling",1)},prev:function(e){return mr(e,"previousSibling",1)},children:function(e){return vr(e.firstChild,"nextSibling",1)},contents:function(e){return Hn.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){ar.fn[e]=function(n){var r=this;var i=[];r.each((function(){var e=t.call(i,this,n,i);if(e){if(ar.isArray(e)){i.push.apply(i,e)}else{i.push(e)}}}));if(this.length>1){if(!qn[e]){i=ar.unique(i)}if(e.indexOf("parents")===0){i=i.reverse()}}i=ar(i);if(n){return i.filter(n)}return i}}));lr({parentsUntil:function(e,t){return dr(e,"parentNode",t)},nextUntil:function(e,t){return vr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return vr(e,"previousSibling",1,t).slice(1)}},(function(e,t){ar.fn[e]=function(n,r){var i=this;var a=[];i.each((function(){var e=t.call(a,this,n,a);if(e){if(ar.isArray(e)){a.push.apply(a,e)}else{a.push(e)}}}));if(this.length>1){a=ar.unique(a);if(e.indexOf("parents")===0||e==="prevUntil"){a=a.reverse()}}a=ar(a);if(r){return a.filter(r)}return a}}));ar.fn.is=function(e){return!!e&&this.filter(e).length>0};ar.fn.init.prototype=ar.fn;ar.overrideDefaults=function(e){var t;var n=function(r,i){t=t||e();if(arguments.length===0){r=t.element}if(!i){i=t.context}return new n.fn.init(r,i)};ar.extend(n,this);return n};var gr=function(e,t,n){lr(n,(function(n,r){e[n]=e[n]||{};e[n][t]=r}))};if(Ne.ie&&Ne.ie<8){gr(rr,"get",{maxlength:function(e){var t=e.maxLength;if(t===2147483647){return undefined}return t},size:function(e){var t=e.size;if(t===20){return undefined}return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(t.length===0){return undefined}return t}});gr(rr,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})}if(Ne.ie&&Ne.ie<9){nr.float="styleFloat";gr(ir,"set",{opacity:function(e,t){var n=e.style;if(t===null||t===""){n.removeAttribute("filter")}else{n.zoom=1;n.filter="alpha(opacity="+t*100+")"}}})}ar.attrHooks=rr;ar.cssHooks=ir;var pr=function(e){var t=false;var n;return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}if(!t){t=true;n=e.apply(null,r)}return n}};var hr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var br=function(e,t){var n=hr(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return xr(r(1),r(2))};var yr=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return wr()}return br(e,n)};var wr=function(){return xr(0,0)};var xr=function(e,t){return{major:e,minor:t}};var Cr={nu:xr,detect:yr,unknown:wr};var kr="Edge";var Sr="Chrome";var Tr="IE";var Er="Opera";var Nr="Firefox";var Rr="Safari";var _r=function(e,t){return function(){return t===e}};var Dr=function(){return Or({current:undefined,version:Cr.unknown()})};var Or=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:_r(kr,t),isChrome:_r(Sr,t),isIE:_r(Tr,t),isOpera:_r(Er,t),isFirefox:_r(Nr,t),isSafari:_r(Rr,t)}};var Pr={unknown:Dr,nu:Or,edge:u(kr),chrome:u(Sr),ie:u(Tr),opera:u(Er),firefox:u(Nr),safari:u(Rr)};var Ar="Windows";var Br="iOS";var Ir="Android";var Lr="Linux";var Mr="OSX";var Fr="Solaris";var Hr="FreeBSD";var zr=function(e,t){return function(){return t===e}};var Ur=function(){return Wr({current:undefined,version:Cr.unknown()})};var Wr=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:zr(Ar,t),isiOS:zr(Br,t),isAndroid:zr(Ir,t),isOSX:zr(Mr,t),isLinux:zr(Lr,t),isSolaris:zr(Fr,t),isFreeBSD:zr(Hr,t)}};var jr={unknown:Ur,nu:Wr,windows:u(Ar),ios:u(Br),android:u(Ir),linux:u(Lr),osx:u(Mr),solaris:u(Fr),freebsd:u(Hr)};var Vr=function(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var i=e.isiOS()&&!r;var a=e.isAndroid()&&e.version.major===3;var o=e.isAndroid()&&e.version.major===4;var s=r||a||o&&/mobile/i.test(n)===true;var l=e.isiOS()||e.isAndroid();var f=l&&!s;var c=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:u(r),isiPhone:u(i),isTablet:u(s),isPhone:u(f),isTouch:u(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:u(c)}};var qr=function(e,t){var n=String(t).toLowerCase();return W(e,(function(e){return e.search(n)}))};var $r=function(e,t){return qr(e,t).map((function(e){var n=Cr.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Kr=function(e,t){return qr(e,t).map((function(e){var n=Cr.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Yr={detectBrowser:$r,detectOs:Kr};var Xr=function(e,t){return e.indexOf(t)!==-1};var Gr=function(e){return e.replace(/^\s+|\s+$/g,"")};var Jr=function(e){return e.replace(/^\s+/g,"")};var Zr=function(e){return e.replace(/\s+$/g,"")};var Qr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var ei=function(e){return function(t){return Xr(t,e)}};var ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Xr(e,"edge/")&&Xr(e,"chrome")&&Xr(e,"safari")&&Xr(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qr],search:function(e){return Xr(e,"chrome")&&!Xr(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Xr(e,"msie")||Xr(e,"trident")}},{name:"Opera",versionRegexes:[Qr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ei("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ei("firefox")},{name:"Safari",versionRegexes:[Qr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Xr(e,"safari")||Xr(e,"mobile/"))&&Xr(e,"applewebkit")}}];var ni=[{name:"Windows",search:ei("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Xr(e,"iphone")||Xr(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ei("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ei("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ei("linux"),versionRegexes:[]},{name:"Solaris",search:ei("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ei("freebsd"),versionRegexes:[]}];var ri={browsers:u(ti),oses:u(ni)};var ii=function(e){var t=ri.browsers();var n=ri.oses();var r=Yr.detectBrowser(t,e).fold(Pr.unknown,Pr.nu);var i=Yr.detectOs(n,e).fold(jr.unknown,jr.nu);var a=Vr(i,r,e);return{browser:r,os:i,deviceType:a}};var ai={detect:ii};var oi=pr((function(){var e=i.navigator.userAgent;return ai.detect(e)}));var ui={detect:oi};var si=function(e,t){var n=t||i.document;var r=n.createElement("div");r.innerHTML=e;if(!r.hasChildNodes()||r.childNodes.length>1){i.console.error("HTML does not have a single root node",e);throw new Error("HTML must have a single root node")}return ci(r.childNodes[0])};var li=function(e,t){var n=t||i.document;var r=n.createElement(e);return ci(r)};var fi=function(e,t){var n=t||i.document;var r=n.createTextNode(e);return ci(r)};var ci=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:u(e)}};var di=function(e,t,n){var r=e.dom();return b.from(r.elementFromPoint(t,n)).map(ci)};var vi={fromHtml:si,fromTag:li,fromText:fi,fromDom:ci,fromPoint:di};var mi=i.Node.ATTRIBUTE_NODE;var gi=i.Node.CDATA_SECTION_NODE;var pi=i.Node.COMMENT_NODE;var hi=i.Node.DOCUMENT_NODE;var bi=i.Node.DOCUMENT_TYPE_NODE;var yi=i.Node.DOCUMENT_FRAGMENT_NODE;var wi=i.Node.ELEMENT_NODE;var xi=i.Node.TEXT_NODE;var Ci=i.Node.PROCESSING_INSTRUCTION_NODE;var ki=i.Node.ENTITY_REFERENCE_NODE;var Si=i.Node.ENTITY_NODE;var Ti=i.Node.NOTATION_NODE;var Ei=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var Ni=function(e){return e.dom().nodeType};var Ri=function(e){return function(t){return Ni(t)===e}};var _i=Ri(wi);var Di=Ri(xi);var Oi=Object.keys;var Pi=Object.hasOwnProperty;var Ai=function(e,t){var n=Oi(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];t(o,a)}};var Bi=function(e,t){return Ii(e,(function(e,n){return{k:n,v:t(e,n)}}))};var Ii=function(e,t){var n={};Ai(e,(function(e,r){var i=t(e,r);n[i.k]=i.v}));return n};var Li=function(e,t){var n={};var r={};Ai(e,(function(e,i){var a=t(e,i)?n:r;a[i]=e}));return{t:n,f:r}};var Mi=function(e,t){return Pi.call(e,t)};var Fi=function(e){return e.style!==undefined&&E(e.style.getPropertyValue)};var Hi=function(e){var t=Di(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var zi=function(e,t,n){if(x(n)||T(n)||N(n)){e.setAttribute(t,n+"")}else{i.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e);throw new Error("Attribute value was not simple")}};var Ui=function(e,t,n){zi(e.dom(),t,n)};var Wi=function(e,t){var n=e.dom();Ai(t,(function(e,t){zi(n,t,e)}))};var ji=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var Vi=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var qi=function(e,t){e.dom().removeAttribute(t)};var $i=function(e,t,n){if(!x(n)){i.console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e);throw new Error("CSS value must be a string: "+n)}if(Fi(e)){e.style.setProperty(t,n)}};var Ki=function(e,t){var n=e.dom();Ai(t,(function(e,t){$i(n,t,e)}))};var Yi=function(e,t){var n=e.dom();var r=i.window.getComputedStyle(n);var a=r.getPropertyValue(t);var o=a===""&&!Hi(e)?Xi(n,t):a;return o===null?undefined:o};var Xi=function(e,t){return Fi(e)?e.style.getPropertyValue(t):""};var Gi=function(e,t){var n=e.dom();var r=Xi(n,t);return b.from(r).filter((function(e){return e.length>0}))};var Ji=function(e){var t={};var n=e.dom();if(Fi(n)){for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}}return t};var Zi=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};L(e,(function(e,n){r[e]=u(t[n])}));return r}};var Qi=function(e,t){var n=[];var r=function(e){n.push(e);return t(e)};var i=t(e);do{i=i.bind(r)}while(i.isSome());return n};var ea={toArray:Qi};var ta=function(){var e=ae.getOrDie("Node");return e};var na=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var ra=function(e,t){return na(e,t,ta().DOCUMENT_POSITION_PRECEDING)};var ia=function(e,t){return na(e,t,ta().DOCUMENT_POSITION_CONTAINED_BY)};var aa={documentPositionPreceding:ra,documentPositionContainedBy:ia};var oa=wi;var ua=hi;var sa=function(e,t){var n=e.dom();if(n.nodeType!==oa){return false}else{var r=n;if(r.matches!==undefined){return r.matches(t)}else if(r.msMatchesSelector!==undefined){return r.msMatchesSelector(t)}else if(r.webkitMatchesSelector!==undefined){return r.webkitMatchesSelector(t)}else if(r.mozMatchesSelector!==undefined){return r.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}}};var la=function(e){return e.nodeType!==oa&&e.nodeType!==ua||e.childElementCount===0};var fa=function(e,t){var n=t===undefined?i.document:t.dom();return la(n)?[]:I(n.querySelectorAll(e),vi.fromDom)};var ca=function(e,t){var n=t===undefined?i.document:t.dom();return la(n)?b.none():b.from(n.querySelector(e)).map(vi.fromDom)};var da=function(e,t){return e.dom()===t.dom()};var va=function(e,t){var n=e.dom();var r=t.dom();return n===r?false:n.contains(r)};var ma=function(e,t){return aa.documentPositionContainedBy(e.dom(),t.dom())};var ga=ui.detect().browser;var pa=ga.isIE()?ma:va;var ha=function(e){return vi.fromDom(e.dom().ownerDocument)};var ba=function(e){return vi.fromDom(e.dom().ownerDocument.documentElement)};var ya=function(e){return vi.fromDom(e.dom().ownerDocument.defaultView)};var wa=function(e){return b.from(e.dom().parentNode).map(vi.fromDom)};var xa=function(e,t){var n=E(t)?t:d;var r=e.dom();var i=[];while(r.parentNode!==null&&r.parentNode!==undefined){var a=r.parentNode;var o=vi.fromDom(a);i.push(o);if(n(o)===true){break}else{r=a}}return i};var Ca=function(e){return b.from(e.dom().previousSibling).map(vi.fromDom)};var ka=function(e){return b.from(e.dom().nextSibling).map(vi.fromDom)};var Sa=function(e){return K(ea.toArray(e,Ca))};var Ta=function(e){return ea.toArray(e,ka)};var Ea=function(e){return I(e.dom().childNodes,vi.fromDom)};var Na=function(e,t){var n=e.dom().childNodes;return b.from(n[t]).map(vi.fromDom)};var Ra=function(e){return Na(e,0)};var _a=function(e){return Na(e,e.dom().childNodes.length-1)};var Da=function(e){return e.dom().childNodes.length};var Oa=Zi("element","offset");var Pa=ui.detect().browser;var Aa=function(e){return W(e,_i)};var Ba=function(e){if(Pa.isFirefox()&&Ei(e)==="table"){return Aa(Ea(e)).filter((function(e){return Ei(e)==="caption"})).bind((function(e){return Aa(Ta(e)).map((function(t){var n=t.dom().offsetTop;var r=e.dom().offsetTop;var i=e.dom().offsetHeight;return n<=r?-i:0}))})).getOr(0)}else{return 0}};var Ia=function(e,t,n){var r=0,i=0,a;var o=e.ownerDocument;var u;n=n?n:e;if(t){if(n===e&&t.getBoundingClientRect&&Yi(vi.fromDom(e),"position")==="static"){u=t.getBoundingClientRect();r=u.left+(o.documentElement.scrollLeft||e.scrollLeft)-o.documentElement.clientLeft;i=u.top+(o.documentElement.scrollTop||e.scrollTop)-o.documentElement.clientTop;return{x:r,y:i}}a=t;while(a&&a!==n&&a.nodeType){r+=a.offsetLeft||0;i+=a.offsetTop||0;a=a.offsetParent}a=t.parentNode;while(a&&a!==n&&a.nodeType){r-=a.scrollLeft||0;i-=a.scrollTop||0;a=a.parentNode}i+=Ba(vi.fromDom(t))}return{x:r,y:i}};var La={getPos:Ia};var Ma={},Fa={exports:Ma};(function(e,t,i,a){(function(n){if(typeof t==="object"&&typeof i!=="undefined"){i.exports=n()}else if(typeof e==="function"&&e.amd){e([],n)}else{var a;if(typeof window!=="undefined"){a=window}else if(typeof r!=="undefined"){a=r}else if(typeof self!=="undefined"){a=self}else{a=this}a.EphoxContactWrapper=n()}})((function(){return function(){function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var l="function"==typeof a&&a;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};t[u][0].call(c.exports,(function(e){var n=t[u][1][e];return i(n||e)}),c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof a&&a,u=0;u<r.length;u++)i(r[u]);return i}return e}()({1:[function(e,t,n){var r=t.exports={};var i;var a;function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=o}}catch(e){i=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=u}}catch(e){a=u}})();function s(e){if(i===setTimeout){return setTimeout(e,0)}if((i===o||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(a===clearTimeout){return clearTimeout(e)}if((a===u||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var f=[];var c=false;var d;var v=-1;function m(){if(!c||!d){return}c=false;if(d.length){f=d.concat(f)}else{v=-1}if(f.length){g()}}function g(){if(c){return}var e=s(m);c=true;var t=f.length;while(t){d=f;f=[];while(++v<t){if(d){d[v].run()}}v=-1;t=f.length}d=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}f.push(new p(e,t));if(f.length===1&&!c){s(g)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function h(){}r.on=h;r.addListener=h;r.once=h;r.off=h;r.removeListener=h;r.removeAllListeners=h;r.emit=h;r.prependListener=h;r.prependOnceListener=h;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],2:[function(e,t,r){(function(e){(function(r){var i=setTimeout;function a(){}function o(e,t){return function(){e.apply(t,arguments)}}function u(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof e!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];v(e,this)}function s(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;u._immediateFn((function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?l:f)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){f(t.promise,e);return}l(t.promise,r)}))}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof u){e._state=3;e._value=t;c(e);return}else if(typeof n==="function"){v(o(n,t),e);return}}e._state=1;e._value=t;c(e)}catch(t){f(e,t)}}function f(e,t){e._state=2;e._value=t;c(e)}function c(e){if(e._state===2&&e._deferreds.length===0){u._immediateFn((function(){if(!e._handled){u._unhandledRejectionFn(e._value)}}))}for(var t=0,n=e._deferreds.length;t<n;t++){s(e,e._deferreds[t])}e._deferreds=null}function d(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function v(e,t){var n=false;try{e((function(e){if(n)return;n=true;l(t,e)}),(function(e){if(n)return;n=true;f(t,e)}))}catch(e){if(n)return;n=true;f(t,e)}}u.prototype["catch"]=function(e){return this.then(null,e)};u.prototype.then=function(e,t){var n=new this.constructor(a);s(this,new d(e,t,n));return n};u.all=function(e){var t=Array.prototype.slice.call(e);return new u((function(e,n){if(t.length===0)return e([]);var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var u=o.then;if(typeof u==="function"){u.call(o,(function(e){i(a,e)}),n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}}))};u.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===u){return e}return new u((function(t){t(e)}))};u.reject=function(e){return new u((function(t,n){n(e)}))};u.race=function(e){return new u((function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}}))};u._immediateFn=typeof e==="function"?function(t){e(t)}:function(e){i(e,0)};u._unhandledRejectionFn=function e(t){if(typeof n!=="undefined"&&n){n.warn("Possible Unhandled Promise Rejection:",t)}};u._setImmediateFn=function e(t){u._immediateFn=t};u._setUnhandledRejectionFn=function e(t){u._unhandledRejectionFn=t};if(typeof t!=="undefined"&&t.exports){t.exports=u}else if(!r.Promise){r.Promise=u}})(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var i=e("process/browser.js").nextTick;var a=Function.prototype.apply;var o=Array.prototype.slice;var u={};var s=0;n.setTimeout=function(){return new l(a.call(setTimeout,window,arguments),clearTimeout)};n.setInterval=function(){return new l(a.call(setInterval,window,arguments),clearInterval)};n.clearTimeout=n.clearInterval=function(e){e.close()};function l(e,t){this._id=e;this._clearFn=t}l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};n.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};n.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout((function t(){if(e._onTimeout)e._onTimeout()}),t)}};n.setImmediate=typeof t==="function"?t:function(e){var t=s++;var r=arguments.length<2?false:o.call(arguments,1);u[t]=true;i((function i(){if(u[t]){if(r){e.apply(null,r)}else{e.call(null)}n.clearImmediate(t)}}));return t};n.clearImmediate=typeof r==="function"?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill");var i=function(){if(typeof window!=="undefined"){return window}else{return Function("return this;")()}}();t.exports={boltExport:i.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))})(undefined,Ma,Fa,undefined);var Ha=Fa.exports.boltExport;var za=function(e){var t=b.none();var n=[];var r=function(e){return za((function(t){a((function(n){t(e(n))}))}))};var a=function(e){if(u()){l(e)}else{n.push(e)}};var o=function(e){t=b.some(e);s(n);n=[]};var u=function(){return t.isSome()};var s=function(e){L(e,l)};var l=function(e){t.each((function(t){i.setTimeout((function(){e(t)}),0)}))};e(o);return{get:a,map:r,isReady:u}};var Ua=function(e){return za((function(t){t(e)}))};var Wa={nu:za,pure:Ua};var ja=function(e){i.setTimeout((function(){throw e}),0)};var Va=function(e){var t=function(t){e().then(t,ja)};var n=function(t){return Va((function(){return e().then(t)}))};var r=function(t){return Va((function(){return e().then((function(e){return t(e).toPromise()}))}))};var i=function(t){return Va((function(){return e().then((function(){return t.toPromise()}))}))};var a=function(){return Wa.nu(t)};var o=function(){var t=null;return Va((function(){if(t===null){t=e()}return t}))};var u=e;return{map:n,bind:r,anonBind:i,toLazy:a,toCached:o,toPromise:u,get:t}};var qa=function(e){return Va((function(){return new Ha(e)}))};var $a=function(e){return Va((function(){return Ha.resolve(e)}))};var Ka={nu:qa,pure:$a};var Ya=function(e,t){return t((function(t){var n=[];var r=0;var i=function(i){return function(a){n[i]=a;r++;if(r>=e.length){t(n)}}};if(e.length===0){t([])}else{L(e,(function(e,t){e.get(i(t))}))}}))};var Xa=function(e){return Ya(e,Ka.nu)};var Ga=function(e){var t=function(t){return e===t};var n=function(t){return Ga(e)};var r=function(t){return Ga(e)};var i=function(t){return Ga(t(e))};var a=function(t){return Ga(e)};var o=function(t){t(e)};var s=function(t){return t(e)};var l=function(t,n){return n(e)};var f=function(t){return t(e)};var c=function(t){return t(e)};var m=function(){return b.some(e)};return{is:t,isValue:v,isError:d,getOr:u(e),getOrThunk:u(e),getOrDie:u(e),or:n,orThunk:r,fold:l,map:i,mapError:a,each:o,bind:s,exists:f,forall:c,toOption:m}};var Ja=function(e){var t=function(e){return e()};var n=function(){return c(String(e))()};var r=function(e){return e};var i=function(e){return e()};var o=function(t){return Ja(e)};var u=function(t){return Ja(t(e))};var l=function(t){return Ja(e)};var f=function(t,n){return t(e)};return{is:d,isValue:d,isError:v,getOr:s,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:f,map:o,mapError:u,each:a,bind:l,exists:d,forall:v,toOption:b.none}};var Za=function(e,t){return e.fold((function(){return Ja(t)}),Ga)};var Qa={value:Ga,error:Ja,fromOption:Za};function eo(e,t){if(t===void 0){t={}}var n=0;var r={};var a;a=t.maxLoadTime||5e3;var l=function(t){e.getElementsByTagName("head")[0].appendChild(t)};var f=function(o,u,s){var f,c,d,v;var m=function(){var e=v.passed;var t=e.length;while(t--){e[t]()}v.status=2;v.passed=[];v.failed=[]};var g=function(){var e=v.failed;var t=e.length;while(t--){e[t]()}v.status=3;v.passed=[];v.failed=[]};var p=function(){var e=i.navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)};var h=function(e,t){if(!e()){if((new Date).getTime()-d<a){Me.setTimeout(t)}else{g()}}};var b=function(){h((function(){var t=e.styleSheets;var n,r=t.length,i;while(r--){n=t[r];i=n.ownerNode?n.ownerNode:n.owningElement;if(i&&i.id===f.id){m();return true}}}),b)};var y=function(){h((function(){try{var e=c.sheet.cssRules;m();return!!e}catch(e){}}),y)};o=Hn._addCacheSuffix(o);if(!r[o]){v={passed:[],failed:[]};r[o]=v}else{v=r[o]}if(u){v.passed.push(u)}if(s){v.failed.push(s)}if(v.status===1){return}if(v.status===2){m();return}if(v.status===3){g();return}v.status=1;f=e.createElement("link");f.rel="stylesheet";f.type="text/css";f.id="u"+n++;f.async=false;f.defer=false;d=(new Date).getTime();if(t.contentCssCors){f.crossOrigin="anonymous"}if("onload"in f&&!p()){f.onload=b;f.onerror=g}else{if(i.navigator.userAgent.indexOf("Firefox")>0){c=e.createElement("style");c.textContent='@import "'+o+'"';y();l(c);return}b()}l(f);f.href=o};var c=function(e){return Ka.nu((function(t){f(e,o(t,u(Qa.value(e))),o(t,u(Qa.error(e))))}))};var d=function(e){return e.fold(s,s)};var v=function(e,t,n){Xa(I(e,c)).get((function(e){var r=F(e,(function(e){return e.isValue()}));if(r.fail.length>0){n(r.fail.map(d))}else{t(r.pass.map(d))}}))};return{load:f,loadAll:v}}function to(e,t){var n=e;var r=function(e,n,r,i){var a,o;if(e){if(!i&&e[n]){return e[n]}if(e!==t){a=e[r];if(a){return a}for(o=e.parentNode;o&&o!==t;o=o.parentNode){a=o[r];if(a){return a}}}}};var i=function(e,n,r,i){var a,o,u;if(e){a=e[r];if(t&&a===t){return}if(a){if(!i){for(u=a[n];u;u=u[n]){if(!u[n]){return u}}}return a}o=e.parentNode;if(o&&o!==t){return o}}};this.current=function(){return n};this.next=function(e){n=r(n,"firstChild","nextSibling",e);return n};this.prev=function(e){n=r(n,"lastChild","previousSibling",e);return n};this.prev2=function(e){n=i(n,"lastChild","previousSibling",e);return n}}var no=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"];var ro=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"];var io=["td","th"];var ao=["thead","tbody","tfoot"];var oo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"];var uo=["h1","h2","h3","h4","h5","h6"];var so=["li","dd","dt"];var lo=["ul","ol","dl"];var fo=["pre","script","textarea","style"];var co=function(e){var t;return function(n){t=t?t:X(e,u(true));return t.hasOwnProperty(Ei(n))}};var vo=co(uo);var mo=co(no);var go=function(e){return _i(e)&&!mo(e)};var po=function(e){return _i(e)&&Ei(e)==="br"};var ho=co(oo);var bo=co(lo);var yo=co(so);var wo=co(ro);var xo=co(ao);var Co=co(io);var ko=co(fo);var So=function(e){return function(t){return!!t&&t.nodeType===e}};var To=function(e){return!!e&&!Object.getPrototypeOf(e)};var Eo=So(1);var No=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType){r=e.nodeName.toLowerCase();for(n=0;n<t.length;n++){if(r===t[n]){return true}}}return false}};var Ro=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r,i;if(Eo(t)){for(r=0;r<n.length;r++){var a=t.ownerDocument.defaultView.getComputedStyle(t,null);i=a?a.getPropertyValue(e):null;if(i===n[r]){return true}}}return false}};var _o=function(e,t){return function(n){return Eo(n)&&n[e]===t}};var Do=function(e,t){return function(t){return Eo(t)&&t.hasAttribute(e)}};var Oo=function(e,t){return function(n){return Eo(n)&&n.getAttribute(e)===t}};var Po=function(e){return Eo(e)&&e.hasAttribute("data-mce-bogus")};var Ao=function(e){return Eo(e)&&e.getAttribute("data-mce-bogus")==="all"};var Bo=function(e){return Eo(e)&&e.tagName==="TABLE"};var Io=function(e){return function(t){if(Eo(t)){if(t.contentEditable===e){return true}if(t.getAttribute("data-mce-contenteditable")===e){return true}}return false}};var Lo=So(3);var Mo=So(8);var Fo=So(9);var Ho=So(11);var zo=No("br");var Uo=Io("true");var Wo=Io("false");var jo={isText:Lo,isElement:Eo,isComment:Mo,isDocument:Fo,isDocumentFragment:Ho,isBr:zo,isContentEditableTrue:Uo,isContentEditableFalse:Wo,isRestrictedNode:To,matchNodeNames:No,hasPropValue:_o,hasAttribute:Do,hasAttributeValue:Oo,matchStyleValues:Ro,isBogus:Po,isBogusAll:Ao,isTable:Bo};var Vo=function(e){var t=e.previousSibling&&e.previousSibling.nodeName==="SPAN";var n=e.nextSibling&&e.nextSibling.nodeName==="SPAN";return t&&n};var qo=function(e){return e&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};var $o=function(e,t){var n,r=t.childNodes;if(jo.isElement(t)&&qo(t)){return}for(n=r.length-1;n>=0;n--){$o(e,r[n])}if(jo.isDocument(t)===false){if(jo.isText(t)&&t.nodeValue.length>0){var i=Hn.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0){return}if(i===0&&Vo(t)){return}}else if(jo.isElement(t)){r=t.childNodes;if(r.length===1&&qo(r[0])){t.parentNode.insertBefore(r[0],t)}if(r.length||wo(vi.fromDom(t))){return}}e.remove(t)}return t};var Ko={trimNode:$o};var Yo=Hn.makeMap;var Xo,Go,Jo;var Zo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var Qo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var eu=/[<>&\"\']/g;var tu=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi;var nu={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};Go={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};Jo={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var ru=function(e){var t;t=vi.fromTag("div").dom();t.innerHTML=e;return t.textContent||t.innerText||e};var iu=function(e,t){var n,r,i;var a={};if(e){e=e.split(",");t=t||10;for(n=0;n<e.length;n+=2){r=String.fromCharCode(parseInt(e[n],t));if(!Go[r]){i="&"+e[n+1]+";";a[r]=i;a[i]=r}}return a}};Xo=iu("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var au=function(e,t){return e.replace(t?Zo:Qo,(function(e){return Go[e]||e}))};var ou=function(e){return(""+e).replace(eu,(function(e){return Go[e]||e}))};var uu=function(e,t){return e.replace(t?Zo:Qo,(function(e){if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return Go[e]||"&#"+e.charCodeAt(0)+";"}))};var su=function(e,t,n){n=n||Xo;return e.replace(t?Zo:Qo,(function(e){return Go[e]||n[e]||e}))};var lu=function(e,t){var n=iu(t)||Xo;var r=function(e,t){return e.replace(t?Zo:Qo,(function(e){if(Go[e]!==undefined){return Go[e]}if(n[e]!==undefined){return n[e]}if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return"&#"+e.charCodeAt(0)+";"}))};var i=function(e,t){return su(e,t,n)};var a=Yo(e.replace(/\+/g,","));if(a.named&&a.numeric){return r}if(a.named){if(t){return i}return su}if(a.numeric){return uu}return au};var fu=function(e){return e.replace(tu,(function(e,t){if(t){if(t.charAt(0).toLowerCase()==="x"){t=parseInt(t.substr(1),16)}else{t=parseInt(t,10)}if(t>65535){t-=65536;return String.fromCharCode(55296+(t>>10),56320+(t&1023))}return nu[t]||String.fromCharCode(t)}return Jo[e]||Xo[e]||ru(e)}))};var cu={encodeRaw:au,encodeAllRaw:ou,encodeNumeric:uu,encodeNamed:su,getEncodeFunc:lu,decode:fu};var du={},vu={};var mu=Hn.makeMap,gu=Hn.each,pu=Hn.extend,hu=Hn.explode,bu=Hn.inArray;var yu=function(e,t){e=Hn.trim(e);return e?e.split(t||" "):[]};var wu=function(e){var t={};var n,r;var i,a,o,u;var s=function(e,r,i){var a,o,u;var s=function(e,t){var n={};var r,i;for(r=0,i=e.length;r<i;r++){n[e[r]]=t||{}}return n};i=i||[];r=r||"";if(typeof i==="string"){i=yu(i)}e=yu(e);a=e.length;while(a--){o=yu([n,r].join(" "));u={attributes:s(o),attributesOrder:o,children:s(i,vu)};t[e[a]]=u}};var l=function(e,n){var r,i,a,o;e=yu(e);r=e.length;n=yu(n);while(r--){i=t[e[r]];for(a=0,o=n.length;a<o;a++){i.attributes[n[a]]={};i.attributesOrder.push(n[a])}}};if(du[e]){return du[e]}n="id accesskey class dir lang style tabindex title role";r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment";if(e!=="html4"){n+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate";r+=" article aside details dialog figure main header footer hgroup section nav";i+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){n+=" xml:lang";u="acronym applet basefont big font strike tt";i=[i,u].join(" ");gu(yu(u),(function(e){s(e,"",i)}));o="center dir isindex noframes";r=[r,o].join(" ");a=[r,i].join(" ");gu(yu(o),(function(e){s(e,"",a)}))}a=a||[r,i].join(" ");s("html","manifest","head body");s("head","","base command link meta noscript script style title");s("title hr noscript br");s("base","href target");s("link","href rel media hreflang type sizes hreflang");s("meta","name http-equiv content charset");s("style","media type scoped");s("script","src async defer type charset");s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",a);s("address dt dd div caption","",a);s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",i);s("blockquote","cite",a);s("ol","reversed start type","li");s("ul","","li");s("li","value",a);s("dl","","dt dd");s("a","href target rel media hreflang type",i);s("q","cite",i);s("ins del","cite datetime",a);s("img","src sizes srcset alt usemap ismap width height");s("iframe","src name width height",a);s("embed","src type width height");s("object","data type typemustmatch name usemap form width height",[a,"param"].join(" "));s("param","name value");s("map","name",[a,"area"].join(" "));s("area","alt coords shape href target rel media hreflang type");s("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":""));s("colgroup","span","col");s("col","span");s("tbody thead tfoot","","tr");s("tr","","td th");s("td","colspan rowspan headers",a);s("th","colspan rowspan headers scope abbr",a);s("form","accept-charset action autocomplete enctype method name novalidate target",a);s("fieldset","disabled form name",[a,"legend"].join(" "));s("label","form for",i);s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?a:i);s("select","disabled form multiple name required size","option optgroup");s("optgroup","disabled label","option");s("option","disabled label selected value");s("textarea","cols dirname disabled form maxlength name readonly required rows wrap");s("menu","type label",[a,"li"].join(" "));s("noscript","",a);if(e!=="html4"){s("wbr");s("ruby","",[i,"rt rp"].join(" "));s("figcaption","",a);s("mark rt rp summary bdi","",i);s("canvas","width height",a);s("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[a,"track source"].join(" "));s("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[a,"track source"].join(" "));s("picture","","img source");s("source","src srcset type media sizes");s("track","kind src srclang label default");s("datalist","",[i,"option"].join(" "));s("article section nav aside main header footer","",a);s("hgroup","","h1 h2 h3 h4 h5 h6");s("figure","",[a,"figcaption"].join(" "));s("time","datetime",i);s("dialog","open",a);s("command","type label icon disabled checked radiogroup command");s("output","for form name",i);s("progress","value max",i);s("meter","value min max low high optimum",i);s("details","open",[a,"summary"].join(" "));s("keygen","autofocus challenge disabled form keytype name")}if(e!=="html5-strict"){l("script","language xml:space");l("style","xml:space");l("object","declare classid code codebase codetype archive standby align border hspace vspace");l("embed","align name hspace vspace");l("param","valuetype type");l("a","charset name rev shape coords");l("br","clear");l("applet","codebase archive code object alt name width height align hspace vspace");l("img","name longdesc align border hspace vspace");l("iframe","longdesc frameborder marginwidth marginheight scrolling align");l("font basefont","size color face");l("input","usemap align");l("select","onchange");l("textarea");l("h1 h2 h3 h4 h5 h6 div p legend caption","align");l("ul","type compact");l("li","type");l("ol dl menu dir","compact");l("pre","width xml:space");l("hr","align noshade size width");l("isindex","prompt");l("table","summary width frame rules cellspacing cellpadding align bgcolor");l("col","width align char charoff valign");l("colgroup","width align char charoff valign");l("thead","align char charoff valign");l("tr","align char charoff valign bgcolor");l("th","axis align char charoff valign nowrap bgcolor width height");l("form","accept");l("td","abbr axis scope align char charoff valign nowrap bgcolor width height");l("tfoot","align char charoff valign");l("tbody","align char charoff valign");l("area","nohref");l("body","background bgcolor text link vlink alink")}if(e!=="html4"){l("input button select textarea","autofocus");l("input textarea","placeholder");l("a","download");l("link script img","crossorigin");l("iframe","sandbox seamless allowfullscreen")}gu(yu("a form meter progress dfn"),(function(e){if(t[e]){delete t[e].children[e]}}));delete t.caption.children.table;delete t.script;du[e]=t;return t};var xu=function(e,t){var n;if(e){n={};if(typeof e==="string"){e={"*":e}}gu(e,(function(e,r){n[r]=n[r.toUpperCase()]=t==="map"?mu(e,/[, ]/):hu(e,/[, ]/)}))}return n};function Cu(e){var t={};var n={};var r=[];var i;var a;var o;var u,s,l,f,c;var d,v,m,g,p;var h={},b={};var y=function(t,n,r){var i=e[t];if(!i){i=du[t];if(!i){i=mu(n," ",mu(n.toUpperCase()," "));i=pu(i,r);du[t]=i}}else{i=mu(i,/[, ]/,mu(i.toUpperCase(),/[, ]/))}return i};e=e||{};o=wu(e.schema);if(e.verify_html===false){e.valid_elements="*[*]"}i=xu(e.valid_styles);a=xu(e.invalid_styles,"map");c=xu(e.valid_classes,"map");u=y("whitespace_elements","pre script noscript style textarea video audio iframe object code");s=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");l=y("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track");f=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls");v=y("non_empty_elements","td th iframe video audio object "+"script pre code",l);m=y("move_caret_before_on_enter_elements","table",v);g=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside main nav figure");d=y("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption details summary",g);p=y("text_inline_elements","span strong b em i font strike u var cite "+"dfn code mark q sup sub samp");gu((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){b[e]=new RegExp("</"+e+"[^>]*>","gi")}));var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")};var x=function(e){var n,i,a,o,u,s,l,f,c,d,v,m,g,p,h,b,y,x,C;var k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e){e=yu(e,",");if(t["@"]){b=t["@"].attributes;y=t["@"].attributesOrder}for(n=0,i=e.length;n<i;n++){u=k.exec(e[n]);if(u){p=u[1];c=u[2];h=u[3];f=u[5];m={};g=[];s={attributes:m,attributesOrder:g};if(p==="#"){s.paddEmpty=true}if(p==="-"){s.removeEmpty=true}if(u[4]==="!"){s.removeEmptyAttrs=true}if(b){for(x in b){m[x]=b[x]}g.push.apply(g,y)}if(f){f=yu(f,"|");for(a=0,o=f.length;a<o;a++){u=S.exec(f[a]);if(u){l={};v=u[1];d=u[2].replace(/[\\:]:/g,":");p=u[3];C=u[4];if(v==="!"){s.attributesRequired=s.attributesRequired||[];s.attributesRequired.push(d);l.required=true}if(v==="-"){delete m[d];g.splice(bu(g,d),1);continue}if(p){if(p==="="){s.attributesDefault=s.attributesDefault||[];s.attributesDefault.push({name:d,value:C});l.defaultValue=C}if(p===":"){s.attributesForced=s.attributesForced||[];s.attributesForced.push({name:d,value:C});l.forcedValue=C}if(p==="<"){l.validValues=mu(C,"?")}}if(T.test(d)){s.attributePatterns=s.attributePatterns||[];l.pattern=w(d);s.attributePatterns.push(l)}else{if(!m[d]){g.push(d)}m[d]=l}}}}if(!b&&c==="@"){b=m;y=g}if(h){s.outputName=c;t[h]=s}if(T.test(c)){s.pattern=w(c);r.push(s)}else{t[c]=s}}}}};var C=function(e){t={};r=[];x(e);gu(o,(function(e,t){n[t]=e.children}))};var k=function(e){var r=/^(~)?(.+)$/;if(e){du.text_block_elements=du.block_elements=null;gu(yu(e,","),(function(e){var i=r.exec(e),a=i[1]==="~",o=a?"span":"div",u=i[2];n[u]=n[o];h[u]=o;if(!a){d[u.toUpperCase()]={};d[u]={}}if(!t[u]){var s=t[o];s=pu({},s);delete s.removeEmptyAttrs;delete s.removeEmpty;t[u]=s}gu(n,(function(e,t){if(e[o]){n[t]=e=pu({},n[t]);e[u]=e[o]}}))}))}};var S=function(t){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;du[e.schema]=null;if(t){gu(yu(t,","),(function(e){var t=r.exec(e);var i,a;if(t){a=t[1];if(a){i=n[t[2]]}else{i=n[t[2]]={"#comment":{}}}i=n[t[2]];gu(yu(t[3],"|"),(function(e){if(a==="-"){delete i[e]}else{i[e]={}}}))}}))}};var T=function(e){var n=t[e],i;if(n){return n}i=r.length;while(i--){n=r[i];if(n.pattern.test(e)){return n}}};if(!e.valid_elements){gu(o,(function(e,r){t[r]={attributes:e.attributes,attributesOrder:e.attributesOrder};n[r]=e.children}));if(e.schema!=="html5"){gu(yu("strong/b em/i"),(function(e){e=yu(e,"/");t[e[1]].outputName=e[0]}))}gu(yu("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){if(t[e]){t[e].removeEmpty=true}}));gu(yu("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){t[e].paddEmpty=true}));gu(yu("span"),(function(e){t[e].removeEmptyAttrs=true}))}else{C(e.valid_elements)}k(e.custom_elements);S(e.valid_children);x(e.extended_valid_elements);S("+ol[ul|ol],+ul[ul|ol]");gu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,n){if(t[n]){t[n].parentsRequired=yu(e)}}));if(e.invalid_elements){gu(hu(e.invalid_elements),(function(e){if(t[e]){delete t[e]}}))}if(!T("span")){x("span[!data-mce-type|*]")}var E=function(){return i};var N=function(){return a};var R=function(){return c};var _=function(){return f};var D=function(){return d};var O=function(){return g};var P=function(){return p};var A=function(){return l};var B=function(){return s};var I=function(){return v};var L=function(){return m};var M=function(){return u};var F=function(){return b};var H=function(e,t){var r=n[e.toLowerCase()];return!!(r&&r[t.toLowerCase()])};var z=function(e,t){var n,r;var i=T(e);if(i){if(t){if(i.attributes[t]){return true}n=i.attributePatterns;if(n){r=n.length;while(r--){if(n[r].pattern.test(e)){return true}}}}else{return true}}return false};var U=function(){return h};return{children:n,elements:t,getValidStyles:E,getValidClasses:R,getBlockElements:D,getInvalidStyles:N,getShortEndedElements:A,getTextBlockElements:O,getTextInlineElements:P,getBoolAttrs:_,getElementRule:T,getSelfClosingElements:B,getNonEmptyElements:I,getMoveCaretBeforeOnEnterElements:L,getWhiteSpaceElements:M,getSpecialElements:F,isValidChild:H,isValid:z,getCustomElements:U,addValidElements:x,setValidElements:C,addCustomElements:k,addValidChildren:S}}var ku=function(e,t,n,r){var i=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function Su(e,t){var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi;var r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi;var i=/\s*([^:]+):\s*([^;]+);?/g;var a=/\s+$/;var o;var u={};var s;var l;var f;var c="\ufeff";e=e||{};if(t){l=t.getValidStyles();f=t.getInvalidStyles()}s=("\\\" \\' \\; \\: ; : "+c).split(" ");for(o=0;o<s.length;o++){u[s[o]]=c+o;u[c+o]=s[o]}return{toHex:function(e){return e.replace(n,ku)},parse:function(t){var s={};var l,f,d,v;var m=e.url_converter;var g=e.url_converter_scope||this;var p=function(e,t,n){var r,i,a,u;r=s[e+"-top"+t];if(!r){return}i=s[e+"-right"+t];if(!i){return}a=s[e+"-bottom"+t];if(!a){return}u=s[e+"-left"+t];if(!u){return}var l=[r,i,a,u];o=l.length-1;while(o--){if(l[o]!==l[o+1]){break}}if(o>-1&&n){return}s[e+t]=o===-1?l[0]:l.join(" ");delete s[e+"-top"+t];delete s[e+"-right"+t];delete s[e+"-bottom"+t];delete s[e+"-left"+t]};var h=function(e){var t=s[e],n;if(!t){return}t=t.split(" ");n=t.length;while(n--){if(t[n]!==t[0]){return false}}s[e]=t[0];return true};var b=function(e,t,n,r){if(!h(t)){return}if(!h(n)){return}if(!h(r)){return}s[e]=s[t]+" "+s[n]+" "+s[r];delete s[t];delete s[n];delete s[r]};var y=function(e){v=true;return u[e]};var w=function(e,t){if(v){e=e.replace(/\uFEFF[0-9]/g,(function(e){return u[e]}))}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e};var x=function(e){return String.fromCharCode(parseInt(e.slice(1),16))};var C=function(e){return e.replace(/\\[0-9a-f]+/gi,x)};var k=function(t,n,r,i,a,o){a=a||o;if(a){a=w(a);return"'"+a.replace(/\'/g,"\\'")+"'"}n=w(n||r||i);if(!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(u)){return""}if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u)){return""}}if(m){n=m.call(g,n,"style")}return"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){t=t.replace(/[\u0000-\u001F]/g,"");t=t.replace(/\\[\"\';:\uFEFF]/g,y).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,y)}));while(l=i.exec(t)){i.lastIndex=l.index+l[0].length;f=l[1].replace(a,"").toLowerCase();d=l[2].replace(a,"");if(f&&d){f=C(f);d=C(d);if(f.indexOf(c)!==-1||f.indexOf('"')!==-1){continue}if(!e.allow_script_urls&&(f==="behavior"||/expression\s*\(|\/\*|\*\//.test(d))){continue}if(f==="font-weight"&&d==="700"){d="bold"}else if(f==="color"||f==="background-color"){d=d.toLowerCase()}d=d.replace(n,ku);d=d.replace(r,k);s[f]=v?w(d,true):d}}p("border","",true);p("border","-width");p("border","-color");p("border","-style");p("padding","");p("margin","");b("border","border-width","border-style","border-color");if(s.border==="medium none"){delete s.border}if(s["border-image"]==="none"){delete s["border-image"]}}return s},serialize:function(e,t){var n="",r,i;var a=function(t){var r,i,a,o;r=l[t];if(r){for(i=0,a=r.length;i<a;i++){t=r[i];o=e[t];if(o){n+=(n.length>0?" ":"")+t+": "+o+";"}}}};var o=function(e,t){var n;n=f["*"];if(n&&n[e]){return false}n=f[t];if(n&&n[e]){return false}return true};if(t&&l){a("*");a(t)}else{for(r in e){i=e[r];if(i&&(!f||o(r,t))){n+=(n.length>0?" ":"")+r+": "+i+";"}}}return n}}}var Tu=Hn.each;var Eu=Hn.grep;var Nu=Ne.ie;var Ru=/^([a-z0-9],?)+$/i;var _u=/^[ \t\r\n]*$/;var Du=function(e,t,n){var r={};var i=t.keep_values;var a={set:function(e,r,i){if(t.url_converter){r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])}e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};r={style:{set:function(e,t){if(t!==null&&typeof t==="object"){e.css(t);return}if(i){e.attr("data-mce-style",t)}e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");n=e.serialize(e.parse(n),t[0].nodeName);return n}}};if(i){r.href=r.src=a}return r};var Ou=function(e,t){var n=t.attr("style");var r=e.serialize(e.parse(n),t[0].nodeName);if(!r){r=null}t.attr("data-mce-style",r)};var Pu=function(e,t){var n=0,r,i;if(e){for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){i=e.nodeType;if(t&&i===3){if(i===r||!e.nodeValue.length){continue}}n++;r=i}}return n};function Au(e,t){var n=this;if(t===void 0){t={}}var r;var a={};var o=i.window;var u={};var s=0;var l=true;var f=true;var c=eo(e,{contentCssCors:t.contentCssCors});var d=[];var v=t.schema?t.schema:Cu({});var m=Su({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema);var g=t.ownEvents?new Xe(t.proxy):Xe.Event;var p=v.getBlockElements();var h=ar.overrideDefaults((function(){return{context:e,element:Re.getRoot()}}));var b=function(e){if(typeof e==="string"){return!!p[e]}else if(e){var t=e.nodeType;if(t){return!!(t===1&&p[e.nodeName])}}return false};var y=function(t){if(t&&e&&typeof t==="string"){var n=e.getElementById(t);if(n&&n.id!==t){return e.getElementsByName(t)[1]}else{return n}}return t};var w=function(e){if(typeof e==="string"){e=y(e)}return h(e)};var x=function(e,t,n){var i,a;var o=w(e);if(o.length){i=r[t];if(i&&i.get){a=i.get(o,t)}else{a=o.attr(t)}}if(typeof a==="undefined"){a=n||""}return a};var C=function(e){var t=y(e);if(!t){return[]}return t.attributes};var k=function(e,n,i){var a,o;if(i===""){i=null}var u=w(e);a=u.attr(n);if(!u.length){return}o=r[n];if(o&&o.set){o.set(u,i,n)}else{u.attr(n,i)}if(a!==i&&t.onSetAttrib){t.onSetAttrib({attrElm:u,attrName:n,attrValue:i})}};var S=function(t,n){if(!Nu||t.nodeType!==1||n){return t.cloneNode(n)}if(!n){var r=e.createElement(t.nodeName);Tu(C(t),(function(e){k(r,e.nodeName,x(t,e.nodeName))}));return r}return null};var T=function(){return t.root_element||e.body};var E=function(e){var t=!e?o:e;var n=t.document;var r=n.documentElement;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}};var N=function(t,n){return La.getPos(e.body,y(t),n)};var R=function(e,n,r){var i=w(e).css(n,r);if(t.update_styles){Ou(m,i)}};var _=function(e,n){var r=w(e).css(n);if(t.update_styles){Ou(m,r)}};var D=function(e,t,n){var r=w(e);if(n){return r.css(t)}t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}));if(t==="float"){t=Ne.ie&&Ne.ie<12?"styleFloat":"cssFloat"}return r[0]&&r[0].style?r[0].style[t]:undefined};var O=function(e){var t,n;e=y(e);t=D(e,"width");n=D(e,"height");if(t.indexOf("px")===-1){t=0}if(n.indexOf("px")===-1){n=0}return{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}};var P=function(e){var t,n;e=y(e);t=N(e);n=O(e);return{x:t.x,y:t.y,w:n.w,h:n.h}};var A=function(e,t){var n;if(!e){return false}if(!Array.isArray(e)){if(t==="*"){return e.nodeType===1}if(Ru.test(t)){var r=t.toLowerCase().split(/,/);var i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--){if(r[n]===i){return true}}return false}if(e.nodeType&&e.nodeType!==1){return false}}var a=!Array.isArray(e)?[e]:e;return Zt(t,a[0].ownerDocument||a[0],null,a).length>0};var B=function(e,t,n,r){var i=[];var a;var o=y(e);r=r===undefined;n=n||(T().nodeName!=="BODY"?T().parentNode:null);if(Hn.is(t,"string")){a=t;if(t==="*"){t=function(e){return e.nodeType===1}}else{t=function(e){return A(e,a)}}}while(o){if(o===n||!o.nodeType||o.nodeType===9){break}if(!t||typeof t==="function"&&t(o)){if(r){i.push(o)}else{return[o]}}o=o.parentNode}return r?i:null};var I=function(e,t,n){var r=B(e,t,n,false);return r&&r.length>0?r[0]:null};var L=function(e,t,n){var r=t;if(e){if(typeof t==="string"){r=function(e){return A(e,t)}}for(e=e[n];e;e=e[n]){if(typeof r==="function"&&r(e)){return e}}}return null};var M=function(e,t){return L(e,t,"nextSibling")};var F=function(e,t){return L(e,t,"previousSibling")};var H=function(n,r){return Zt(n,y(r)||t.root_element||e,[])};var z=function(e,t,r){var i;var a=typeof e==="string"?y(e):e;if(!a){return false}if(Hn.isArray(a)&&(a.length||a.length===0)){i=[];Tu(a,(function(e,n){if(e){if(typeof e==="string"){e=y(e)}i.push(t.call(r,e,n))}}));return i}var o=r?r:n;return t.call(o,a)};var U=function(e,t){w(e).each((function(e,n){Tu(t,(function(e,t){k(n,t,e)}))}))};var W=function(e,t){var n=w(e);if(Nu){n.each((function(e,n){if(n.canHaveHTML===false){return}while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br>"+t;n.removeChild(n.firstChild)}catch(e){ar("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}))}else{n.html(t)}};var j=function(t,n,r,i,a){return z(t,(function(t){var o=typeof n==="string"?e.createElement(n):n;U(o,r);if(i){if(typeof i!=="string"&&i.nodeType){o.appendChild(i)}else if(typeof i==="string"){W(o,i)}}return!a?t.appendChild(o):o}))};var V=function(t,n,r){return j(e.createElement(t),t,n,r,true)};var q=cu.decode;var $=cu.encodeAllRaw;var K=function(e,t,n){var r="",i;r+="<"+e;for(i in t){if(t.hasOwnProperty(i)&&t[i]!==null&&typeof t[i]!=="undefined"){r+=" "+i+'="'+$(t[i])+'"'}}if(typeof n!=="undefined"){return r+">"+n+"</"+e+">"}return r+" />"};var Y=function(t){var n;var r=e.createElement("div");var i=e.createDocumentFragment();i.appendChild(r);if(t){r.innerHTML=t}while(n=r.firstChild){i.appendChild(n)}i.removeChild(r);return i};var X=function(e,t){var n=w(e);if(t){n.each((function(){var e;while(e=this.firstChild){if(e.nodeType===3&&e.data.length===0){this.removeChild(e)}else{this.parentNode.insertBefore(e,this)}}})).remove()}else{n.remove()}return n.length>1?n.toArray():n[0]};var G=function(e){return z(e,(function(e){var t;var n=e.attributes;for(t=n.length-1;t>=0;t--){e.removeAttributeNode(n.item(t))}}))};var J=function(e){return m.parse(e)};var Z=function(e,t){return m.serialize(e,t)};var Q=function(t){var n,r;if(Re!==Au.DOM&&e===i.document){if(a[t]){return}a[t]=true}r=e.getElementById("mceDefaultStyles");if(!r){r=e.createElement("style");r.id="mceDefaultStyles";r.type="text/css";n=e.getElementsByTagName("head")[0];if(n.firstChild){n.insertBefore(r,n.firstChild)}else{n.appendChild(r)}}if(r.styleSheet){r.styleSheet.cssText+=t}else{r.appendChild(e.createTextNode(t))}};var ee=function(t){var n;if(Re!==Au.DOM&&e===i.document){Au.DOM.loadCSS(t);return}if(!t){t=""}n=e.getElementsByTagName("head")[0];Tu(t.split(","),(function(e){var t;e=Hn._addCacheSuffix(e);if(u[e]){return}u[e]=true;t=V("link",{rel:"stylesheet",href:e});n.appendChild(t)}))};var te=function(e,t,n){w(e).toggleClass(t,n).each((function(){if(this.className===""){ar(this).attr("class",null)}}))};var ne=function(e,t){w(e).addClass(t)};var re=function(e,t){te(e,t,false)};var ie=function(e,t){return w(e).hasClass(t)};var ae=function(e){w(e).show()};var oe=function(e){w(e).hide()};var ue=function(e){return w(e).css("display")==="none"};var se=function(e){return(!e?"mce_":e)+s++};var le=function(e){var t=typeof e==="string"?y(e):e;return jo.isElement(t)?t.outerHTML:ar("<div></div>").append(ar(t).clone()).html()};var fe=function(e,t){w(e).each((function(){try{if("outerHTML"in this){this.outerHTML=t;return}}catch(e){}X(ar(this).html(t),true)}))};var ce=function(e,t){var n=y(t);return z(e,(function(e){var t,r;t=n.parentNode;r=n.nextSibling;if(r){t.insertBefore(e,r)}else{t.appendChild(e)}return e}))};var de=function(e,t,n){return z(t,(function(t){if(Hn.is(t,"array")){e=e.cloneNode(true)}if(n){Tu(Eu(t.childNodes),(function(t){e.appendChild(t)}))}return t.parentNode.replaceChild(e,t)}))};var ve=function(e,t){var n;if(e.nodeName!==t.toUpperCase()){n=V(t);Tu(C(e),(function(t){k(n,t.nodeName,x(e,t.nodeName))}));de(n,e,true)}return n||e};var me=function(e,t){var n=e,r;while(n){r=t;while(r&&n!==r){r=r.parentNode}if(n===r){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}return n};var ge=function(e){return m.toHex(Hn.trim(e))};var pe=function(e,t){var n,r,i,a,o,u,s=0;e=e.firstChild;if(e){o=new to(e,e.parentNode);t=t||(v?v.getNonEmptyElements():null);a=v?v.getWhiteSpaceElements():{};do{i=e.nodeType;if(jo.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=o.next(l==="all");continue}u=e.nodeName.toLowerCase();if(t&&t[u]){if(u==="br"){s++;e=o.next();continue}return false}r=C(e);n=r.length;while(n--){u=r[n].nodeName;if(u==="name"||u==="data-mce-bookmark"){return false}}}if(i===8){return false}if(i===3&&!_u.test(e.nodeValue)){return false}if(i===3&&e.parentNode&&a[e.parentNode.nodeName]&&_u.test(e.nodeValue)){return false}e=o.next()}while(e)}return s<=1};var he=function(){return e.createRange()};var be=function(e,t,n){var r=he(),i,a,o;if(e&&t){r.setStart(e.parentNode,Pu(e));r.setEnd(t.parentNode,Pu(t));i=r.extractContents();r=he();r.setStart(t.parentNode,Pu(t)+1);r.setEnd(e.parentNode,Pu(e)+1);a=r.extractContents();o=e.parentNode;o.insertBefore(Ko.trimNode(Re,i),e);if(n){o.insertBefore(n,e)}else{o.insertBefore(t,e)}o.insertBefore(Ko.trimNode(Re,a),e);X(e);return n||t}};var ye=function(n,r,i,a){if(Hn.isArray(n)){var u=n.length;while(u--){n[u]=ye(n[u],r,i,a)}return n}if(t.collect&&(n===e||n===o)){d.push([n,r,i,a])}return g.bind(n,r,i,a||Re)};var we=function(t,n,r){var i;if(Hn.isArray(t)){i=t.length;while(i--){t[i]=we(t[i],n,r)}return t}if(d&&(t===e||t===o)){i=d.length;while(i--){var a=d[i];if(t===a[0]&&(!n||n===a[1])&&(!r||r===a[2])){g.unbind(a[0],a[1],a[2])}}}return g.unbind(t,n,r)};var xe=function(e,t,n){return g.fire(e,t,n)};var Ce=function(e){if(e&&jo.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null}else{return null}};var ke=function(e){var t=T();var n=null;for(;e&&e!==t;e=e.parentNode){n=Ce(e);if(n!==null){break}}return n};var Se=function(){if(d){var e=d.length;while(e--){var t=d[e];g.unbind(t[0],t[1],t[2])}}if(Zt.setDocument){Zt.setDocument()}};var Te=function(e,t){while(e){if(t===e){return true}e=e.parentNode}return false};var Ee=function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset};var Re={doc:e,settings:t,win:o,files:u,stdMode:l,boxModel:f,styleSheetLoader:c,boundEvents:d,styles:m,schema:v,events:g,isBlock:b,$:h,$$:w,root:null,clone:S,getRoot:T,getViewPort:E,getRect:P,getSize:O,getParent:I,getParents:B,get:y,getNext:M,getPrev:F,select:H,is:A,add:j,create:V,createHTML:K,createFragment:Y,remove:X,setStyle:R,getStyle:D,setStyles:_,removeAllAttribs:G,setAttrib:k,setAttribs:U,getAttrib:x,getPos:N,parseStyle:J,serializeStyle:Z,addStyle:Q,loadCSS:ee,addClass:ne,removeClass:re,hasClass:ie,toggleClass:te,show:ae,hide:oe,isHidden:ue,uniqueId:se,setHTML:W,getOuterHTML:le,setOuterHTML:fe,decode:q,encode:$,insertAfter:ce,replace:de,rename:ve,findCommonAncestor:me,toHex:ge,run:z,getAttribs:C,isEmpty:pe,createRng:he,nodeIndex:Pu,split:be,bind:ye,unbind:we,fire:xe,getContentEditable:Ce,getContentEditableParent:ke,destroy:Se,isChildOf:Te,dumpRng:Ee};r=Du(m,t,(function(){return Re}));return Re}(function(e){e.DOM=e(i.document);e.nodeIndex=Pu})(Au||(Au={}));var Bu=Au;var Iu=Bu.DOM;var Lu=Hn.each,Mu=Hn.grep;var Fu=function(e){return typeof e==="function"};var Hu=function(){var e=0;var t=1;var r=2;var a=3;var o={};var u=[];var s={};var l=[];var f=0;var c=function(e,t,r){var a=Iu;var o,u;var s=function(){a.remove(u);if(o){o.onreadystatechange=o.onload=o=null}t()};var l=function(){if(Fu(r)){r()}else{if(typeof n!=="undefined"&&n.log){n.log("Failed to load script: "+e)}}};u=a.uniqueId();o=i.document.createElement("script");o.id=u;o.type="text/javascript";o.src=Hn._addCacheSuffix(e);o.onload=s;o.onerror=l;(i.document.getElementsByTagName("head")[0]||i.document.body).appendChild(o)};this.isDone=function(e){return o[e]===r};this.markDone=function(e){o[e]=r};this.add=this.load=function(t,n,r,i){var a=o[t];if(a===undefined){u.push(t);o[t]=e}if(n){if(!s[t]){s[t]=[]}s[t].push({success:n,failure:i,scope:r||this})}};this.remove=function(e){delete o[e];delete s[e]};this.loadQueue=function(e,t,n){this.loadScripts(u,e,t,n)};this.loadScripts=function(e,n,i,u){var d;var v=[];var m=function(e,t){Lu(s[t],(function(t){if(Fu(t[e])){t[e].call(t.scope)}}));s[t]=undefined};l.push({success:n,failure:u,scope:i||this});d=function(){var n=Mu(e);e.length=0;Lu(n,(function(e){if(o[e]===r){m("success",e);return}if(o[e]===a){m("failure",e);return}if(o[e]!==t){o[e]=t;f++;c(e,(function(){o[e]=r;f--;m("success",e);d()}),(function(){o[e]=a;f--;v.push(e);m("failure",e);d()}))}}));if(!f){var i=l.slice(0);l.length=0;Lu(i,(function(e){if(v.length===0){if(Fu(e.success)){e.success.call(e.scope)}}else{if(Fu(e.failure)){e.failure.call(e.scope,v)}}}))}};d()}};Hu.ScriptLoader=new Hu;var zu=Hn.each;function Uu(){var e=this;var t=[];var n={};var r={};var i=[];var a=function(e){if(r[e]){return r[e].instance}return undefined};var o=function(e){var t;if(r[e]){t=r[e].dependencies}return t||[]};var u=function(e,t){var r=Uu.language;if(r&&Uu.languageLoad!==false){if(t){t=","+t+",";if(t.indexOf(","+r.substr(0,2)+",")!==-1){r=r.substr(0,2)}else if(t.indexOf(","+r+",")===-1){return}}Hu.ScriptLoader.add(n[e]+"/langs/"+r+".js")}};var s=function(e,n,a){t.push(n);r[e]={instance:n,dependencies:a};var o=F(i,(function(t){return t.name===e}));i=o.fail;zu(o.pass,(function(e){e.callback()}));return n};var l=function(e){delete n[e];delete r[e]};var f=function(e,t){if(typeof t==="object"){return t}return typeof e==="string"?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}};var c=function(t,n){var r=e.urls[t];zu(n,(function(e){Hu.ScriptLoader.add(r+"/"+e)}))};var d=function(e,t,n,r){var i=o(e);zu(i,(function(e){var n=f(t,e);v(n.resource,n,undefined,undefined)}));if(n){if(r){n.call(r)}else{n.call(Hu)}}};var v=function(e,t,i,a,o){if(n[e]){return}var u=typeof t==="string"?t:t.prefix+t.resource+t.suffix;if(u.indexOf("/")!==0&&u.indexOf("://")===-1){u=Uu.baseURL+"/"+u}n[e]=u.substring(0,u.lastIndexOf("/"));if(r[e]){d(e,t,i,a)}else{Hu.ScriptLoader.add(u,(function(){return d(e,t,i,a)}),a,o)}};var m=function(e,t){if(r.hasOwnProperty(e)){t()}else{i.push({name:e,callback:t})}};return{items:t,urls:n,lookup:r,_listeners:i,get:a,dependencies:o,requireLangPack:u,add:s,remove:l,createUrl:f,addComponents:c,load:v,waitFor:m}}(function(e){e.PluginManager=e();e.ThemeManager=e()})(Uu||(Uu={}));var Wu=function(e,t){var n=wa(e);n.each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))};var ju=function(e,t){var n=ka(e);n.fold((function(){var n=wa(e);n.each((function(e){qu(e,t)}))}),(function(e){Wu(e,t)}))};var Vu=function(e,t){var n=Ra(e);n.fold((function(){qu(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))};var qu=function(e,t){e.dom().appendChild(t.dom())};var $u=function(e,t){Wu(e,t);qu(t,e)};var Ku=function(e,t){L(t,(function(t){Wu(e,t)}))};var Yu=function(e,t){L(t,(function(t){qu(e,t)}))};var Xu=function(e){e.dom().textContent="";L(Ea(e),(function(e){Gu(e)}))};var Gu=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var Ju=function(e){var t=Ea(e);if(t.length>0){Ku(e,t)}Gu(e)};var Zu=function(e,t){var n=null;var r=function(){if(n!==null){i.clearTimeout(n);n=null}};var a=function(){var r=[];for(var a=0;a<arguments.length;a++){r[a]=arguments[a]}if(n===null){n=i.setTimeout((function(){e.apply(null,r);n=null}),t)}};return{cancel:r,throttle:a}};var Qu=function(e,t){var n=null;var r=function(){if(n!==null){i.clearTimeout(n);n=null}};var a=function(){var r=[];for(var a=0;a<arguments.length;a++){r[a]=arguments[a]}if(n!==null){i.clearTimeout(n)}n=i.setTimeout((function(){e.apply(null,r);n=null}),t)};return{cancel:r,throttle:a}};var es=function(e){var t=e;var n=function(){return t};var r=function(e){t=e};var i=function(){return es(n())};return{get:n,set:r,clone:i}};var ts=function(e,t){var n=ji(e,t);return n===undefined||n===""?[]:n.split(" ")};var ns=function(e,t,n){var r=ts(e,t);var i=r.concat([n]);Ui(e,t,i.join(" "));return true};var rs=function(e,t,n){var r=H(ts(e,t),(function(e){return e!==n}));if(r.length>0){Ui(e,t,r.join(" "))}else{qi(e,t)}return false};var is=function(e){return e.dom().classList!==undefined};var as=function(e){return ts(e,"class")};var os=function(e,t){return ns(e,"class",t)};var us=function(e,t){return rs(e,"class",t)};var ss=function(e,t){if(is(e)){e.dom().classList.add(t)}else{os(e,t)}};var ls=function(e){var t=is(e)?e.dom().classList:as(e);if(t.length===0){qi(e,"class")}};var fs=function(e,t){if(is(e)){var n=e.dom().classList;n.remove(t)}else{us(e,t)}ls(e)};var cs=function(e,t){return is(e)&&e.dom().classList.contains(t)};var ds=function(e,t){var n=[];L(Ea(e),(function(e){if(t(e)){n=n.concat([e])}n=n.concat(ds(e,t))}));return n};var vs=function(e,t){return fa(t,e)};function ms(e,t,n,r,i){return e(n,r)?b.some(n):E(i)&&i(n)?b.none():t(n,r,i)}var gs=function(e,t,n){var r=e.dom();var i=E(n)?n:u(false);while(r.parentNode){r=r.parentNode;var a=vi.fromDom(r);if(t(a)){return b.some(a)}else if(i(a)){break}}return b.none()};var ps=function(e,t,n){var r=function(e,t){return t(e)};return ms(r,gs,e,t,n)};var hs=function(e,t,n){return gs(e,(function(e){return sa(e,t)}),n)};var bs=function(e,t){return ca(t,e)};var ys=function(e,t,n){return ms(sa,hs,e,t,n)};var ws=u("mce-annotation");var xs=u("data-mce-annotation");var Cs=u("data-mce-annotation-uid");var ks=function(e,t){var n=e.selection.getRng();var r=vi.fromDom(n.startContainer);var i=vi.fromDom(e.getBody());var a=t.fold((function(){return"."+ws()}),(function(e){return"["+xs()+'="'+e+'"]'}));var o=Na(r,n.startOffset).getOr(r);var u=ys(o,a,(function(e){return da(e,i)}));var s=function(e,t){if(Vi(e,t)){return b.some(ji(e,t))}else{return b.none()}};return u.bind((function(t){return s(t,""+Cs()).bind((function(n){return s(t,""+xs()).map((function(t){var r=Ts(e,n);return{uid:n,name:t,elements:r}}))}))}))};var Ss=function(e){return _i(e)&&cs(e,ws())};var Ts=function(e,t){var n=vi.fromDom(e.getBody());return vs(n,"["+Cs()+'="'+t+'"]')};var Es=function(e,t){var n=vi.fromDom(e.getBody());var r=vs(n,"["+xs()+'="'+t+'"]');var i={};L(r,(function(e){var t=ji(e,Cs());var n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])}));return i};var Ns=function(e,t){var n=es({});var r=function(){return{listeners:[],previous:es(b.none())}};var i=function(e,t){a(e,(function(e){t(e);return e}))};var a=function(e,t){var i=n.get();var a=i.hasOwnProperty(e)?i[e]:r();var o=t(a);i[e]=o;n.set(i)};var o=function(e,t,n){i(e,(function(r){L(r.listeners,(function(r){return r(true,e,{uid:t,nodes:I(n,(function(e){return e.dom()}))})}))}))};var u=function(e){i(e,(function(t){L(t.listeners,(function(t){return t(false,e)}))}))};var s=Qu((function(){var t=n.get();var r=G(Oi(t));L(r,(function(t){a(t,(function(n){var r=n.previous.get();ks(e,b.some(t)).fold((function(){if(r.isSome()){u(t);n.previous.set(b.none())}}),(function(e){var t=e.uid,i=e.name,a=e.elements;if(!r.is(t)){o(i,t,a);n.previous.set(b.some(t))}}));return{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(function(){s.cancel()}));e.on("nodeChange",(function(){s.throttle()}));var l=function(e,t){a(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))};return{addListener:l}};var Rs=function(e,t){var n=function(e){var n=b.from(e.attributes.map[xs()]);return n.bind(t.lookup)};e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){L(e,(function(e){n(e).each((function(t){if(t.persistent===false){e.unwrap()}}))}))}))}))};var _s=function(){var e={};var t=function(t,n){e[t]={name:t,settings:n}};var n=function(t){return e.hasOwnProperty(t)?b.from(e[t]).map((function(e){return e.settings})):b.none()};return{register:t,lookup:n}};var Ds=function(){Ds=Object.assign||function e(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a))t[a]=n[a]}return t};return Ds.apply(this,arguments)};function Os(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n}function Ps(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)r[i]=a[o];return r}var As=0;var Bs=function(e){var t=new Date;var n=t.getTime();var r=Math.floor(Math.random()*1e9);As++;return e+"_"+r+As+String(n)};var Is=function(e,t){L(t,(function(t){ss(e,t)}))};var Ls=function(e,t){return vi.fromDom(e.dom().cloneNode(t))};var Ms=function(e){return Ls(e,false)};var Fs=function(e){return Ls(e,true)};var Hs=function(e,t){var n=t||i.document;var r=n.createElement("div");r.innerHTML=e;return Ea(vi.fromDom(r))};var zs=function(e){return e.dom().innerHTML};var Us=function(e,t){var n=ha(e);var r=n.dom();var i=vi.fromDom(r.createDocumentFragment());var a=Hs(t,r);Yu(i,a);Xu(e);qu(e,i)};var Ws="\ufeff";var js=function(e){return e===Ws};var Vs=function(e){return e.replace(new RegExp(Ws,"g"),"")};var qs={isZwsp:js,ZWSP:Ws,trim:Vs};var $s=jo.isElement;var Ks=jo.isText;var Ys=function(e){if(Ks(e)){e=e.parentNode}return $s(e)&&e.hasAttribute("data-mce-caret")};var Xs=function(e){return Ks(e)&&qs.isZwsp(e.data)};var Gs=function(e){return Ys(e)||Xs(e)};var Js=function(e){return e.firstChild!==e.lastChild||!jo.isBr(e.firstChild)};var Zs=function(e,t){var n,r,i,a;n=e.ownerDocument;i=n.createTextNode(qs.ZWSP);a=e.parentNode;if(!t){r=e.nextSibling;if(Ks(r)){if(Gs(r)){return r}if(rl(r)){r.splitText(1);return r}}if(e.nextSibling){a.insertBefore(i,e.nextSibling)}else{a.appendChild(i)}}else{r=e.previousSibling;if(Ks(r)){if(Gs(r)){return r}if(il(r)){return r.splitText(r.data.length-1)}}a.insertBefore(i,e)}return i};var Qs=function(e){var t=e.container();if(!e||!jo.isText(t)){return false}return t.data.charAt(e.offset())===qs.ZWSP||e.isAtStart()&&Xs(t.previousSibling)};var el=function(e){var t=e.container();if(!e||!jo.isText(t)){return false}return t.data.charAt(e.offset()-1)===qs.ZWSP||e.isAtEnd()&&Xs(t.nextSibling)};var tl=function(){var e=i.document.createElement("br");e.setAttribute("data-mce-bogus","1");return e};var nl=function(e,t,n){var r,i,a;r=t.ownerDocument;i=r.createElement(e);i.setAttribute("data-mce-caret",n?"before":"after");i.setAttribute("data-mce-bogus","all");i.appendChild(tl());a=t.parentNode;if(!n){if(t.nextSibling){a.insertBefore(i,t.nextSibling)}else{a.appendChild(i)}}else{a.insertBefore(i,t)}return i};var rl=function(e){return Ks(e)&&e.data[0]===qs.ZWSP};var il=function(e){return Ks(e)&&e.data[e.data.length-1]===qs.ZWSP};var al=function(e){var t=e.getElementsByTagName("br");var n=t[t.length-1];if(jo.isBogus(n)){n.parentNode.removeChild(n)}};var ol=function(e){if(e&&e.hasAttribute("data-mce-caret")){al(e);e.removeAttribute("data-mce-caret");e.removeAttribute("data-mce-bogus");e.removeAttribute("style");e.removeAttribute("_moz_abspos");return e}return null};var ul=function(e){return Ys(e.startContainer)};var sl=jo.isContentEditableTrue;var ll=jo.isContentEditableFalse;var fl=jo.isBr;var cl=jo.isText;var dl=jo.matchNodeNames("script style textarea");var vl=jo.matchNodeNames("img input textarea hr iframe video audio object");var ml=jo.matchNodeNames("table");var gl=Gs;var pl=function(e){if(gl(e)){return false}if(cl(e)){if(dl(e.parentNode)){return false}return true}return vl(e)||fl(e)||ml(e)||bl(e)};var hl=function(e){return jo.isElement(e)&&e.getAttribute("unselectable")==="true"};var bl=function(e){return hl(e)===false&&ll(e)};var yl=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(bl(e)){return false}if(sl(e)){return true}}return true};var wl=function(e){if(!bl(e)){return false}return U(Q(e.getElementsByTagName("*")),(function(e,t){return e||sl(t)}),false)!==true};var xl=function(e){return vl(e)||wl(e)};var Cl=function(e,t){return pl(e)&&yl(e,t)};var kl=Math.round;var Sl=function(e){if(!e){return{left:0,top:0,bottom:0,right:0,width:0,height:0}}return{left:kl(e.left),top:kl(e.top),bottom:kl(e.bottom),right:kl(e.right),width:kl(e.width),height:kl(e.height)}};var Tl=function(e,t){e=Sl(e);if(t){e.right=e.left}else{e.left=e.left+e.width;e.right=e.left}e.width=0;return e};var El=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right};var Nl=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2};var Rl=function(e,t){var n=Math.min(t.height/2,e.height/2);if(e.bottom-n<t.top){return true}if(e.top>t.bottom){return false}return Nl(t.top-e.bottom,e,t)};var _l=function(e,t){if(e.top>t.bottom){return true}if(e.bottom<t.top){return false}return Nl(t.bottom-e.top,e,t)};var Dl=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};var Ol=function(e,t){if(t.left>e.left&&t.right<e.right){return 0}else{return t.left<e.left?t.left-e.left:t.right-e.right}};var Pl=function(e,t){if(t.top>e.top&&t.bottom<e.bottom){return 0}else{return t.top<e.top?t.top-e.top:t.bottom-e.bottom}};var Al=function(e,t){return{x:Ol(e,t),y:Pl(e,t)}};var Bl=function(e){var t=e.startContainer,n=e.startOffset;if(t.hasChildNodes()&&e.endOffset===n+1){return t.childNodes[n]}return null};var Il=function(e,t){if(e.nodeType===1&&e.hasChildNodes()){if(t>=e.childNodes.length){t=e.childNodes.length-1}e=e.childNodes[t]}return e};var Ll=new RegExp("[-------"+"-------"+"-------"+"-----"+"------"+"----"+"-----"+"-----"+"-----"+"-------"+"--------"+"-------"+"-------"+"-----"+"-------"+"-------"+"--------"+"--------"+"------"+"------"+"----]");var Ml=function(e){return typeof e==="string"&&e.charCodeAt(0)>=768&&Ll.test(e)};var Fl=function(e,t,n){return e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none()};var Hl=function(e,t,n,r){return e.isSome()&&t.isSome()&&n.isSome()?b.some(r(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none()};var zl=[].slice;var Ul=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=zl.call(arguments);return function(e){for(var t=0;t<n.length;t++){if(n[t](e)){return true}}return false}};var Wl=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n=zl.call(arguments);return function(e){for(var t=0;t<n.length;t++){if(!n[t](e)){return false}}return true}};var jl={and:Wl,or:Ul};var Vl=jo.isElement;var ql=pl;var $l=jo.matchStyleValues("display","block table");var Kl=jo.matchStyleValues("float","left right");var Yl=jl.and(Vl,ql,f(Kl));var Xl=f(jo.matchStyleValues("white-space","pre pre-line pre-wrap"));var Gl=jo.isText;var Jl=jo.isBr;var Zl=Bu.nodeIndex;var Ql=Il;var ef=function(e){return"createRange"in e?e.createRange():Bu.DOM.createRng()};var tf=function(e){return e&&/[\r\n\t ]/.test(e)};var nf=function(e){return!!e.setStart&&!!e.setEnd};var rf=function(e){var t=e.startContainer;var n=e.startOffset;var r;if(tf(e.toString())&&Xl(t.parentNode)&&jo.isText(t)){r=t.data;if(tf(r[n-1])||tf(r[n+1])){return true}}return false};var af=function(e){var t=e.ownerDocument;var n=ef(t);var r=t.createTextNode("");var i=e.parentNode;var a;i.insertBefore(r,e);n.setStart(r,0);n.setEnd(r,1);a=Sl(n.getBoundingClientRect());i.removeChild(r);return a};var of=function(e){var t=e.startContainer;var n=e.endContainer;var r=e.startOffset;var i=e.endOffset;if(t===n&&jo.isText(n)&&r===0&&i===1){var a=e.cloneRange();a.setEndAfter(n);return sf(a)}else{return null}};var uf=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0};var sf=function(e){var t,n;n=e.getClientRects();if(n.length>0){t=Sl(n[0])}else{t=Sl(e.getBoundingClientRect())}if(!nf(e)&&Jl(e)&&uf(t)){return af(e)}if(uf(t)&&nf(e)){return of(e)}return t};var lf=function(e,t){var n=Tl(e,t);n.width=1;n.right=n.left+1;return n};var ff=function(e){var t=[];var n,r;var i=function(e){if(e.height===0){return}if(t.length>0){if(El(e,t[t.length-1])){return}}t.push(e)};var a=function(e,n){var r=ef(e.ownerDocument);if(n<e.data.length){if(Ml(e.data[n])){return t}if(Ml(e.data[n-1])){r.setStart(e,n);r.setEnd(e,n+1);if(!rf(r)){i(lf(sf(r),false));return t}}}if(n>0){r.setStart(e,n-1);r.setEnd(e,n);if(!rf(r)){i(lf(sf(r),false))}}if(n<e.data.length){r.setStart(e,n);r.setEnd(e,n+1);if(!rf(r)){i(lf(sf(r),true))}}};if(Gl(e.container())){a(e.container(),e.offset());return t}if(Vl(e.container())){if(e.isAtEnd()){r=Ql(e.container(),e.offset());if(Gl(r)){a(r,r.data.length)}if(Yl(r)&&!Jl(r)){i(lf(sf(r),false))}}else{r=Ql(e.container(),e.offset());if(Gl(r)){a(r,0)}if(Yl(r)&&e.isAtEnd()){i(lf(sf(r),false));return t}n=Ql(e.container(),e.offset()-1);if(Yl(n)&&!Jl(n)){if($l(n)||$l(r)||!Yl(r)){i(lf(sf(n),false))}}if(Yl(r)){i(lf(sf(r),true))}}}return t};function cf(e,t,n){var r=function(){if(Gl(e)){return t===0}return t===0};var i=function(){if(Gl(e)){return t>=e.data.length}return t>=e.childNodes.length};var a=function(){var n;n=ef(e.ownerDocument);n.setStart(e,t);n.setEnd(e,t);return n};var o=function(){if(!n){n=ff(cf(e,t))}return n};var s=function(){return o().length>0};var l=function(n){return n&&e===n.container()&&t===n.offset()};var f=function(n){return Ql(e,n?t-1:t)};return{container:u(e),offset:u(t),toRange:a,getClientRects:o,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:l,getNode:f}}(function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)};e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)};e.after=function(t){return e(t.parentNode,Zl(t)+1)};e.before=function(t){return e(t.parentNode,Zl(t))};e.isAbove=function(e,t){return Fl(J(t.getClientRects()),Z(e.getClientRects()),Rl).getOr(false)};e.isBelow=function(e,t){return Fl(Z(t.getClientRects()),J(e.getClientRects()),_l).getOr(false)};e.isAtStart=function(e){return e?e.isAtStart():false};e.isAtEnd=function(e){return e?e.isAtEnd():false};e.isTextPosition=function(e){return e?jo.isText(e.container()):false};e.isElementPosition=function(t){return e.isTextPosition(t)===false}})(cf||(cf={}));var df=cf;var vf=jo.isText;var mf=jo.isBogus;var gf=Bu.nodeIndex;var pf=function(e){var t=e.parentNode;if(mf(t)){return pf(t)}return t};var hf=function(e){if(!e){return[]}return En.reduce(e.childNodes,(function(e,t){if(mf(t)&&t.nodeName!=="BR"){e=e.concat(hf(t))}else{e.push(t)}return e}),[])};var bf=function(e,t){while(e=e.previousSibling){if(!vf(e)){break}t+=e.data.length}return t};var yf=function(e){return function(t){return e===t}};var wf=function(e){var t,n,r;t=hf(pf(e));n=En.findIndex(t,yf(e),e);t=t.slice(0,n+1);r=En.reduce(t,(function(e,n,r){if(vf(n)&&vf(t[r-1])){e++}return e}),0);t=En.filter(t,jo.matchNodeNames(e.nodeName));n=En.findIndex(t,yf(e),e);return n-r};var xf=function(e){var t;if(vf(e)){t="text()"}else{t=e.nodeName.toLowerCase()}return t+"["+wf(e)+"]"};var Cf=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode){if(n&&n(t)){break}r.push(t)}return r};var kf=function(e,t){var n,r,i=[],a,o,u;n=t.container();r=t.offset();if(vf(n)){a=bf(n,r)}else{o=n.childNodes;if(r>=o.length){a="after";r=o.length-1}else{a="before"}n=o[r]}i.push(xf(n));u=Cf(e,n);u=En.filter(u,f(jo.isBogus));i=i.concat(En.map(u,(function(e){return xf(e)})));return i.reverse().join("/")+","+a};var Sf=function(e,t,n){var r=hf(e);r=En.filter(r,(function(e,t){return!vf(e)||!vf(r[t-1])}));r=En.filter(r,jo.matchNodeNames(t));return r[n]};var Tf=function(e,t){var n=e,r=0,i;while(vf(n)){i=n.data.length;if(t>=r&&t<=r+i){e=n;t=t-r;break}if(!vf(n.nextSibling)){e=n;t=i;break}r+=i;n=n.nextSibling}if(vf(e)&&t>e.data.length){t=e.data.length}return df(e,t)};var Ef=function(e,t){var n,r,i;if(!t){return null}n=t.split(",");t=n[0].split("/");i=n.length>1?n[1]:"before";r=En.reduce(t,(function(e,t){t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!t){return null}if(t[1]==="text()"){t[1]="#text"}return Sf(e,t[1],parseInt(t[2],10))}),e);if(!r){return null}if(!vf(r)){if(i==="after"){i=gf(r)+1}else{i=gf(r)}return df(r.parentNode,i)}return Tf(r,parseInt(i,10))};var Nf=function(e,t){if(jo.isText(t)&&t.data.length===0){e.remove(t)}};var Rf=function(e,t,n){t.insertNode(n);Nf(e,n.previousSibling);Nf(e,n.nextSibling)};var _f=function(e,t,n){var r=b.from(n.firstChild);var i=b.from(n.lastChild);t.insertNode(n);r.each((function(t){return Nf(e,t.previousSibling)}));i.each((function(t){return Nf(e,t.nextSibling)}))};var Df=function(e,t,n){if(jo.isDocumentFragment(n)){_f(e,t,n)}else{Rf(e,t,n)}};var Of=jo.isContentEditableFalse;var Pf=function(e,t,n){var r,i;i=e(t.data.slice(0,n)).length;for(r=t.previousSibling;r&&jo.isText(r);r=r.previousSibling){i+=e(r.data).length}return i};var Af=function(e,t,n,r,i){var a=r[i?"startContainer":"endContainer"];var o=r[i?"startOffset":"endOffset"];var u=[];var s,l=0;var f=e.getRoot();if(jo.isText(a)){u.push(n?Pf(t,a,o):o)}else{s=a.childNodes;if(o>=s.length&&s.length){l=1;o=Math.max(0,s.length-1)}u.push(e.nodeIndex(s[o],n)+l)}for(;a&&a!==f;a=a.parentNode){u.push(e.nodeIndex(a,n))}return u};var Bf=function(e,t,n,r){var i=t.dom,a={};a.start=Af(i,e,n,r,true);if(!t.isCollapsed()){a.end=Af(i,e,n,r,false)}return a};var If=function(e,t,n){var r=0;Hn.each(e.select(t),(function(e){if(e.getAttribute("data-mce-bogus")==="all"){return}if(e===n){return false}r++}));return r};var Lf=function(e,t){var n,r,i;var a=t?"start":"end";n=e[a+"Container"];r=e[a+"Offset"];if(jo.isElement(n)&&n.nodeName==="TR"){i=n.childNodes;n=i[Math.min(t?r:r-1,i.length-1)];if(n){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}}};var Mf=function(e){Lf(e,true);Lf(e,false);return e};var Ff=function(e,t){var n;if(jo.isElement(e)){e=Il(e,t);if(Of(e)){return e}}if(Gs(e)){if(jo.isText(e)&&Ys(e)){e=e.parentNode}n=e.previousSibling;if(Of(n)){return n}n=e.nextSibling;if(Of(n)){return n}}};var Hf=function(e){return Ff(e.startContainer,e.startOffset)||Ff(e.endContainer,e.endOffset)};var zf=function(e,t,n){var r=n.getNode();var i=r?r.nodeName:null;var a=n.getRng();if(Of(r)||i==="IMG"){return{name:i,index:If(n.dom,i,r)}}var o=Hf(a);if(o){i=o.tagName;return{name:i,index:If(n.dom,i,o)}}return Bf(e,n,t,a)};var Uf=function(e){var t=e.getRng();return{start:kf(e.dom.getRoot(),df.fromRangeStart(t)),end:kf(e.dom.getRoot(),df.fromRangeEnd(t))}};var Wf=function(e){return{rng:e.getRng()}};var jf=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)};var Vf=function(e,t){var n=e.dom;var r=e.getRng();var i=n.uniqueId();var a=e.isCollapsed();var o=e.getNode();var u=o.nodeName;if(u==="IMG"){return{name:u,index:If(n,u,o)}}var s=Mf(r.cloneRange());if(!a){s.collapse(false);var l=jf(n,i+"_end",t);Df(n,s,l)}r=Mf(r);r.collapse(true);var f=jf(n,i+"_start",t);Df(n,r,f);e.moveToBookmark({id:i,keep:1});return{id:i}};var qf=function(e,t,n){if(t===2){return zf(qs.trim,n,e)}else if(t===3){return Uf(e)}else if(t){return Wf(e)}else{return Vf(e,false)}};var $f={getBookmark:qf,getUndoBookmark:l(zf,s,true),getPersistentBookmark:Vf};var Kf="_mce_caret";var Yf=function(e){return jo.isElement(e)&&e.id===Kf};var Xf=function(e,t){while(t&&t!==e){if(t.id===Kf){return t}t=t.parentNode}return null};var Gf=jo.isElement;var Jf=jo.isText;var Zf=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};var Qf=function(e){try{return e.nodeValue}catch(e){return""}};var ec=function(e,t){if(t.length===0){Zf(e)}else{e.nodeValue=t}};var tc=function(e){var t=qs.trim(e);return{count:e.length-t.length,text:t}};var nc=function(e,t){sc(e);return t};var rc=function(e,t){var n=tc(e.data.substr(0,t.offset()));var r=tc(e.data.substr(t.offset()));var i=n.text+r.text;if(i.length>0){ec(e,i);return df(e,t.offset()-n.count)}else{return t}};var ic=function(e,t){var n=t.container();var r=P(Q(n.childNodes),e).map((function(e){return e<t.offset()?df(n,t.offset()-1):t})).getOr(t);sc(e);return r};var ac=function(e,t){return Jf(e)&&t.container()===e?rc(e,t):nc(e,t)};var oc=function(e,t){return t.container()===e.parentNode?ic(e,t):nc(e,t)};var uc=function(e,t){return df.isTextPosition(t)?ac(e,t):oc(e,t)};var sc=function(e){if(Gf(e)&&Gs(e)){if(Js(e)){e.removeAttribute("data-mce-caret")}else{Zf(e)}}if(Jf(e)){var t=qs.trim(Qf(e));ec(e,t)}};var lc={removeAndReposition:uc,remove:sc};var fc=ui.detect().browser;var cc=jo.isContentEditableFalse;var dc=function(e){return jo.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)};var vc=function(e,t,n){var r=Tl(t.getBoundingClientRect(),n);var i,a,o,u,s;if(e.tagName==="BODY"){i=e.ownerDocument.documentElement;a=e.scrollLeft||i.scrollLeft;o=e.scrollTop||i.scrollTop}else{s=e.getBoundingClientRect();a=e.scrollLeft-s.left;o=e.scrollTop-s.top}r.left+=a;r.right+=a;r.top+=o;r.bottom+=o;r.width=1;u=t.offsetWidth-t.clientWidth;if(u>0){if(n){u*=-1}r.left+=u;r.right+=u}return r};var mc=function(e){var t,n,r,i,a;t=ar("*[contentEditable=false]",e);for(i=0;i<t.length;i++){n=t[i];r=n.previousSibling;if(il(r)){a=r.data;if(a.length===1){r.parentNode.removeChild(r)}else{r.deleteData(a.length-1,1)}}r=n.nextSibling;if(rl(r)){a=r.data;if(a.length===1){r.parentNode.removeChild(r)}else{r.deleteData(0,1)}}}};var gc=function(e,t,n){var r=es(b.none());var i,a;var o=function(n,i){var o,l;u();if(dc(i)){return null}if(t(i)){a=nl("p",i,n);o=vc(e,i,n);ar(a).css("top",o.top);var f=ar('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(o).appendTo(e)[0];r.set(b.some({caret:f,element:i,before:n}));r.get().each((function(e){if(n){ar(e.caret).addClass("mce-visual-caret-before")}}));s();l=i.ownerDocument.createRange();l.setStart(a,0);l.setEnd(a,0)}else{a=Zs(i,n);l=i.ownerDocument.createRange();if(cc(a.nextSibling)){l.setStart(a,0);l.setEnd(a,0)}else{l.setStart(a,1);l.setEnd(a,1)}return l}return l};var u=function(){mc(e);if(a){lc.remove(a);a=null}r.get().each((function(e){ar(e.caret).remove();r.set(b.none())}));clearInterval(i)};var s=function(){i=Me.setInterval((function(){if(n()){ar("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden")}else{ar("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}}),500)};var l=function(){r.get().each((function(t){var n=vc(e,t.element,t.before);ar(t.caret).css(n)}))};var f=function(){return Me.clearInterval(i)};var c=function(){return".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}"};return{show:o,hide:u,getCss:c,reposition:l,destroy:f}};var pc=function(){return fc.isIE()||fc.isEdge()||fc.isFirefox()};var hc=function(e){return cc(e)||jo.isTable(e)&&pc()};var bc=jo.isContentEditableFalse;var yc=jo.matchStyleValues("display","block table table-cell table-caption list-item");var wc=Gs;var xc=Ys;var Cc=jo.isElement;var kc=pl;var Sc=function(e){return e>0};var Tc=function(e){return e<0};var Ec=function(e,t){var n;while(n=e(t)){if(!xc(n)){return n}}return null};var Nc=function(e,t,n,r,i){var a=new to(e,r);if(Tc(t)){if(bc(e)||xc(e)){e=Ec(a.prev,true);if(n(e)){return e}}while(e=Ec(a.prev,i)){if(n(e)){return e}}}if(Sc(t)){if(bc(e)||xc(e)){e=Ec(a.next,true);if(n(e)){return e}}while(e=Ec(a.next,i)){if(n(e)){return e}}}return null};var Rc=function(e,t){while(e&&e!==t){if(yc(e)){return e}e=e.parentNode}return null};var _c=function(e,t,n){return Rc(e.container(),n)===Rc(t.container(),n)};var Dc=function(e,t){var n,r;if(!t){return null}n=t.container();r=t.offset();if(!Cc(n)){return null}return n.childNodes[r+e]};var Oc=function(e,t){var n=t.ownerDocument.createRange();if(e){n.setStartBefore(t);n.setEndBefore(t)}else{n.setStartAfter(t);n.setEndAfter(t)}return n};var Pc=function(e,t,n){return Rc(t,e)===Rc(n,e)};var Ac=function(e,t,n){var r,i;if(e){i="previousSibling"}else{i="nextSibling"}while(n&&n!==t){r=n[i];if(wc(r)){r=r[i]}if(bc(r)){if(Pc(t,r,n)){return r}break}if(kc(r)){break}n=n.parentNode}return null};var Bc=l(Oc,true);var Ic=l(Oc,false);var Lc=function(e,t,n){var r,i,a,o;var u=l(Ac,true,t);var s=l(Ac,false,t);i=n.startContainer;a=n.startOffset;if(Ys(i)){if(!Cc(i)){i=i.parentNode}o=i.getAttribute("data-mce-caret");if(o==="before"){r=i.nextSibling;if(hc(r)){return Bc(r)}}if(o==="after"){r=i.previousSibling;if(hc(r)){return Ic(r)}}}if(!n.collapsed){return n}if(jo.isText(i)){if(wc(i)){if(e===1){r=s(i);if(r){return Bc(r)}r=u(i);if(r){return Ic(r)}}if(e===-1){r=u(i);if(r){return Ic(r)}r=s(i);if(r){return Bc(r)}}return n}if(il(i)&&a>=i.data.length-1){if(e===1){r=s(i);if(r){return Bc(r)}}return n}if(rl(i)&&a<=1){if(e===-1){r=u(i);if(r){return Ic(r)}}return n}if(a===i.data.length){r=s(i);if(r){return Bc(r)}return n}if(a===0){r=u(i);if(r){return Ic(r)}return n}}return n};var Mc=function(e,t){return b.from(Dc(e?0:-1,t)).filter(bc)};var Fc=function(e,t,n){var r=Lc(e,t,n);if(e===-1){return cf.fromRangeStart(r)}return cf.fromRangeEnd(r)};var Hc=function(e){return b.from(e.getNode()).map(vi.fromDom)};var zc=function(e){return b.from(e.getNode(true)).map(vi.fromDom)};var Uc=function(e,t){while(t=e(t)){if(t.isVisible()){return t}}return t};var Wc=function(e,t){var n=_c(e,t);if(!n&&jo.isBr(e.getNode())){return true}return n};var jc;(function(e){e[e["Backwards"]=-1]="Backwards";e[e["Forwards"]=1]="Forwards"})(jc||(jc={}));var Vc=jo.isContentEditableFalse;var qc=jo.isText;var $c=jo.isElement;var Kc=jo.isBr;var Yc=pl;var Xc=xl;var Gc=Cl;var Jc=function(e,t){var n=[];while(e&&e!==t){n.push(e);e=e.parentNode}return n};var Zc=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){return e.childNodes[t]}return null};var Qc=function(e,t){if(Sc(e)){if(Yc(t.previousSibling)&&!qc(t.previousSibling)){return df.before(t)}if(qc(t)){return df(t,0)}}if(Tc(e)){if(Yc(t.nextSibling)&&!qc(t.nextSibling)){return df.after(t)}if(qc(t)){return df(t,t.data.length)}}if(Tc(e)){if(Kc(t)){return df.before(t)}return df.after(t)}return df.before(t)};var ed=function(e,t){var n=t.nextSibling;if(n&&Yc(n)){if(qc(n)){return df(n,0)}else{return df.before(n)}}else{return td(jc.Forwards,df.after(t),e)}};var td=function(e,t,n){var r,i,a;var o,s;if(!$c(n)||!t){return null}if(t.isEqual(df.after(n))&&n.lastChild){s=df.after(n.lastChild);if(Tc(e)&&Yc(n.lastChild)&&$c(n.lastChild)){return Kc(n.lastChild)?df.before(n.lastChild):s}}else{s=t}var l=s.container();var f=s.offset();if(qc(l)){if(Tc(e)&&f>0){return df(l,--f)}if(Sc(e)&&f<l.length){return df(l,++f)}r=l}else{if(Tc(e)&&f>0){i=Zc(l,f-1);if(Yc(i)){if(!Xc(i)){a=Nc(i,e,Gc,i);if(a){if(qc(a)){return df(a,a.data.length)}return df.after(a)}}if(qc(i)){return df(i,i.data.length)}return df.before(i)}}if(Sc(e)&&f<l.childNodes.length){i=Zc(l,f);if(Yc(i)){if(Kc(i)){return ed(n,i)}if(!Xc(i)){a=Nc(i,e,Gc,i);if(a){if(qc(a)){return df(a,0)}return df.before(a)}}if(qc(i)){return df(i,0)}return df.after(i)}}r=i?i:s.getNode()}if(Sc(e)&&s.isAtEnd()||Tc(e)&&s.isAtStart()){r=Nc(r,e,u(true),n,true);if(Gc(r,n)){return Qc(e,r)}}i=Nc(r,e,Gc,n);o=En.last(H(Jc(l,n),Vc));if(o&&(!i||!o.contains(i))){if(Sc(e)){s=df.after(o)}else{s=df.before(o)}return s}if(i){return Qc(e,i)}return null};var nd=function(e){return{next:function(t){return td(jc.Forwards,t,e)},prev:function(t){return td(jc.Backwards,t,e)}}};var rd=function(e,t,n){var r=e?df.before(n):df.after(n);return fd(e,t,r)};var id=function(e){return jo.isBr(e)?df.before(e):df.after(e)};var ad=function(e){if(df.isTextPosition(e)){return e.offset()===0}else{return pl(e.getNode())}};var od=function(e){if(df.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}else{return pl(e.getNode(true))}};var ud=function(e,t){return!df.isTextPosition(e)&&!df.isTextPosition(t)&&e.getNode()===t.getNode(true)};var sd=function(e){return!df.isTextPosition(e)&&jo.isBr(e.getNode())};var ld=function(e,t,n){if(e){return!ud(t,n)&&!sd(t)&&od(t)&&ad(n)}else{return!ud(n,t)&&ad(t)&&od(n)}};var fd=function(e,t,n){var r=nd(t);return b.from(e?r.next(n):r.prev(n))};var cd=function(e,t,n){return fd(e,t,n).bind((function(r){if(_c(n,r,t)&&ld(e,n,r)){return fd(e,t,r)}else{return b.some(r)}}))};var dd=function(e,t,n,r){return cd(e,t,n).bind((function(n){return r(n)?dd(e,t,n,r):b.some(n)}))};var vd=function(e,t){var n=e?t.firstChild:t.lastChild;if(jo.isText(n)){return b.some(df(n,e?0:n.data.length))}else if(n){if(pl(n)){return b.some(e?df.before(n):id(n))}else{return rd(e,t,n)}}else{return b.none()}};var md=l(fd,true);var gd=l(fd,false);var pd={fromPosition:fd,nextPosition:md,prevPosition:gd,navigate:cd,navigateIgnore:dd,positionIn:vd,firstPositionIn:l(vd,true),lastPositionIn:l(vd,false)};var hd=function(e){return typeof e.start==="string"};var bd=function(e){return e.hasOwnProperty("rng")};var yd=function(e){return e.hasOwnProperty("id")};var wd=function(e){return e.hasOwnProperty("name")};var xd=function(e){return Hn.isArray(e.start)};var Cd=function(e,t){if(jo.isElement(t)&&e.isBlock(t)&&!t.innerHTML&&!Ne.ie){t.innerHTML='<br data-mce-bogus="1" />'}return t};var kd=function(e,t){var n,r;n=e.createRng();r=Ef(e.getRoot(),t.start);n.setStart(r.container(),r.offset());r=Ef(e.getRoot(),t.end);n.setEnd(r.container(),r.offset());return n};var Sd=function(e,t){var n=e.ownerDocument.createTextNode(qs.ZWSP);e.appendChild(n);t.setStart(n,0);t.setEnd(n,0)};var Td=function(e){return e.hasChildNodes()===false};var Ed=function(e,t){return pd.lastPositionIn(e).fold((function(){return false}),(function(e){t.setStart(e.container(),e.offset());t.setEnd(e.container(),e.offset());return true}))};var Nd=function(e,t,n){if(Td(t)&&Xf(e,t)){Sd(t,n);return true}else{return false}};var Rd=function(e,t,n,r){var i=n[t?"start":"end"];var a,o,u,s;var l=e.getRoot();if(i){u=i[0];for(o=l,a=i.length-1;a>=1;a--){s=o.childNodes;if(Nd(l,o,r)){return true}if(i[a]>s.length-1){if(Nd(l,o,r)){return true}return Ed(o,r)}o=s[i[a]]}if(o.nodeType===3){u=Math.min(i[0],o.nodeValue.length)}if(o.nodeType===1){u=Math.min(i[0],o.childNodes.length)}if(t){r.setStart(o,u)}else{r.setEnd(o,u)}}return true};var _d=function(e){return jo.isText(e)&&e.data.length>0};var Dd=function(e,t,n){var r=e.get(n.id+"_"+t),i,a,o,u;var s=n.keep;var l,f;if(r){i=r.parentNode;if(t==="start"){if(!s){a=e.nodeIndex(r)}else{if(r.hasChildNodes()){i=r.firstChild;a=1}else if(_d(r.nextSibling)){i=r.nextSibling;a=0}else if(_d(r.previousSibling)){i=r.previousSibling;a=r.previousSibling.data.length}else{i=r.parentNode;a=e.nodeIndex(r)+1}}l=i;f=a}else{if(!s){a=e.nodeIndex(r)}else{if(r.hasChildNodes()){i=r.firstChild;a=1}else if(_d(r.previousSibling)){i=r.previousSibling;a=r.previousSibling.data.length}else{i=r.parentNode;a=e.nodeIndex(r)}}l=i;f=a}if(!s){u=r.previousSibling;o=r.nextSibling;Hn.each(Hn.grep(r.childNodes),(function(e){if(jo.isText(e)){e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")}}));while(r=e.get(n.id+"_"+t)){e.remove(r,true)}if(u&&o&&u.nodeType===o.nodeType&&jo.isText(u)&&!Ne.opera){a=u.nodeValue.length;u.appendData(o.nodeValue);e.remove(o);if(t==="start"){l=u;f=a}else{l=u;f=a}}}return b.some(df(l,f))}else{return b.none()}};var Od=function(e,t){return e.isSome()?e:t};var Pd=function(e,t){var n=e.createRng();if(Rd(e,true,t,n)&&Rd(e,false,t,n)){return b.some(n)}else{return b.none()}};var Ad=function(e,t){var n=Dd(e,"start",t);var r=Dd(e,"end",t);return Fl(n,Od(r,n),(function(t,n){var r=e.createRng();r.setStart(Cd(e,t.container()),t.offset());r.setEnd(Cd(e,n.container()),n.offset());return r}))};var Bd=function(e,t){return b.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();n.selectNode(t);return n}))};var Id=function(e,t){var n=e.dom;if(t){if(xd(t)){return Pd(n,t)}else if(hd(t)){return b.some(kd(n,t))}else if(yd(t)){return Ad(n,t)}else if(wd(t)){return Bd(n,t)}else if(bd(t)){return b.some(t.rng)}}return b.none()};var Ld={resolve:Id};var Md=function(e,t,n){return $f.getBookmark(e,t,n)};var Fd=function(e,t){Ld.resolve(e,t).each((function(t){e.setRng(t)}))};var Hd=function(e){return jo.isElement(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};var zd={getBookmark:Md,moveToBookmark:Fd,isBookmarkNode:Hd};var Ud=function(e){return e&&/^(IMG)$/.test(e.nodeName)};var Wd=function(e,t,n){var r=n.startOffset;var i=n.startContainer,a,o,u;if(n.startContainer===n.endContainer){if(Ud(n.startContainer.childNodes[n.startOffset])){return}}if(i.nodeType===1){u=i.childNodes;if(r<u.length){i=u[r];a=new to(i,e.getParent(i,e.isBlock))}else{i=u[u.length-1];a=new to(i,e.getParent(i,e.isBlock));a.next(true)}for(o=a.current();o;o=a.next()){if(o.nodeType===3&&!$d(o)){n.setStart(o,0);t.setRng(n);return}}}};var jd=function(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t]){if(e.nodeType===1||!$d(e)){return e}}}};var Vd=function(e,t){if(t.nodeType){t=t.nodeName}return!!e.schema.getTextBlockElements()[t.toLowerCase()]};var qd=function(e,t,n){return e.schema.isValidChild(t,n)};var $d=function(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)};var Kd=function(e,t){if(typeof e!=="string"){e=e(t)}else if(t){e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))}return e};var Yd=function(e,t){e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()===t.toLowerCase()};var Xd=function(e,t,n){if(n==="color"||n==="backgroundColor"){t=e.toHex(t)}if(n==="fontWeight"&&t===700){t="bold"}if(n==="fontFamily"){t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}return""+t};var Gd=function(e,t,n){return Xd(e,e.getStyle(t,n),n)};var Jd=function(e,t){var n;e.getParent(t,(function(t){n=e.getStyle(t,"text-decoration");return n&&n!=="none"}));return n};var Zd=function(e,t,n){return e.getParents(t,n,e.getRoot())};var Qd={isInlineBlock:Ud,moveStart:Wd,getNonWhiteSpaceSibling:jd,isTextBlock:Vd,isValid:qd,isWhiteSpaceNode:$d,replaceVars:Kd,isEq:Yd,normalizeStyleValue:Xd,getStyle:Gd,getTextDecoration:Jd,getParents:Zd};var ev=zd.isBookmarkNode;var tv=Qd.getParents,nv=Qd.isWhiteSpaceNode,rv=Qd.isTextBlock;var iv=function(e,t){if(typeof t==="undefined"){t=e.nodeType===3?e.length:e.childNodes.length}while(e&&e.hasChildNodes()){e=e.childNodes[t];if(e){t=e.nodeType===3?e.length:e.childNodes.length}}return{node:e,offset:t}};var av=function(e,t){var n=iv(e,t);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling){n=iv(n.node.previousSibling)}if(n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "){if(n.offset>1){e=n.node;e.splitText(n.offset-1)}}}return e};var ov=function(e){return e.nodeName==="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling};var uv=function(e,t){var n=t;while(n){if(n.nodeType===1&&e.getContentEditable(n)){return e.getContentEditable(n)==="false"?n:t}n=n.parentNode}return t};var sv=function(e,t,n,r){var i,a;var o=n.nodeValue;if(typeof r==="undefined"){r=e?o.length:0}if(e){i=o.lastIndexOf(" ",r);a=o.lastIndexOf("",r);i=i>a?i:a;if(i!==-1&&!t&&(i<r||!e)&&i<=o.length){i++}}else{i=o.indexOf(" ",r);a=o.indexOf("",r);i=i!==-1&&(a===-1||i<a)?i:a}return i};var lv=function(e,t,n,r,i,a){var o,u,s,l;if(n.nodeType===3){s=sv(i,a,n,r);if(s!==-1){return{container:n,offset:s}}l=n}o=new to(n,e.getParent(n,e.isBlock)||t);while(u=o[i?"prev":"next"]()){if(u.nodeType===3&&!ev(u.parentNode)){l=u;s=sv(i,a,u);if(s!==-1){return{container:u,offset:s}}}else if(e.isBlock(u)||Qd.isEq(u,"BR")){break}}if(l){if(i){r=0}else{r=l.length}return{container:l,offset:r}}};var fv=function(e,t,n,r,i){var a,o,u,s;if(r.nodeType===3&&r.nodeValue.length===0&&r[i]){r=r[i]}a=tv(e,r);for(o=0;o<a.length;o++){for(u=0;u<t.length;u++){s=t[u];if("collapsed"in s&&s.collapsed!==n.collapsed){continue}if(e.is(a[o],s.selector)){return a[o]}}}return r};var cv=function(e,t,n,r){var i;var a=e.dom;var o=a.getRoot();if(!t[0].wrapper){i=a.getParent(n,t[0].block,o)}if(!i){var u=a.getParent(n,"LI,TD,TH");i=a.getParent(n.nodeType===3?n.parentNode:n,(function(t){return t!==o&&rv(e,t)}),u)}if(i&&t[0].wrapper){i=tv(a,i,"ul,ol").reverse()[0]||i}if(!i){i=n;while(i[r]&&!a.isBlock(i[r])){i=i[r];if(Qd.isEq(i,"br")){break}}}return i||n};var dv=function(e,t,n,r,i,a,o){var u,s,l,f,c;u=s=o?n:i;f=o?"previousSibling":"nextSibling";c=e.getRoot();if(u.nodeType===3&&!nv(u)){if(o?r>0:a<u.nodeValue.length){return u}}while(true){if(!t[0].block_expand&&e.isBlock(s)){return s}for(l=s[f];l;l=l[f]){if(!ev(l)&&!nv(l)&&!ov(l)){return s}}if(s===c||s.parentNode===c){u=s;break}s=s.parentNode}return u};var vv=function(e,t,n,r){var i,a=t.startContainer,o=t.startOffset,u=t.endContainer,s=t.endOffset;var l=e.dom;if(a.nodeType===1&&a.hasChildNodes()){a=Il(a,o);if(a.nodeType===3){o=0}}if(u.nodeType===1&&u.hasChildNodes()){u=Il(u,t.collapsed?s:s-1);if(u.nodeType===3){s=u.nodeValue.length}}a=uv(l,a);u=uv(l,u);if(ev(a.parentNode)||ev(a)){a=ev(a)?a:a.parentNode;if(t.collapsed){a=a.previousSibling||a}else{a=a.nextSibling||a}if(a.nodeType===3){o=t.collapsed?a.length:0}}if(ev(u.parentNode)||ev(u)){u=ev(u)?u:u.parentNode;if(t.collapsed){u=u.nextSibling||u}else{u=u.previousSibling||u}if(u.nodeType===3){s=t.collapsed?0:u.length}}if(t.collapsed){i=lv(l,e.getBody(),a,o,true,r);if(i){a=i.container;o=i.offset}i=lv(l,e.getBody(),u,s,false,r);if(i){u=i.container;s=i.offset}}if(n[0].inline){u=r?u:av(u,s)}if(n[0].inline||n[0].block_expand){if(!n[0].inline||(a.nodeType!==3||o===0)){a=dv(l,n,a,o,u,s,true)}if(!n[0].inline||(u.nodeType!==3||s===u.nodeValue.length)){u=dv(l,n,a,o,u,s,false)}}if(n[0].selector&&n[0].expand!==false&&!n[0].inline){a=fv(l,n,t,a,"previousSibling");u=fv(l,n,t,u,"nextSibling")}if(n[0].block||n[0].selector){a=cv(e,n,a,"previousSibling");u=cv(e,n,u,"nextSibling");if(n[0].block){if(!l.isBlock(a)){a=dv(l,n,a,o,u,s,true)}if(!l.isBlock(u)){u=dv(l,n,a,o,u,s,false)}}}if(a.nodeType===1){o=l.nodeIndex(a);a=a.parentNode}if(u.nodeType===1){s=l.nodeIndex(u)+1;u=u.parentNode}return{startContainer:a,startOffset:o,endContainer:u,endOffset:s}};var mv={expandRng:vv};var gv=Hn.each;var pv=function(e,t){var n=e.childNodes;t--;if(t>n.length-1){t=n.length-1}else if(t<0){t=0}return n[t]||e};var hv=function(e,t,n){var r=t.startContainer;var i=t.startOffset;var a=t.endContainer;var o=t.endOffset;var u;var s;var l;var f;var c;var d;var v;v=e.select("td[data-mce-selected],th[data-mce-selected]");if(v.length>0){gv(v,(function(e){n([e])}));return}var m=function(e){var t;t=e[0];if(t.nodeType===3&&t===r&&i>=t.nodeValue.length){e.splice(0,1)}t=e[e.length-1];if(o===0&&e.length>0&&t===a&&t.nodeType===3){e.splice(e.length-1,1)}return e};var g=function(e,t,n){var r=[];for(;e&&e!==n;e=e[t]){r.push(e)}return r};var p=function(e,t){do{if(e.parentNode===t){return e}e=e.parentNode}while(e)};var h=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(f=e,c=f.parentNode;f&&f!==t;f=c){c=f.parentNode;d=g(f===e?f:f[i],i);if(d.length){if(!r){d.reverse()}n(m(d))}}};if(r.nodeType===1&&r.hasChildNodes()){r=r.childNodes[i]}if(a.nodeType===1&&a.hasChildNodes()){a=pv(a,o)}if(r===a){return n(m([r]))}u=e.findCommonAncestor(r,a);for(f=r;f;f=f.parentNode){if(f===a){return h(r,u,true)}if(f===u){break}}for(f=a;f;f=f.parentNode){if(f===r){return h(a,u)}if(f===u){break}}s=p(r,u)||r;l=p(a,u)||a;h(r,s,true);d=g(s===r?s:s.nextSibling,"nextSibling",l===a?l.nextSibling:l);if(d.length){n(m(d))}h(a,l)};var bv={walk:hv};var yv=function(){return"\ufeff"};function wv(e,t){var n=function(n){if(!e(n)){throw new Error("Can only get "+t+" value of a "+t+" node")}return r(n).getOr("")};var r=function(t){return e(t)?b.from(t.dom().nodeValue):b.none()};var i=function(n,r){if(!e(n)){throw new Error("Can only set raw "+t+" value of a "+t+" node")}n.dom().nodeValue=r};return{get:n,getOption:r,set:i}}var xv=wv(Di,"text");var Cv=function(e){return xv.get(e)};var kv=function(e){return Di(e)&&Cv(e)===yv()};var Sv=function(e,t,n,r){return wa(t).fold((function(){return"skipping"}),(function(i){if(r==="br"||kv(t)){return"valid"}else if(Ss(t)){return"existing"}else if(Yf(t)){return"caret"}else if(!Qd.isValid(e,n,r)||!Qd.isValid(e,Ei(i),n)){return"invalid-child"}else{return"valid"}}))};var Tv=function(e){return e.startContainer.nodeType===3&&e.startContainer.nodeValue.length>=e.startOffset&&e.startContainer.nodeValue[e.startOffset]===""};var Ev=function(e,t){var n=mv.expandRng(e,t,[{inline:true}],Tv(t));t.setStart(n.startContainer,n.startOffset);t.setEnd(n.endContainer,n.endOffset);e.selection.setRng(t)};var Nv=function(e,t,n,r){var i=t.uid,a=i===void 0?Bs("mce-annotation"):i,o=Os(t,["uid"]);var u=vi.fromTag("span",e);ss(u,ws());Ui(u,""+Cs(),a);Ui(u,""+xs(),n);var s=r(a,o),l=s.attributes,f=l===void 0?{}:l,c=s.classes,d=c===void 0?[]:c;Wi(u,f);Is(u,d);return u};var Rv=function(e,t,n,r,i){var a=[];var o=Nv(e.getDoc(),i,n,r);var u=es(b.none());var s=function(){u.set(b.none())};var l=function(){return u.get().getOrThunk((function(){var e=Ms(o);a.push(e);u.set(b.some(e));return e}))};var f=function(e){L(e,c)};var c=function(t){var n=Sv(e,t,"span",Ei(t));switch(n){case"invalid-child":{s();var r=Ea(t);f(r);s();break}case"valid":{var i=l();$u(t,i);break}case"skipping":case"existing":case"caret":}};var d=function(e){var t=I(e,vi.fromDom);f(t)};bv.walk(e.dom,t,(function(e){s();d(e)}));return a};var _v=function(e,t,n,r){e.undoManager.transact((function(){var i=e.selection.getRng();if(i.collapsed){Ev(e,i)}if(e.selection.getRng().collapsed){var a=Nv(e.getDoc(),r,t,n.decorate);Us(a,"");e.selection.getRng().insertNode(a.dom());e.selection.select(a.dom())}else{var o=$f.getPersistentBookmark(e.selection,false);var u=e.selection.getRng();Rv(e,u,t,n.decorate,r);e.selection.moveToBookmark(o)}}))};function Dv(e){var t=_s();Rs(e,t);var n=Ns(e);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each((function(t){_v(e,n,t,r)}))},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){ks(e,b.some(t)).each((function(e){var t=e.elements;L(t,Ju)}))},getAll:function(t){var n=Es(e,t);return Bi(n,(function(e){return I(e,(function(e){return e.dom()}))}))}}}var Ov=function(e){return e.firstChild&&e.firstChild===e.lastChild};var Pv=function(e){return e.name==="br"||e.value===""};var Av=function(e,t){var n=e.getBlockElements();return n[t.name]&&Ov(t)&&Pv(t.firstChild)};var Bv=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Av(e,t))};var Iv=function(e,t){var n=t.firstChild;var r=t.lastChild;if(n&&n.name==="meta"){n=n.next}if(r&&r.attr("id")==="mce_marker"){r=r.prev}if(Bv(e,r)){r=r.prev}if(!n||n!==r){return false}return n.name==="ul"||n.name==="ol"};var Lv=function(e){var t=e.firstChild;var n=e.lastChild;if(t&&t.nodeName==="META"){t.parentNode.removeChild(t)}if(n&&n.id==="mce_marker"){n.parentNode.removeChild(n)}return e};var Mv=function(e,t,n){var r=t.serialize(n);var i=e.createFragment(r);return Lv(i)};var Fv=function(e){return Hn.grep(e.childNodes,(function(e){return e.nodeName==="LI"}))};var Hv=function(e){return e.data===""||jo.isBr(e)};var zv=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&Hv(e.firstChild)};var Uv=function(e){return!e.firstChild||zv(e)};var Wv=function(e){return e.length>0&&Uv(e[e.length-1])?e.slice(0,-1):e};var jv=function(e,t){var n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null};var Vv=function(e,t){return!!jv(e,t)};var qv=function(e,t){var n=t.cloneRange();var r=t.cloneRange();n.setStartBefore(e);r.setEndAfter(e);return[n.cloneContents(),r.cloneContents()]};var $v=function(e,t){var n=df.before(e);var r=nd(t);var i=r.next(n);return i?i.toRange():null};var Kv=function(e,t){var n=df.after(e);var r=nd(t);var i=r.prev(n);return i?i.toRange():null};var Yv=function(e,t,n,r){var i=qv(e,r);var a=e.parentNode;a.insertBefore(i[0],e);Hn.each(t,(function(t){a.insertBefore(t,e)}));a.insertBefore(i[1],e);a.removeChild(e);return Kv(t[t.length-1],n)};var Xv=function(e,t,n){var r=e.parentNode;Hn.each(t,(function(t){r.insertBefore(t,e)}));return $v(e,n)};var Gv=function(e,t,n,r){r.insertAfter(t.reverse(),e);return Kv(t[0],n)};var Jv=function(e,t,n,r){var i=Mv(t,e,r);var a=jv(t,n.startContainer);var o=Wv(Fv(i.firstChild));var u=1,s=2;var l=t.getRoot();var f=function(e){var r=df.fromRangeStart(n);var i=nd(t.getRoot());var o=e===u?i.prev(r):i.next(r);return o?jv(t,o.getNode())!==a:true};if(f(u)){return Xv(a,o,l)}else if(f(s)){return Gv(a,o,l,t)}return Yv(a,o,l,n)};var Zv={isListFragment:Iv,insertAtCaret:Jv,isParentBlockLi:Vv,trimListItems:Wv,listItems:Fv};var Qv=Hn.each;var em=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName){return false}var r=function(t){var n={};Qv(e.getAttribs(t),(function(r){var i=r.nodeName.toLowerCase();if(i.indexOf("_")!==0&&i!=="style"&&i.indexOf("data-")!==0){n[i]=e.getAttrib(t,i)}}));return n};var i=function(e,t){var n,r;for(r in e){if(e.hasOwnProperty(r)){n=t[r];if(typeof n==="undefined"){return false}if(e[r]!==n){return false}delete t[r]}}for(r in t){if(t.hasOwnProperty(r)){return false}}return true};if(!i(r(t),r(n))){return false}if(!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))){return false}return!zd.isBookmarkNode(t)&&!zd.isBookmarkNode(n)}};var tm=function(e){var t=[];var n=e.dom();while(n){t.push(vi.fromDom(n));n=n.lastChild}return t};var nm=function(e){var t=vs(e,"br");var n=H(tm(e).slice(-1),po);if(t.length===n.length){L(n,Gu)}};var rm=function(e){Xu(e);qu(e,vi.fromHtml('<br data-mce-bogus="1">'))};var im=function(e){return Di(e)?Cv(e)==="":po(e)};var am=function(e){return H(Ea(e),im).length===1};var om=function(e){_a(e).each((function(t){Ca(t).each((function(n){if(mo(e)&&po(t)&&mo(n)){Gu(t)}}))}))};var um={removeTrailingBr:nm,fillWithPaddingBr:rm,isPaddedElement:am,trimBlockTrailingBr:om};var sm=Hn.makeMap;function lm(e){var t=[];var n,r,i,a,o;e=e||{};n=e.indent;r=sm(e.indent_before||"");i=sm(e.indent_after||"");a=cu.getEncodeFunc(e.entity_encoding||"raw",e.entities);o=e.element_format==="html";return{start:function(e,u,s){var l,f,c,d;if(n&&r[e]&&t.length>0){d=t[t.length-1];if(d.length>0&&d!=="\n"){t.push("\n")}}t.push("<",e);if(u){for(l=0,f=u.length;l<f;l++){c=u[l];t.push(" ",c.name,'="',a(c.value,true),'"')}}if(!s||o){t[t.length]=">"}else{t[t.length]=" />"}if(s&&n&&i[e]&&t.length>0){d=t[t.length-1];if(d.length>0&&d!=="\n"){t.push("\n")}}},end:function(e){var r;t.push("</",e,">");if(n&&i[e]&&t.length>0){r=t[t.length-1];if(r.length>0&&r!=="\n"){t.push("\n")}}},text:function(e,n){if(e.length>0){t[t.length]=n?e:a(e)}},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,r){if(r){t.push("<?",e," ",a(r),"?>")}else{t.push("<?",e,"?>")}if(n){t.push("\n")}},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}}function fm(e,t){if(t===void 0){t=Cu()}var n=lm(e);e=e||{};e.validate="validate"in e?e.validate:true;var r=function(r){var i,a;a=e.validate;i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild){do{o(e)}while(e=e.next)}}};n.reset();var o=function(e){var r=i[e.type];var u,s,l,f,c,d,v,m,g;if(!r){u=e.name;s=e.shortEnded;l=e.attributes;if(a&&l&&l.length>1){d=[];d.map={};g=t.getElementRule(e.name);if(g){for(v=0,m=g.attributesOrder.length;v<m;v++){f=g.attributesOrder[v];if(f in l.map){c=l.map[f];d.map[f]=c;d.push({name:f,value:c})}}for(v=0,m=l.length;v<m;v++){f=l[v].name;if(!(f in d.map)){c=l.map[f];d.map[f]=c;d.push({name:f,value:c})}}l=d}}n.start(e.name,l,s);if(!s){if(e=e.firstChild){do{o(e)}while(e=e.next)}n.end(u)}}else{r(e)}};if(r.type===1&&!e.inner){o(r)}else{i[11](r)}return n.getContent()};return{serialize:r}}var cm=function(e,t,n,r){var a=i.document.createRange();a.setStart(e,t);a.setEnd(n,r);return a};var dm=function(e){var t=df.fromRangeStart(e);var n=df.fromRangeEnd(e);var r=e.commonAncestorContainer;return pd.fromPosition(false,r,n).map((function(i){if(!_c(t,n,r)&&_c(t,i,r)){return cm(t.container(),t.offset(),i.container(),i.offset())}else{return e}})).getOr(e)};var vm=function(e){return e.collapsed?e:dm(e)};var mm={normalize:vm};var gm=function(e,t){return jo.isText(e)&&e.nodeValue[t-1]===""};var pm=function(e,t){var n,r;n=e.startContainer;r=e.startOffset;var i=function(e){return n[e]&&n[e].nodeType===3};if(n.nodeType===3){if(r>0){t=t.replace(/^&nbsp;/," ")}else if(!i("previousSibling")){t=t.replace(/^ /,"&nbsp;")}if(r<n.length){t=t.replace(/&nbsp;(<br>|)$/," ")}else if(!i("nextSibling")){t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}}return t};var hm=function(e,t){var n,r;n=e.startContainer;r=e.startOffset;if(n.nodeType===3&&e.collapsed){if(n.data[r]===""){n.deleteData(r,1);if(!/[\u00a0| ]$/.test(t)){t+=" "}}else if(n.data[r-1]===""){n.deleteData(r-1,1);if(!/[\u00a0| ]$/.test(t)){t=" "+t}}}return t};var bm=jo.matchNodeNames("td th");var ym=function(e,t){var n=e.selection.getRng();var r=n.startContainer;var i=n.startOffset;if(n.collapsed&&gm(r,i)&&jo.isText(r)){r.insertData(i-1," ");r.deleteData(i,1);n.setStart(r,i);n.setEnd(r,i);e.selection.setRng(n)}e.selection.setContent(t)};var wm=function(e,t,n){if(n.getAttribute("data-mce-bogus")==="all"){n.parentNode.insertBefore(e.dom.createFragment(t),n)}else{var r=n.firstChild;var i=n.lastChild;if(!r||r===i&&r.nodeName==="BR"){e.dom.setHTML(n,t)}else{ym(e,t)}}};var xm=function(e,t){b.from(e.getParent(t,"td,th")).map(vi.fromDom).each(um.trimBlockTrailingBr)};var Cm=function(e,t){var n=e.schema.getTextInlineElements();var r=e.dom;if(t){var i=e.getBody(),a=new em(r);Hn.each(r.select("*[data-mce-fragment]"),(function(e){for(var t=e.parentNode;t&&t!==i;t=t.parentNode){if(n[e.nodeName.toLowerCase()]&&a.compare(t,e)){r.remove(e,true)}}}))}};var km=function(e){var t=e;while(t=t.walk()){if(t.type===1){t.attr("data-mce-fragment","1")}}};var Sm=function(e){Hn.each(e.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")}))};var Tm=function(e){return!!e.getAttribute("data-mce-fragment")};var Em=function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]};var Nm=function(e,t){var n,r,i;var a=e.dom,o=e.selection;var u,s;var l=function(t){var n=e.getBody();for(;t&&t!==n;t=t.parentNode){if(e.dom.getContentEditable(t)==="false"){return t}}return null};if(!t){return}e.selection.scrollIntoView(t);n=l(t);if(n){a.remove(t);o.select(n);return}var f=a.createRng();u=t.previousSibling;if(u&&u.nodeType===3){f.setStart(u,u.nodeValue.length);if(!Ne.ie){s=t.nextSibling;if(s&&s.nodeType===3){u.appendData(s.data);s.parentNode.removeChild(s)}}}else{f.setStartBefore(t);f.setEndBefore(t)}var c=function(t){var n=df.fromRangeStart(t);var r=nd(e.getBody());n=r.next(n);if(n){return n.toRange()}};r=a.getParent(t,a.isBlock);a.remove(t);if(r&&a.isEmpty(r)){e.$(r).empty();f.setStart(r,0);f.setEnd(r,0);if(!bm(r)&&!Tm(r)&&(i=c(f))){f=i;a.remove(r)}else{a.add(r,a.create("br",{"data-mce-bogus":"1"}))}}o.setRng(f)};var Rm=function(e,t,n){var r,i,a,o,u,s;var l,f,c,d,v;var m=e.selection,g=e.dom;if(/^ | $/.test(t)){t=pm(m.getRng(),t)}r=e.parser;v=n.merge;i=fm({validate:e.settings.validate},e.schema);d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';s={content:t,format:"html",selection:true,paste:n.paste};s=e.fire("BeforeSetContent",s);if(s.isDefaultPrevented()){e.fire("SetContent",{content:s.content,format:"html",selection:true,paste:n.paste});return}t=s.content;if(t.indexOf("{$caret}")===-1){t+="{$caret}"}t=t.replace(/\{\$caret\}/,d);f=m.getRng();var p=f.startContainer||(f.parentElement?f.parentElement():null);var h=e.getBody();if(p===h&&m.isCollapsed()){if(g.isBlock(h.firstChild)&&Em(e,h.firstChild)&&g.isEmpty(h.firstChild)){f=g.createRng();f.setStart(h.firstChild,0);f.setEnd(h.firstChild,0);m.setRng(f)}}if(!m.isCollapsed()){e.selection.setRng(mm.normalize(e.selection.getRng()));e.getDoc().execCommand("Delete",false,null);t=hm(e.selection.getRng(),t)}a=m.getNode();var b={context:a.nodeName.toLowerCase(),data:n.data,insert:true};u=r.parse(t,b);if(n.paste===true&&Zv.isListFragment(e.schema,u)&&Zv.isParentBlockLi(g,a)){f=Zv.insertAtCaret(i,g,e.selection.getRng(),u);e.selection.setRng(f);e.fire("SetContent",s);return}km(u);c=u.lastChild;if(c.attr("id")==="mce_marker"){l=c;for(c=c.prev;c;c=c.walk(true)){if(c.type===3||!g.isBlock(c.name)){if(e.schema.isValidChild(c.parent.name,"span")){c.parent.insert(l,c,c.name==="br")}break}}}e._selectionOverrides.showBlockCaretContainer(a);if(!b.invalid){t=i.serialize(u);wm(e,t,a)}else{ym(e,d);a=m.getNode();o=e.getBody();if(a.nodeType===9){a=c=o}else{c=a}while(c!==o){a=c;c=c.parentNode}t=a===o?o.innerHTML:g.getOuterHTML(a);t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return i.serialize(u)}))));if(a===o){g.setHTML(o,t)}else{g.setOuterHTML(a,t)}}Cm(e,v);Nm(e,g.get("mce_marker"));Sm(e.getBody());xm(e.dom,e.selection.getStart());e.fire("SetContent",s);e.addVisual()};var _m=function(e){var t;if(typeof e!=="string"){t=Hn.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}};var Dm=function(e,t){var n=_m(t);Rm(e,n.content,n.details)};var Om={insertAtCaret:Dm};var Pm=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;var Am=function(e){return Pm.test(e)};var Bm=function(e,t,n){var r=e.getParam(t,n);if(r.indexOf("=")!==-1){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}else{return r}};var Im=function(e){return e.getParam("iframe_attrs",{})};var Lm=function(e){return e.getParam("doctype","<!DOCTYPE html>")};var Mm=function(e){return e.getParam("document_base_url","")};var Fm=function(e){return Bm(e,"body_id","tinymce")};var Hm=function(e){return Bm(e,"body_class","")};var zm=function(e){return e.getParam("content_security_policy","")};var Um=function(e){return e.getParam("br_in_pre",true)};var Wm=function(e){if(e.getParam("force_p_newlines",false)){return"p"}var t=e.getParam("forced_root_block","p");return t===false?"":t};var jm=function(e){return e.getParam("forced_root_block_attrs",{})};var Vm=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")};var qm=function(e){return e.getParam("no_newline_selector","")};var $m=function(e){return e.getParam("keep_styles",true)};var Km=function(e){return e.getParam("end_container_on_empty_block",false)};var Ym=function(e){return Hn.explode(e.getParam("font_size_style_values",""))};var Xm=function(e){return Hn.explode(e.getParam("font_size_classes",""))};var Gm=function(e){return e.getParam("images_dataimg_filter",u(true),"function")};var Jm=function(e){return e.getParam("automatic_uploads",true,"boolean")};var Zm=function(e){return e.getParam("images_reuse_filename",false,"boolean")};var Qm=function(e){return e.getParam("images_replace_blob_uris",true,"boolean")};var eg=function(e){return e.getParam("images_upload_url","","string")};var tg=function(e){return e.getParam("images_upload_base_path","","string")};var ng=function(e){return e.getParam("images_upload_credentials",false,"boolean")};var rg=function(e){return e.getParam("images_upload_handler",null,"function")};var ig=function(e){return e.getParam("content_css_cors",false,"boolean")};var ag=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")};var og={getIframeAttrs:Im,getDocType:Lm,getDocumentBaseUrl:Mm,getBodyId:Fm,getBodyClass:Hm,getContentSecurityPolicy:zm,shouldPutBrInPre:Um,getForcedRootBlock:Wm,getForcedRootBlockAttrs:jm,getBrNewLineSelector:Vm,getNoNewLineSelector:qm,shouldKeepStyles:$m,shouldEndContainerOnEmptyBlock:Km,getFontStyleValues:Ym,getFontSizeClasses:Xm,getImagesDataImgFilter:Gm,isAutomaticUploadsEnabled:Jm,shouldReuseFileName:Zm,shouldReplaceBlobUris:Qm,getImageUploadUrl:eg,getImageUploadBasePath:tg,getImagesUploadCredentials:ng,getImagesUploadHandler:rg,shouldUseContentCssCors:ig,getInlineBoundarySelector:ag};var ug=function(e,t){return sa(vi.fromDom(t),og.getInlineBoundarySelector(e))};var sg=function(e){return Bu.DOM.getStyle(e,"direction",true)==="rtl"||Am(e.textContent)};var lg=function(e,t,n){return H(Bu.DOM.getParents(n.container(),"*",t),e)};var fg=function(e,t,n){var r=lg(e,t,n);return b.from(r[r.length-1])};var cg=function(e,t,n){var r=Rc(t,e);var i=Rc(n,e);return r&&r===i};var dg=function(e){return Qs(e)||el(e)};var vg=function(e,t){if(!t){return t}var n=t.container(),r=t.offset();if(e){if(Xs(n)){if(jo.isText(n.nextSibling)){return df(n.nextSibling,0)}else{return df.after(n)}}else{return Qs(t)?df(n,r+1):t}}else{if(Xs(n)){if(jo.isText(n.previousSibling)){return df(n.previousSibling,n.previousSibling.data.length)}else{return df.before(n)}}else{return el(t)?df(n,r-1):t}}};var mg=l(vg,true);var gg=l(vg,false);var pg={isInlineTarget:ug,findRootInline:fg,isRtl:sg,isAtZwsp:dg,normalizePosition:vg,normalizeForwards:mg,normalizeBackwards:gg,hasSameParentBlock:cg};var hg=function(e){return function(t){return da(e,vi.fromDom(t.dom().parentNode))}};var bg=function(e,t){return pa(e,t)?ps(t,(function(e){return ho(e)||yo(e)}),hg(e)):b.none()};var yg=function(e){var t=e.getBody();var n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)};var wg=function(e){if(e.dom.isEmpty(e.getBody())){e.setContent("");yg(e)}};var xg=function(e,t,n){return Fl(pd.firstPositionIn(n),pd.lastPositionIn(n),(function(r,i){var a=pg.normalizePosition(true,r);var o=pg.normalizePosition(false,i);var u=pg.normalizePosition(false,t);if(e){return pd.nextPosition(n,u).map((function(e){return e.isEqual(o)&&t.isEqual(a)})).getOr(false)}else{return pd.prevPosition(n,u).map((function(e){return e.isEqual(a)&&t.isEqual(o)})).getOr(false)}})).getOr(true)};var Cg={getParentBlock:bg,paddEmptyBody:wg,willDeleteLastPositionInElement:xg};var kg=function(e,t,n){return hs(e,t,n).isSome()};var Sg=function(e,t){var n=vi.fromDom(e);var r=vi.fromDom(t);return kg(r,"pre,code",l(da,n))};var Tg=function(e,t){return jo.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&Sg(e,t)===false};var Eg=function(e){return jo.isElement(e)&&e.nodeName==="A"&&e.hasAttribute("name")};var Ng=function(e,t){return pl(t)&&Tg(e,t)===false||Eg(t)||Rg(t)};var Rg=jo.hasAttribute("data-mce-bookmark");var _g=jo.hasAttribute("data-mce-bogus");var Dg=jo.hasAttributeValue("data-mce-bogus","all");var Og=function(e){var t,n,r=0;if(Ng(e,e)){return false}else{n=e.firstChild;if(!n){return true}t=new to(n,e);do{if(Dg(n)){n=t.next(true);continue}if(_g(n)){n=t.next();continue}if(jo.isBr(n)){r++;n=t.next();continue}if(Ng(e,n)){return false}n=t.next()}while(n);return r<=1}};var Pg=function(e){return Og(e.dom())};var Ag={isEmpty:Pg};var Bg=Zi("block","position");var Ig=Zi("from","to");var Lg=function(e,t){var n=vi.fromDom(e);var r=vi.fromDom(t.container());return Cg.getParentBlock(n,r).map((function(e){return Bg(e,t)}))};var Mg=function(e){return da(e.from().block(),e.to().block())===false};var Fg=function(e){return wa(e.from().block()).bind((function(t){return wa(e.to().block()).filter((function(e){return da(t,e)}))})).isSome()};var Hg=function(e){return jo.isContentEditableFalse(e.from().block().dom())===false&&jo.isContentEditableFalse(e.to().block().dom())===false};var zg=function(e,t,n){if(jo.isBr(n.position().getNode())&&Ag.isEmpty(n.block())===false){return pd.positionIn(false,n.block().dom()).bind((function(r){if(r.isEqual(n.position())){return pd.fromPosition(t,e,r).bind((function(t){return Lg(e,t)}))}else{return b.some(n)}})).getOr(n)}else{return n}};var Ug=function(e,t,n){var r=Lg(e,df.fromRangeStart(n));var i=r.bind((function(n){return pd.fromPosition(t,e,n.position()).bind((function(n){return Lg(e,n).map((function(n){return zg(e,t,n)}))}))}));return Fl(r,i,Ig).filter((function(e){return Mg(e)&&Fg(e)&&Hg(e)}))};var Wg=function(e,t,n){return n.collapsed?Ug(e,t,n):b.none()};var jg={read:Wg};var Vg=function(e){return e.slice(0,-1)};var qg=function(e,t,n){if(pa(t,e)){return Vg(xa(e,(function(e){return n(e)||da(e,t)})))}else{return[]}};var $g=function(e,t){return qg(e,t,u(false))};var Kg=function(e,t){return[e].concat($g(e,t))};var Yg={parentsUntil:qg,parents:$g,parentsAndSelf:Kg};var Xg=function(e){var t=Ea(e);return j(t,mo).fold((function(){return t}),(function(e){return t.slice(0,e)}))};var Gg=function(e){var t=Xg(e);L(t,Gu);return t};var Jg=function(e,t){var n=Yg.parentsAndSelf(t,e);return W(n.reverse(),Ag.isEmpty).each(Gu)};var Zg=function(e){return H(Sa(e),(function(e){return!Ag.isEmpty(e)})).length===0};var Qg=function(e,t,n,r){if(Ag.isEmpty(n)){um.fillWithPaddingBr(n);return pd.firstPositionIn(n.dom())}if(Zg(r)&&Ag.isEmpty(t)){Wu(r,vi.fromTag("br"))}var i=pd.prevPosition(n.dom(),df.before(r.dom()));L(Gg(t),(function(e){Wu(r,e)}));Jg(e,t);return i};var ep=function(e,t,n){if(Ag.isEmpty(n)){Gu(n);if(Ag.isEmpty(t)){um.fillWithPaddingBr(t)}return pd.firstPositionIn(t.dom())}var r=pd.lastPositionIn(n.dom());L(Gg(t),(function(e){qu(n,e)}));Jg(e,t);return r};var tp=function(e,t){var n=Yg.parentsAndSelf(t,e);return b.from(n[n.length-1])};var np=function(e,t){return pa(t,e)?tp(t,e):b.none()};var rp=function(e,t){pd.positionIn(e,t.dom()).map((function(e){return e.getNode()})).map(vi.fromDom).filter(po).each(Gu)};var ip=function(e,t,n){rp(true,t);rp(false,n);return np(t,n).fold(l(ep,e,t,n),l(Qg,e,t,n))};var ap=function(e,t,n,r){return t?ip(e,r,n):ip(e,n,r)};var op={mergeBlocks:ap};var up=function(e,t){var n;var r=vi.fromDom(e.getBody());n=jg.read(r.dom(),t,e.selection.getRng()).bind((function(e){return op.mergeBlocks(r,t,e.from().block(),e.to().block())}));n.each((function(t){e.selection.setRng(t.toRange())}));return n.isSome()};var sp={backspaceDelete:up};var lp=function(e,t){var n=t.getRng();return Fl(Cg.getParentBlock(e,vi.fromDom(n.startContainer)),Cg.getParentBlock(e,vi.fromDom(n.endContainer)),(function(r,i){if(da(r,i)===false){n.deleteContents();op.mergeBlocks(e,true,r,i).each((function(e){t.setRng(e.toRange())}));return true}else{return false}})).getOr(false)};var fp=function(e,t){var n=vi.fromDom(t);var r=l(da,e);return gs(n,Co,r).isSome()};var cp=function(e,t){return fp(e,t.startContainer)||fp(e,t.endContainer)};var dp=function(e,t){var n=pd.prevPosition(e.dom(),df.fromRangeStart(t)).isNone();var r=pd.nextPosition(e.dom(),df.fromRangeEnd(t)).isNone();return!cp(e,t)&&n&&r};var vp=function(e){e.setContent("");e.selection.setCursorLocation();return true};var mp=function(e){var t=vi.fromDom(e.getBody());var n=e.selection.getRng();return dp(t,n)?vp(e):lp(t,e.selection)};var gp=function(e,t){return e.selection.isCollapsed()?false:mp(e)};var pp={backspaceDelete:gp};var hp=function(e){if(!k(e)){throw new Error("cases must be an array")}if(e.length===0){throw new Error("there must be at least one case")}var t=[];var n={};L(e,(function(r,a){var o=Oi(r);if(o.length!==1){throw new Error("one and only one name per case")}var u=o[0];var s=r[u];if(n[u]!==undefined){throw new Error("duplicate key detected:"+u)}else if(u==="cata"){throw new Error("cannot have a case named cata (sorry)")}else if(!k(s)){throw new Error("case arguments must be an array")}t.push(u);n[u]=function(){var n=arguments.length;if(n!==s.length){throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+n)}var r=new Array(n);for(var o=0;o<r.length;o++){r[o]=arguments[o]}var l=function(e){var n=Oi(e);if(t.length!==n.length){throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","))}var i=$(t,(function(e){return A(n,e)}));if(!i){throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "))}return e[u].apply(null,r)};return{fold:function(){if(arguments.length!==e.length){throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length)}var t=arguments[a];return t.apply(null,r)},match:l,log:function(e){i.console.log(e,{constructors:t,constructor:u,params:r})}}}}));return n};var bp={generate:hp};var yp=function(e){return Hc(e).exists(po)};var wp=function(e,t,n){var r=H(Yg.parentsAndSelf(vi.fromDom(n.container()),t),mo);var i=J(r).getOr(t);return pd.fromPosition(e,i.dom(),n).filter(yp)};var xp=function(e,t){return Hc(t).exists(po)||wp(true,e,t).isSome()};var Cp=function(e,t){return zc(t).exists(po)||wp(false,e,t).isSome()};var kp=l(wp,false);var Sp=l(wp,true);var Tp=function(e){return function(t){return e===t}};var Ep=Tp("");var Np=function(e){return/^[\r\n\t ]$/.test(e)};var Rp=function(e){return!Np(e)&&!Ep(e)};var _p=function(e,t,n){return b.from(n.container()).filter(jo.isText).exists((function(r){var i=e?0:-1;return t(r.data.charAt(n.offset()+i))}))};var Dp=l(_p,true,Np);var Op=l(_p,false,Np);var Pp=function(e){var t=e.container();return jo.isText(t)&&t.data.length===0};var Ap=function(e,t){var n=Dc(e,t);return jo.isContentEditableFalse(n)&&!jo.isBogusAll(n)};var Bp=l(Ap,0);var Ip=l(Ap,-1);var Lp=function(e,t){return jo.isTable(Dc(e,t))};var Mp=l(Lp,0);var Fp=l(Lp,-1);var Hp=function(e){return Co(vi.fromDom(e))||yo(vi.fromDom(e))};var zp=bp.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]);var Up=function(e,t){var n=t.getNode(e===false);var r=e?"after":"before";return jo.isElement(n)&&n.getAttribute("data-mce-caret")===r};var Wp=function(e,t,n,r){var i=function(t){return go(vi.fromDom(t))&&!_c(n,r,e)};return Mc(!t,n).fold((function(){return Mc(t,r).fold(u(false),i)}),i)};var jp=function(e,t,n,r){var i=r.getNode(t===false);return Cg.getParentBlock(vi.fromDom(e),vi.fromDom(n.getNode())).map((function(e){return Ag.isEmpty(e)?zp.remove(e.dom()):zp.moveToElement(i)})).orThunk((function(){return b.some(zp.moveToElement(i))}))};var Vp=function(e,t,n){return pd.fromPosition(t,e,n).bind((function(r){if(Hp(r.getNode())){return b.none()}else if(Wp(e,t,n,r)){return b.none()}else if(t&&jo.isContentEditableFalse(r.getNode())){return jp(e,t,n,r)}else if(t===false&&jo.isContentEditableFalse(r.getNode(true))){return jp(e,t,n,r)}else if(t&&Ip(n)){return b.some(zp.moveToPosition(r))}else if(t===false&&Bp(n)){return b.some(zp.moveToPosition(r))}else{return b.none()}}))};var qp=function(e,t){if(e&&jo.isContentEditableFalse(t.nextSibling)){return b.some(zp.moveToElement(t.nextSibling))}else if(e===false&&jo.isContentEditableFalse(t.previousSibling)){return b.some(zp.moveToElement(t.previousSibling))}else{return b.none()}};var $p=function(e,t,n){return n.fold((function(e){return b.some(zp.remove(e))}),(function(e){return b.some(zp.moveToElement(e))}),(function(n){if(_c(t,n,e)){return b.none()}else{return b.some(zp.moveToPosition(n))}}))};var Kp=function(e,t,n){if(Up(t,n)){return qp(t,n.getNode(t===false)).fold((function(){return Vp(e,t,n)}),b.some)}else{return Vp(e,t,n).bind((function(t){return $p(e,n,t)}))}};var Yp=function(e,t,n){var r=Lc(t?1:-1,e,n);var i=df.fromRangeStart(r);var a=vi.fromDom(e);if(t===false&&Ip(i)){return b.some(zp.remove(i.getNode(true)))}else if(t&&Bp(i)){return b.some(zp.remove(i.getNode()))}else if(t===false&&Bp(i)&&Cp(a,i)){return kp(a,i).map((function(e){return zp.remove(e.getNode())}))}else if(t&&Ip(i)&&xp(a,i)){return Sp(a,i).map((function(e){return zp.remove(e.getNode())}))}else{return Kp(e,t,i)}};var Xp=function(e){return" \f\n\r\t\v".indexOf(e)!==-1};var Gp=function(e,t,n){var r=U(e.split(""),(function(r,i){if(Xp(i)||i===""){if(r.previousCharIsSpace||r.str===""&&t||r.str.length===e.length-1&&n){return{previousCharIsSpace:false,str:r.str+""}}else{return{previousCharIsSpace:true,str:r.str+" "}}}else{return{previousCharIsSpace:false,str:r.str+i}}}),{previousCharIsSpace:false,str:""});return r.str};var Jp=function(e,t,n){if(n===0){return}var r=e.data.slice(t,t+n);var i=t+n>=e.data.length;var a=t===0;e.replaceData(t,n,Gp(r,a,i))};var Zp=function(e,t){var n=e.data.slice(t);var r=n.length-Jr(n).length;return Jp(e,t,r)};var Qp=function(e,t){var n=e.data.slice(0,t);var r=n.length-Zr(n).length;return Jp(e,t-r,r)};var eh=function(e,t,n){var r=Zr(e.data).length;e.appendData(t.data);Gu(vi.fromDom(t));if(n){Zp(e,r)}return e};var th=function(e,t){var n=e.container();var r=e.offset();return df.isTextPosition(e)===false&&n===t.parentNode&&r>df.before(t).offset()};var nh=function(e,t){return th(t,e)?df(t.container(),t.offset()-1):t};var rh=function(e){return jo.isText(e)?df(e,0):df.before(e)};var ih=function(e){return jo.isText(e)?df(e,e.data.length):df.after(e)};var ah=function(e){if(pl(e.previousSibling)){return b.some(ih(e.previousSibling))}else{return e.previousSibling?pd.lastPositionIn(e.previousSibling):b.none()}};var oh=function(e){if(pl(e.nextSibling)){return b.some(rh(e.nextSibling))}else{return e.nextSibling?pd.firstPositionIn(e.nextSibling):b.none()}};var uh=function(e,t){var n=df.before(t.previousSibling?t.previousSibling:t.parentNode);return pd.prevPosition(e,n).fold((function(){return pd.nextPosition(e,df.after(t))}),b.some)};var sh=function(e,t){return pd.nextPosition(e,df.after(t)).fold((function(){return pd.prevPosition(e,df.before(t))}),b.some)};var lh=function(e,t){return ah(t).orThunk((function(){return oh(t)})).orThunk((function(){return uh(e,t)}))};var fh=function(e,t){return oh(t).orThunk((function(){return ah(t)})).orThunk((function(){return sh(e,t)}))};var ch=function(e,t,n){return e?fh(t,n):lh(t,n)};var dh=function(e,t,n){return ch(e,t,n).map(l(nh,n))};var vh=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))};var mh=function(e){return function(t){return t.dom()===e}};var gh=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Ei(t))};var ph=function(e){if(Ag.isEmpty(e)){var t=vi.fromHtml('<br data-mce-bogus="1">');Xu(e);qu(e,t);return b.some(df.before(t.dom()))}else{return b.none()}};var hh=function(e,t,n){var r=Ca(e).filter(Di);var i=ka(e).filter(Di);Gu(e);return Hl(r,i,t,(function(e,t,r){var i=e.dom(),a=t.dom();var o=i.data.length;eh(i,a,n);return r.container()===a?df(i,o):r})).orThunk((function(){if(n){r.each((function(e){return Qp(e.dom(),e.dom().length)}));i.each((function(e){return Zp(e.dom(),0)}))}return t}))};var bh=function(e,t){return Mi(e.schema.getTextInlineElements(),Ei(t))};var yh=function(e,t,n,r){if(r===void 0){r=true}var i=dh(t,e.getBody(),n.dom());var a=gs(n,l(gh,e),mh(e.getBody()));var o=hh(n,i,bh(e,n));if(e.dom.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}else{a.bind(ph).fold((function(){if(r){vh(e,t,o)}}),(function(n){if(r){vh(e,t,b.some(n))}}))}};var wh={deleteElement:yh};var xh=function(e,t){return function(n){e._selectionOverrides.hideFakeCaret();wh.deleteElement(e,t,vi.fromDom(n));return true}};var Ch=function(e,t){return function(n){var r=t?df.before(n):df.after(n);e.selection.setRng(r.toRange());return true}};var kh=function(e){return function(t){e.selection.setRng(t.toRange());return true}};var Sh=function(e,t){var n=Yp(e.getBody(),t,e.selection.getRng()).map((function(n){return n.fold(xh(e,t),Ch(e,t),kh(e))}));return n.getOr(false)};var Th=function(e){L(vs(e,".mce-offscreen-selection"),Gu)};var Eh=function(e,t){var n=e.selection.getNode();if(jo.isContentEditableFalse(n)){Th(vi.fromDom(e.getBody()));wh.deleteElement(e,t,vi.fromDom(e.selection.getNode()));Cg.paddEmptyBody(e);return true}else{return false}};var Nh=function(e,t){while(t&&t!==e){if(jo.isContentEditableTrue(t)||jo.isContentEditableFalse(t)){return t}t=t.parentNode}return null};var Rh=function(e){var t;var n=Nh(e.getBody(),e.selection.getNode());if(jo.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)){t=e.dom.create("br",{"data-mce-bogus":"1"});e.dom.setHTML(n,"");n.appendChild(t);e.selection.setRng(df.before(t).toRange())}return true};var _h=function(e,t){if(e.selection.isCollapsed()){return Sh(e,t)}else{return Eh(e,t)}};var Dh={backspaceDelete:_h,paddEmptyElement:Rh};var Oh=jo.isText;var Ph=function(e){return Oh(e)&&e.data[0]===qs.ZWSP};var Ah=function(e){return Oh(e)&&e.data[e.data.length-1]===qs.ZWSP};var Bh=function(e){return e.ownerDocument.createTextNode(qs.ZWSP)};var Ih=function(e){if(Oh(e.previousSibling)){if(Ah(e.previousSibling)){return e.previousSibling}else{e.previousSibling.appendData(qs.ZWSP);return e.previousSibling}}else if(Oh(e)){if(Ph(e)){return e}else{e.insertData(0,qs.ZWSP);return e}}else{var t=Bh(e);e.parentNode.insertBefore(t,e);return t}};var Lh=function(e){if(Oh(e.nextSibling)){if(Ph(e.nextSibling)){return e.nextSibling}else{e.nextSibling.insertData(0,qs.ZWSP);return e.nextSibling}}else if(Oh(e)){if(Ah(e)){return e}else{e.appendData(qs.ZWSP);return e}}else{var t=Bh(e);if(e.nextSibling){e.parentNode.insertBefore(t,e.nextSibling)}else{e.parentNode.appendChild(t)}return t}};var Mh=function(e,t){return e?Ih(t):Lh(t)};var Fh=l(Mh,true);var Hh=l(Mh,false);var zh=function(e,t){if(jo.isText(e.container())){return Mh(t,e.container())}else{return Mh(t,e.getNode())}};var Uh=function(e,t){var n=t.get();return n&&e.container()===n&&Xs(n)};var Wh=function(e,t){return t.fold((function(t){lc.remove(e.get());var n=Fh(t);e.set(n);return b.some(df(n,n.length-1))}),(function(t){return pd.firstPositionIn(t).map((function(t){if(!Uh(t,e)){lc.remove(e.get());var n=zh(t,true);e.set(n);return df(n,1)}else{return df(e.get(),1)}}))}),(function(t){return pd.lastPositionIn(t).map((function(t){if(!Uh(t,e)){lc.remove(e.get());var n=zh(t,false);e.set(n);return df(n,n.length-1)}else{return df(e.get(),e.get().length-1)}}))}),(function(t){lc.remove(e.get());var n=Hh(t);e.set(n);return b.some(df(n,1))}))};var jh={renderCaret:Wh};var Vh=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome()){return r}}return b.none()};var qh={evaluateUntil:Vh};var $h=bp.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]);var Kh=function(e,t){var n=Rc(t,e);return n?n:e};var Yh=function(e,t,n){var r=pg.normalizeForwards(n);var i=Kh(t,r.container());return pg.findRootInline(e,i,r).fold((function(){return pd.nextPosition(i,r).bind(l(pg.findRootInline,e,i)).map((function(e){return $h.before(e)}))}),b.none)};var Xh=function(e,t){return Xf(e,t)===null};var Gh=function(e,t,n){return pg.findRootInline(e,t,n).filter(l(Xh,t))};var Jh=function(e,t,n){var r=pg.normalizeBackwards(n);return Gh(e,t,r).bind((function(e){var t=pd.prevPosition(e,r);return t.isNone()?b.some($h.start(e)):b.none()}))};var Zh=function(e,t,n){var r=pg.normalizeForwards(n);return Gh(e,t,r).bind((function(e){var t=pd.nextPosition(e,r);return t.isNone()?b.some($h.end(e)):b.none()}))};var Qh=function(e,t,n){var r=pg.normalizeBackwards(n);var i=Kh(t,r.container());return pg.findRootInline(e,i,r).fold((function(){return pd.prevPosition(i,r).bind(l(pg.findRootInline,e,i)).map((function(e){return $h.after(e)}))}),b.none)};var eb=function(e){return pg.isRtl(nb(e))===false};var tb=function(e,t,n){var r=qh.evaluateUntil([Yh,Jh,Zh,Qh],[e,t,n]);return r.filter(eb)};var nb=function(e){return e.fold(s,s,s,s)};var rb=function(e){return e.fold(u("before"),u("start"),u("end"),u("after"))};var ib=function(e){return e.fold($h.before,$h.before,$h.after,$h.after)};var ab=function(e){return e.fold($h.start,$h.start,$h.end,$h.end)};var ob=function(e,t){return rb(e)===rb(t)&&nb(e)===nb(t)};var ub=function(e,t,n,r,i,a){return Fl(pg.findRootInline(t,n,r),pg.findRootInline(t,n,i),(function(t,r){if(t!==r&&pg.hasSameParentBlock(n,t,r)){return $h.after(e?t:r)}else{return a}})).getOr(a)};var sb=function(e,t){return e.fold(u(true),(function(e){return!ob(e,t)}))};var lb=function(e,t,n,r,i){var a=pg.normalizePosition(e,i);var o=pd.fromPosition(e,n,a).map(l(pg.normalizePosition,e));var u=o.fold((function(){return r.map(ib)}),(function(i){return tb(t,n,i).map(l(ub,e,t,n,a,i)).filter(l(sb,r))}));return u.filter(eb)};var fb=function(e,t){if(e){return t.fold(o(b.some,$h.start),b.none,o(b.some,$h.after),b.none)}else{return t.fold(b.none,o(b.some,$h.before),b.none,o(b.some,$h.end))}};var cb=function(e,t,n,r){var i=pg.normalizePosition(e,r);var a=tb(t,n,i);return tb(t,n,i).bind(l(fb,e)).orThunk((function(){return lb(e,t,n,a,r)}))};var db={readLocation:tb,findLocation:cb,prevLocation:l(cb,false),nextLocation:l(cb,true),getElement:nb,outside:ib,inside:ab};var vb=function(e){return E(e.selection.getSel().modify)};var mb=function(e,t,n){var r=e?1:-1;t.setRng(df(n.container(),n.offset()+r).toRange());t.getSel().modify("move",e?"forward":"backward","word");return true};var gb=function(e,t){var n=t.selection.getRng();var r=e?df.fromRangeEnd(n):df.fromRangeStart(n);if(!vb(t)){return false}else if(e&&Qs(r)){return mb(true,t.selection,r)}else if(!e&&el(r)){return mb(false,t.selection,r)}else{return false}};var pb={hasSelectionModifyApi:vb,moveByWord:gb};var hb=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset());n.setEnd(t.container(),t.offset());e.selection.setRng(n)};var bb=function(e){return e.settings.inline_boundaries!==false};var yb=function(e,t){if(e){t.setAttribute("data-mce-selected","inline-boundary")}else{t.removeAttribute("data-mce-selected")}};var wb=function(e,t,n){return jh.renderCaret(t,n).map((function(t){hb(e,t);return n}))};var xb=function(e,t,n){var r=e.getBody();var i=df.fromRangeStart(e.selection.getRng());var a=l(pg.isInlineTarget,e);var o=db.findLocation(n,a,r,i);return o.bind((function(n){return wb(e,t,n)}))};var Cb=function(e,t,n){var r=H(t.select('*[data-mce-selected="inline-boundary"]'),e);var i=H(n,e);L(Y(r,i),l(yb,false));L(Y(i,r),l(yb,true))};var kb=function(e,t){if(e.selection.isCollapsed()&&e.composing!==true&&t.get()){var n=df.fromRangeStart(e.selection.getRng());if(df.isTextPosition(n)&&pg.isAtZwsp(n)===false){hb(e,lc.removeAndReposition(t.get(),n));t.set(null)}}};var Sb=function(e,t,n,r){if(t.selection.isCollapsed()){var i=H(r,e);L(i,(function(r){var i=df.fromRangeStart(t.selection.getRng());db.readLocation(e,t.getBody(),i).bind((function(e){return wb(t,n,e)}))}))}};var Tb=function(e,t,n){return function(){return bb(e)?xb(e,t,n).isSome():false}};var Eb=function(e,t,n){return function(){return bb(t)?pb.moveByWord(e,t):false}};var Nb=function(e){var t=es(null);var n=l(pg.isInlineTarget,e);e.on("NodeChange",(function(r){if(bb(e)){Cb(n,e.dom,r.parents);kb(e,t);Sb(n,e,t,r.parents)}}));return t};var Rb=l(Eb,true);var _b=l(Eb,false);var Db={move:Tb,moveNextWord:Rb,movePrevWord:_b,setupSelectedState:Nb,setCaretPosition:hb};var Ob=function(e){return e.settings.inline_boundaries!==false};var Pb=function(e,t){var n=i.document.createRange();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return n};var Ab=function(e){return Fl(pd.firstPositionIn(e),pd.lastPositionIn(e),(function(t,n){var r=pg.normalizePosition(true,t);var i=pg.normalizePosition(false,n);return pd.nextPosition(e,r).map((function(e){return e.isEqual(i)})).getOr(true)})).getOr(true)};var Bb=function(e,t){return function(n){return jh.renderCaret(t,n).map((function(t){Db.setCaretPosition(e,t);return true})).getOr(false)}};var Ib=function(e,t,n,r){var i=e.getBody();var a=l(pg.isInlineTarget,e);e.undoManager.ignore((function(){e.selection.setRng(Pb(n,r));e.execCommand("Delete");db.readLocation(a,i,df.fromRangeStart(e.selection.getRng())).map(db.inside).map(Bb(e,t))}));e.nodeChanged()};var Lb=function(e,t){var n=Rc(t,e);return n?n:e};var Mb=function(e,t,n,r){var i=Lb(e.getBody(),r.container());var a=l(pg.isInlineTarget,e);var o=db.readLocation(a,i,r);return o.bind((function(e){if(n){return e.fold(u(b.some(db.inside(e))),b.none,u(b.some(db.outside(e))),b.none)}else{return e.fold(b.none,u(b.some(db.outside(e))),b.none,u(b.some(db.inside(e))))}})).map(Bb(e,t)).getOrThunk((function(){var u=pd.navigate(n,i,r);var s=u.bind((function(e){return db.readLocation(a,i,e)}));if(o.isSome()&&s.isSome()){return pg.findRootInline(a,i,r).map((function(t){if(Ab(t)){wh.deleteElement(e,n,vi.fromDom(t));return true}else{return false}})).getOr(false)}else{return s.bind((function(i){return u.map((function(i){if(n){Ib(e,t,r,i)}else{Ib(e,t,i,r)}return true}))})).getOr(false)}}))};var Fb=function(e,t,n){if(e.selection.isCollapsed()&&Ob(e)){var r=df.fromRangeStart(e.selection.getRng());return Mb(e,t,n,r)}return false};var Hb={backspaceDelete:Fb};var zb=Zi("start","end");var Ub=Zi("rng","table","cells");var Wb=bp.generate([{removeTable:["element"]},{emptyCells:["cells"]}]);var jb=function(e){return l(da,e)};var Vb=function(e,t){return ys(vi.fromDom(e),"td,th",t)};var qb=function(e,t){return hs(e,"table",t)};var $b=function(e){return da(e.start(),e.end())===false};var Kb=function(e,t){return qb(e.start(),t).bind((function(n){return qb(e.end(),t).bind((function(e){return da(n,e)?b.some(n):b.none()}))}))};var Yb=function(e){return vs(e,"td,th")};var Xb=function(e,t){return qb(e.start(),t).bind((function(t){return Z(Yb(t)).map((function(t){return zb(e.start(),t)}))}))};var Gb=function(e,t){var n=Vb(t.startContainer,e);var r=Vb(t.endContainer,e);return t.collapsed?b.none():Fl(n,r,zb).fold((function(){return n.fold((function(){return r.bind((function(t){return qb(t,e).bind((function(e){return J(Yb(e)).map((function(e){return zb(e,t)}))}))}))}),(function(t){return qb(t,e).bind((function(e){return Z(Yb(e)).map((function(e){return zb(t,e)}))}))}))}),(function(t){return Jb(e,t)?b.none():Xb(t,e)}))};var Jb=function(e,t){return Kb(t,e).isSome()};var Zb=function(e,t){var n=Vb(e.startContainer,t);var r=Vb(e.endContainer,t);return Fl(n,r,zb).filter($b).filter((function(e){return Jb(t,e)})).orThunk((function(){return Gb(t,e)}))};var Qb=function(e,t){return Kb(e,t).map((function(t){return Ub(e,t,Yb(t))}))};var ey=function(e,t){var n=jb(e);return Zb(t,n).bind((function(e){return Qb(e,n)}))};var ty=function(e,t){return j(e,(function(e){return da(e,t)}))};var ny=function(e){return Fl(ty(e.cells(),e.rng().start()),ty(e.cells(),e.rng().end()),(function(t,n){return e.cells().slice(t,n+1)}))};var ry=function(e){return ny(e).map((function(t){var n=e.cells();return t.length===n.length?Wb.removeTable(e.table()):Wb.emptyCells(t)}))};var iy=function(e){return Wb.emptyCells(e)};var ay=function(e,t){return ey(e,t).bind(ry)};var oy={getActionFromRange:ay,getActionFromCells:iy};var uy=function(e){var t=[];if(e){for(var n=0;n<e.rangeCount;n++){t.push(e.getRangeAt(n))}}return t};var sy=function(e){return q(e,(function(e){var t=Bl(e);return t?[vi.fromDom(t)]:[]}))};var ly=function(e){return uy(e).length>1};var fy={getRanges:uy,getSelectedNodes:sy,hasMultipleRanges:ly};var cy=function(e){return H(fy.getSelectedNodes(e),Co)};var dy=function(e){var t=vs(e,"td[data-mce-selected],th[data-mce-selected]");return t};var vy=function(e,t){var n=dy(t);var r=cy(e);return n.length>0?n:r};var my=function(e){return vy(fy.getRanges(e.selection.getSel()),vi.fromDom(e.getBody()))};var gy={getCellsFromRanges:cy,getCellsFromElement:dy,getCellsFromElementOrRanges:vy,getCellsFromEditor:my};var py=function(e,t){L(t,um.fillWithPaddingBr);e.selection.setCursorLocation(t[0].dom(),0);return true};var hy=function(e,t){wh.deleteElement(e,false,t);return true};var by=function(e,t,n){return oy.getActionFromRange(t,n).map((function(t){return t.fold(l(hy,e),l(py,e))}))};var yy=function(e,t){return Ty(e,t)};var wy=function(e,t,n,r){return ky(t,r).fold((function(){return by(e,t,n)}),(function(t){return yy(e,t)})).getOr(false)};var xy=function(e,t){var n=vi.fromDom(e.getBody());var r=e.selection.getRng();var i=gy.getCellsFromEditor(e);return i.length!==0?py(e,i):wy(e,n,r,t)};var Cy=function(e,t){return W(Yg.parentsAndSelf(t,e),Co)};var ky=function(e,t){return W(Yg.parentsAndSelf(t,e),(function(e){return Ei(e)==="caption"}))};var Sy=function(e,t,n,r,i){return pd.navigate(n,e.getBody(),i).bind((function(e){return Cy(t,vi.fromDom(e.getNode())).map((function(e){return da(e,r)===false}))}))};var Ty=function(e,t){um.fillWithPaddingBr(t);e.selection.setCursorLocation(t.dom(),0);return b.some(true)};var Ey=function(e,t,n,r){return pd.firstPositionIn(e.dom()).bind((function(i){return pd.lastPositionIn(e.dom()).map((function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)}))})).getOr(true)};var Ny=function(e,t){return Ty(e,t)};var Ry=function(e,t,n){return ky(e,vi.fromDom(n.getNode())).map((function(e){return da(e,t)===false}))};var _y=function(e,t,n,r,i){return pd.navigate(n,e.getBody(),i).bind((function(a){return Ey(r,n,i,a)?Ny(e,r):Ry(t,r,a)})).or(b.some(true))};var Dy=function(e,t,n,r){var i=df.fromRangeStart(e.selection.getRng());return Cy(n,r).bind((function(r){return Ag.isEmpty(r)?Ty(e,r):Sy(e,n,t,r,i)}))};var Oy=function(e,t,n,r){var i=df.fromRangeStart(e.selection.getRng());return Ag.isEmpty(r)?Ty(e,r):_y(e,n,t,r,i)};var Py=function(e,t,n){var r=vi.fromDom(e.getBody());return ky(r,n).fold((function(){return Dy(e,t,r,n)}),(function(n){return Oy(e,t,r,n)})).getOr(false)};var Ay=function(e,t){var n=vi.fromDom(e.selection.getStart(true));var r=gy.getCellsFromEditor(e);return e.selection.isCollapsed()&&r.length===0?Py(e,t,n):xy(e,n)};var By={backspaceDelete:Ay};var Iy=Qd.isEq;var Ly=function(e,t,n){var r=e.formatter.get(n);if(r){for(var i=0;i<r.length;i++){if(r[i].inherit===false&&e.dom.is(t,r[i].selector)){return true}}}return false};var My=function(e,t,n,r){var i=e.dom.getRoot();if(t===i){return false}t=e.dom.getParent(t,(function(t){if(Ly(e,t,n)){return true}return t.parentNode===i||!!zy(e,t,n,r,true)}));return zy(e,t,n,r)};var Fy=function(e,t,n){if(Iy(t,n.inline)){return true}if(Iy(t,n.block)){return true}if(n.selector){return t.nodeType===1&&e.is(t,n.selector)}};var Hy=function(e,t,n,r,i,a){var o,u;var s=n[r];var l;if(n.onmatch){return n.onmatch(t,n,r)}if(s){if(typeof s.length==="undefined"){for(o in s){if(s.hasOwnProperty(o)){if(r==="attributes"){u=e.getAttrib(t,o)}else{u=Qd.getStyle(e,t,o)}if(i&&!u&&!n.exact){return}if((!i||n.exact)&&!Iy(u,Qd.normalizeStyleValue(e,Qd.replaceVars(s[o],a),o))){return}}}}else{for(l=0;l<s.length;l++){if(r==="attributes"?e.getAttrib(t,s[l]):Qd.getStyle(e,t,s[l])){return n}}}}return n};var zy=function(e,t,n,r,i){var a=e.formatter.get(n);var o,u,s,l;var f=e.dom;if(a&&t){for(u=0;u<a.length;u++){o=a[u];if(Fy(e.dom,t,o)&&Hy(f,t,o,"attributes",i,r)&&Hy(f,t,o,"styles",i,r)){if(l=o.classes){for(s=0;s<l.length;s++){if(!e.dom.hasClass(t,l[s])){return}}}return o}}}};var Uy=function(e,t,n,r){var i;if(r){return My(e,r,t,n)}r=e.selection.getNode();if(My(e,r,t,n)){return true}i=e.selection.getStart();if(i!==r){if(My(e,i,t,n)){return true}}return false};var Wy=function(e,t,n){var r;var i=[];var a={};r=e.selection.getStart();e.dom.getParent(r,(function(r){var o,u;for(o=0;o<t.length;o++){u=t[o];if(!a[u]&&zy(e,r,u,n)){a[u]=true;i.push(u)}}}),e.dom.getRoot());return i};var jy=function(e,t){var n=e.formatter.get(t);var r,i,a,o,u;var s=e.dom;if(n){r=e.selection.getStart();i=Qd.getParents(s,r);for(o=n.length-1;o>=0;o--){u=n[o].selector;if(!u||n[o].defaultBlock){return true}for(a=i.length-1;a>=0;a--){if(s.is(i[a],u)){return true}}}}return false};var Vy={matchNode:zy,matchName:Fy,match:Uy,matchAll:Wy,canApply:jy,matchesUnInheritedFormatSelector:Ly};var qy=function(e,t){return e.splitText(t)};var $y=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t===r&&jo.isText(t)){if(n>0&&n<t.nodeValue.length){r=qy(t,n);t=r.previousSibling;if(i>n){i=i-n;t=r=qy(r,i).previousSibling;i=r.nodeValue.length;n=0}else{i=0}}}else{if(jo.isText(t)&&n>0&&n<t.nodeValue.length){t=qy(t,n);n=0}if(jo.isText(r)&&i>0&&i<r.nodeValue.length){r=qy(r,i).previousSibling;i=r.nodeValue.length}}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}};var Ky={split:$y};var Yy=qs.ZWSP,Xy="_mce_caret";var Gy=function(e,t){return e.importNode(t,true)};var Jy=function(e){var t=[];while(e){if(e.nodeType===3&&e.nodeValue!==Yy||e.childNodes.length>1){return[]}if(e.nodeType===1){t.push(e)}e=e.firstChild}return t};var Zy=function(e){return Jy(e).length>0};var Qy=function(e){var t;if(e){t=new to(e,e);for(e=t.current();e;e=t.next()){if(e.nodeType===3){return e}}}return null};var ew=function(e){var t=vi.fromTag("span");Wi(t,{id:Xy,"data-mce-bogus":"1","data-mce-type":"format-caret"});if(e){qu(t,vi.fromText(Yy))}return t};var tw=function(e){var t=Qy(e);if(t&&t.nodeValue.charAt(0)===Yy){t.deleteData(0,1)}return t};var nw=function(e,t,n){if(n===void 0){n=true}var r=e.dom,i=e.selection;if(Zy(t)){wh.deleteElement(e,false,vi.fromDom(t),n)}else{var a=i.getRng();var o=r.getParent(t,r.isBlock);var u=tw(t);if(a.startContainer===u&&a.startOffset>0){a.setStart(u,a.startOffset-1)}if(a.endContainer===u&&a.endOffset>0){a.setEnd(u,a.endOffset-1)}r.remove(t,true);if(o&&r.isEmpty(o)){um.fillWithPaddingBr(vi.fromDom(o))}i.setRng(a)}};var rw=function(e,t,n){if(n===void 0){n=true}var r=e.dom,i=e.selection;if(!t){t=Xf(e.getBody(),i.getStart());if(!t){while(t=r.get(Xy)){nw(e,t,false)}}}else{nw(e,t,n)}};var iw=function(e,t,n){var r=e.dom,i=r.getParent(n,l(Qd.isTextBlock,e));if(i&&r.isEmpty(i)){n.parentNode.replaceChild(t,n)}else{um.removeTrailingBr(vi.fromDom(n));if(r.isEmpty(n)){n.parentNode.replaceChild(t,n)}else{r.insertAfter(t,n)}}};var aw=function(e,t){e.appendChild(t);return t};var ow=function(e,t){var n=z(e,(function(e,t){return aw(e,t.cloneNode(false))}),t);return aw(n,n.ownerDocument.createTextNode(Yy))};var uw=function(e,t,n){var r,i,a,o,u,s,l;var f=e.selection;r=f.getRng(true);o=r.startOffset;s=r.startContainer;l=s.nodeValue;i=Xf(e.getBody(),f.getStart());if(i){a=Qy(i)}var c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&o>0&&o<l.length&&c.test(l.charAt(o))&&c.test(l.charAt(o-1))){u=f.getBookmark();r.collapse(true);r=mv.expandRng(e,r,e.formatter.get(t));r=Ky.split(r);e.formatter.apply(t,n,r);f.moveToBookmark(u)}else{if(!i||a.nodeValue!==Yy){i=Gy(e.getDoc(),ew(true).dom());a=i.firstChild;r.insertNode(i);o=1;e.formatter.apply(t,n,i)}else{e.formatter.apply(t,n,i)}f.setCursorLocation(a,o)}};var sw=function(e,t,n,r){var i=e.dom,a=e.selection;var o,u,s;var l,f,c;var d=[],v=a.getRng();var m;o=v.startContainer;u=v.startOffset;f=o;if(o.nodeType===3){if(u!==o.nodeValue.length){l=true}f=f.parentNode}while(f){if(Vy.matchNode(e,f,t,n,r)){c=f;break}if(f.nextSibling){l=true}d.push(f);f=f.parentNode}if(!c){return}if(l){s=a.getBookmark();v.collapse(true);var g=mv.expandRng(e,v,e.formatter.get(t),true);g=Ky.split(g);e.formatter.remove(t,n,g);a.moveToBookmark(s)}else{m=Xf(e.getBody(),c);var p=ew(false).dom();var h=ow(d,p);if(m){iw(e,p,m)}else{iw(e,p,c)}nw(e,m,false);a.setCursorLocation(h,1);if(i.isEmpty(c)){i.remove(c)}}};var lw=function(e,t){var n=e.selection,r=e.getBody();rw(e,null,false);if((t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===Yy){rw(e,Xf(r,n.getStart()))}if(t===37||t===39){rw(e,Xf(r,n.getStart()))}};var fw=function(e){e.on("mouseup keydown",(function(t){lw(e,t.keyCode)}))};var cw=function(e,t){var n=ew(false);var r=ow(t,n.dom());Wu(vi.fromDom(e),n);Gu(vi.fromDom(e));return df(r,0)};var dw=function(e,t){var n=e.schema.getTextInlineElements();return n.hasOwnProperty(Ei(t))&&!Yf(t.dom())&&!jo.isBogus(t.dom())};var vw=function(e){return Yf(e.dom())&&Zy(e.dom())};var mw=function(e,t){var n=Yg.parentsAndSelf(t,e);return j(n,mo).fold(u(n),(function(e){return n.slice(0,e)}))};var gw=function(e){return Ea(e).length===1};var pw=function(e,t,n,r){var i=l(dw,t);var a=I(H(r,i),(function(e){return e.dom()}));if(a.length===0){wh.deleteElement(t,e,n)}else{var o=cw(n.dom(),a);t.selection.setRng(o.toRange())}};var hw=function(e,t){var n=vi.fromDom(e.getBody());var r=vi.fromDom(e.selection.getStart());var i=H(mw(n,r),gw);return Z(i).map((function(n){var r=df.fromRangeStart(e.selection.getRng());if(Cg.willDeleteLastPositionInElement(t,r,n.dom())&&!vw(n)){pw(t,e,n,i);return true}else{return false}})).getOr(false)};var bw=function(e,t){return e.selection.isCollapsed()?hw(e,t):false};var yw={backspaceDelete:bw};var ww=function(e){var t=0,n=0;var r=e;while(r&&r.nodeType){t+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}return{x:t,y:n}};var xw=function(e,t,n){var r={elm:t,alignToTop:n};e.fire("scrollIntoView",r);return r.isDefaultPrevented()};var Cw=function(e,t,n){var r,i;var a=e.dom;var o=a.getRoot();var u,s,l=0;if(xw(e,t,n)){return}if(!jo.isElement(t)){return}if(n===false){l=t.offsetHeight}if(o.nodeName!=="BODY"){var f=e.selection.getScrollContainer();if(f){r=ww(t).y-ww(f).y+l;s=f.clientHeight;u=f.scrollTop;if(r<u||r+25>u+s){f.scrollTop=r<u?r:r-s+25}return}}i=a.getViewPort(e.getWin());r=a.getPos(t).y+l;u=i.y;s=i.h;if(r<i.y||r+25>u+s){e.getWin().scrollTo(0,r<u?r:r-s+25)}};var kw=function(e){if(e.inline){return e.getBody().getBoundingClientRect()}else{var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}};var Sw=function(e,t,n){if(e.inline){e.getBody().scrollLeft+=t;e.getBody().scrollTop+=n}else{e.getWin().scrollBy(t,n)}};var Tw=function(e,t){J(cf.fromRangeStart(t).getClientRects()).each((function(t){var n=kw(e);var r=Al(n,t);var i=4;var a=r.x>0?r.x+i:r.x-i;var o=r.y>0?r.y+i:r.y-i;Sw(e,r.x!==0?a:0,r.y!==0?o:0)}))};var Ew={scrollElementIntoView:Cw,scrollRangeIntoView:Tw};var Nw=jo.isContentEditableTrue;var Rw=jo.isContentEditableFalse;var _w=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)};var Dw=function(e){var t=e.ownerDocument.createRange();t.selectNode(e);return t};var Ow=function(e,t){var n=e.fire("BeforeObjectSelected",{target:t});if(n.isDefaultPrevented()){return null}return Dw(t)};var Pw=function(e,t,n){var r=Lc(1,e.getBody(),t);var i=df.fromRangeStart(r);var a=i.getNode();if(Rw(a)){return _w(1,e,a,!i.isAtEnd(),false)}var o=i.getNode(true);if(Rw(o)){return _w(1,e,o,false,false)}var u=e.dom.getParent(i.getNode(),(function(e){return Rw(e)||Nw(e)}));if(Rw(u)){return _w(1,e,u,false,n)}return null};var Aw=function(e,t,n){if(!t||!t.collapsed){return t}var r=Pw(e,t,n);if(r){return r}return t};var Bw=function(e,t){e.selection.setRng(t);Ew.scrollRangeIntoView(e,e.selection.getRng())};var Iw=function(e,t){if(jo.isText(t)&&t.data.length===0){e.remove(t)}};var Lw=function(e,t,n,r,i,a){var o=_w(r,e,a.getNode(!i),i,true);if(t.collapsed){var u=t.cloneRange();if(i){u.setEnd(o.startContainer,o.startOffset)}else{u.setStart(o.endContainer,o.endOffset)}u.deleteContents()}else{t.deleteContents()}e.selection.setRng(o);Iw(e.dom,n);return true};var Mw=function(e,t){var n=e.selection.getRng();if(!jo.isText(n.commonAncestorContainer)){return false}var r=t?jc.Forwards:jc.Backwards;var i=nd(e.getBody());var a=l(Uc,i.next);var o=l(Uc,i.prev);var u=t?a:o;var s=t?Bp:Ip;var f=Fc(r,e.getBody(),n);var c=pg.normalizePosition(t,u(f));if(!c){return false}else if(s(c)){return Lw(e,n,f.getNode(),r,t,c)}var d=u(c);if(d&&s(d)){if(Wc(c,d)){return Lw(e,n,f.getNode(),r,t,d)}}return false};var Fw=function(e,t){return Mw(e,t)};var Hw={backspaceDelete:Fw};var zw=function(e,t){e.getDoc().execCommand(t,false,null)};var Uw=function(e){if(Dh.backspaceDelete(e,false)){return}else if(Hw.backspaceDelete(e,false)){return}else if(Hb.backspaceDelete(e,false)){return}else if(sp.backspaceDelete(e,false)){return}else if(By.backspaceDelete(e)){return}else if(pp.backspaceDelete(e,false)){return}else if(yw.backspaceDelete(e,false)){return}else{zw(e,"Delete");Cg.paddEmptyBody(e)}};var Ww=function(e){if(Dh.backspaceDelete(e,true)){return}else if(Hw.backspaceDelete(e,true)){return}else if(Hb.backspaceDelete(e,true)){return}else if(sp.backspaceDelete(e,true)){return}else if(By.backspaceDelete(e)){return}else if(pp.backspaceDelete(e,true)){return}else if(yw.backspaceDelete(e,true)){return}else{zw(e,"ForwardDelete")}};var jw={deleteCommand:Uw,forwardDeleteCommand:Ww};var Vw=function(e,t,n){var r=function(t){return Gi(t,e)};var i=function(e){return da(vi.fromDom(t),e)};return ps(vi.fromDom(n),(function(e){return r(e).isSome()}),i).bind(r)};var qw=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n};var $w=function(e,t){if(/[0-9.]+px$/.test(e)){return qw(parseInt(e,10)*72/96,t||0)+"pt"}return e};var Kw=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")};var Yw=function(e,t){return b.from(Bu.DOM.getStyle(t,e,true))};var Xw=function(e){return function(t,n){return b.from(n).map(vi.fromDom).filter(_i).bind((function(n){return Vw(e,t,n.dom()).or(Yw(e,n.dom()))})).getOr("")}};var Gw={getFontSize:Xw("font-size"),getFontFamily:o(Kw,Xw("font-family")),toPt:$w};var Jw=function(e){return pd.firstPositionIn(e.getBody()).map((function(e){var t=e.container();return jo.isText(t)?t.parentNode:t}))};var Zw=function(e,t){return e.startContainer===t&&e.startOffset===0};var Qw=function(e){return b.from(e.selection.getRng()).bind((function(t){var n=e.getBody();return Zw(t,n)?b.none():b.from(e.selection.getStart(true))}))};var ex=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=og.getFontStyleValues(e);var i=og.getFontSizeClasses(e);if(i){return i[n-1]||t}else{return r[n-1]||t}}else{return t}}else{return t}};var tx=function(e,t){e.formatter.toggle("fontname",{value:ex(e,t)});e.nodeChanged()};var nx=function(e){return Qw(e).fold((function(){return Jw(e).map((function(t){return Gw.getFontFamily(e.getBody(),t)})).getOr("")}),(function(t){return Gw.getFontFamily(e.getBody(),t)}))};var rx=function(e,t){e.formatter.toggle("fontsize",{value:ex(e,t)});e.nodeChanged()};var ix=function(e){return Qw(e).fold((function(){return Jw(e).map((function(t){return Gw.getFontSize(e.getBody(),t)})).getOr("")}),(function(t){return Gw.getFontSize(e.getBody(),t)}))};var ax=function(e,t){return e&&t&&(e.startContainer===t.startContainer&&e.startOffset===t.startOffset)&&(e.endContainer===t.endContainer&&e.endOffset===t.endOffset)};var ox={isEq:ax};var ux=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var sx=function(e,t,n){return ux(e,t,n)!==null};var lx=function(e,t,n){return sx(e,t,(function(e){return e.nodeName===n}))};var fx=function(e){return e&&e.nodeName==="TABLE"};var cx=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var dx=function(e,t){return Gs(e)&&sx(e,t,Yf)===false};var vx=function(e,t,n){var r=new to(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());while(t=r[n?"prev":"next"]()){if(jo.isBr(t)){return true}}};var mx=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t};var gx=function(e,t){while(t&&t!==e){if(jo.isContentEditableFalse(t)){return true}t=t.parentNode}return false};var px=function(e,t,n,r,i){var a,o,u;var s=e.getRoot();var l;var f=e.schema.getNonEmptyElements();u=e.getParent(i.parentNode,e.isBlock)||s;if(r&&jo.isBr(i)&&t&&e.isEmpty(u)){return b.some(cf(i.parentNode,e.nodeIndex(i)))}a=new to(i,u);while(l=a[r?"prev":"next"]()){if(e.getContentEditableParent(l)==="false"||dx(l,s)){return b.none()}if(jo.isText(l)&&l.nodeValue.length>0){if(lx(l,s,"A")===false){return b.some(cf(l,r?l.nodeValue.length:0))}return b.none()}if(e.isBlock(l)||f[l.nodeName.toLowerCase()]){return b.none()}o=l}if(n&&o){return b.some(cf(o,0))}return b.none()};var hx=function(e,t,n,r){var i,a,o;var u=e.getRoot();var s,l;var f,c,d=false;i=r[(n?"start":"end")+"Container"];a=r[(n?"start":"end")+"Offset"];c=jo.isElement(i)&&a===i.childNodes.length;l=e.schema.getNonEmptyElements();f=n;if(Gs(i)){return b.none()}if(jo.isElement(i)&&a>i.childNodes.length-1){f=false}if(jo.isDocument(i)){i=u;a=0}if(i===u){if(f){s=i.childNodes[a>0?a-1:0];if(s){if(Gs(s)){return b.none()}if(l[s.nodeName]||fx(s)){return b.none()}}}if(i.hasChildNodes()){a=Math.min(!f&&a>0?a-1:a,i.childNodes.length-1);i=i.childNodes[a];a=jo.isText(i)&&c?i.data.length:0;if(!t&&i===u.lastChild&&fx(i)){return b.none()}if(gx(u,i)||Gs(i)){return b.none()}if(i.hasChildNodes()&&fx(i)===false){s=i;o=new to(i,u);do{if(jo.isContentEditableFalse(s)||Gs(s)){d=false;break}if(jo.isText(s)&&s.nodeValue.length>0){a=f?0:s.nodeValue.length;i=s;d=true;break}if(l[s.nodeName.toLowerCase()]&&!cx(s)){a=e.nodeIndex(s);i=s.parentNode;if(!f){a++}d=true;break}}while(s=f?o.next():o.prev())}}}if(t){if(jo.isText(i)&&a===0){px(e,c,t,true,i).each((function(e){i=e.container();a=e.offset();d=true}))}if(jo.isElement(i)){s=i.childNodes[a];if(!s){s=i.childNodes[a-1]}if(s&&jo.isBr(s)&&!mx(s,"A")&&!vx(e,s,false)&&!vx(e,s,true)){px(e,c,t,true,s).each((function(e){i=e.container();a=e.offset();d=true}))}}}if(f&&!t&&jo.isText(i)&&a===i.nodeValue.length){px(e,c,t,false,i).each((function(e){i=e.container();a=e.offset();d=true}))}return d?b.some(cf(i,a)):b.none()};var bx=function(e,t){var n=t.collapsed,r=t.cloneRange();var i=cf.fromRangeStart(t);hx(e,n,true,r).each((function(e){if(!n||!cf.isAbove(i,e)){r.setStart(e.container(),e.offset())}}));if(!n){hx(e,n,false,r).each((function(e){r.setEnd(e.container(),e.offset())}))}if(n){r.collapse(true)}return ox.isEq(t,r)?b.none():b.some(r)};var yx={normalize:bx};var wx=function(e,t,n){var r=new to(t,n);var i;var a=e.getNonEmptyElements();while(i=r.next()){if(a[i.nodeName.toLowerCase()]||i.length>0){return true}}};var xx=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n);t.scrollIntoView(r);e.remove(r)};var Cx=function(e,t,n,r){var i=e.createRng();if(!r){i.setStartAfter(n);i.setEndAfter(n)}else{i.setStartBefore(n);i.setEndBefore(n)}t.setRng(i)};var kx=function(e,t){var n=e.selection;var r=e.dom;var i=n.getRng();var a;var o;yx.normalize(r,i).each((function(e){i.setStart(e.startContainer,e.startOffset);i.setEnd(e.endContainer,e.endOffset)}));var u=i.startOffset;var s=i.startContainer;if(s.nodeType===1&&s.hasChildNodes()){var l=u>s.childNodes.length-1;s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s;if(l&&s.nodeType===3){u=s.nodeValue.length}else{u=0}}var f=r.getParent(s,r.isBlock);var c=f?r.getParent(f.parentNode,r.isBlock):null;var d=c?c.nodeName.toUpperCase():"";var v=t&&t.ctrlKey;if(d==="LI"&&!v){f=c}if(s&&s.nodeType===3&&u>=s.nodeValue.length){if(!wx(e.schema,s,f)){a=r.create("br");i.insertNode(a);i.setStartAfter(a);i.setEndAfter(a);o=true}}a=r.create("br");Df(r,i,a);xx(r,n,a);Cx(r,n,a,o);e.undoManager.add()};var Sx=function(e,t){var n=vi.fromTag("br");Wu(vi.fromDom(t),n);e.undoManager.add()};var Tx=function(e,t){if(!Nx(e.getBody(),t)){ju(vi.fromDom(t),vi.fromTag("br"))}var n=vi.fromTag("br");ju(vi.fromDom(t),n);xx(e.dom,e.selection,n.dom());Cx(e.dom,e.selection,n.dom(),false);e.undoManager.add()};var Ex=function(e){return jo.isBr(e.getNode())};var Nx=function(e,t){if(Ex(df.after(t))){return true}else{return pd.nextPosition(e,df.after(t)).map((function(e){return jo.isBr(e.getNode())})).getOr(false)}};var Rx=function(e){return e&&e.nodeName==="A"&&"href"in e};var _x=function(e){return e.fold(u(false),Rx,Rx,u(false))};var Dx=function(e){var t=l(pg.isInlineTarget,e);var n=df.fromRangeStart(e.selection.getRng());return db.readLocation(t,e.getBody(),n).filter(_x)};var Ox=function(e,t){t.fold(a,l(Sx,e),l(Tx,e),a)};var Px=function(e,t){var n=Dx(e);if(n.isSome()){n.each(l(Ox,e))}else{kx(e,t)}};var Ax={insert:Px};var Bx=Zi("start","soffset","finish","foffset");var Ix={create:Bx};var Lx=bp.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var Mx=function(e,t,n,r){return e.fold(t,n,r)};var Fx=function(e){return e.fold(s,s,s)};var Hx=Lx.before;var zx=Lx.on;var Ux=Lx.after;var Wx={before:Hx,on:zx,after:Ux,cata:Mx,getStart:Fx};var jx=bp.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var Vx=function(e){return jx.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var qx=function(e){return e.match({domRange:function(e){return vi.fromDom(e.startContainer)},relative:function(e,t){return Wx.getStart(e)},exact:function(e,t,n,r){return e}})};var $x=jx.domRange;var Kx=jx.relative;var Yx=jx.exact;var Xx=function(e){var t=qx(e);return ya(t)};var Gx=Ix.create;var Jx={domRange:$x,relative:Kx,exact:Yx,exactFromRange:Vx,getWin:Xx,range:Gx};var Zx=ui.detect().browser;var Qx=function(e,t){var n=Di(t)?Cv(t).length:Ea(t).length+1;if(e>n){return n}else if(e<0){return 0}return e};var eC=function(e){return Jx.range(e.start(),Qx(e.soffset(),e.start()),e.finish(),Qx(e.foffset(),e.finish()))};var tC=function(e,t){return!jo.isRestrictedNode(t.dom())&&(pa(e,t)||da(e,t))};var nC=function(e){return function(t){return tC(e,t.start())&&tC(e,t.finish())}};var rC=function(e){return e.inline===true||Zx.isIE()};var iC=function(e){return Jx.range(vi.fromDom(e.startContainer),e.startOffset,vi.fromDom(e.endContainer),e.endOffset)};var aC=function(e){var t=e.getSelection();var n=!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0));return n.map(iC)};var oC=function(e){var t=ya(e);return aC(t.dom()).filter(nC(e))};var uC=function(e,t){return b.from(t).filter(nC(e)).map(eC)};var sC=function(e){var t=i.document.createRange();try{t.setStart(e.start().dom(),e.soffset());t.setEnd(e.finish().dom(),e.foffset());return b.some(t)}catch(e){return b.none()}};var lC=function(e){var t=rC(e)?oC(vi.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark};var fC=function(e,t){var n=vi.fromDom(e.getBody());var r=rC(e)?b.from(t):b.none();var i=r.map(iC).filter(nC(n));e.bookmark=i.isSome()?i:e.bookmark};var cC=function(e){var t=e.bookmark?e.bookmark:b.none();return t.bind(l(uC,vi.fromDom(e.getBody()))).bind(sC)};var dC=function(e){cC(e).each((function(t){e.selection.setRng(t)}))};var vC={store:lC,storeNative:fC,readRange:aC,restore:dC,getRng:cC,getBookmark:oC,validate:uC};var mC=function(e,t,n,r,i,a){if(e.getContentEditable(a)==="false"){return}var o=n?"margin":"padding";o=a.nodeName==="TABLE"?"margin":o;o+=e.getStyle(a,"direction",true)==="rtl"?"Right":"Left";if(t==="outdent"){var u=Math.max(0,parseInt(a.style[o]||0,10)-r);e.setStyle(a,o,u?u+i:"")}else{var u=parseInt(a.style[o]||0,10)+r+i;e.setStyle(a,o,u)}};var gC=function(e){return bo(e)||yo(e)};var pC=function(e){return wa(e).map(gC).getOr(false)};var hC=function(e){return H(I(e.selection.getSelectedBlocks(),vi.fromDom),(function(e){return!gC(e)&&!pC(e)}))};var bC=function(e,t){var n=e.settings,r=e.dom,i=e.selection,a=e.formatter;var o=/[a-z%]+$/i.exec(n.indentation)[0];var u=parseInt(n.indentation,10);var s=e.getParam("indent_use_margin",false);if(!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")){if(!n.forced_root_block&&!r.getParent(i.getNode(),r.isBlock)){a.apply("div")}}L(hC(e),(function(e){mC(r,t,s,u,o,e.dom())}))};var yC=Hn.each,wC=Hn.extend;var xC=Hn.map,CC=Hn.inArray;function kC(e){var t,n,r;var i={state:{},exec:{},value:{}};var a=e.settings,o;e.on("PreInit",(function(){t=e.dom;n=e.selection;a=e.settings;r=e.formatter}));var u=function(t,n,r,a){var o,u,s=false;if(e.removed){return}if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)&&(!a||!a.skip_focus)){e.focus()}else{vC.restore(e)}a=e.fire("BeforeExecCommand",{command:t,ui:n,value:r});if(a.isDefaultPrevented()){return false}u=t.toLowerCase();if(o=i.exec[u]){o(u,n,r);e.fire("ExecCommand",{command:t,ui:n,value:r});return true}yC(e.plugins,(function(i){if(i.execCommand&&i.execCommand(t,n,r)){e.fire("ExecCommand",{command:t,ui:n,value:r});s=true;return false}}));if(s){return s}if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r)){e.fire("ExecCommand",{command:t,ui:n,value:r});return true}try{s=e.getDoc().execCommand(t,n,r)}catch(e){}if(s){e.fire("ExecCommand",{command:t,ui:n,value:r});return true}return false};var s=function(t){var n;if(e.quirks.isHidden()||e.removed){return}t=t.toLowerCase();if(n=i.state[t]){return n(t)}try{return e.getDoc().queryCommandState(t)}catch(e){}return false};var l=function(t){var n;if(e.quirks.isHidden()||e.removed){return}t=t.toLowerCase();if(n=i.value[t]){return n(t)}try{return e.getDoc().queryCommandValue(t)}catch(e){}};var f=function(e,t){t=t||"exec";yC(e,(function(e,n){yC(n.toLowerCase().split(","),(function(n){i[t][n]=e}))}))};var c=function(t,n,r){t=t.toLowerCase();i.exec[t]=function(t,i,a,o){return n.call(r||e,i,a,o)}};var d=function(t){t=t.toLowerCase();if(i.exec[t]){return true}try{return e.getDoc().queryCommandSupported(t)}catch(e){}return false};var v=function(t,n,r){t=t.toLowerCase();i.state[t]=function(){return n.call(r||e)}};var m=function(t,n,r){t=t.toLowerCase();i.value[t]=function(){return n.call(r||e)}};var g=function(e){e=e.toLowerCase();return!!i.exec[e]};wC(this,{execCommand:u,queryCommandState:s,queryCommandValue:l,queryCommandSupported:d,addCommands:f,addCommand:c,addQueryStateHandler:v,addQueryValueHandler:m,hasCustomCommand:g});var p=function(t,n,r){if(n===undefined){n=false}if(r===undefined){r=null}return e.getDoc().execCommand(t,n,r)};var h=function(e){return r.match(e)};var b=function(t,n){r.toggle(t,n?{value:n}:undefined);e.nodeChanged()};var y=function(e){o=n.getBookmark(e)};var w=function(){n.moveToBookmark(o)};f({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n=e.getDoc();var r;try{p(t)}catch(e){r=true}if(t==="paste"&&!n.queryCommandEnabled(t)){r=true}if(r||!n.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(Ne.mac){i=i.replace(/Ctrl\+/g,"+")}e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");if(t){e.dom.remove(t,true)}return}r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);if(t==="full"){t="justify"}yC("left,center,right,justify".split(","),(function(e){if(t!==e){r.remove("align"+e)}}));if(t!=="none"){b("align"+t)}},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;p(e);r=t.getParent(n.getNode(),"ol,ul");if(r){i=r.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){y();t.split(i,r);w()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){b(e)},"ForeColor,HiliteColor":function(e,t,n){b(e,n)},FontName:function(t,n,r){tx(e,r)},FontSize:function(t,n,r){rx(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){b("blockquote")},FormatBlock:function(e,t,n){return b(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent());n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var a=i||n.getNode();if(a!==e.getBody()){y();e.dom.remove(a,true);w()}},mceSelectNodeDepth:function(r,i,a){var o=0;t.getParent(n.getNode(),(function(e){if(e.nodeType===1&&o++===a){n.select(e);return false}}),e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Om.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){n.setContent("tiny_mce_marker");var a=e.getContent();e.setContent(a.replace(/tiny_mce_marker/g,(function(){return i})))},mceToggleFormat:function(e,t,n){b(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){bC(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual;e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",false,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,a){var o;if(typeof a==="string"){a={href:a}}o=t.getParent(n.getNode(),"a");a.href=a.href.replace(" ","%20");if(!o||!a.href){r.remove("link")}if(a.href){r.apply("link",a,o)}},selectAll:function(){var e=t.getParent(n.getStart(),jo.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e);n.setRng(r)}},delete:function(){jw.deleteCommand(e)},forwardDelete:function(){jw.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){Ax.insert(e,r);return true}});var x=function(e){return function(){var i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks();var a=xC(i,(function(t){return!!r.matchNode(t,e)}));return CC(a,true)!==-1}};f({JustifyLeft:x("alignleft"),JustifyCenter:x("aligncenter"),JustifyRight:x("alignright"),JustifyFull:x("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return h(e)},mceBlockQuote:function(){return h("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return true}if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return true}}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&(e==="insertunorderedlist"&&r.tagName==="UL"||e==="insertorderedlist"&&r.tagName==="OL")}},"state");f({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}});m("FontName",(function(){return nx(e)}),this);m("FontSize",(function(){return ix(e)}),this)}var SC=Hn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");var TC=function(e){var t=this;var n,r={},i;var a=function(){return false};var o=function(){return true};e=e||{};n=e.scope||t;i=e.toggleEvent||a;var u=function(t,i){var u,s,f,c;t=t.toLowerCase();i=i||{};i.type=t;if(!i.target){i.target=n}if(!i.preventDefault){i.preventDefault=function(){i.isDefaultPrevented=o};i.stopPropagation=function(){i.isPropagationStopped=o};i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=o};i.isDefaultPrevented=a;i.isPropagationStopped=a;i.isImmediatePropagationStopped=a}if(e.beforeFire){e.beforeFire(i)}u=r[t];if(u){for(s=0,f=u.length;s<f;s++){c=u[s];if(c.once){l(t,c.func)}if(i.isImmediatePropagationStopped()){i.stopPropagation();return i}if(c.func.call(n,i)===false){i.preventDefault();return i}}}return i};var s=function(e,n,o,u){var s,l,f;if(n===false){n=a}if(n){n={func:n};if(u){Hn.extend(n,u)}l=e.toLowerCase().split(" ");f=l.length;while(f--){e=l[f];s=r[e];if(!s){s=r[e]=[];i(e,true)}if(o){s.unshift(n)}else{s.push(n)}}}return t};var l=function(e,n){var a,o,u,s,l;if(e){s=e.toLowerCase().split(" ");a=s.length;while(a--){e=s[a];o=r[e];if(!e){for(u in r){i(u,false);delete r[u]}return t}if(o){if(!n){o.length=0}else{l=o.length;while(l--){if(o[l].func===n){o=o.slice(0,l).concat(o.slice(l+1));r[e]=o}}}if(!o.length){i(e,false);delete r[e]}}}}else{for(e in r){i(e,false)}r={}}return t};var f=function(e,t,n){return s(e,t,n,{once:true})};var c=function(e){e=e.toLowerCase();return!(!r[e]||r[e].length===0)};t.fire=u;t.on=s;t.off=l;t.once=f;t.has=c};TC.isNative=function(e){return!!SC[e.toLowerCase()]};var EC=function(e){if(!e._eventDispatcher){e._eventDispatcher=new TC({scope:e,toggleEvent:function(t,n){if(TC.isNative(t)&&e.toggleNativeEvent){e.toggleNativeEvent(t,n)}}})}return e._eventDispatcher};var NC={fire:function(e,t,n){var r=this;if(r.removed&&e!=="remove"&&e!=="detach"){return t}t=EC(r).fire(e,t,n);if(n!==false&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped()){i.fire(e,t,false);i=i.parent()}}return t},on:function(e,t,n){return EC(this).on(e,t,n)},off:function(e,t){return EC(this).off(e,t)},once:function(e,t){return EC(this).once(e,t)},hasEventListeners:function(e){return EC(this).has(e)}};var RC=function(e,t){return e.fire("PreProcess",t)};var _C=function(e,t){return e.fire("PostProcess",t)};var DC=function(e){return e.fire("remove")};var OC=function(e){return e.fire("detach")};var PC=function(e,t){return e.fire("SwitchMode",{mode:t})};var AC=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})};var BC=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})};var IC={firePreProcess:RC,firePostProcess:_C,fireRemove:DC,fireDetach:OC,fireSwitchMode:PC,fireObjectResizeStart:AC,fireObjectResized:BC};var LC=function(e,t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}};var MC=function(e,t,n){if(cs(e,t)&&n===false){fs(e,t)}else if(n){ss(e,t)}};var FC=function(e,t){MC(vi.fromDom(e.getBody()),"mce-content-readonly",t);if(t){e.selection.controlSelection.hideResizeRect();e.readonly=true;e.getBody().contentEditable="false"}else{e.readonly=false;e.getBody().contentEditable="true";LC(e,"StyleWithCSS",false);LC(e,"enableInlineTableEditing",false);LC(e,"enableObjectResizing",false);e.focus();e.nodeChanged()}};var HC=function(e,t){if(t===zC(e)){return}if(e.initialized){FC(e,t==="readonly")}else{e.on("init",(function(){FC(e,t==="readonly")}))}IC.fireSwitchMode(e,t)};var zC=function(e){return e.readonly?"readonly":"design"};var UC=function(e){return e.readonly===true};var WC=Bu.DOM;var jC;var VC=function(e,t){if(t==="selectionchange"){return e.getDoc()}if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)){return e.getDoc().documentElement}if(e.settings.event_root){if(!e.eventRoot){e.eventRoot=WC.select(e.settings.event_root)[0]}return e.eventRoot}return e.getBody()};var qC=function(e){return!e.hidden&&!e.readonly};var $C=function(e,t,n){if(qC(e)){e.fire(t,n)}else if(UC(e)){n.preventDefault()}};var KC=function(e,t){var n,r;if(!e.delegates){e.delegates={}}if(e.delegates[t]||e.removed){return}n=VC(e,t);if(e.settings.event_root){if(!jC){jC={};e.editorManager.on("removeEditor",(function(){var t;if(!e.editorManager.activeEditor){if(jC){for(t in jC){e.dom.unbind(VC(e,t))}jC=null}}}))}if(jC[t]){return}r=function(n){var r=n.target;var i=e.editorManager.get();var a=i.length;while(a--){var o=i[a].getBody();if(o===r||WC.isChildOf(r,o)){$C(i[a],t,n)}}};jC[t]=r;WC.bind(n,t,r)}else{r=function(n){$C(e,t,n)};WC.bind(n,t,r);e.delegates[t]=r}};var YC={bindPendingEventDelegates:function(){var e=this;Hn.each(e._pendingNativeEvents,(function(t){KC(e,t)}))},toggleNativeEvent:function(e,t){var n=this;if(e==="focus"||e==="blur"){return}if(t){if(n.initialized){KC(n,e)}else{if(!n._pendingNativeEvents){n._pendingNativeEvents=[e]}else{n._pendingNativeEvents.push(e)}}}else if(n.initialized){n.dom.unbind(VC(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents:function(){var e=this;var t=e.getBody();var n=e.dom;var r;if(e.delegates){for(r in e.delegates){e.dom.unbind(VC(e,r),r,e.delegates[r])}delete e.delegates}if(!e.inline&&t&&n){t.onload=null;n.unbind(e.getWin());n.unbind(e.getDoc())}if(n){n.unbind(t);n.unbind(e.getContainer())}}};YC=Hn.extend({},NC,YC);var XC=YC;var GC=Zi("sections","settings");var JC=ui.detect();var ZC=JC.deviceType.isTouch();var QC=["lists","autolink","autosave"];var ek={theme:"mobile"};var tk=function(e){var t=k(e)?e.join(" "):e;var n=I(x(t)?t.split(" "):[],Gr);return H(n,(function(e){return e.length>0}))};var nk=function(e){return H(e,l(A,QC))};var rk=function(e,t){var n=Li(t,(function(t,n){return A(e,n)}));return GC(n.t,n.f)};var ik=function(e,t,n){var r=e.sections();var i=r.hasOwnProperty(t)?r[t]:{};return Hn.extend({},n,i)};var ak=function(e,t){return e.sections().hasOwnProperty(t)};var ok=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,render_ui:true,indentation:"40px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:true}};var uk=function(e,t){var n=t.external_plugins?t.external_plugins:{};if(e&&e.external_plugins){return Hn.extend({},e.external_plugins,n)}else{return n}};var sk=function(e,t){return[].concat(tk(e)).concat(tk(t))};var lk=function(e,t,n,r){var i=tk(n.forced_plugins);var a=tk(r.plugins);var o=e&&ak(t,"mobile")?nk(a):a;var u=sk(i,o);return Hn.extend(r,{plugins:u.join(" ")})};var fk=function(e,t){var n=t.settings().inline;return e&&ak(t,"mobile")&&!n};var ck=function(e,t,n,r){var i=rk(["mobile"],r);var a=Hn.extend(t,n,i.settings(),fk(e,i)?ik(i,"mobile",ek):{},{validate:true,content_editable:i.settings().inline,external_plugins:uk(n,i.settings())});return lk(e,i,n,a)};var dk=function(e,t,n,r,i){var a=ok(t,n,e);return ck(ZC,a,r,i)};var vk=function(e,t,n){return b.from(t.settings[n]).filter(e)};var mk=function(e){var t={};if(typeof e==="string"){L(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),(function(e){var n=e.split("=");if(n.length>1){t[Hn.trim(n[0])]=Hn.trim(n[1])}else{t[Hn.trim(n[0])]=Hn.trim(n)}}))}else{t=e}return t};var gk=function(e){return function(t){return k(t)&&$(t,e)}};var pk=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;if(r==="hash"){return mk(i)}else if(r==="string"){return vk(x,e,t).getOr(n)}else if(r==="number"){return vk(N,e,t).getOr(n)}else if(r==="boolean"){return vk(T,e,t).getOr(n)}else if(r==="object"){return vk(C,e,t).getOr(n)}else if(r==="array"){return vk(k,e,t).getOr(n)}else if(r==="string[]"){return vk(gk(x),e,t).getOr(n)}else if(r==="function"){return vk(E,e,t).getOr(n)}else{return i}};var hk=Hn.each,bk=Hn.explode;var yk={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var wk=Hn.makeMap("alt,ctrl,shift,meta,access");function xk(e){var t=this;var n={};var r=[];var i=function(e){var t,n;var r={};hk(bk(e,"+"),(function(e){if(e in wk){r[e]=true}else{if(/^[0-9]{2,}$/.test(e)){r.keyCode=parseInt(e,10)}else{r.charCode=e.charCodeAt(0);r.keyCode=yk[e]||e.toUpperCase().charCodeAt(0)}}}));t=[r.keyCode];for(n in wk){if(r[n]){t.push(n)}else{r[n]=false}}r.id=t.join(",");if(r.access){r.alt=true;if(Ne.mac){r.ctrl=true}else{r.shift=true}}if(r.meta){if(Ne.mac){r.meta=true}else{r.ctrl=true;r.meta=false}}return r};var a=function(t,n,r,a){var o;o=Hn.map(bk(t,">"),i);o[o.length-1]=Hn.extend(o[o.length-1],{func:r,scope:a||e});return Hn.extend(o[0],{desc:e.translate(n),subpatterns:o.slice(1)})};var o=function(e){return e.altKey||e.ctrlKey||e.metaKey};var u=function(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123};var s=function(e,t){if(!t){return false}if(t.ctrl!==e.ctrlKey||t.meta!==e.metaKey){return false}if(t.alt!==e.altKey||t.shift!==e.shiftKey){return false}if(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode){e.preventDefault();return true}return false};var l=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",(function(e){if((o(e)||u(e))&&!e.isDefaultPrevented()){hk(n,(function(t){if(s(e,t)){r=t.subpatterns.slice(0);if(e.type==="keydown"){l(t)}return true}}));if(s(e,r[0])){if(r.length===1){if(e.type==="keydown"){l(r[0])}}r.shift()}}}));t.add=function(t,r,i,o){var u;u=i;if(typeof i==="string"){i=function(){e.execCommand(u,false,null)}}else if(Hn.isArray(u)){i=function(){e.execCommand(u[0],u[1],u[2])}}hk(bk(Hn.trim(t.toLowerCase())),(function(e){var t=a(e,r,i,o);n[t.id]=t}));return true};t.remove=function(e){var t=a(e);if(n[t.id]){delete n[t.id];return true}return false}}var Ck=function(e){var t=ha(e).dom();return e.dom()===t.activeElement};var kk=function(e){var t=e!==undefined?e.dom():i.document;return b.from(t.activeElement).map(vi.fromDom)};var Sk=function(e){return kk(ha(e)).filter((function(t){return e.dom().contains(t.dom())}))};var Tk=function(e,t){return e.dom.getParent(t,(function(t){return e.dom.getContentEditable(t)==="true"}))};var Ek=function(e){return e.collapsed?b.from(Il(e.startContainer,e.startOffset)).map(vi.fromDom):b.none()};var Nk=function(e,t){return Ek(t).bind((function(t){if(xo(t)){return b.some(t)}else if(pa(e,t)===false){return b.some(e)}else{return b.none()}}))};var Rk=function(e,t){Nk(vi.fromDom(e.getBody()),t).bind((function(e){return pd.firstPositionIn(e.dom())})).fold((function(){e.selection.normalize();return}),(function(t){return e.selection.setRng(t.toRange())}))};var _k=function(e){if(e.setActive){try{e.setActive()}catch(t){e.focus()}}else{e.focus()}};var Dk=function(e){return Ck(e)||Sk(e).isSome()};var Ok=function(e){return e.iframeElement&&Ck(vi.fromDom(e.iframeElement))};var Pk=function(e){var t=e.getBody();return t&&Dk(vi.fromDom(t))};var Ak=function(e){return e.inline?Pk(e):Ok(e)};var Bk=function(e){var t=e.selection,n=e.settings.content_editable;var r=e.getBody();var i=t.getRng();e.quirks.refreshContentEditable();var a=Tk(e,t.getNode());if(e.$.contains(r,a)){_k(a);Rk(e,i);Ik(e);return}if(e.bookmark!==undefined&&Ak(e)===false){vC.getRng(e).each((function(t){e.selection.setRng(t);i=t}))}if(!n){if(!Ne.opera){_k(r)}e.getWin().focus()}if(Ne.gecko||n){_k(r);Rk(e,i)}Ik(e)};var Ik=function(e){return e.editorManager.setActive(e)};var Lk=function(e,t){if(e.removed){return}t?Ik(e):Bk(e)};var Mk={focus:Lk,hasFocus:Ak};var Fk=function(e,t){var n=t.dom();return n[e]};var Hk=function(e,t){return parseInt(Yi(t,e),10)};var zk=l(Fk,"clientWidth");var Uk=l(Fk,"clientHeight");var Wk=l(Hk,"margin-top");var jk=l(Hk,"margin-left");var Vk=function(e){return e.dom().getBoundingClientRect()};var qk=function(e,t,n){var r=zk(e);var i=Uk(e);return t>=0&&n>=0&&t<=r&&n<=i};var $k=function(e,t,n,r){var i=Vk(t);var a=e?i.left+t.dom().clientLeft+jk(t):0;var o=e?i.top+t.dom().clientTop+Wk(t):0;var u=n-a;var s=r-o;return{x:u,y:s}};var Kk=function(e,t,n){var r=vi.fromDom(e.getBody());var i=e.inline?r:ba(r);var a=$k(e.inline,i,t,n);return qk(i,a.x,a.y)};var Yk=function(e){return b.from(e).map(vi.fromDom)};var Xk=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return Yk(t).map((function(e){return pa(ha(e),e)})).getOr(false)};var Gk={isXYInContentArea:Kk,isEditorAttachedToDom:Xk};function Jk(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function Zk(e){var t=[];var n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():Jk()};var r=function(){return b.from(t[0])};var i=function(e,t){return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout};var a=function(){if(t.length>0){n().reposition(t)}};var o=function(e){t.push(e)};var u=function(e){j(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))};var s=function(r){if(e.removed||!Gk.isEditorAttachedToDom(e)){return}return W(t,(function(e){return i(n().getArgs(e),r)})).getOrThunk((function(){e.editorManager.setActive(e);var t=n().open(r,(function(){u(t);a()}));o(t);a();return t}))};var l=function(){r().each((function(e){n().close(e);u(e);a()}))};var f=function(){return t};var c=function(e){e.on("SkinLoaded",(function(){var t=e.settings.service_message;if(t){s({text:t,type:"warning",timeout:0,icon:""})}}));e.on("ResizeEditor ResizeWindow",(function(){Me.requestAnimationFrame(a)}));e.on("remove",(function(){L(t.slice(),(function(e){n().close(e)}))}))};c(e);return{open:s,close:l,getNotifications:f}}function Qk(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function eS(e){var t=[];var n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():Qk()};var r=function(e,t){return function(){return t?t.apply(e,arguments):undefined}};var i=function(t){e.fire("OpenWindow",{win:t})};var a=function(t){e.fire("CloseWindow",{win:t})};var o=function(e){t.push(e);i(e)};var u=function(n){j(t,(function(e){return e===n})).each((function(r){t.splice(r,1);a(n);if(t.length===0){e.focus()}}))};var s=function(){return b.from(t[t.length-1])};var l=function(t,r){e.editorManager.setActive(e);vC.store(e);var i=n().open(t,r,u);o(i);return i};var f=function(e,t,i){var a=n().alert(e,r(i?i:this,t),u);o(a)};var c=function(e,t,i){var a=n().confirm(e,r(i?i:this,t),u);o(a)};var d=function(){s().each((function(e){n().close(e);u(e)}))};var v=function(){return s().map(n().getParams).getOr(null)};var m=function(e){s().each((function(t){n().setParams(t,e)}))};var g=function(){return t};e.on("remove",(function(){L(t.slice(0),(function(e){n().close(e)}))}));return{windows:t,open:l,alert:f,confirm:c,close:d,getParams:v,setParams:m,getWindows:g}}var tS={};var nS="en";var rS={setCode:function(e){if(e){nS=e;this.rtl=this.data[e]?this.data[e]._dir==="rtl":false}},getCode:function(){return nS},rtl:false,add:function(e,t){var n=tS[e];if(!n){tS[e]=n={}}for(var r in t){n[r]=t[r]}this.setCode(e)},translate:function(e){var t=tS[nS]||{};var n=function(e){if(Hn.is(e,"function")){return Object.prototype.toString.call(e)}return!r(e)?""+e:""};var r=function(e){return e===""||e===null||Hn.is(e,"undefined")};var i=function(e){e=n(e);return Hn.hasOwn(t,e)?n(t[e]):e};if(r(e)){return""}if(Hn.is(e,"object")&&Hn.hasOwn(e,"raw")){return n(e.raw)}if(Hn.is(e,"array")){var a=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return Hn.hasOwn(a,t)?n(a[t]):e}))}return i(e).replace(/{context:\w+}$/,"")},data:tS};var iS=Uu.PluginManager;var aS=function(e,t){for(var n in iS.urls){var r=iS.urls[n]+"/plugin"+t+".js";if(r===e){return n}}return null};var oS=function(e,t){var n=aS(t,e.suffix);return n?rS.translate(["Failed to load plugin: {0} from url {1}",n,t]):rS.translate(["Failed to load plugin url: {0}",t])};var uS=function(e,t){e.notificationManager.open({type:"error",text:t})};var sS=function(e,t){if(e._skinLoaded){uS(e,t)}else{e.on("SkinLoaded",(function(){uS(e,t)}))}};var lS=function(e,t){sS(e,rS.translate(["Failed to upload image: {0}",t]))};var fS=function(e,t){sS(e,oS(e,t))};var cS=function(e,t,n){var r=rS.translate(["Failed to initialize plugin: {0}",t]);dS(r,n);sS(e,r)};var dS=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=i.window.console;if(r){if(r.error){r.error.apply(r,arguments)}else{r.log.apply(r,arguments)}}};var vS={pluginLoadError:fS,pluginInitError:cS,uploadError:lS,displayError:sS,initError:dS};var mS=Uu.PluginManager;var gS=Uu.ThemeManager;function pS(){var e=ae.getOrDie("XMLHttpRequest");return new e}function hS(e,t){var n={};var r=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};var a=function(e,n,a,o){var u,s;u=pS();u.open("POST",t.url);u.withCredentials=t.credentials;u.upload.onprogress=function(e){o(e.loaded/e.total*100)};u.onerror=function(){a("Image upload failed due to a XHR Transport error. Code: "+u.status)};u.onload=function(){var e;if(u.status<200||u.status>=300){a("HTTP Error: "+u.status);return}e=JSON.parse(u.responseText);if(!e||typeof e.location!=="string"){a("Invalid JSON: "+u.responseText);return}n(r(t.basePath,e.location))};s=new i.FormData;s.append("file",e.blob(),e.filename());u.send(s)};var o=function(){return new _e((function(e){e([])}))};var u=function(e,t){return{url:t,blobInfo:e,status:true}};var s=function(e,t){return{url:"",blobInfo:e,status:false,error:t}};var l=function(e,t){Hn.each(n[e],(function(e){e(t)}));delete n[e]};var f=function(t,n,r){e.markPending(t.blobUri());return new _e((function(i){var a,o;var f=function(){};try{var c=function(){if(a){a.close();o=f}};var d=function(n){c();e.markUploaded(t.blobUri(),n);l(t.blobUri(),u(t,n));i(u(t,n))};var v=function(n){c();e.removeFailed(t.blobUri());l(t.blobUri(),s(t,n));i(s(t,n))};o=function(e){if(e<0||e>100){return}if(!a){a=r()}a.progressBar.value(e)};n(t,d,v,o)}catch(e){i(s(t,e.message))}}))};var c=function(e){return e===a};var d=function(e){var t=e.blobUri();return new _e((function(e){n[t]=n[t]||[];n[t].push(e)}))};var v=function(n,r){n=Hn.grep(n,(function(t){return!e.isUploaded(t.blobUri())}));return _e.all(Hn.map(n,(function(n){return e.isPending(n.blobUri())?d(n):f(n,t.handler,r)})))};var m=function(e,n){return!t.url&&c(t.handler)?o():v(e,n)};if(E(t.handler)===false){t.handler=a}return{upload:m}}function bS(){var e=ae.getOrDie("FileReader");return new e}function yS(e){var t=ae.getOrDie("Uint8Array");return new t(e)}var wS=function(e){var t=ae.getOrDie("requestAnimationFrame");t(e)};var xS=function(e){var t=ae.getOrDie("atob");return t(e)};var CS={atob:xS,requestAnimationFrame:wS};var kS=function(e){return new _e((function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=pS();i.open("GET",e,true);i.responseType="blob";i.onload=function(){if(this.status===200){t(this.response)}else{r()}};i.onerror=r;i.send()}catch(e){r()}}))};var SS=function(e){var t,n;var r=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(r[0]);if(n){t=n[1]}return{type:t,data:r[1]}};var TS=function(e){return new _e((function(t){var n,r,a;var o=SS(e);try{n=CS.atob(o.data)}catch(e){t(new i.Blob([]));return}r=yS(n.length);for(a=0;a<r.length;a++){r[a]=n.charCodeAt(a)}t(new i.Blob([r],{type:o.type}))}))};var ES=function(e){if(e.indexOf("blob:")===0){return kS(e)}if(e.indexOf("data:")===0){return TS(e)}return null};var NS=function(e){return new _e((function(t){var n=bS();n.onloadend=function(){t(n.result)};n.readAsDataURL(e)}))};var RS={uriToBlob:ES,blobToDataUri:NS,parseDataUri:SS};var _S=0;var DS=function(e){return(e||"blobid")+_S++};var OS=function(e,t,n,r){var i,a;if(t.src.indexOf("blob:")===0){a=e.getByUri(t.src);if(a){n({image:t,blobInfo:a})}else{RS.uriToBlob(t.src).then((function(r){RS.blobToDataUri(r).then((function(o){i=RS.parseDataUri(o).data;a=e.create(DS(),r,i);e.add(a);n({image:t,blobInfo:a})}))}),(function(e){r(e)}))}return}i=RS.parseDataUri(t.src).data;a=e.findFirst((function(e){return e.base64()===i}));if(a){n({image:t,blobInfo:a})}else{RS.uriToBlob(t.src).then((function(r){a=e.create(DS(),r,i);e.add(a);n({image:t,blobInfo:a})}),(function(e){r(e)}))}};var PS=function(e){return e?Q(e.getElementsByTagName("img")):[]};function AS(e,t){var n={};var r=function(r,i){var a;if(!i){i=u(true)}a=H(PS(r),(function(t){var n=t.src;if(!Ne.fileApi){return false}if(t.hasAttribute("data-mce-bogus")){return false}if(t.hasAttribute("data-mce-placeholder")){return false}if(!n||n===Ne.transparentSrc){return false}if(n.indexOf("blob:")===0){return!e.isUploaded(n)&&i(t)}if(n.indexOf("data:")===0){return i(t)}return false}));var o=I(a,(function(e){if(n[e.src]){return new _e((function(t){n[e.src].then((function(n){if(typeof n==="string"){return n}t({image:e,blobInfo:n.blobInfo})}))}))}var r=new _e((function(n,r){OS(t,e,n,r)})).then((function(e){delete n[e.image.src];return e})).catch((function(t){delete n[e.src];return t}));n[e.src]=r;return r}));return _e.all(o)};return{findAll:r}}var BS=0;var IS=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)};var t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()};var LS=function(e){return e+BS+++IS()};var MS={uuid:LS};function FS(){var e=[];var t=function(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"};var n=function(e,t,n,i){if(x(e)){var a=e;return r({id:a,name:i,blob:t,base64:n})}else if(C(e)){return r(e)}else{throw new Error("Unknown input type")}};var r=function(e){var n,r;if(!e.blob||!e.base64){throw new Error("blob and base64 representations of the image are required for BlobInfo to be created")}n=e.id||MS.uuid("blobid");r=e.name||n;return{id:u(n),name:u(r),filename:u(r+"."+t(e.blob.type)),blob:u(e.blob),base64:u(e.base64),blobUri:u(e.blobUri||le.createObjectURL(e.blob)),uri:u(e.uri)}};var i=function(t){if(!a(t.id())){e.push(t)}};var a=function(e){return o((function(t){return t.id()===e}))};var o=function(t){return H(e,t)[0]};var s=function(e){return o((function(t){return t.blobUri()===e}))};var l=function(t){e=H(e,(function(e){if(e.blobUri()===t){le.revokeObjectURL(e.blobUri());return false}return true}))};var f=function(){L(e,(function(e){le.revokeObjectURL(e.blobUri())}));e=[]};return{create:n,add:i,get:a,getByUri:s,findFirst:o,removeByUri:l,destroy:f}}function HS(){var e=1,t=2;var n={};var r=function(e,t){return{status:e,resultUri:t}};var i=function(e){return e in n};var a=function(e){var t=n[e];return t?t.resultUri:null};var o=function(t){return i(t)?n[t].status===e:false};var u=function(e){return i(e)?n[e].status===t:false};var s=function(t){n[t]=r(e,null)};var l=function(e,i){n[e]=r(t,i)};var f=function(e){delete n[e]};var c=function(){n={}};return{hasBlobUri:i,getResultUri:a,isPending:o,isUploaded:u,markPending:s,markUploaded:l,removeFailed:f,destroy:c}}function zS(e){var t=FS();var n,r;var i=HS();var a=[];var o=function(t){return function(n){if(e.selection){return t(n)}return[]}};var u=function(){return"?"+(new Date).getTime()};var s=function(e,t,n){var r=0;do{r=e.indexOf(t,r);if(r!==-1){e=e.substring(0,r)+n+e.substr(r+t.length);r+=n.length-t.length+1}}while(r!==-1);return e};var l=function(e,t,n){e=s(e,'src="'+t+'"','src="'+n+'"');e=s(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"');return e};var f=function(t,n){L(e.undoManager.data,(function(e){if(e.type==="fragmented"){e.fragments=I(e.fragments,(function(e){return l(e,t,n)}))}else{e.content=l(e.content,t,n)}}))};var c=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true})};var d=function(n,r){t.removeByUri(n.src);f(n.src,r);e.$(n).attr({src:og.shouldReuseFileName(e)?r+u():r,"data-mce-src":e.convertURL(r,"src")})};var v=function(t){if(!n){n=hS(i,{url:og.getImageUploadUrl(e),basePath:og.getImageUploadBasePath(e),credentials:og.getImagesUploadCredentials(e),handler:og.getImagesUploadHandler(e)})}return h().then(o((function(r){var i;i=I(r,(function(e){return e.blobInfo}));return n.upload(i,c).then(o((function(n){var i=I(n,(function(t,n){var i=r[n].image;if(t.status&&og.shouldReplaceBlobUris(e)){d(i,t.url)}else if(t.error){vS.uploadError(e,t.error)}return{element:i,status:t.status}}));if(t){t(i)}return i})))})))};var m=function(t){if(og.isAutomaticUploadsEnabled(e)){return v(t)}};var g=function(t){if($(a,(function(e){return e(t)}))===false){return false}if(t.getAttribute("src").indexOf("data:")===0){var n=og.getImagesDataImgFilter(e);return n(t)}return true};var p=function(e){a.push(e)};var h=function(){if(!r){r=AS(i,t)}return r.findAll(e.getBody(),g).then(o((function(t){t=H(t,(function(t){if(typeof t==="string"){vS.displayError(e,t);return false}return true}));L(t,(function(e){f(e.image.src,e.blobInfo.blobUri());e.image.src=e.blobInfo.blobUri();e.image.removeAttribute("data-mce-src")}));return t})))};var b=function(){t.destroy();i.destroy();r=n=null};var y=function(n){return n.replace(/src="(blob:[^"]+)"/g,(function(n,r){var a=i.getResultUri(r);if(a){return'src="'+a+'"'}var o=t.getByUri(r);if(!o){o=U(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)}),null)}if(o){var u=o.blob();return'src="data:'+u.type+";base64,"+o.base64()+'"'}return n}))};e.on("setContent",(function(){if(og.isAutomaticUploadsEnabled(e)){m()}else{h()}}));e.on("RawSaveContent",(function(e){e.content=y(e.content)}));e.on("getContent",(function(e){if(e.source_view||e.format==="raw"){return}e.content=y(e.content)}));e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){L(e,(function(e){var n=e.attr("src");if(t.getByUri(n)){return}var r=i.getResultUri(n);if(r){e.attr("src",r)}}))}))}));return{blobCache:t,addFilter:p,uploadImages:v,uploadImagesAuto:m,scanForImages:h,destroy:b}}var US=function(e,t){return e.hasOwnProperty(t.nodeName)};var WS=function(e,t){if(jo.isText(t)){return true}else if(jo.isElement(t)){return!US(e,t)&&!zd.isBookmarkNode(t)}else{return false}};var jS=function(e,t,n){return B(Yg.parents(vi.fromDom(n),vi.fromDom(t)),(function(t){return US(e,t.dom())}))};var VS=function(e,t){if(jo.isText(t)){if(t.nodeValue.length===0){return true}else if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||US(e,t.nextSibling))){return true}}return false};var qS=function(e){var t=e.settings,n=e.dom,r=e.selection;var i=e.schema,a=i.getBlockElements();var o=r.getStart();var u=e.getBody();var s;var l,f,c,d,v;var m,g,p;var h,b;b=t.forced_root_block;if(!o||!jo.isElement(o)||!b){return}h=u.nodeName.toLowerCase();if(!i.isValidChild(h,b.toLowerCase())||jS(a,u,o)){return}s=r.getRng();l=s.startContainer;f=s.startOffset;c=s.endContainer;d=s.endOffset;p=Mk.hasFocus(e);o=u.firstChild;while(o){if(WS(a,o)){if(VS(a,o)){m=o;o=o.nextSibling;n.remove(m);continue}if(!v){v=n.create(b,e.settings.forced_root_block_attrs);o.parentNode.insertBefore(v,o);g=true}m=o;o=o.nextSibling;v.appendChild(m)}else{v=null;o=o.nextSibling}}if(g&&p){s.setStart(l,f);s.setEnd(c,d);r.setRng(s);e.nodeChanged()}};var $S=function(e){if(e.settings.forced_root_block){e.on("NodeChange",l(qS,e))}};var KS={setup:$S};var YS=function(e){var t=e.startContainer,n=e.startOffset;if(jo.isText(t)){return n===0?b.some(vi.fromDom(t)):b.none()}else{return b.from(t.childNodes[n]).map(vi.fromDom)}};var XS=function(e){var t=e.endContainer,n=e.endOffset;if(jo.isText(t)){return n===t.data.length?b.some(vi.fromDom(t)):b.none()}else{return b.from(t.childNodes[n-1]).map(vi.fromDom)}};var GS=function(e){return Ra(e).fold(u([e]),(function(t){return[e].concat(GS(t))}))};var JS=function(e){return _a(e).fold(u([e]),(function(t){if(Ei(t)==="br"){return Ca(t).map((function(t){return[e].concat(JS(t))})).getOr([])}else{return[e].concat(JS(t))}}))};var ZS=function(e,t){return Fl(YS(t),XS(t),(function(t,n){var r=W(GS(e),l(da,t));var i=W(JS(e),l(da,n));return r.isSome()&&i.isSome()})).getOr(false)};var QS=function(e,t,n,r){var i=n,a=new to(n,i);var o=e.schema.getNonEmptyElements();do{if(n.nodeType===3&&Hn.trim(n.nodeValue).length!==0){if(r){t.setStart(n,0)}else{t.setEnd(n,n.nodeValue.length)}return}if(o[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){if(r){t.setStartBefore(n)}else{if(n.nodeName==="BR"){t.setEndBefore(n)}else{t.setEndAfter(n)}}return}if(Ne.ie&&Ne.ie<11&&e.isBlock(n)&&e.isEmpty(n)){if(r){t.setStart(n,0)}else{t.setEnd(n,0)}return}}while(n=r?a.next():a.prev());if(i.nodeName==="BODY"){if(r){t.setStart(i,0)}else{t.setEnd(i,i.childNodes.length)}}};var eT=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0};function tT(e){var t,n=[];var r=function(t){var r,i;i=e.$(t).parentsUntil(e.getBody()).add(t);if(i.length===n.length){for(r=i.length;r>=0;r--){if(i[r]!==n[r]){break}}if(r===-1){n=i;return true}}n=i;return false};if(!("onselectionchange"in e.getDoc())){e.on("NodeChange Click MouseUp KeyUp Focus",(function(n){var r,i;r=e.selection.getRng();i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};if(n.type==="nodechange"||!ox.isEq(i,t)){e.fire("SelectionChange")}t=i}))}e.on("contextmenu",(function(){e.fire("SelectionChange")}));e.on("SelectionChange",(function(){var t=e.selection.getStart(true);if(!t||!Ne.range&&e.selection.isCollapsed()){return}if(eT(e)&&!r(t)&&e.dom.isChildOf(t,e.getBody())){e.nodeChanged({selectionChange:true})}}));e.on("MouseUp",(function(t){if(!t.isDefaultPrevented()&&eT(e)){if(e.selection.getNode().nodeName==="IMG"){Me.setEditorTimeout(e,(function(){e.nodeChanged()}))}else{e.nodeChanged()}}}));this.nodeChanged=function(t){var n=e.selection;var r,i,a;if(e.initialized&&n&&!e.settings.disable_nodechange&&!e.readonly){a=e.getBody();r=n.getStart(true)||a;if(r.ownerDocument!==e.getDoc()||!e.dom.isChildOf(r,a)){r=a}i=[];e.dom.getParent(r,(function(e){if(e===a){return true}i.push(e)}));t=t||{};t.element=r;t.parents=i;e.fire("NodeChange",t)}}}var nT={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return Ne.mac?e.metaKey:e.ctrlKey&&!e.altKey}};var rT=function(e){var t=function(t){return I(t,(function(t){t=Sl(t);t.node=e;return t}))};if(jo.isElement(e)){return t(e.getClientRects())}if(jo.isText(e)){var n=e.ownerDocument.createRange();n.setStart(e,0);n.setEnd(e,e.data.length);return t(n.getClientRects())}};var iT=function(e){return U(e,(function(e,t){return e.concat(rT(t))}),[])};var aT;(function(e){e[e["Up"]=-1]="Up";e[e["Down"]=1]="Down"})(aT||(aT={}));var oT=function(e,t,n,r){while(r=Nc(r,e,Cl,t)){if(n(r)){return}}};var uT=function(e,t,n,r,i,a){var o=0,u;var s=[];var l;var f=function(r){var a,u,f;f=iT([r]);if(e===-1){f=f.reverse()}for(a=0;a<f.length;a++){u=f[a];if(n(u,l)){continue}if(s.length>0&&t(u,En.last(s))){o++}u.line=o;if(i(u)){return true}s.push(u)}};l=En.last(a.getClientRects());if(!l){return s}u=a.getNode();f(u);oT(e,r,f,u);return s};var sT=function(e,t){return t.line>e};var lT=function(e,t){return t.line===e};var fT=l(uT,aT.Up,Rl,_l);var cT=l(uT,aT.Down,_l,Rl);var dT=function(e,t,n,r){var i=nd(t);var a,o,u,s;var l=[];var f=0,c,d;var v=function(t){if(e===1){return En.last(t.getClientRects())}return En.last(t.getClientRects())};if(e===1){a=i.next;o=_l;u=Rl;s=df.after(r)}else{a=i.prev;o=Rl;u=_l;s=df.before(r)}d=v(s);do{if(!s.isVisible()){continue}c=v(s);if(u(c,d)){continue}if(l.length>0&&o(c,En.last(l))){f++}c=Sl(c);c.position=s;c.line=f;if(n(c)){return l}l.push(c)}while(s=a(s));return l};var vT=function(e){return function(t){return sT(e,t)}};var mT=function(e){return function(t){return lT(e,t)}};var gT=jo.isContentEditableFalse;var pT=Nc;var hT=function(e,t){return Math.abs(e.left-t)};var bT=function(e,t){return Math.abs(e.right-t)};var yT=function(e,t){return e>=t.left&&e<=t.right};var wT=function(e,t){return En.reduce(e,(function(e,n){var r,i;r=Math.min(hT(e,t),bT(e,t));i=Math.min(hT(n,t),bT(n,t));if(yT(t,n)){return n}if(yT(t,e)){return e}if(i===r&&gT(n.node)){return n}if(i<r){return n}return e}))};var xT=function(e,t,n,r){while(r=pT(r,e,Cl,t)){if(n(r)){return}}};var CT=function(e,t){var n=[];var r=function(e,r){var i;i=H(iT([r]),(function(n){return!e(n,t)}));n=n.concat(i);return i.length===0};n.push(t);xT(aT.Up,e,l(r,Rl),t.node);xT(aT.Down,e,l(r,_l),t.node);return n};var kT=function(e){return H(Q(e.getElementsByTagName("*")),hc)};var ST=function(e,t){return{node:e.node,before:hT(e,t)<bT(e,t)}};var TT=function(e,t,n){var r;var i=iT(kT(e));var a=H(i,(function(e){return n>=e.top&&n<=e.bottom}));r=wT(a,t);if(r){r=wT(CT(e,r),t);if(r&&hc(r.node)){return ST(r,t)}}return null};var ET=function(e,t,n){if(n.collapsed){return false}if(Ne.ie&&Ne.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(jo.isElement(r)){return B(r.getClientRects(),(function(n){return Dl(n,e,t)}))}}return B(n.getClientRects(),(function(n){return Dl(n,e,t)}))};var NT={isXYWithinRange:ET};var RT=function(e){var t,n,r,i;i=e.getBoundingClientRect();t=e.ownerDocument;n=t.documentElement;r=t.defaultView;return{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}};var _T=function(e){return e.inline?RT(e.getBody()):{left:0,top:0}};var DT=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}};var OT=function(e){var t=e.getBody(),n=e.getDoc().documentElement;var r={left:t.scrollLeft,top:t.scrollTop};var i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i};var PT=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=RT(e.getContentAreaContainer());var r=OT(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}};var AT=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};var BT=function(e,t){return AT(_T(e),DT(e),PT(e,t))};var IT={calc:BT};var LT=jo.isContentEditableFalse,MT=jo.isContentEditableTrue;var FT=function(e,t){return LT(t)&&t!==e};var HT=function(e,t,n){if(t===n||e.dom.isChildOf(t,n)){return false}if(LT(t)){return false}return true};var zT=function(e){var t=e.cloneNode(true);t.removeAttribute("data-mce-selected");return t};var UT=function(e,t,n,r){var i=t.cloneNode(true);e.dom.setStyles(i,{width:n,height:r});e.dom.setAttrib(i,"data-mce-selected",null);var a=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});e.dom.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r});e.dom.setStyles(i,{margin:0,boxSizing:"border-box"});a.appendChild(i);return a};var WT=function(e,t){if(e.parentNode!==t){t.appendChild(e)}};var jT=function(e,t,n,r,i,a){var o=0,u=0;e.style.left=t.pageX+"px";e.style.top=t.pageY+"px";if(t.pageX+n>i){o=t.pageX+n-i}if(t.pageY+r>a){u=t.pageY+r-a}e.style.width=n-o+"px";e.style.height=r-u+"px"};var VT=function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};var qT=function(e){return e.button===0};var $T=function(e){return e.element};var KT=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}};var YT=function(e,t){return function(n){if(qT(n)){var r=W(t.dom.getParents(n.target),jl.or(LT,MT)).getOr(null);if(FT(t.getBody(),r)){var i=t.dom.getPos(r);var a=t.getBody();var o=t.getDoc().documentElement;e.element=r;e.screenX=n.screenX;e.screenY=n.screenY;e.maxX=(t.inline?a.scrollWidth:o.offsetWidth)-2;e.maxY=(t.inline?a.scrollHeight:o.offsetHeight)-2;e.relX=n.pageX-i.x;e.relY=n.pageY-i.y;e.width=r.offsetWidth;e.height=r.offsetHeight;e.ghost=UT(t,r,e.width,e.height)}}}};var XT=function(e,t){var n=Me.throttle((function(e,n){t._selectionOverrides.hideFakeCaret();t.selection.placeCaretAt(e,n)}),0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if($T(e)&&!e.dragging&&i>10){var a=t.fire("dragstart",{target:e.element});if(a.isDefaultPrevented()){return}e.dragging=true;t.focus()}if(e.dragging){var o=KT(e,IT.calc(t,r));WT(e.ghost,t.getBody());jT(e.ghost,o,e.width,e.height,e.maxX,e.maxY);n(r.clientX,r.clientY)}}};var GT=function(e){var t=e.getSel().getRangeAt(0);var n=t.startContainer;return n.nodeType===3?n.parentNode:n};var JT=function(e,t){return function(n){if(e.dragging){if(HT(t,GT(t.selection),e.element)){var r=zT(e.element);var i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});if(!i.isDefaultPrevented()){r=i.targetClone;t.undoManager.transact((function(){VT(e.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()}))}}}QT(e)}};var ZT=function(e,t){return function(){if(e.dragging){t.fire("dragend")}QT(e)}};var QT=function(e){e.dragging=false;e.element=null;VT(e.ghost)};var eE=function(e){var t={};var n,r,a,o,u,s;n=Bu.DOM;s=i.document;r=YT(t,e);a=XT(t,e);o=JT(t,e);u=ZT(t,e);e.on("mousedown",r);e.on("mousemove",a);e.on("mouseup",o);n.bind(s,"mousemove",a);n.bind(s,"mouseup",u);e.on("remove",(function(){n.unbind(s,"mousemove",a);n.unbind(s,"mouseup",u)}))};var tE=function(e){e.on("drop",(function(t){var n=typeof t.clientX!=="undefined"?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;if(LT(n)||LT(e.dom.getContentEditableParent(n))){t.preventDefault()}}))};var nE=function(e){eE(e);tE(e)};var rE={init:nE};var iE=function(e){var t=Zu((function(){if(!e.removed){var t=e.selection.getRng();if(t.collapsed){var n=Aw(e,e.selection.getRng(),false);e.selection.setRng(n)}}}),0);e.on("focus",(function(){t.throttle()}));e.on("blur",(function(){t.cancel()}))};var aE={setup:iE};var oE=jo.isContentEditableTrue;var uE=jo.isContentEditableFalse;var sE=function(e,t){var n=e.getBody();while(t&&t!==n){if(oE(t)||uE(t)){return t}t=t.parentNode}return null};var lE=function(e){var t=function(t){return e.dom.isBlock(t)};var n=e.getBody();var r=gc(e.getBody(),t,(function(){return Mk.hasFocus(e)}));var i="sel-"+e.dom.uniqueId();var a;var o=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")};var u=function(){var t=e.dom.get(i);return t?t.getElementsByTagName("*")[0]:t};var s=function(t){if(t){e.selection.setRng(t)}};var l=function(){return e.selection.getRng()};var f=function(t,n,i,a){if(a===void 0){a=true}var o;o=e.fire("ShowCaret",{target:n,direction:t,before:i});if(o.isDefaultPrevented()){return null}if(a){e.selection.scrollIntoView(n,t===-1)}return r.show(i,n)};var c=function(e,t){t=Lc(e,n,t);if(e===-1){return df.fromRangeStart(t)}return df.fromRangeEnd(t)};var d=function(t){if(t.hasAttribute("data-mce-caret")){ol(t);s(l());e.selection.scrollIntoView(t[0])}};var v=function(){e.on("mouseup",(function(t){var n=l();if(n.collapsed&&Gk.isXYInContentArea(e,t.clientX,t.clientY)){s(Pw(e,n,false))}}));e.on("click",(function(t){var n;n=sE(e,t.target);if(n){if(uE(n)){t.preventDefault();e.focus()}if(oE(n)){if(e.dom.isChildOf(n,e.selection.getNode())){y()}}}}));e.on("blur NewBlock",(function(){y()}));e.on("ResizeWindow FullscreenStateChanged",(function(){return r.reposition()}));var t=function(e){var t=false;e.on("touchstart",(function(){t=false}));e.on("touchmove",(function(){t=true}));e.on("touchend",(function(n){var r=sE(e,n.target);if(uE(r)){if(!t){n.preventDefault();b(Ow(e,r))}}}))};var i=function(e){var t=nd(e);if(!e.firstChild){return false}var n=df.before(e.firstChild);var r=t.next(n);return r&&!Bp(r)&&!Ip(r)};var c=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock);var i=e.dom.getParent(n,e.dom.isBlock);return r===i};var d=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock);var a=e.dom.getParent(n,e.dom.isBlock);if(r&&e.dom.isChildOf(r,a)&&uE(sE(e,r))===false){return true}return r&&!c(r,a)&&i(r)};t(e);e.on("mousedown",(function(t){var r;var i=t.target;if(i!==n&&i.nodeName!=="HTML"&&!e.dom.isChildOf(i,n)){return}if(Gk.isXYInContentArea(e,t.clientX,t.clientY)===false){return}r=sE(e,i);if(r){if(uE(r)){t.preventDefault();b(Ow(e,r))}else{y();if(!(oE(r)&&t.shiftKey)&&!NT.isXYWithinRange(t.clientX,t.clientY,e.selection.getRng())){x();e.selection.placeCaretAt(t.clientX,t.clientY)}}}else if(hc(i)===false){y();x();var a=TT(n,t.clientX,t.clientY);if(a){if(!d(t.target,a.node)){t.preventDefault();var o=f(1,a.node,a.before,false);e.getBody().focus();s(o)}}}}));e.on("keypress",(function(t){if(nT.modifierPressed(t)){return}switch(t.keyCode){default:if(uE(e.selection.getNode())){t.preventDefault()}break}}));e.on("getSelectionRange",(function(e){var t=e.range;if(a){if(!a.parentNode){a=null;return}t=t.cloneRange();t.selectNode(a);e.range=t}}));e.on("setSelectionRange",(function(e){e.range=h(e.range);var t=b(e.range,e.forward);if(t){e.range=t}}));var v=function(e){return e.id==="mcepastebin"};e.on("AfterSetSelectionRange",(function(e){var t=e.range;if(!p(t)&&!v(t.startContainer.parentNode)){x()}if(!o(t.startContainer.parentNode)){y()}}));e.on("copy",(function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!Ne.ie){var n=u();if(n){e.preventDefault();t.clearData();t.setData("text/html",n.outerHTML);t.setData("text/plain",n.outerText)}}}));rE.init(e);aE.setup(e)};var m=function(){var t=e.contentStyles,n=".mce-content-body";t.push(r.getCss());t.push(n+" .mce-offscreen-selection {"+"position: absolute;"+"left: -9999999999px;"+"max-width: 1000000px;"+"}"+n+" *[contentEditable=false] {"+"cursor: default;"+"}"+n+" *[contentEditable=true] {"+"cursor: text;"+"}")};var g=function(e){return Gs(e)||rl(e)||il(e)};var p=function(e){return g(e.startContainer)||g(e.endContainer)};var h=function(t){var n=e.schema.getShortEndedElements();var r=e.dom.createRng();var i=t.startContainer;var a=t.startOffset;var o=t.endContainer;var u=t.endOffset;if(Mi(n,i.nodeName.toLowerCase())){if(a===0){r.setStartBefore(i)}else{r.setStartAfter(i)}}else{r.setStart(i,a)}if(Mi(n,o.nodeName.toLowerCase())){if(u===0){r.setEndBefore(o)}else{r.setEndAfter(o)}}else{r.setEnd(o,u)}return r};var b=function(t,n){var r;var o=e.$;var u=e.dom;var s,l,d,v,m,g,h,b,y;if(!t){return null}if(t.collapsed){if(!p(t)){if(n===false){h=c(-1,t);if(hc(h.getNode(true))){return f(-1,h.getNode(true),false,false)}if(hc(h.getNode())){return f(-1,h.getNode(),!h.isAtEnd(),false)}}else{h=c(1,t);if(hc(h.getNode())){return f(1,h.getNode(),!h.isAtEnd(),false)}if(hc(h.getNode(true))){return f(1,h.getNode(true),false,false)}}}return null}d=t.startContainer;v=t.startOffset;m=t.endOffset;if(d.nodeType===3&&v===0&&uE(d.parentNode)){d=d.parentNode;v=u.nodeIndex(d);d=d.parentNode}if(d.nodeType!==1){return null}if(m===v+1&&d===t.endContainer){r=d.childNodes[v]}if(!uE(r)){return null}b=y=r.cloneNode(true);g=e.fire("ObjectSelected",{target:r,targetClone:b});if(g.isDefaultPrevented()){return null}s=bs(vi.fromDom(e.getBody()),"#"+i).fold((function(){return o([])}),(function(e){return o([e.dom()])}));b=g.targetClone;if(s.length===0){s=o('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",i);s.appendTo(e.getBody())}t=e.dom.createRng();if(b===y&&Ne.ie){s.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(b);t.setStartAfter(s[0].firstChild.firstChild);t.setEndAfter(b)}else{s.empty().append("").append(b).append("");t.setStart(s[0].firstChild,1);t.setEnd(s[0].lastChild,0)}s.css({top:u.getPos(r,e.getBody()).y});s[0].focus();l=e.selection.getSel();l.removeAllRanges();l.addRange(t);L(vs(vi.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){qi(e,"data-mce-selected")}));r.setAttribute("data-mce-selected","1");a=r;x();return t};var y=function(){if(a){a.removeAttribute("data-mce-selected");bs(vi.fromDom(e.getBody()),"#"+i).each(Gu);a=null}bs(vi.fromDom(e.getBody()),"#"+i).each(Gu);a=null};var w=function(){r.destroy();a=null};var x=function(){r.hide()};if(Ne.ceFalse){v();m()}return{showCaret:f,showBlockCaretContainer:d,hideFakeCaret:x,destroy:w}};var fE=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0};var cE=function(e){var t=e;while(/<!--|--!?>/g.test(t)){t=t.replace(/<!--|--!?>/g,"")}return t};var dE=function(e,t){if(e.allow_html_data_urls){return false}else if(/^data:image\//i.test(t)){return e.allow_svg_data_urls===false&&/^data:image\/svg\+xml/i.test(t)}else{return/^data:/i.test(t)}};var vE=function(e,t,n){var r=1,i,a,o,u;u=e.getShortEndedElements();o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;o.lastIndex=i=n;while(a=o.exec(t)){i=o.lastIndex;if(a[1]==="/"){r--}else if(!a[1]){if(a[2]in u){continue}r++}if(r===0){break}}return i};var mE=function(e,t){var n=e.exec(t);if(n){var r=n[1];var i=n[2];return typeof r==="string"&&r.toLowerCase()==="data-mce-bogus"?i:null}else{return null}};function gE(e,t){if(t===void 0){t=Cu()}var n=function(){};e=e||{};if(e.fix_self_closing!==false){e.fix_self_closing=true}var r=e.comment?e.comment:n;var i=e.cdata?e.cdata:n;var a=e.text?e.text:n;var o=e.start?e.start:n;var u=e.end?e.end:n;var s=e.pi?e.pi:n;var l=e.doctype?e.doctype:n;var f=function(n){var f,c=0,d,v;var m=[];var g,p,h,b;var y,w,x,C,k;var S,T,E,N,R,_,D;var O,P,A,B;var I,L,M,F,H,z,U=0;var W=cu.decode;var j;var V=Hn.makeMap("src,href,data,background,formaction,poster,xlink:href");var q=/((java|vb)script|mhtml):/i;var $=function(e){var t,n;t=m.length;while(t--){if(m[t].name===e){break}}if(t>=0){for(n=m.length-1;n>=t;n--){e=m[n];if(e.valid){u(e.name)}}m.length=t}};var K=function(t,n,r,i,a){var o,u;var s=/[\s\u0000-\u001F]+/g;n=n.toLowerCase();r=n in C?n:W(r||i||a||"");if(S&&!y&&fE(n)===false){o=_[n];if(!o&&D){u=D.length;while(u--){o=D[u];if(o.pattern.test(n)){break}}if(u===-1){o=null}}if(!o){return}if(o.validValues&&!(r in o.validValues)){return}}if(V[n]&&!e.allow_script_urls){var l=r.replace(s,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(q.test(l)){return}if(dE(e,l)){return}}if(y&&(n in V||n.indexOf("on")===0)){return}g.map[n]=r;g.push({name:n,value:r})};M=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)--!?>)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|"+"(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g");F=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;x=t.getShortEndedElements();L=e.self_closing_elements||t.getSelfClosingElements();C=t.getBoolAttrs();S=e.validate;w=e.remove_internals;j=e.fix_self_closing;H=t.getSpecialElements();B=n+">";while(f=M.exec(B)){if(c<f.index){a(W(n.substr(c,f.index-c)))}if(d=f[6]){d=d.toLowerCase();if(d.charAt(0)===":"){d=d.substr(1)}$(d)}else if(d=f[7]){if(f.index+f[0].length>n.length){a(W(n.substr(f.index)));c=f.index+f[0].length;continue}d=d.toLowerCase();if(d.charAt(0)===":"){d=d.substr(1)}k=d in x;if(j&&L[d]&&m.length>0&&m[m.length-1].name===d){$(d)}var Y=mE(F,f[8]);if(Y!==null){if(Y==="all"){c=vE(t,n,M.lastIndex);M.lastIndex=c;continue}E=false}if(!S||(T=t.getElementRule(d))){E=true;if(S){_=T.attributes;D=T.attributePatterns}if(R=f[8]){y=R.indexOf("data-mce-type")!==-1;if(y&&w){E=false}g=[];g.map={};R.replace(F,K)}else{g=[];g.map={}}if(S&&!y){O=T.attributesRequired;P=T.attributesDefault;A=T.attributesForced;I=T.removeEmptyAttrs;if(I&&!g.length){E=false}if(A){p=A.length;while(p--){N=A[p];b=N.name;z=N.value;if(z==="{$uid}"){z="mce_"+U++}g.map[b]=z;g.push({name:b,value:z})}}if(P){p=P.length;while(p--){N=P[p];b=N.name;if(!(b in g.map)){z=N.value;if(z==="{$uid}"){z="mce_"+U++}g.map[b]=z;g.push({name:b,value:z})}}}if(O){p=O.length;while(p--){if(O[p]in g.map){break}}if(p===-1){E=false}}if(N=g.map["data-mce-bogus"]){if(N==="all"){c=vE(t,n,M.lastIndex);M.lastIndex=c;continue}E=false}}if(E){o(d,g,k)}}else{E=false}if(v=H[d]){v.lastIndex=c=f.index+f[0].length;if(f=v.exec(n)){if(E){h=n.substr(c,f.index-c)}c=f.index+f[0].length}else{h=n.substr(c);c=n.length}if(E){if(h.length>0){a(h,true)}u(d)}M.lastIndex=c;continue}if(!k){if(!R||R.indexOf("/")!==R.length-1){m.push({name:d,valid:E})}else if(E){u(d)}}}else if(d=f[1]){if(d.charAt(0)===">"){d=" "+d}if(!e.allow_conditional_comments&&d.substr(0,3).toLowerCase()==="[if"){d=" "+d}r(d)}else if(d=f[2]){i(cE(d))}else if(d=f[3]){l(d)}else if(d=f[4]){s(d,f[5])}c=f.index+f[0].length}if(c<n.length){a(W(n.substr(c)))}for(p=m.length-1;p>=0;p--){d=m[p];if(d.valid){u(d.name)}}};return{parse:f}}(function(e){e.findEndTag=vE})(gE||(gE={}));var pE=gE;var hE=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")};var bE=function(e,t){var n=t;var r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var i,a,o,u,s;var l=e.schema;n=hE(e.getTempAttrs(),n);s=l.getShortEndedElements();while(u=r.exec(n)){a=r.lastIndex;o=u[0].length;if(s[u[1]]){i=a}else{i=pE.findEndTag(l,n,a)}n=n.substring(0,a-o)+n.substring(i);r.lastIndex=a-o}return qs.trim(n)};var yE=bE;var wE={trimExternal:yE,trimInternal:bE};var xE=0,CE=1,kE=2;var SE=function(e,t){var n=e.length+t.length+2;var r=new Array(n);var i=new Array(n);var a=function(e,t,n){return{start:e,end:t,diag:n}};var o=function(n,r,i,a,u){var l=s(n,r,i,a);if(l===null||l.start===r&&l.diag===r-a||l.end===n&&l.diag===n-i){var f=n;var c=i;while(f<r||c<a){if(f<r&&c<a&&e[f]===t[c]){u.push([xE,e[f]]);++f;++c}else{if(r-n>a-i){u.push([kE,e[f]]);++f}else{u.push([CE,t[c]]);++c}}}}else{o(n,l.start,i,l.start-l.diag,u);for(var d=l.start;d<l.end;++d){u.push([xE,e[d]])}o(l.end,r,l.end-l.diag,a,u)}};var u=function(n,r,i,o){var u=n;while(u-r<o&&u<i&&e[u]===t[u-r]){++u}return a(n,u,r)};var s=function(n,a,o,s){var l=a-n;var f=s-o;if(l===0||f===0){return null}var c=l-f;var d=f+l;var v=(d%2===0?d:d+1)/2;r[1+v]=n;i[1+v]=a+1;var m,g,p,h,b;for(m=0;m<=v;++m){for(g=-m;g<=m;g+=2){p=g+v;if(g===-m||g!==m&&r[p-1]<r[p+1]){r[p]=r[p+1]}else{r[p]=r[p-1]+1}h=r[p];b=h-n+o-g;while(h<a&&b<s&&e[h]===t[b]){r[p]=++h;++b}if(c%2!==0&&c-m<=g&&g<=c+m){if(i[p-c]<=r[p]){return u(i[p-c],g+n-o,a,s)}}}for(g=c-m;g<=c+m;g+=2){p=g+v-c;if(g===c-m||g!==c+m&&i[p+1]<=i[p-1]){i[p]=i[p+1]-1}else{i[p]=i[p-1]}h=i[p]-1;b=h-n+o-g;while(h>=n&&b>=o&&e[h]===t[b]){i[p]=h--;b--}if(c%2===0&&-m<=g&&g<=m){if(i[p]<=r[p+c]){return u(i[p],g+n-o,a,s)}}}}};var l=[];o(0,e.length,0,t.length,l);return l};var TE={KEEP:xE,DELETE:kE,INSERT:CE,diff:SE};var EE=function(e){if(jo.isElement(e)){return e.outerHTML}else if(jo.isText(e)){return cu.encodeRaw(e.data,false)}else if(jo.isComment(e)){return"\x3c!--"+e.data+"--\x3e"}return""};var NE=function(e){var t,n,r;r=i.document.createElement("div");t=i.document.createDocumentFragment();if(e){r.innerHTML=e}while(n=r.firstChild){t.appendChild(n)}return t};var RE=function(e,t,n){var r=NE(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else{e.appendChild(r)}};var _E=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}};var DE=function(e,t){var n=0;L(e,(function(e){if(e[0]===TE.KEEP){n++}else if(e[0]===TE.INSERT){RE(t,e[1],n);n++}else if(e[0]===TE.DELETE){_E(t,n)}}))};var OE=function(e){return H(I(Q(e.childNodes),EE),(function(e){return e.length>0}))};var PE=function(e,t){var n=I(Q(t.childNodes),EE);DE(TE.diff(n,e),t);return t};var AE={read:OE,write:PE};var BE=es(b.none());var IE=function(){return BE.get().getOrThunk((function(){var e=i.document.implementation.createHTMLDocument("undo");BE.set(b.some(e));return e}))};var LE=function(e){return e.indexOf("</iframe>")!==-1};var ME=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}};var FE=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}};var HE=function(e){var t,n,r;t=AE.read(e.getBody());r=q(t,(function(t){var n=wE.trimInternal(e.serializer,t);return n.length>0?[n]:[]}));n=r.join("");return LE(n)?ME(r):FE(n)};var zE=function(e,t,n){if(t.type==="fragmented"){AE.write(t.fragments,e.getBody())}else{e.setContent(t.content,{format:"raw"})}e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)};var UE=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content};var WE=function(e){var t=vi.fromTag("body",IE());Us(t,UE(e));L(vs(t,"*[data-mce-bogus]"),Ju);return zs(t)};var jE=function(e,t){return UE(e)===UE(t)};var VE=function(e,t){return WE(e)===WE(t)};var qE=function(e,t){if(!e||!t){return false}else if(jE(e,t)){return true}else{return VE(e,t)}};var $E={createFragmentedLevel:ME,createCompleteLevel:FE,createFromEditor:HE,applyToEditor:zE,isEq:qE};function KE(e){var t=this,n=0,r=[],i,a,o=0;var u=function(){return o===0};var s=function(e){if(u()){t.typing=e}};var l=function(t){e.setDirty(t)};var f=function(e){s(false);t.add({},e)};var c=function(){if(t.typing){s(false);t.add()}};e.on("init",(function(){t.add()}));e.on("BeforeExecCommand",(function(e){var n=e.command;if(n!=="Undo"&&n!=="Redo"&&n!=="mceRepaint"){c();t.beforeChange()}}));e.on("ExecCommand",(function(e){var t=e.command;if(t!=="Undo"&&t!=="Redo"&&t!=="mceRepaint"){f(e)}}));e.on("ObjectResizeStart Cut",(function(){t.beforeChange()}));e.on("SaveContent ObjectResized blur",f);e.on("DragEnd",f);e.on("KeyUp",(function(n){var i=n.keyCode;if(n.isDefaultPrevented()){return}if(i>=33&&i<=36||i>=37&&i<=40||i===45||n.ctrlKey){f();e.nodeChanged()}if(i===46||i===8){e.nodeChanged()}if(a&&t.typing&&$E.isEq($E.createFromEditor(e),r[0])===false){if(e.isDirty()===false){l(true);e.fire("change",{level:r[0],lastLevel:null})}e.fire("TypingUndo");a=false;e.nodeChanged()}}));e.on("KeyDown",(function(e){var n=e.keyCode;if(e.isDefaultPrevented()){return}if(n>=33&&n<=36||n>=37&&n<=40||n===45){if(t.typing){f(e)}return}var r=e.ctrlKey&&!e.altKey||e.metaKey;if((n<16||n>20)&&n!==224&&n!==91&&!t.typing&&!r){t.beforeChange();s(true);t.add({},e);a=true}}));e.on("MouseDown",(function(e){if(t.typing){f(e)}}));var d=function(e){return e.inputType==="insertReplacementText"};var v=function(e){return e.inputType==="insertText"&&e.data===null};e.on("input",(function(e){if(e.inputType&&(d(e)||v(e))){f(e)}}));e.addShortcut("meta+z","","Undo");e.addShortcut("meta+y,meta+shift+z","","Redo");e.on("AddUndo Undo Redo ClearUndos",(function(t){if(!t.isDefaultPrevented()){e.nodeChanged()}}));t={data:r,typing:false,beforeChange:function(){if(u()){i=$f.getUndoBookmark(e.selection)}},add:function(t,a){var o;var s=e.settings;var f,c;c=$E.createFromEditor(e);t=t||{};t=Hn.extend(t,c);if(u()===false||e.removed){return null}f=r[n];if(e.fire("BeforeAddUndo",{level:t,lastLevel:f,originalEvent:a}).isDefaultPrevented()){return null}if(f&&$E.isEq(f,t)){return null}if(r[n]){r[n].beforeBookmark=i}if(s.custom_undo_redo_levels){if(r.length>s.custom_undo_redo_levels){for(o=0;o<r.length-1;o++){r[o]=r[o+1]}r.length--;n=r.length}}t.bookmark=$f.getUndoBookmark(e.selection);if(n<r.length-1){r.length=n+1}r.push(t);n=r.length-1;var d={level:t,lastLevel:f,originalEvent:a};e.fire("AddUndo",d);if(n>0){l(true);e.fire("change",d)}return t},undo:function(){var i;if(t.typing){t.add();t.typing=false;s(false)}if(n>0){i=r[--n];$E.applyToEditor(e,i,true);l(true);e.fire("undo",{level:i})}return i},redo:function(){var t;if(n<r.length-1){t=r[++n];$E.applyToEditor(e,t,false);l(true);e.fire("redo",{level:t})}return t},clear:function(){r=[];n=0;t.typing=false;t.data=r;e.fire("ClearUndos")},hasUndo:function(){return n>0||t.typing&&r[0]&&!$E.isEq($E.createFromEditor(e),r[0])},hasRedo:function(){return n<r.length-1&&!t.typing},transact:function(e){c();t.beforeChange();t.ignore(e);return t.add()},ignore:function(e){try{o++;e()}finally{o--}},extra:function(i,a){var o,u;if(t.transact(i)){u=r[n].bookmark;o=r[n-1];$E.applyToEditor(e,o,true);if(t.transact(a)){r[n-1].beforeBookmark=u}}}};return t}var YE={},XE=En.filter,GE=En.each;var JE=function(e,t){var n=YE[e];if(!n){YE[e]=n=[]}YE[e].push(t)};var ZE=function(e,t){GE(YE[e],(function(e){e(t)}))};JE("pre",(function(e){var t=e.selection.getRng();var n,r;var i=function(e){return n(e.previousSibling)&&En.indexOf(r,e.previousSibling)!==-1};var a=function(e,t){ar(t).remove();ar(e).append("<br><br>").append(t.childNodes)};n=jo.matchNodeNames("pre");if(!t.collapsed){r=e.selection.getSelectedBlocks();GE(XE(XE(r,n),i),(function(e){a(e.previousSibling,e)}))}}));var QE={postProcess:ZE};var eN=/^(src|href|style)$/;var tN=Hn.each;var nN=Qd.isEq;var rN=function(e){return/^(TH|TD)$/.test(e.nodeName)};var iN=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)};var aN=function(e,t,n){var r,i,a;r=t[n?"startContainer":"endContainer"];i=t[n?"startOffset":"endOffset"];if(jo.isElement(r)){a=r.childNodes.length-1;if(!n&&i){i--}r=r.childNodes[i>a?a:i]}if(jo.isText(r)&&n&&i>=r.nodeValue.length){r=new to(r,e.getBody()).next()||r}if(jo.isText(r)&&!n&&i===0){r=new to(r,e.getBody()).prev()||r}return r};var oN=function(e,t,n,r){var i=e.create(n,r);t.parentNode.insertBefore(i,t);i.appendChild(t);return i};var uN=function(e,t,n,r,i){var a=vi.fromDom(t);var o=vi.fromDom(e.create(r,i));var u=n?Ta(a):Sa(a);Yu(o,u);if(n){Wu(a,o);Vu(o,a)}else{ju(a,o);qu(o,a)}return o.dom()};var sN=function(e,t,n){if(nN(t,n.inline)){return true}if(nN(t,n.block)){return true}if(n.selector){return jo.isElement(t)&&e.is(t,n.selector)}};var lN=function(e,t){return t.links&&e.tagName==="A"};var fN=function(e,t,n,r){t=Qd.getNonWhiteSpaceSibling(t,n,r);return!t||(t.nodeName==="BR"||e.isBlock(t))};var cN=function(e,t,n){var r=t.parentNode;var i;var a=e.dom,o=e.settings.forced_root_block;if(n.block){if(!o){if(a.isBlock(t)&&!a.isBlock(r)){if(!fN(a,t,false)&&!fN(a,t.firstChild,true,1)){t.insertBefore(a.create("br"),t.firstChild)}if(!fN(a,t,true)&&!fN(a,t.lastChild,false,1)){t.appendChild(a.create("br"))}}}else{if(r===a.getRoot()){if(!n.list_block||!nN(t,n.list_block)){tN(Hn.grep(t.childNodes),(function(t){if(Qd.isValid(e,o,t.nodeName.toLowerCase())){if(!i){i=oN(a,t,o);a.setAttribs(i,e.settings.forced_root_block_attrs)}else{i.appendChild(t)}}else{i=0}}))}}}}if(n.selector&&n.inline&&!nN(n.inline,t)){return}a.remove(t,1)};var dN=function(e,t,n,r,i){var a,o,u;var s=e.dom;if(!sN(s,r,t)&&!lN(r,t)){return false}if(t.remove!=="all"){tN(t.styles,(function(e,a){e=Qd.normalizeStyleValue(s,Qd.replaceVars(e,n),a);if(typeof a==="number"){a=e;i=0}if(t.remove_similar||(!i||nN(Qd.getStyle(s,i,a),e))){s.setStyle(r,a,"")}u=1}));if(u&&s.getAttrib(r,"style")===""){r.removeAttribute("style");r.removeAttribute("data-mce-style")}tN(t.attributes,(function(e,t){var a;e=Qd.replaceVars(e,n);if(typeof t==="number"){t=e;i=0}if(!i||nN(s.getAttrib(i,t),e)){if(t==="class"){e=s.getAttrib(r,t);if(e){a="";tN(e.split(/\s+/),(function(e){if(/mce\-\w+/.test(e)){a+=(a?" ":"")+e}}));if(a){s.setAttrib(r,t,a);return}}}if(t==="class"){r.removeAttribute("className")}if(eN.test(t)){r.removeAttribute("data-mce-"+t)}r.removeAttribute(t)}}));tN(t.classes,(function(e){e=Qd.replaceVars(e,n);if(!i||s.hasClass(i,e)){s.removeClass(r,e)}}));o=s.getAttribs(r);for(a=0;a<o.length;a++){var l=o[a].nodeName;if(l.indexOf("_")!==0&&l.indexOf("data-")!==0){return false}}}if(t.remove!=="none"){cN(e,r,t);return true}};var vN=function(e,t,n,r,i){var a;tN(Qd.getParents(e.dom,t.parentNode).reverse(),(function(t){var o;if(!a&&t.id!=="_start"&&t.id!=="_end"){o=Vy.matchNode(e,t,n,r,i);if(o&&o.split!==false){a=t}}}));return a};var mN=function(e,t,n,r,i,a,o,u){var s,l,f,c,d,v;var m=e.dom;if(n){v=n.parentNode;for(s=r.parentNode;s&&s!==v;s=s.parentNode){l=m.clone(s,false);for(d=0;d<t.length;d++){if(dN(e,t[d],u,l,l)){l=0;break}}if(l){if(f){l.appendChild(f)}if(!c){c=l}f=l}}if(a&&(!o.mixed||!m.isBlock(n))){r=m.split(n,r)}if(f){i.parentNode.insertBefore(f,i);c.appendChild(i)}}return r};var gN=function(e,t,n,r,i){var a=e.formatter.get(t),o=a[0];var u,s,l=true;var f=e.dom;var c=e.selection;var d=function(r){var u=vN(e,r,t,n,i);return mN(e,a,u,r,r,true,o,n)};var v=function(e){return zd.isBookmarkNode(e)&&jo.isElement(e)&&(e.id==="_start"||e.id==="_end")};var m=function(t){var r,i,u,s,c;if(jo.isElement(t)&&f.getContentEditable(t)){s=l;l=f.getContentEditable(t)==="true";c=true}r=Hn.grep(t.childNodes);if(l&&!c){for(i=0,u=a.length;i<u;i++){if(dN(e,a[i],n,t,t)){break}}}if(o.deep){if(r.length){for(i=0,u=r.length;i<u;i++){m(r[i])}if(c){l=s}}}};var g=function(e){var t=f.get(e?"_start":"_end");var n=t[e?"firstChild":"lastChild"];if(v(n)){n=n[e?"firstChild":"lastChild"]}if(jo.isText(n)&&n.data.length===0){n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling}f.remove(t,true);return n};var p=function(t){var n,r;var i=t.commonAncestorContainer;t=mv.expandRng(e,t,a,true);if(o.split){t=Ky.split(t);n=aN(e,t,true);r=aN(e,t);if(n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild){if(n.nodeName==="TR"){n=n.firstChild.firstChild||n}else{n=n.firstChild||n}}if(i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&rN(r)&&r.firstChild){r=r.firstChild||r}if(iN(f,n,r)){var u=b.from(n.firstChild).getOr(n);d(uN(f,u,true,"span",{id:"_start","data-mce-type":"bookmark"}));g(true);return}if(iN(f,r,n)){var u=b.from(r.lastChild).getOr(r);d(uN(f,u,false,"span",{id:"_end","data-mce-type":"bookmark"}));g(false);return}n=oN(f,n,"span",{id:"_start","data-mce-type":"bookmark"});r=oN(f,r,"span",{id:"_end","data-mce-type":"bookmark"});d(n);d(r);n=g(true);r=g()}else{n=r=d(n)}t.startContainer=n.parentNode?n.parentNode:n;t.startOffset=f.nodeIndex(n);t.endContainer=r.parentNode?r.parentNode:r;t.endOffset=f.nodeIndex(r)+1}bv.walk(f,t,(function(t){tN(t,(function(t){m(t);if(jo.isElement(t)&&e.dom.getStyle(t,"text-decoration")==="underline"&&t.parentNode&&Qd.getTextDecoration(f,t.parentNode)==="underline"){dN(e,{deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,t)}}))}))};if(r){if(r.nodeType){s=f.createRng();s.setStartBefore(r);s.setEndAfter(r);p(s)}else{p(r)}return}if(f.getContentEditable(c.getNode())==="false"){r=c.getNode();for(var h=0,y=a.length;h<y;h++){if(a[h].ceFalseOverride){if(dN(e,a[h],n,r,r)){break}}}return}if(!c.isCollapsed()||!o.inline||f.select("td[data-mce-selected],th[data-mce-selected]").length){u=$f.getPersistentBookmark(e.selection,true);p(c.getRng());c.moveToBookmark(u);if(o.inline&&Vy.match(e,t,n,c.getStart())){Qd.moveStart(f,c,c.getRng())}e.nodeChanged()}else{sw(e,t,n,i)}};var pN={removeFormat:dN,remove:gN};var hN=Hn.each;var bN=function(e){return e&&e.nodeType===1&&!zd.isBookmarkNode(e)&&!Yf(e)&&!jo.isBogus(e)};var yN=function(e,t){var n;for(n=e;n;n=n[t]){if(n.nodeType===3&&n.nodeValue.length!==0){return e}if(n.nodeType===1&&!zd.isBookmarkNode(n)){return n}}return e};var wN=function(e,t,n){var r,i;var a=new em(e);if(t&&n){t=yN(t,"previousSibling");n=yN(n,"nextSibling");if(a.compare(t,n)){for(r=t.nextSibling;r&&r!==n;){i=r;r=r.nextSibling;t.appendChild(i)}e.remove(n);Hn.each(Hn.grep(n.childNodes),(function(e){t.appendChild(e)}));return t}}return n};var xN=function(e,t,n){hN(e.childNodes,(function(e){if(bN(e)){if(t(e)){n(e)}if(e.hasChildNodes()){xN(e,t,n)}}}))};var CN=function(e,t){return l((function(t,n){return!!(n&&Qd.getStyle(e,n,t))}),t)};var kN=function(e,t,n){return l((function(t,n,r){e.setStyle(r,t,n);if(r.getAttribute("style")===""){r.removeAttribute("style")}SN(e,r)}),t,n)};var SN=function(e,t){if(t.nodeName==="SPAN"&&e.getAttribs(t).length===0){e.remove(t,true)}};var TN=function(e,t){var n;if(t.nodeType===1&&t.parentNode&&t.parentNode.nodeType===1){n=Qd.getTextDecoration(e,t.parentNode);if(e.getStyle(t,"color")&&n){e.setStyle(t,"text-decoration",n)}else if(e.getStyle(t,"text-decoration")===n){e.setStyle(t,"text-decoration",null)}}};var EN=function(e,t,n,r){if(t.styles.color||t.styles.textDecoration){Hn.walk(r,l(TN,e),"childNodes");TN(e,r)}};var NN=function(e,t,n,r){if(t.styles&&t.styles.backgroundColor){xN(r,CN(e,"fontSize"),kN(e,"backgroundColor",Qd.replaceVars(t.styles.backgroundColor,n)))}};var RN=function(e,t,n,r){if(t.inline==="sub"||t.inline==="sup"){xN(r,CN(e,"fontSize"),kN(e,"fontSize",""));e.remove(e.select(t.inline==="sup"?"sub":"sup",r),true)}};var _N=function(e,t,n,r){if(r&&t.merge_siblings!==false){r=wN(e,Qd.getNonWhiteSpaceSibling(r),r);r=wN(e,r,Qd.getNonWhiteSpaceSibling(r,true))}};var DN=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";hN(e.select(r,n),(function(n){if(bN(n)){hN(t.styles,(function(t,r){e.setStyle(n,r,"")}))}}))}};var ON=function(e,t,n,r){hN(t,(function(t){hN(e.dom.select(t.inline,r),(function(r){if(!bN(r)){return}pN.removeFormat(e,t,n,r,t.exact?r:null)}));DN(e.dom,t,r)}))};var PN=function(e,t,n,r,i){if(Vy.matchNode(e,i.parentNode,n,r)){if(pN.removeFormat(e,t,r,i)){return}}if(t.merge_with_parents){e.dom.getParent(i.parentNode,(function(a){if(Vy.matchNode(e,a,n,r)){pN.removeFormat(e,t,r,i);return true}}))}};var AN={mergeWithChildren:ON,mergeUnderlineAndColor:EN,mergeBackgroundColorAndFontSize:NN,mergeSubSup:RN,mergeSiblings:_N,mergeWithParents:PN};var BN=Hn.each;var IN=function(e){return e&&e.nodeType===1&&!zd.isBookmarkNode(e)&&!Yf(e)&&!jo.isBogus(e)};var LN=function(e,t,n,r){var i=e.formatter.get(t);var a=i[0];var o,u;var s=!r&&e.selection.isCollapsed();var l=e.dom,f=e.selection;var c=function(e,t){t=t||a;if(e){if(t.onformat){t.onformat(e,t,n,r)}BN(t.styles,(function(t,r){l.setStyle(e,r,Qd.replaceVars(t,n))}));if(t.styles){var i=l.getAttrib(e,"style");if(i){e.setAttribute("data-mce-style",i)}}BN(t.attributes,(function(t,r){l.setAttrib(e,r,Qd.replaceVars(t,n))}));BN(t.classes,(function(t){t=Qd.replaceVars(t,n);if(!l.hasClass(e,t)){l.addClass(e,t)}}))}};var d=function(e,t){var n=false;if(!a.selector){return false}BN(e,(function(e){if("collapsed"in e&&e.collapsed!==s){return}if(l.is(t,e.selector)&&!Yf(t)){c(t,e);n=true;return false}}));return n};var v=function(r,o,u,s){var l=[];var f,v,m=true;f=a.inline||a.block;v=r.create(f);c(v);bv.walk(r,o,(function(o){var u;var g=function(o){var p,h,b,y;y=m;p=o.nodeName.toLowerCase();h=o.parentNode.nodeName.toLowerCase();if(o.nodeType===1&&r.getContentEditable(o)){y=m;m=r.getContentEditable(o)==="true";b=true}if(Qd.isEq(p,"br")){u=0;if(a.block){r.remove(o)}return}if(a.wrapper&&Vy.matchNode(e,o,t,n)){u=0;return}if(m&&!b&&a.block&&!a.wrapper&&Qd.isTextBlock(e,p)&&Qd.isValid(e,h,f)){o=r.rename(o,f);c(o);l.push(o);u=0;return}if(a.selector){var w=d(i,o);if(!a.inline||w){u=0;return}}if(m&&!b&&Qd.isValid(e,f,p)&&Qd.isValid(e,h,f)&&!(!s&&o.nodeType===3&&o.nodeValue.length===1&&o.nodeValue.charCodeAt(0)===65279)&&!Yf(o)&&(!a.inline||!r.isBlock(o))){if(!u){u=r.clone(v,false);o.parentNode.insertBefore(u,o);l.push(u)}u.appendChild(o)}else{u=0;BN(Hn.grep(o.childNodes),g);if(b){m=y}u=0}};BN(o,g)}));if(a.links===true){BN(l,(function(e){var t=function(e){if(e.nodeName==="A"){c(e,a)}BN(Hn.grep(e.childNodes),t)};t(e)}))}BN(l,(function(o){var u;var s=function(e){var t=0;BN(e.childNodes,(function(e){if(!Qd.isWhiteSpaceNode(e)&&!zd.isBookmarkNode(e)){t++}}));return t};var f=function(e){var t=false;BN(e.childNodes,(function(e){if(IN(e)){t=e;return false}}));return t};var d=function(e){var t,n;t=f(e);if(t&&!zd.isBookmarkNode(t)&&Vy.matchName(r,t,a)){n=r.clone(t,false);c(n);r.replace(n,e,true);r.remove(t,1)}return n||e};u=s(o);if((l.length>1||!r.isBlock(o))&&u===0){r.remove(o,1);return}if(a.inline||a.wrapper){if(!a.exact&&u===1){o=d(o)}AN.mergeWithChildren(e,i,n,o);AN.mergeWithParents(e,a,t,n,o);AN.mergeBackgroundColorAndFontSize(r,a,n,o);AN.mergeSubSup(r,a,n,o);AN.mergeSiblings(r,a,n,o)}}))};if(l.getContentEditable(f.getNode())==="false"){r=f.getNode();for(var m=0,g=i.length;m<g;m++){if(i[m].ceFalseOverride&&l.is(r,i[m].selector)){c(r,i[m]);return}}return}if(a){if(r){if(r.nodeType){if(!d(i,r)){u=l.createRng();u.setStartBefore(r);u.setEndAfter(r);v(l,mv.expandRng(e,u,i),null,true)}}else{v(l,r,null,true)}}else{if(!s||!a.inline||l.select("td[data-mce-selected],th[data-mce-selected]").length){var p=e.selection.getNode();if(!e.settings.forced_root_block&&i[0].defaultBlock&&!l.getParent(p,l.isBlock)){LN(e,i[0].defaultBlock)}e.selection.setRng(mm.normalize(e.selection.getRng()));o=$f.getPersistentBookmark(e.selection,true);v(l,mv.expandRng(e,f.getRng(),i));if(a.styles){AN.mergeUnderlineAndColor(l,a,n,p)}f.moveToBookmark(o);Qd.moveStart(l,f,f.getRng());e.nodeChanged()}else{uw(e,t,n)}}QE.postProcess(t,e)}};var MN={applyFormat:LN};var FN=Hn.each;var HN=function(e,t){var n={};e.set({});t.on("NodeChange",(function(r){var i=Qd.getParents(t.dom,r.element);var a={};i=Hn.grep(i,(function(e){return e.nodeType===1&&!e.getAttribute("data-mce-bogus")}));FN(e.get(),(function(e,r){FN(i,(function(o){if(t.formatter.matchNode(o,r,{},e.similar)){if(!n[r]){FN(e,(function(e){e(true,{node:o,format:r,parents:i})}));n[r]=e}a[r]=e;return false}if(Vy.matchesUnInheritedFormatSelector(t,o,r)){return false}}))}));FN(n,(function(e,t){if(!a[t]){delete n[t];FN(e,(function(e){e(false,{node:r.element,format:t,parents:i})}))}}))}))};var zN=function(e,t,n,r){var i=e.get();FN(t.split(","),(function(e){if(!i[e]){i[e]=[];i[e].similar=r}i[e].push(n)}));e.set(i)};var UN=function(e,t,n,r,i){if(t.get()===null){HN(t,e)}zN(t,n,r,i)};var WN={formatChanged:UN};var jN=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:false,preview:false,defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:false,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:"span",toggle:false,styles:{fontFamily:"%value"},clear_child_styles:true},fontsize:{inline:"span",toggle:false,styles:{fontSize:"%value"},clear_child_styles:true},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(t,n,r){Hn.each(r,(function(n,r){e.setAttrib(t,r,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]};Hn.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}}));return t};var VN={get:jN};function qN(e){var t={};var n=function(e){return e?t[e]:t};var r=function(e,n){if(e){if(typeof e!=="string"){Hn.each(e,(function(e,t){r(t,e)}))}else{n=n.length?n:[n];Hn.each(n,(function(e){if(typeof e.deep==="undefined"){e.deep=!e.selector}if(typeof e.split==="undefined"){e.split=!e.selector||e.inline}if(typeof e.remove==="undefined"&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof e.classes==="string"){e.classes=e.classes.split(/\s+/)}}));t[e]=n}}};var i=function(e){if(e&&t[e]){delete t[e]}return t};r(VN.get(e.dom));r(e.settings.formats);return{get:n,register:r,unregister:i}}var $N=Hn.each;var KN=Bu.DOM;var YN=function(e,t){var n,r,i;var a=t&&t.schema||Cu({});var o=function(e,t){if(t.classes.length){KN.addClass(e,t.classes.join(" "))}KN.setAttribs(e,t.attrs)};var u=function(e){var t;r=typeof e==="string"?{name:e,classes:[],attrs:{}}:e;t=KN.create(r.name);o(t,r);return t};var s=function(e,t){var n=typeof e!=="string"?e.nodeName.toLowerCase():e;var r=a.getElementRule(n);var i=r&&r.parentsRequired;if(i&&i.length){return t&&Hn.inArray(i,t)!==-1?t:i[0]}else{return false}};var l=function(e,t,n){var r,i,a;var o=t.length>0&&t[0];var f=o&&o.name;a=s(e,f);if(a){if(f===a){i=t[0];t=t.slice(1)}else{i=a}}else if(o){i=t[0];t=t.slice(1)}else if(!n){return e}if(i){r=u(i);r.appendChild(e)}if(n){if(!r){r=KN.create("div");r.appendChild(e)}Hn.each(n,(function(t){var n=u(t);r.insertBefore(n,e)}))}return l(r,t,i&&i.siblings)};if(e&&e.length){r=e[0];n=u(r);i=KN.create("div");i.appendChild(l(n,e.slice(1),r.siblings));return i}else{return""}};var XN=function(e,t){return YN(JN(e),t)};var GN=function(e){var t;var n={classes:[],attrs:{}};e=n.selector=Hn.trim(e);if(e!=="*"){t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,r,i,a){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":if(Hn.inArray("checked disabled enabled read-only required".split(" "),r)!==-1){n.attrs[r]=r}break}if(i==="["){var o=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(o){n.attrs[o[1]]=o[2]}}return""}))}n.name=t||"div";return n};var JN=function(e){if(!e||typeof e!=="string"){return[]}e=e.split(/\s*,\s*/)[0];e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return Hn.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=Hn.map(e.split(/(?:~\+|~|\+)/),GN);var n=t.pop();if(t.length){n.siblings=t}return n})).reverse()};var ZN=function(e,t){var n,r,i,a;var o="",u,s;s=e.settings.preview_styles;if(s===false){return""}if(typeof s!=="string"){s="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow"}var l=function(e){return e.replace(/%(\w+)/g,"")};if(typeof t==="string"){t=e.formatter.get(t);if(!t){return}t=t[0]}if("preview"in t){s=t.preview;if(s===false){return""}}n=t.block||t.inline||"span";a=JN(t.selector);if(a.length){if(!a[0].name){a[0].name=n}n=t.selector;r=YN(a,e)}else{r=YN([n],e)}i=KN.select(n,r)[0]||r.firstChild;$N(t.styles,(function(e,t){e=l(e);if(e){KN.setStyle(i,t,e)}}));$N(t.attributes,(function(e,t){e=l(e);if(e){KN.setAttrib(i,t,e)}}));$N(t.classes,(function(e){e=l(e);if(!KN.hasClass(i,e)){KN.addClass(i,e)}}));e.fire("PreviewFormats");KN.setStyles(r,{position:"absolute",left:-65535});e.getBody().appendChild(r);u=KN.getStyle(e.getBody(),"fontSize",true);u=/px$/.test(u)?parseInt(u,10):0;$N(s.split(" "),(function(t){var n=KN.getStyle(i,t,true);if(t==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=KN.getStyle(e.getBody(),t,true);if(KN.toHex(n).toLowerCase()==="#ffffff"){return}}if(t==="color"){if(KN.toHex(n).toLowerCase()==="#000000"){return}}if(t==="font-size"){if(/em|%$/.test(n)){if(u===0){return}var r=parseFloat(n)/(/%$/.test(n)?100:1);n=r*u+"px"}}if(t==="border"&&n){o+="padding:0 2px;"}o+=t+":"+n+";"}));e.fire("AfterPreviewFormats");KN.remove(r);return o};var QN={getCssText:ZN,parseSelector:JN,selectorToHtml:XN};var eR=function(e,t,n,r,i){var a=t.get(n);if(Vy.match(e,n,r,i)&&(!("toggle"in a[0])||a[0].toggle)){pN.remove(e,n,r,i)}else{MN.applyFormat(e,n,r,i)}};var tR={toggle:eR};var nR=function(e){e.addShortcut("meta+b","","Bold");e.addShortcut("meta+i","","Italic");e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++){e.addShortcut("access+"+t,"",["FormatBlock",false,"h"+t])}e.addShortcut("access+7","",["FormatBlock",false,"p"]);e.addShortcut("access+8","",["FormatBlock",false,"div"]);e.addShortcut("access+9","",["FormatBlock",false,"address"])};var rR={setup:nR};function iR(e){var t=qN(e);var n=es(null);rR.setup(e);fw(e);return{get:t.get,register:t.register,unregister:t.unregister,apply:l(MN.applyFormat,e),remove:l(pN.remove,e),toggle:l(tR.toggle,e,t),match:l(Vy.match,e),matchAll:l(Vy.matchAll,e),matchNode:l(Vy.matchNode,e),canApply:l(Vy.canApply,e),formatChanged:l(WN.formatChanged,e,n),getCssText:l(QN.getCssText,e)}}var aR=Object.prototype.hasOwnProperty;var oR=function(e,t){return t};var uR=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(aR.call(a,o)){r[o]=e(r[o],a[o])}}}return r}};var sR=uR(oR);var lR=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){var n=e.length,r;while(n--){r=e[n];r.attr("tabindex",r.attributes.map["data-mce-tabindex"]);r.attr(t,null)}}));e.addAttributeFilter("src,href,style",(function(e,r){var i=e.length,a,o;var u="data-mce-"+r;var s=t.url_converter;var l=t.url_converter_scope;while(i--){a=e[i];o=a.attributes.map[u];if(o!==undefined){a.attr(r,o.length>0?o:null);a.attr(u,null)}else{o=a.attributes.map[r];if(r==="style"){o=n.serializeStyle(n.parseStyle(o),a.name)}else if(s){o=s.call(l,o,r,a.name)}a.attr(r,o.length>0?o:null)}}}));e.addAttributeFilter("class",(function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(r){r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");n.attr("class",r.length>0?r:null)}}}));e.addAttributeFilter("data-mce-type",(function(e,t,n){var r=e.length,i;while(r--){i=e[r];if(i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){var a=b.from(i.firstChild).exists((function(e){return!qs.isZwsp(e.value)}));if(a){i.unwrap()}else{i.remove()}}}}));e.addNodeFilter("noscript",(function(e){var t=e.length,n;while(t--){n=e[t].firstChild;if(n){n.value=cu.decode(n.value)}}}));e.addNodeFilter("script,style",(function(e,n){var r=e.length,i,a,o;var u=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};while(r--){i=e[r];a=i.firstChild?i.firstChild.value:"";if(n==="script"){o=i.attr("type");if(o){i.attr("type",o==="mce-no/type"?null:o.replace(/^mce\-/,""))}if(t.element_format==="xhtml"&&a.length>0){i.firstChild.value="// <![CDATA[\n"+u(a)+"\n// ]]>"}}else{if(t.element_format==="xhtml"&&a.length>0){i.firstChild.value="\x3c!--\n"+u(a)+"\n--\x3e"}}}}));e.addNodeFilter("#comment",(function(e){var t=e.length,n;while(t--){n=e[t];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}}));e.addNodeFilter("xml:namespace,input",(function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.type===7){r.remove()}else if(r.type===1){if(t==="input"&&!("type"in r.attributes.map)){r.attr("type","text")}}}}));e.addAttributeFilter("data-mce-type",(function(t){L(t,(function(t){if(t.attr("data-mce-type")==="format-caret"){if(t.isEmpty(e.schema.getNonEmptyElements())){t.remove()}else{t.unwrap()}}}))}));e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,"+"data-mce-type,data-mce-resize",(function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}}))};var fR=function(e){var t,n;var r=function(e){return e&&e.name==="br"};t=e.lastChild;if(r(t)){n=t.prev;if(r(n)){t.remove();n.remove()}}};var cR={register:lR,trimTrailingBr:fR};var dR=function(e,t,n){var r,a,o;var u=e.dom;t=t.cloneNode(true);r=i.document.implementation;if(r.createHTMLDocument){a=r.createHTMLDocument("");Hn.each(t.nodeName==="BODY"?t.childNodes:[t],(function(e){a.body.appendChild(a.importNode(e,true))}));if(t.nodeName!=="BODY"){t=a.body.firstChild}else{t=a.body}o=u.doc;u.doc=a}IC.firePreProcess(e,sR(n,{node:t}));if(o){u.doc=o}return t};var vR=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events};var mR=function(e,t,n){return vR(e,n)?dR(e,t,n):t};var gR={process:mR};var pR=function(e,t){L(t,(function(t){e.attr(t,null)}))};var hR=function(e,t,n){e.addNodeFilter("font",(function(e){L(e,(function(e){var r=t.parse(e.attr("style"));var i=e.attr("color");var a=e.attr("face");var o=e.attr("size");if(i){r.color=i}if(a){r["font-family"]=a}if(o){r["font-size"]=n[parseInt(e.attr("size"),10)-1]}e.name="span";e.attr("style",t.serialize(r));pR(e,["color","face","size"])}))}))};var bR=function(e,t){e.addNodeFilter("strike",(function(e){L(e,(function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through";e.name="span";e.attr("style",t.serialize(n))}))}))};var yR=function(e,t){var n=Su();if(t.convert_fonts_to_spans){hR(e,n,Hn.explode(t.font_size_legacy_values))}bR(e,n)};var wR=function(e,t){if(t.inline_styles){yR(e,t)}};var xR={register:wR};var CR=/^[ \t\r\n]*$/;var kR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};var SR=function(e,t,n){var r;var i;var a=n?"lastChild":"firstChild";var o=n?"prev":"next";if(e[a]){return e[a]}if(e!==t){r=e[o];if(r){return r}for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r){return r}}}};var TR=function(){function e(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}}e.create=function(t,n){var r,i;r=new e(t,kR[t]||1);if(n){for(i in n){r.attr(i,n[i])}}return r};e.prototype.replace=function(e){var t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t};e.prototype.attr=function(e,t){var n=this;var r,i;if(typeof e!=="string"){for(i in e){n.attr(i,e[i])}return n}if(r=n.attributes){if(t!==undefined){if(t===null){if(e in r.map){delete r.map[e];i=r.length;while(i--){if(r[i].name===e){r=r.splice(i,1);return n}}}return n}if(e in r.map){i=r.length;while(i--){if(r[i].name===e){r[i].value=t;break}}}else{r.push({name:e,value:t})}r.map[e]=t;return n}return r.map[e]}};e.prototype.clone=function(){var t=this;var n=new e(t.name,t.type);var r,i,a,o,u;if(a=t.attributes){u=[];u.map={};for(r=0,i=a.length;r<i;r++){o=a[r];if(o.name!=="id"){u[u.length]={name:o.name,value:o.value};u.map[o.name]=o.value}}n.attributes=u}n.value=t.value;n.shortEnded=t.shortEnded;return n};e.prototype.wrap=function(e){var t=this;t.parent.insert(e,t);e.append(t);return t};e.prototype.unwrap=function(){var e=this;var t,n;for(t=e.firstChild;t;){n=t.next;e.insert(t,e,true);t=n}e.remove()};e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else{r.next=n}if(t.lastChild===e){t.lastChild=r;if(r){r.next=null}}else{n.prev=r}e.parent=e.next=e.prev=null}return e};e.prototype.append=function(e){var t=this;var n;if(e.parent){e.remove()}n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e};e.prototype.insert=function(e,t,n){var r;if(e.parent){e.remove()}r=t.parent||this;if(n){if(t===r.firstChild){r.firstChild=e}else{t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===r.lastChild){r.lastChild=e}else{t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e};e.prototype.getAll=function(e){var t=this;var n;var r=[];for(n=t.firstChild;n;n=SR(n,t)){if(n.name===e){r.push(n)}}return r};e.prototype.empty=function(){var e=this;var t,n,r;if(e.firstChild){t=[];for(r=e.firstChild;r;r=SR(r,e)){t.push(r)}n=t.length;while(n--){r=t[n];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}e.firstChild=e.lastChild=null;return e};e.prototype.isEmpty=function(e,t,n){var r=this;var i=r.firstChild,a,o;t=t||{};if(i){do{if(i.type===1){if(i.attributes.map["data-mce-bogus"]){continue}if(e[i.name]){return false}a=i.attributes.length;while(a--){o=i.attributes[a].name;if(o==="name"||o.indexOf("data-mce-bookmark")===0){return false}}}if(i.type===8){return false}if(i.type===3&&!CR.test(i.value)){return false}if(i.type===3&&i.parent&&t[i.parent.name]&&CR.test(i.value)){return false}if(n&&n(i)){return false}}while(i=SR(i,r))}return true};e.prototype.walk=function(e){return SR(this,null,e)};return e}();var ER=function(e,t,n,r){var i=e.padd_empty_with_br||t.insert;if(i&&n[r.name]){r.empty().append(new TR("br",1)).shortEnded=true}else{r.empty().append(new TR("#text",3)).value=""}};var NR=function(e){return RR(e,"#text")&&e.firstChild.value===""};var RR=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t};var _R=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty};var DR=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return _R(e,t)}))};var OR=function(e,t){return e&&(t[e.name]||e.name==="br")};var PR=function(e,t){var n=e.schema;if(t.remove_trailing_brs){e.addNodeFilter("br",(function(e,r,i){var a;var o=e.length;var u;var s=Hn.extend({},n.getBlockElements());var l=n.getNonEmptyElements();var f,c,d,v;var m=n.getWhiteSpaceElements();var g,p;s.body=1;for(a=0;a<o;a++){u=e[a];f=u.parent;if(s[u.parent.name]&&u===f.lastChild){d=u.prev;while(d){v=d.name;if(v!=="span"||d.attr("data-mce-type")!=="bookmark"){if(v!=="br"){break}if(v==="br"){u=null;break}}d=d.prev}if(u){u.remove();if(DR(n,l,m,f)){g=n.getElementRule(f.name);if(g){if(g.removeEmpty){f.remove()}else if(g.paddEmpty){ER(t,i,s,f)}}}}}else{c=u;while(f&&f.firstChild===c&&f.lastChild===c){c=f;if(s[f.name]){break}f=f.parent}if(c===f&&t.padd_empty_with_br!==true){p=new TR("#text",3);p.value="";u.replace(p)}}}}))}e.addAttributeFilter("href",(function(e){var n=e.length,r;var i=function(e){var t=e.split(" ").filter((function(e){return e.length>0}));return t.concat(["noopener"]).sort().join(" ")};var a=function(e){var t=e?Hn.trim(e):"";if(!/\b(noopener)\b/g.test(t)){return i(t)}else{return t}};if(!t.allow_unsafe_link_target){while(n--){r=e[n];if(r.name==="a"&&r.attr("target")==="_blank"){r.attr("rel",a(r.attr("rel")))}}}}));if(!t.allow_html_in_named_anchor){e.addAttributeFilter("id,name",(function(e){var t=e.length,n,r,i,a;while(t--){a=e[t];if(a.name==="a"&&a.firstChild&&!a.attr("href")){i=a.parent;n=a.lastChild;do{r=n.prev;i.insert(n,a);n=r}while(n)}}}))}if(t.fix_list_elements){e.addNodeFilter("ul,ol",(function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.parent;if(r.name==="ul"||r.name==="ol"){if(n.prev&&n.prev.name==="li"){n.prev.append(n)}else{var i=new TR("li",1);i.attr("style","list-style-type: none");n.wrap(i)}}}}))}if(t.validate&&n.getValidClasses()){e.addAttributeFilter("class",(function(e){var t=e.length,r,i,a,o,u;var s=n.getValidClasses();var l,f;while(t--){r=e[t];i=r.attr("class").split(" ");u="";for(a=0;a<i.length;a++){o=i[a];f=false;l=s["*"];if(l&&l[o]){f=true}l=s[r.name];if(!f&&l&&l[o]){f=true}if(f){if(u){u+=" "}u+=o}}if(!u.length){u=null}r.attr("class",u)}}))}};var AR=Hn.makeMap,BR=Hn.each,IR=Hn.explode,LR=Hn.extend;function MR(e,t){if(t===void 0){t=Cu()}var n={};var r=[];var i={};var a={};e=e||{};e.validate="validate"in e?e.validate:true;e.root_name=e.root_name||"body";var o=function(e){var n,r,i,a,o,s,l,f,c;var d,v,m,g,p,h,b;m=AR("tr,td,th,tbody,thead,tfoot,table");d=t.getNonEmptyElements();v=t.getWhiteSpaceElements();g=t.getTextBlockElements();p=t.getSpecialElements();for(n=0;n<e.length;n++){r=e[n];if(!r.parent||r.fixed){continue}if(g[r.name]&&r.parent.name==="li"){h=r.next;while(h){if(g[h.name]){h.name="li";h.fixed=true;r.parent.insert(h,r.parent)}else{break}h=h.next}r.unwrap(r);continue}a=[r];for(i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!m[i.name];i=i.parent){a.push(i)}if(i&&a.length>1){a.reverse();o=s=u(a[0].clone());for(c=0;c<a.length-1;c++){if(t.isValidChild(s.name,a[c].name)){l=u(a[c].clone());s.append(l)}else{l=s}for(f=a[c].firstChild;f&&f!==a[c+1];){b=f.next;l.append(f);f=b}s=l}if(!DR(t,d,v,o)){i.insert(o,a[0],true);i.insert(r,o)}else{i.insert(r,a[0],true)}i=a[0];if(DR(t,d,v,i)||RR(i,"br")){i.empty().remove()}}else if(r.parent){if(r.name==="li"){h=r.prev;if(h&&(h.name==="ul"||h.name==="ul")){h.append(r);continue}h=r.next;if(h&&(h.name==="ul"||h.name==="ul")){h.insert(r,h.firstChild,true);continue}r.wrap(u(new TR("ul",1)));continue}if(t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)){r.wrap(u(new TR("div",1)))}else{if(p[r.name]){r.empty().remove()}else{r.unwrap()}}}}};var u=function(e){var t,o,u;o=e.name;if(o in n){u=i[o];if(u){u.push(e)}else{i[o]=[e]}}t=r.length;while(t--){o=r[t].name;if(o in e.attributes.map){u=a[o];if(u){u.push(e)}else{a[o]=[e]}}}return e};var s=function(e,t){BR(IR(e),(function(e){var r=n[e];if(!r){n[e]=r=[]}r.push(t)}))};var l=function(){var e=[];for(var t in n){if(n.hasOwnProperty(t)){e.push({name:t,callbacks:n[t]})}}return e};var f=function(e,t){BR(IR(e),(function(e){var n;for(n=0;n<r.length;n++){if(r[n].name===e){r[n].callbacks.push(t);return}}r.push({name:e,callbacks:[t]})}))};var c=function(){return[].concat(r)};var d=function(u,s){var l,f,c,d,v,m,g,p;var h;var b=[];var y;var w;s=s||{};i={};a={};h=LR(AR("script,style,head,html,body,title,meta,param"),t.getBlockElements());var x=t.getNonEmptyElements();var C=t.children;var k=e.validate;var S="forced_root_block"in s?s.forced_root_block:e.forced_root_block;var T=t.getWhiteSpaceElements();var E=/^[ \t\r\n]+/;var N=/[ \t\r\n]+$/;var R=/[ \t\r\n]+/g;var _=/^[ \t\r\n]+$/;y=T.hasOwnProperty(s.context)||T.hasOwnProperty(e.root_name);var D=function(){var n=B.firstChild,r,i;var a=function(e){if(e){n=e.firstChild;if(n&&n.type===3){n.value=n.value.replace(E,"")}n=e.lastChild;if(n&&n.type===3){n.value=n.value.replace(N,"")}}};if(!t.isValidChild(B.name,S.toLowerCase())){return}while(n){r=n.next;if(n.type===3||n.type===1&&n.name!=="p"&&!h[n.name]&&!n.attr("data-mce-type")){if(!i){i=O(S,1);i.attr(e.forced_root_block_attrs);B.insert(i,n);i.append(n)}else{i.append(n)}}else{a(i);i=null}n=r}a(i)};var O=function(e,t){var r=new TR(e,t);var a;if(e in n){a=i[e];if(a){a.push(r)}else{i[e]=[r]}}return r};var P=function(e){var n,r,i,a;var o=t.getBlockElements();for(n=e.prev;n&&n.type===3;){i=n.value.replace(N,"");if(i.length>0){n.value=i;return}r=n.next;if(r){if(r.type===3&&r.value.length){n=n.prev;continue}if(!o[r.name]&&r.name!=="script"&&r.name!=="style"){n=n.prev;continue}}a=n.prev;n.remove();n=a}};var A=function(e){var t;var n={};for(t in e){if(t!=="li"&&t!=="p"){n[t]=e[t]}}return n};l=pE({validate:k,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:A(t.getSelfClosingElements()),cdata:function(e){w.append(O("#cdata",4)).value=e},text:function(e,t){var n;if(!y){e=e.replace(R," ");if(OR(w.lastChild,h)){e=e.replace(E,"")}}if(e.length!==0){n=O("#text",3);n.raw=!!t;w.append(n).value=e}},comment:function(e){w.append(O("#comment",8)).value=e},pi:function(e,t){w.append(O(e,7)).value=t;P(w)},doctype:function(e){var t;t=w.append(O("#doctype",10));t.value=e;P(w)},start:function(e,n,i){var o,u,s,l,f;s=k?t.getElementRule(e):{};if(s){o=O(s.outputName||e,1);o.attributes=n;o.shortEnded=i;w.append(o);f=C[w.name];if(f&&C[o.name]&&!f[o.name]){b.push(o)}u=r.length;while(u--){l=r[u].name;if(l in n.map){g=a[l];if(g){g.push(o)}else{a[l]=[o]}}}if(h[e]){P(o)}if(!i){w=o}if(!y&&T[e]){y=true}}},end:function(n){var r,i,a,o,u;i=k?t.getElementRule(n):{};if(i){if(h[n]){if(!y){r=w.firstChild;if(r&&r.type===3){a=r.value.replace(E,"");if(a.length>0){r.value=a;r=r.next}else{o=r.next;r.remove();r=o;while(r&&r.type===3){a=r.value;o=r.next;if(a.length===0||_.test(a)){r.remove();r=o}r=o}}}r=w.lastChild;if(r&&r.type===3){a=r.value.replace(N,"");if(a.length>0){r.value=a;r=r.prev}else{o=r.prev;r.remove();r=o;while(r&&r.type===3){a=r.value;o=r.prev;if(a.length===0||_.test(a)){r.remove();r=o}r=o}}}}}if(y&&T[n]){y=false}if(i.removeEmpty&&DR(t,x,T,w)){if(!w.attributes.map.name&&!w.attr("id")){u=w.parent;if(h[w.name]){w.empty().remove()}else{w.unwrap()}w=u;return}}if(i.paddEmpty&&(NR(w)||DR(t,x,T,w))){ER(e,s,h,w)}w=w.parent}}},t);var B=w=new TR(s.context||e.root_name,11);l.parse(u);if(k&&b.length){if(!s.context){o(b)}else{s.invalid=true}}if(S&&(B.name==="body"||s.isRootContent)){D()}if(!s.invalid){for(p in i){g=n[p];f=i[p];v=f.length;while(v--){if(!f[v].parent){f.splice(v,1)}}for(c=0,d=g.length;c<d;c++){g[c](f,p,s)}}for(c=0,d=r.length;c<d;c++){g=r[c];if(g.name in a){f=a[g.name];v=f.length;while(v--){if(!f[v].parent){f.splice(v,1)}}for(v=0,m=g.callbacks.length;v<m;v++){g.callbacks[v](f,g.name,s)}}}}return B};var v={schema:t,addAttributeFilter:f,getAttributeFilters:c,addNodeFilter:s,getNodeFilters:l,filterNode:u,parse:d};PR(v,e);xR.register(v,e);return v}var FR=function(e,t,n){if(Hn.inArray(t,n)===-1){e.addAttributeFilter(n,(function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}}));t.push(n)}};var HR=function(e,t,n){if(!t.no_events&&e){var r=IC.firePostProcess(e,sR(t,{content:n}));return r.content}else{return n}};var zR=function(e,t,n){var r=qs.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||ko(vi.fromDom(t))?r:Hn.trim(r)};var UR=function(e,t,n){var r=n.selection?sR({forced_root_block:false},n):n;var i=e.parse(t,r);cR.trimTrailingBr(i);return i};var WR=function(e,t,n){var r=fm(e,t);return r.serialize(n)};var jR=function(e,t,n,r,i){var a=WR(t,n,r);return HR(e,i,a)};function VR(e,t){var n,r,i;var a=["data-mce-selected"];n=t&&t.dom?t.dom:Bu.DOM;r=t&&t.schema?t.schema:Cu(e);e.entity_encoding=e.entity_encoding||"named";e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:true;i=MR(e,r);cR.register(i,e,n);var o=function(a,o){var u=sR({format:"html"},o?o:{});var s=gR.process(t,a,u);var l=zR(n,s,u);var f=UR(i,l,u);return u.format==="tree"?f:jR(t,e,r,f,u)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:o,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:l(FR,i,a),getTempAttrs:function(){return a}}}function qR(e,t){var n=VR(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function $R(e){return{getBookmark:l(zd.getBookmark,e),moveToBookmark:l(zd.moveToBookmark,e)}}(function(e){e.isBookmarkNode=zd.isBookmarkNode})($R||($R={}));var KR=$R;var YR=jo.isContentEditableFalse;var XR=jo.isContentEditableTrue;var GR=function(e,t){while(t&&t!==e){if(XR(t)||YR(t)){return t}t=t.parentNode}return null};var JR=function(e,t){var n=t.dom,r=Hn.each;var a,o,u,s,l;var f,c,d,v,m,g,p,h;var b,y;var w=t.getDoc(),x=i.document;var C=Math.abs,k=Math.round,S=t.getBody();var T,E;s={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var N=".mce-content-body";t.contentStyles.push(N+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"box-sizing: content-box;"+"background: #FFF;"+"width: 7px;"+"height: 7px;"+"z-index: 10000"+"}"+N+" .mce-resizehandle:hover {"+"background: #000"+"}"+N+" img[data-mce-selected],"+N+" hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+N+" .mce-clonedresizable {"+"position: absolute;"+(Ne.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+N+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}");var R=function(e){return e&&(e.nodeName==="IMG"||t.dom.is(e,"figure.image"))};var _=function(e,t){return R(e.target)&&!NT.isXYWithinRange(e.clientX,e.clientY,t)};var D=function(e){var n=e.target;if(_(e,t.selection.getRng())&&!e.isDefaultPrevented()){t.selection.select(n)}};var O=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e};var P=function(e){var n=t.settings.object_resizing;if(n===false||Ne.iOS){return false}if(typeof n!=="string"){n="table,img,figure.image,div"}if(e.getAttribute("data-mce-resize")==="false"){return false}if(e===t.getBody()){return false}return sa(vi.fromDom(e),n)};var A=function(e){var r,i,s;var w,x;r=e.screenX-f;i=e.screenY-c;b=r*l[2]+m;y=i*l[3]+g;b=b<5?5:b;y=y<5?5:y;if(R(a)&&t.settings.resize_img_proportional!==false){s=!nT.modifierPressed(e)}else{s=nT.modifierPressed(e)||R(a)&&l[2]*l[3]!==0}if(s){if(C(r)>C(i)){y=k(b*p);b=k(y/p)}else{b=k(y/p);y=k(b*p)}}n.setStyles(O(o),{width:b,height:y});w=l.startPos.x+r;x=l.startPos.y+i;w=w>0?w:0;x=x>0?x:0;n.setStyles(u,{left:w,top:x,display:"block"});u.innerHTML=b+" &times; "+y;if(l[2]<0&&o.clientWidth<=b){n.setStyle(o,"left",d+(m-b))}if(l[3]<0&&o.clientHeight<=y){n.setStyle(o,"top",v+(g-y))}r=S.scrollWidth-T;i=S.scrollHeight-E;if(r+i!==0){n.setStyles(u,{left:w-r,top:x-i})}if(!h){IC.fireObjectResizeStart(t,a,m,g);h=true}};var B=function(){h=false;var e=function(e,r){if(r){if(a.style[e]||!t.schema.isValid(a.nodeName.toLowerCase(),e)){n.setStyle(O(a),e,r)}else{n.setAttrib(O(a),e,r)}}};e("width",b);e("height",y);n.unbind(w,"mousemove",A);n.unbind(w,"mouseup",B);if(x!==w){n.unbind(x,"mousemove",A);n.unbind(x,"mouseup",B)}n.remove(o);n.remove(u);I(a);IC.fireObjectResized(t,a,b,y);n.setAttrib(a,"style",n.getAttrib(a,"style"));t.nodeChanged()};var I=function(e){var i,h,C,k,N;L();H();i=n.getPos(e,S);d=i.x;v=i.y;N=e.getBoundingClientRect();h=N.width||N.right-N.left;C=N.height||N.bottom-N.top;if(a!==e){a=e;b=y=0}k=t.fire("ObjectSelected",{target:e});if(P(e)&&!k.isDefaultPrevented()){r(s,(function(e,t){var r;var i=function(t){f=t.screenX;c=t.screenY;m=O(a).clientWidth;g=O(a).clientHeight;p=g/m;l=e;e.startPos={x:h*e[0]+d,y:C*e[1]+v};T=S.scrollWidth;E=S.scrollHeight;o=a.cloneNode(true);n.addClass(o,"mce-clonedresizable");n.setAttrib(o,"data-mce-bogus","all");o.contentEditable=false;o.unSelectabe=true;n.setStyles(o,{left:d,top:v,margin:0});o.removeAttribute("data-mce-selected");S.appendChild(o);n.bind(w,"mousemove",A);n.bind(w,"mouseup",B);if(x!==w){n.bind(x,"mousemove",A);n.bind(x,"mouseup",B)}u=n.add(S,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+g)};r=n.get("mceResizeHandle"+t);if(r){n.remove(r)}r=n.add(S,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+t+"-resize; margin:0; padding:0"});if(Ne.ie===11){r.contentEditable=false}n.bind(r,"mousedown",(function(e){e.stopImmediatePropagation();e.preventDefault();i(e)}));e.elm=r;n.setStyles(r,{left:h*e[0]+d-r.offsetWidth/2,top:C*e[1]+v-r.offsetHeight/2})}))}else{L()}a.setAttribute("data-mce-selected","1")};var L=function(){var e,t;H();if(a){a.removeAttribute("data-mce-selected")}for(e in s){t=n.get("mceResizeHandle"+e);if(t){n.unbind(t);n.remove(t)}}};var M=function(i){var a,o;var u=function(e,t){if(e){do{if(e===t){return true}}while(e=e.parentNode)}};if(h||t.removed){return}r(n.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")}));o=i.type==="mousedown"?i.target:e.getNode();o=n.$(o).closest("table,img,figure.image,hr")[0];if(u(o,S)){z();a=e.getStart(true);if(u(a,o)&&u(e.getEnd(true),o)){I(o);return}}L()};var F=function(e){return YR(GR(t.getBody(),e))};var H=function(){for(var e in s){var t=s[e];if(t.elm){n.unbind(t.elm);delete t.elm}}};var z=function(){try{t.getDoc().execCommand("enableObjectResizing",false,false)}catch(e){}};t.on("init",(function(){z();if(Ne.ie&&Ne.ie>=11){t.on("mousedown click",(function(e){var n=e.target,r=n.nodeName;if(!h&&/^(TABLE|IMG|HR)$/.test(r)&&!F(n)){if(e.button!==2){t.selection.select(n,r==="TABLE")}if(e.type==="mousedown"){t.nodeChanged()}}}));t.dom.bind(S,"mscontrolselect",(function(e){var n=function(e){Me.setEditorTimeout(t,(function(){t.selection.select(e)}))};if(F(e.target)){e.preventDefault();n(e.target);return}if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();if(e.target.tagName==="IMG"){n(e.target)}}}))}var e=Me.throttle((function(e){if(!t.composing){M(e)}}));t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e);t.on("keyup compositionend",(function(t){if(a&&a.nodeName==="TABLE"){e(t)}}));t.on("hide blur",L);t.on("contextmenu",D)}));t.on("remove",H);var U=function(){a=o=null};return{isResizable:P,showResizeRect:I,hideResizeRect:L,updateResizeRect:M,destroy:U}};var ZR=function(e){return jo.isContentEditableTrue(e)||jo.isContentEditableFalse(e)};var QR=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var e_=function(e,t,n){var r,i,a;r=n.elementFromPoint(e,t);i=n.body.createTextRange();if(!r||r.tagName==="HTML"){r=n.body}i.moveToElementText(r);a=Hn.toArray(i.getClientRects());a=a.sort((function(e,n){e=Math.abs(Math.max(e.top-t,e.bottom-t));n=Math.abs(Math.max(n.top-t,n.bottom-t));return e-n}));if(a.length>0){t=(a[0].bottom+a[0].top)/2;try{i.moveToPoint(e,t);i.collapse(true);return i}catch(e){}}return null};var t_=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return jo.isContentEditableFalse(QR(n,t,ZR))?null:e};var n_=function(e,t,n){var r,i;var a=n;if(a.caretPositionFromPoint){i=a.caretPositionFromPoint(e,t);if(i){r=n.createRange();r.setStart(i.offsetNode,i.offset);r.collapse(true)}}else if(n.caretRangeFromPoint){r=n.caretRangeFromPoint(e,t)}else if(a.body.createTextRange){r=a.body.createTextRange();try{r.moveToPoint(e,t);r.collapse(true)}catch(i){r=e_(e,t,n)}return t_(r,n.body)}return r};var r_={fromPoint:n_};var i_=function(e,t){return I(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))};var a_={processRanges:i_};var o_=function(e,t){var n=t||i.document;var r=n.createDocumentFragment();L(e,(function(e){r.appendChild(e.dom())}));return vi.fromDom(r)};var u_=Zi("element","width","rows");var s_=Zi("element","cells");var l_=Zi("x","y");var f_=function(e,t){var n=parseInt(ji(e,t),10);return isNaN(n)?1:n};var c_=function(e,t,n,r,i){var a=f_(i,"rowspan");var o=f_(i,"colspan");var u=e.rows();for(var s=n;s<n+a;s++){if(!u[s]){u[s]=s_(Fs(r),[])}for(var l=t;l<t+o;l++){var f=u[s].cells();f[l]=s===n&&l===t?i:Ms(i)}}};var d_=function(e,t,n){var r=e.rows();var i=r[n]?r[n].cells():[];return!!i[t]};var v_=function(e,t,n){while(d_(e,t,n)){t++}return t};var m_=function(e){return U(e,(function(e,t){return t.cells().length>e?t.cells().length:e}),0)};var g_=function(e,t){var n=e.rows();for(var r=0;r<n.length;r++){var i=n[r].cells();for(var a=0;a<i.length;a++){if(da(i[a],t)){return b.some(l_(a,r))}}}return b.none()};var p_=function(e,t,n,r,i){var a=[];var o=e.rows();for(var u=n;u<=i;u++){var s=o[u].cells();var l=t<r?s.slice(t,r+1):s.slice(r,t+1);a.push(s_(o[u].element(),l))}return a};var h_=function(e,t,n){var r=t.x(),i=t.y();var a=n.x(),o=n.y();var u=i<o?p_(e,r,i,a,o):p_(e,r,o,a,i);return u_(e.element(),m_(u),u)};var b_=function(e,t){var n=Ms(e.element());var r=vi.fromTag("tbody");Yu(r,t);qu(n,r);return n};var y_=function(e){return I(e.rows(),(function(e){var t=I(e.cells(),(function(e){var t=Fs(e);qi(t,"colspan");qi(t,"rowspan");return t}));var n=Ms(e.element());Yu(n,t);return n}))};var w_=function(e){var t=u_(Ms(e),0,[]);L(vs(e,"tr"),(function(e,n){L(vs(e,"td,th"),(function(r,i){c_(t,v_(t,i,n),n,e,r)}))}));return u_(t.element(),m_(t.rows()),t.rows())};var x_=function(e){return b_(e,y_(e))};var C_=function(e,t,n){return g_(e,t).bind((function(t){return g_(e,n).map((function(n){return h_(e,t,n)}))}))};var k_={fromDom:w_,toDom:x_,subsection:C_};var S_=function(e){return W(e,(function(e){return Ei(e)==="ul"||Ei(e)==="ol"}))};var T_=function(e,t){return W(e,(function(e){return Ei(e)==="li"&&ZS(e,t)})).fold(u([]),(function(t){return S_(e).map((function(e){return[vi.fromTag("li"),vi.fromTag(Ei(e))]})).getOr([])}))};var E_=function(e,t){var n=U(t,(function(e,t){qu(t,e);return t}),e);return t.length>0?o_([n]):n};var N_=function(e){if(yo(e)){return wa(e).filter(bo).fold(u([]),(function(t){return[e,t]}))}else{return bo(e)?[e]:[]}};var R_=function(e,t){var n=vi.fromDom(t.commonAncestorContainer);var r=Yg.parentsAndSelf(n,e);var i=H(r,(function(e){return go(e)||vo(e)}));var a=T_(r,t);var o=i.concat(a.length?a:N_(n));return I(o,Ms)};var __=function(){return o_([])};var D_=function(e,t){return E_(vi.fromDom(t.cloneContents()),R_(e,t))};var O_=function(e,t){return hs(t,"table",l(da,e))};var P_=function(e,t){return O_(e,t[0]).bind((function(e){var n=t[0];var r=t[t.length-1];var i=k_.fromDom(e);return k_.subsection(i,n,r).map((function(e){return o_([k_.toDom(e)])}))})).getOrThunk(__)};var A_=function(e,t){return t.length>0&&t[0].collapsed?__():D_(e,t[0])};var B_=function(e,t){var n=gy.getCellsFromElementOrRanges(t,e);return n.length>0?P_(e,n):A_(e,t)};var I_={read:B_};var L_=function(e){return b.from(e.selection.getRng()).map((function(t){var n=e.dom.add(e.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents());var r=qs.trim(n.innerText);e.dom.remove(n);return r})).getOr("")};var M_=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body");var i=e.selection.getSel();var a;var o=a_.processRanges(e,fy.getRanges(i));a=t.contextual?I_.read(vi.fromDom(e.getBody()),o).dom():n.cloneContents();if(a){r.appendChild(a)}return e.selection.serializer.serialize(r,t)};var F_=function(e,t){if(t===void 0){t={}}t.get=true;t.format=t.format||"html";t.selection=true;t=e.fire("BeforeGetContent",t);if(t.isDefaultPrevented()){e.fire("GetContent",t);return t.content}if(t.format==="text"){return L_(e)}else{t.getInner=true;var n=M_(e,t);if(t.format==="tree"){return n}else{t.content=e.selection.isCollapsed()?"":n;e.fire("GetContent",t);return t.content}}};var H_={getContent:F_};var z_=function(e,t){return Ds(Ds({format:"html"},e),{set:true,selection:true,content:t})};var U_=function(e,t){if(t.format!=="raw"){var n=e.parser.parse(t.content,Ds({isRootContent:true,forced_root_block:false},t));return fm({validate:e.validate},e.schema).serialize(n)}else{return t.content}};var W_=function(e,t,n){var r=z_(n,t);var i=e.selection.getRng(),a;var o=e.getDoc();var u,s;if(!r.no_events){r=e.fire("BeforeSetContent",r);if(r.isDefaultPrevented()){e.fire("SetContent",r);return}}t=U_(e,r);if(i.insertNode){t+='<span id="__caret">_</span>';if(i.startContainer===o&&i.endContainer===o){o.body.innerHTML=t}else{i.deleteContents();if(o.body.childNodes.length===0){o.body.innerHTML=t}else{if(i.createContextualFragment){i.insertNode(i.createContextualFragment(t))}else{u=o.createDocumentFragment();s=o.createElement("div");u.appendChild(s);s.outerHTML=t;i.insertNode(u)}}}a=e.dom.get("__caret");i=o.createRange();i.setStartBefore(a);i.setEndBefore(a);e.selection.setRng(i);e.dom.remove("__caret");try{e.selection.setRng(i)}catch(e){}}else{var l=i;if(l.item){o.execCommand("Delete",false,null);l=e.selection.getRng()}if(/^\s+/.test(t)){l.pasteHTML('<span id="__mce_tmp">_</span>'+t);e.dom.remove("__mce_tmp")}else{l.pasteHTML(t)}}if(!r.no_events){e.fire("SetContent",r)}};var j_={setContent:W_};var V_=function(e,t,n,r,i){var a=n?t.startContainer:t.endContainer;var o=n?t.startOffset:t.endOffset;return b.from(a).map(vi.fromDom).map((function(e){return!r||!t.collapsed?Na(e,i(e,o)).getOr(e):e})).bind((function(e){return _i(e)?b.some(e):wa(e)})).map((function(e){return e.dom()})).getOr(e)};var q_=function(e,t,n){return V_(e,t,true,n,(function(e,t){return Math.min(Da(e),t)}))};var $_=function(e,t,n){return V_(e,t,false,n,(function(e,t){return t>0?t-1:t}))};var K_=function(e,t){var n=e;while(e&&jo.isText(e)&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n};var Y_=function(e,t){var n,r,i,a,o;if(!t){return e}r=t.startContainer;i=t.endContainer;a=t.startOffset;o=t.endOffset;n=t.commonAncestorContainer;if(!t.collapsed){if(r===i){if(o-a<2){if(r.hasChildNodes()){n=r.childNodes[a]}}}if(r.nodeType===3&&i.nodeType===3){if(r.length===a){r=K_(r.nextSibling,true)}else{r=r.parentNode}if(o===0){i=K_(i.previousSibling,false)}else{i=i.parentNode}if(r&&r===i){return r}}}if(n&&n.nodeType===3){return n.parentNode}return n};var X_=function(e,t,n,r){var i,a;var o=[];a=e.getRoot();n=e.getParent(n||q_(a,t,t.collapsed),e.isBlock);r=e.getParent(r||$_(a,t,t.collapsed),e.isBlock);if(n&&n!==a){o.push(n)}if(n&&r&&n!==r){i=n;var u=new to(n,a);while((i=u.next())&&i!==r){if(e.isBlock(i)){o.push(i)}}}if(r&&n!==r&&r!==a){o.push(r)}return o};var G_=function(e,t,n){return b.from(t).map((function(t){var r=e.nodeIndex(t);var i=e.createRng();i.setStart(t.parentNode,r);i.setEnd(t.parentNode,r+1);if(n){QS(e,i,t,true);QS(e,i,t,false)}return i}))};var J_=Hn.each;var Z_=function(e){return!!e.select};var Q_=function(e){return!!(e&&e.ownerDocument)&&pa(vi.fromDom(e.ownerDocument),vi.fromDom(e))};var eD=function(e){if(!e){return false}else if(Z_(e)){return true}else{return Q_(e.startContainer)&&Q_(e.endContainer)}};var tD=function(e,t,n,r){var i,a;var o,u,s;var l=function(t,n){var i=e.createRng();if(!t){QS(e,i,r.getBody(),true);x(i)}else{i.setStart(t,n);i.setEnd(t,n);x(i);b(false)}};var f=function(e){return H_.getContent(r,e)};var c=function(e,t){return j_.setContent(r,e,t)};var d=function(e){return q_(r.getBody(),w(),e)};var v=function(e){return $_(r.getBody(),w(),e)};var m=function(e,t){return i.getBookmark(e,t)};var g=function(e){return i.moveToBookmark(e)};var p=function(t,n){G_(e,t,n).each(x);return t};var h=function(){var e=w(),t=y();if(!e||e.item){return false}if(e.compareEndPoints){return e.compareEndPoints("StartToEnd",e)===0}return!t||e.collapsed};var b=function(e){var t=w();t.collapse(!!e);x(t)};var y=function(){return t.getSelection?t.getSelection():t.document.selection};var w=function(){var n,i,a,s;var l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t){return null}s=t.document;if(typeof s==="undefined"||s===null){return null}if(r.bookmark!==undefined&&Mk.hasFocus(r)===false){var f=vC.getRng(r);if(f.isSome()){return f.map((function(e){return a_.processRanges(r,[e])[0]})).getOr(s.createRange())}}try{if((n=y())&&!jo.isRestrictedNode(n.anchorNode)){if(n.rangeCount>0){i=n.getRangeAt(0)}else{i=n.createRange?n.createRange():s.createRange()}}}catch(e){}i=a_.processRanges(r,[i])[0];if(!i){i=s.createRange?s.createRange():s.body.createTextRange()}if(i.setStart&&i.startContainer.nodeType===9&&i.collapsed){a=e.getRoot();i.setStart(a,0);i.setEnd(a,0)}if(o&&u){if(l(i.START_TO_START,i,o)===0&&l(i.END_TO_END,i,o)===0){i=u}else{o=null;u=null}}return i};var x=function(e,t){var n,i,a;if(!eD(e)){return}var s=Z_(e)?e:null;if(s){u=null;try{s.select()}catch(e){}return}n=y();a=r.fire("SetSelectionRange",{range:e,forward:t});e=a.range;if(n){u=e;try{n.removeAllRanges();n.addRange(e)}catch(e){}if(t===false&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}o=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&n.setBaseAndExtent&&!Ne.ie){if(e.endOffset-e.startOffset<2){if(e.startContainer.hasChildNodes()){i=e.startContainer.childNodes[e.startOffset];if(i&&i.tagName==="IMG"){n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset);if(n.anchorNode!==e.startContainer||n.focusNode!==e.endContainer){n.setBaseAndExtent(i,0,i,1)}}}}}r.fire("AfterSetSelectionRange",{range:e,forward:t})};var C=function(t){c(e.getOuterHTML(t));return t};var k=function(){return Y_(r.getBody(),w())};var S=function(t,n){return X_(e,w(),t,n)};var T=function(){var t=y();var n,r;if(!t||!t.anchorNode||!t.focusNode){return true}n=e.createRng();n.setStart(t.anchorNode,t.anchorOffset);n.collapse(true);r=e.createRng();r.setStart(t.focusNode,t.focusOffset);r.collapse(true);return n.compareBoundaryPoints(n.START_TO_START,r)<=0};var E=function(){var t=w();var n=y();if(!fy.hasMultipleRanges(n)&&eT(r)){var i=yx.normalize(e,t);i.each((function(e){x(e,T())}));return i.getOr(t)}return t};var N=function(t,n){var i;if(!s){s={};i={};r.on("NodeChange",(function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),a={};J_(s,(function(t,n){J_(r,(function(o){if(e.is(o,n)){if(!i[n]){J_(t,(function(e){e(true,{node:o,selector:n,parents:r})}));i[n]=t}a[n]=t;return false}}))}));J_(i,(function(e,t){if(!a[t]){delete i[t];J_(e,(function(e){e(false,{node:n,selector:t,parents:r})}))}}))}))}if(!s[t]){s[t]=[]}s[t].push(n);return A};var R=function(){var t;var n=e.getRoot();while(n&&n.nodeName!=="BODY"){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t};var _=function(e,t){return Ew.scrollElementIntoView(r,e,t)};var D=function(e,t){return x(r_.fromPoint(e,t,r.getDoc()))};var O=function(){var e=w();return e.collapsed?df.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()};var P=function(){t=o=u=null;a.destroy()};var A={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:b,setCursorLocation:l,getContent:f,setContent:c,getBookmark:m,moveToBookmark:g,select:p,isCollapsed:h,isForward:T,setNode:C,getNode:k,getSel:y,setRng:x,getRng:w,getStart:d,getEnd:v,getSelectedBlocks:S,normalize:E,selectorChanged:N,getScrollContainer:R,scrollIntoView:_,placeCaretAt:D,getBoundingClientRect:O,destroy:P};i=KR(A);a=JR(A,r);A.bookmarkManager=i;A.controlSelection=a;return A};var nD;(function(e){e[e["Br"]=0]="Br";e[e["Block"]=1]="Block";e[e["Wrap"]=2]="Wrap";e[e["Eol"]=3]="Eol"})(nD||(nD={}));var rD=function(e,t){return e===jc.Backwards?t.reverse():t};var iD=function(e,t,n){return e===jc.Forwards?t.next(n):t.prev(n)};var aD=function(e,t,n,r){if(jo.isBr(r.getNode(t===jc.Forwards))){return nD.Br}else if(_c(n,r)===false){return nD.Block}else{return nD.Wrap}};var oD=function(e,t,n,r){var i=nd(n);var a=r,o;var u=[];while(a){o=iD(t,i,a);if(!o){break}if(jo.isBr(o.getNode(false))){if(t===jc.Forwards){return{positions:rD(t,u).concat([o]),breakType:nD.Br,breakAt:b.some(o)}}else{return{positions:rD(t,u),breakType:nD.Br,breakAt:b.some(o)}}}if(!o.isVisible()){a=o;continue}if(e(a,o)){var s=aD(n,t,a,o);return{positions:rD(t,u),breakType:s,breakAt:b.some(o)}}u.push(o);a=o}return{positions:rD(t,u),breakType:nD.Eol,breakAt:b.none()}};var uD=function(e,t,n,r){return t(n,r).breakAt.map((function(r){var i=t(n,r).positions;return e===jc.Backwards?i.concat(r):[r].concat(i)})).getOr([])};var sD=function(e,t){return U(e,(function(e,n){return e.fold((function(){return b.some(n)}),(function(r){return Fl(J(r.getClientRects()),J(n.getClientRects()),(function(e,i){var a=Math.abs(t-e.left);var o=Math.abs(t-i.left);return o<=a?n:r})).or(e)}))}),b.none())};var lD=function(e,t){return J(t.getClientRects()).bind((function(t){return sD(e,t.left)}))};var fD=l(oD,cf.isAbove,-1);var cD=l(oD,cf.isBelow,1);var dD=function(e,t){return fD(e,t).breakAt.isNone()};var vD=function(e,t){return cD(e,t).breakAt.isNone()};var mD=l(uD,-1,fD);var gD=l(uD,1,cD);var pD=function(e){return pd.firstPositionIn(e).map((function(t){return[t].concat(cD(e,t).positions)})).getOr([])};var hD=function(e){return pd.lastPositionIn(e).map((function(t){return fD(e,t).positions.concat(t)})).getOr([])};var bD=jo.isContentEditableFalse;var yD=Bl;var wD=function(e,t,n,r){var i=e===jc.Forwards;var a=i?Bp:Ip;if(!r.collapsed){var o=yD(r);if(bD(o)){return _w(e,t,o,e===jc.Backwards,true)}}var u=ul(r);var s=Fc(e,t.getBody(),r);if(a(s)){return Ow(t,s.getNode(!i))}var l=pg.normalizePosition(i,n(s));if(!l){if(u){return r}return null}if(a(l)){return _w(e,t,l.getNode(!i),i,true)}var f=n(l);if(f&&a(f)){if(Wc(l,f)){return _w(e,t,f.getNode(!i),i,true)}}if(u){return Aw(t,l.toRange(),true)}return null};var xD=function(e,t,n,r){var i,a,o;var u,s,l;var f,c,d;d=yD(r);i=Fc(e,t.getBody(),r);a=n(t.getBody(),vT(1),i);o=H(a,mT(1));s=En.last(i.getClientRects());if(Bp(i)||Mp(i)){d=i.getNode()}if(Ip(i)||Fp(i)){d=i.getNode(true)}if(!s){return null}l=s.left;u=wT(o,l);if(u){if(bD(u.node)){f=Math.abs(l-u.left);c=Math.abs(l-u.right);return _w(e,t,u.node,f<c,true)}}if(d){var v=dT(e,t.getBody(),vT(1),d);u=wT(H(v,mT(1)),l);if(u){return Aw(t,u.position.toRange(),true)}u=En.last(H(v,mT(0)));if(u){return Aw(t,u.position.toRange(),true)}}};var CD=function(e){var t=e.dom.create(og.getForcedRootBlock(e));if(!Ne.ie||Ne.ie>=11){t.innerHTML='<br data-mce-bogus="1">'}return t};var kD=function(e,t,n){var r,i,a;var o=nd(e.getBody());var u=l(Uc,o.next);var s=l(Uc,o.prev);if(n.collapsed&&e.settings.forced_root_block){r=e.dom.getParent(n.startContainer,"PRE");if(!r){return}if(t===1){i=u(df.fromRangeStart(n))}else{i=s(df.fromRangeStart(n))}if(!i){a=CD(e);if(t===1){e.$(r).after(a)}else{e.$(r).before(a)}e.selection.select(a,true);e.selection.collapse()}}};var SD=function(e,t){var n=nd(e.getBody());var r=l(Uc,n.next);var i=l(Uc,n.prev);var a;var o=t?jc.Forwards:jc.Backwards;var u=t?r:i;var s=e.selection.getRng();a=wD(o,e,u,s);if(a){return a}a=kD(e,o,s);if(a){return a}return null};var TD=function(e,t){var n;var r=t?1:-1;var i=t?cT:fT;var a=e.selection.getRng();n=xD(r,e,i,a);if(n){return n}n=kD(e,r,a);if(n){return n}return null};var ED=function(e,t){return function(){var n=SD(e,t);if(n){Bw(e,n);return true}else{return false}}};var ND=function(e,t){return function(){var n=TD(e,t);if(n){Bw(e,n);return true}else{return false}}};var RD=function(e){return function(t){return e?Ip(t):Bp(t)}};var _D=function(e,t){return function(){var n=t?df.fromRangeEnd(e.selection.getRng()):df.fromRangeStart(e.selection.getRng());var r=t?cD(e.getBody(),n):fD(e.getBody(),n);var i=t?Z(r.positions):J(r.positions);return i.filter(RD(t)).fold(u(false),(function(t){e.selection.setRng(t.toRange());return true}))}};var DD=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}};var OD=function(e,t){return q(t,(function(t){var n=DD(Sl(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))};var PD=function(e,t,n){return U(e,(function(e,r){return e.fold((function(){return b.some(r)}),(function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n));var a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return b.some(a<i?r:e)}))}),b.none())};var AD=function(e,t,n,r,i){var a=vs(vi.fromDom(n),"td,th,caption").map((function(e){return e.dom()}));var o=H(OD(e,a),(function(e){return t(e,i)}));return PD(o,r,i).map((function(e){return e.cell}))};var BD=function(e){return e.bottom};var ID=function(e){return e.top};var LD=function(e,t){return e.y<t};var MD=function(e,t){return e.y>t};var FD=l(AD,BD,LD);var HD=l(AD,ID,MD);var zD=function(e,t){return J(t.getClientRects()).bind((function(t){return FD(e,t.left,t.top)})).bind((function(e){return lD(hD(e),t)}))};var UD=function(e,t){return Z(t.getClientRects()).bind((function(t){return HD(e,t.left,t.top)})).bind((function(e){return lD(pD(e),t)}))};var WD=function(e,t,n){return n.breakAt.map((function(n){return e(t,n).breakAt.isSome()})).getOr(false)};var jD=function(e){return e.breakType===nD.Wrap&&e.positions.length===0};var VD=function(e){return e.breakType===nD.Br&&e.positions.length===1};var qD=function(e,t,n){var r=e(t,n);if(jD(r)||!jo.isBr(n.getNode())&&VD(r)){return!WD(e,t,r)}else{return r.breakAt.isNone()}};var $D=l(qD,fD);var KD=l(qD,cD);var YD=function(e,t,n){var r=df.fromRangeStart(t);return pd.positionIn(!e,n).map((function(e){return e.isEqual(r)})).getOr(false)};var XD=function(e,t,n,r){var i=e.selection.getRng();var a=t?1:-1;if(pc()&&YD(t,i,n)){var o=_w(a,e,n,!t,true);Bw(e,o);return true}return false};var GD=function(e,t,n){return zD(t,n).orThunk((function(){return J(n.getClientRects()).bind((function(n){return sD(mD(e,df.before(t)),n.left)}))})).getOr(df.before(t))};var JD=function(e,t,n){return UD(t,n).orThunk((function(){return J(n.getClientRects()).bind((function(n){return sD(gD(e,df.after(t)),n.left)}))})).getOr(df.after(t))};var ZD=function(e,t){var n=t.getNode(e);return jo.isElement(n)&&n.nodeName==="TABLE"?b.some(n):b.none()};var QD=function(e,t,n,r){var i=og.getForcedRootBlock(t);if(i){t.undoManager.transact((function(){var r=vi.fromTag(i);Wi(r,og.getForcedRootBlockAttrs(t));qu(r,vi.fromTag("br"));if(e){ju(vi.fromDom(n),r)}else{Wu(vi.fromDom(n),r)}var a=t.dom.createRng();a.setStart(r.dom(),0);a.setEnd(r.dom(),0);Bw(t,a)}))}else{Bw(t,r.toRange())}};var eO=function(e,t,n){var r=t?ZD(true,n):ZD(false,n);var i=t===false;r.fold((function(){return Bw(e,n.toRange())}),(function(r){return pd.positionIn(i,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return Bw(e,n.toRange())}),(function(i){return QD(t,e,r,n)}))}))};var tO=function(e,t,n,r){var i=e.selection.getRng();var a=df.fromRangeStart(i);var o=e.getBody();if(!t&&$D(r,a)){var u=GD(o,n,a);eO(e,t,u);return true}else if(t&&KD(r,a)){var u=JD(o,n,a);eO(e,t,u);return true}else{return false}};var nO=function(e,t){return function(){return b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return b.from(e.dom.getParent(n,"table")).map((function(n){return XD(e,t,n)}))})).getOr(false)}};var rO=function(e,t){return function(){return b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return b.from(e.dom.getParent(n,"table")).map((function(r){return tO(e,t,r,n)}))})).getOr(false)}};var iO=function(e){return A(["figcaption"],Ei(e))};var aO=function(e){var t=i.document.createRange();t.setStartBefore(e.dom());t.setEndBefore(e.dom());return t};var oO=function(e,t,n){if(n){qu(e,t)}else{Vu(e,t)}};var uO=function(e,t){var n=vi.fromTag("br");oO(e,n,t);return aO(n)};var sO=function(e,t,n,r){var i=vi.fromTag(n);var a=vi.fromTag("br");Wi(i,r);qu(i,a);oO(e,i,t);return aO(a)};var lO=function(e,t,n,r){if(t===""){return uO(e,r)}else{return sO(e,r,t,n)}};var fO=function(e,t){var n=l(da,t);return ps(vi.fromDom(e.container()),mo,n).filter(iO)};var cO=function(e,t,n){return t?vD(e.dom(),n):dD(e.dom(),n)};var dO=function(e,t){var n=vi.fromDom(e.getBody());var r=df.fromRangeStart(e.selection.getRng());var i=og.getForcedRootBlock(e);var a=og.getForcedRootBlockAttrs(e);return fO(r,n).exists((function(){if(cO(n,t,r)){var o=lO(n,i,a,t);e.selection.setRng(o);return true}else{return false}}))};var vO=function(e,t){return function(){if(e.selection.isCollapsed()){return dO(e,t)}else{return false}}};var mO=function(e){return I(e,(function(e){return sR({shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0,action:a},e)}))};var gO=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey};var pO=function(e,t){return q(mO(e),(function(e){return gO(e,t)?[e]:[]}))};var hO=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}};var bO=function(e,t){return W(pO(e,t),(function(e){return e.action()}))};var yO={match:pO,action:hO,execute:bO};var wO=function(e,t,n){var r=ui.detect().os;yO.execute([{keyCode:nT.RIGHT,action:ED(e,true)},{keyCode:nT.LEFT,action:ED(e,false)},{keyCode:nT.UP,action:ND(e,false)},{keyCode:nT.DOWN,action:ND(e,true)},{keyCode:nT.RIGHT,action:nO(e,true)},{keyCode:nT.LEFT,action:nO(e,false)},{keyCode:nT.UP,action:rO(e,false)},{keyCode:nT.DOWN,action:rO(e,true)},{keyCode:nT.RIGHT,action:Db.move(e,t,true)},{keyCode:nT.LEFT,action:Db.move(e,t,false)},{keyCode:nT.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Db.moveNextWord(e,t)},{keyCode:nT.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Db.movePrevWord(e,t)},{keyCode:nT.UP,action:vO(e,false)},{keyCode:nT.DOWN,action:vO(e,true)}],n).each((function(e){n.preventDefault()}))};var xO=function(e,t){e.on("keydown",(function(n){if(n.isDefaultPrevented()===false){wO(e,t,n)}}))};var CO={setup:xO};var kO=function(e,t,n){yO.execute([{keyCode:nT.BACKSPACE,action:yO.action(Dh.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(Dh.backspaceDelete,e,true)},{keyCode:nT.BACKSPACE,action:yO.action(Hw.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(Hw.backspaceDelete,e,true)},{keyCode:nT.BACKSPACE,action:yO.action(Hb.backspaceDelete,e,t,false)},{keyCode:nT.DELETE,action:yO.action(Hb.backspaceDelete,e,t,true)},{keyCode:nT.BACKSPACE,action:yO.action(By.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(By.backspaceDelete,e,true)},{keyCode:nT.BACKSPACE,action:yO.action(pp.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(pp.backspaceDelete,e,true)},{keyCode:nT.BACKSPACE,action:yO.action(sp.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(sp.backspaceDelete,e,true)},{keyCode:nT.BACKSPACE,action:yO.action(yw.backspaceDelete,e,false)},{keyCode:nT.DELETE,action:yO.action(yw.backspaceDelete,e,true)}],n).each((function(e){n.preventDefault()}))};var SO=function(e,t){yO.execute([{keyCode:nT.BACKSPACE,action:yO.action(Dh.paddEmptyElement,e)},{keyCode:nT.DELETE,action:yO.action(Dh.paddEmptyElement,e)}],t)};var TO=function(e,t){e.on("keydown",(function(n){if(n.isDefaultPrevented()===false){kO(e,t,n)}}));e.on("keyup",(function(t){if(t.isDefaultPrevented()===false){SO(e,t)}}))};var EO={setup:TO};var NO=function(e){while(e){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data)){return e}e=e.nextSibling}};var RO=function(e,t){var n,r,i,a=t,o;var u=e.dom;var s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t){return}if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=NO(t.firstChild);if(l&&/^(UL|OL|DL)$/.test(l.nodeName)){t.insertBefore(u.doc.createTextNode(""),t.firstChild)}}i=u.createRng();t.normalize();if(t.hasChildNodes()){n=new to(t,t);while(r=n.current()){if(jo.isText(r)){i.setStart(r,0);i.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){i.setStartBefore(r);i.setEndBefore(r);break}a=r;r=n.next()}if(!r){i.setStart(a,0);i.setEnd(a,0)}}else{if(jo.isBr(t)){if(t.nextSibling&&u.isBlock(t.nextSibling)){i.setStartBefore(t);i.setEndBefore(t)}else{i.setStartAfter(t);i.setEndAfter(t)}}else{i.setStart(t,0);i.setEnd(t,0)}}e.selection.setRng(i);u.remove(o);e.selection.scrollIntoView(t)};var _O=function(e,t){var n=e.getRoot();var r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var DO=function(e){return b.from(e.dom.getParent(e.selection.getStart(true),e.dom.isBlock))};var OO=function(e){return DO(e).fold(u(""),(function(e){return e.nodeName.toUpperCase()}))};var PO=function(e){return DO(e).filter((function(e){return yo(vi.fromDom(e))})).isSome()};var AO={moveToCaretPosition:RO,getEditableRoot:_O,getParentBlock:DO,getParentBlockName:OO,isListItemParentBlock:PO};var BO=function(e,t){return e.firstChild&&e.firstChild.nodeName===t};var IO=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t};var LO=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)};var MO=function(e){return LO(e)&&LO(e.parentNode)};var FO=function(e){var t=e.parentNode;if(/^(LI|DT|DD)$/.test(t.nodeName)){return t}return e};var HO=function(e,t,n){var r=e[n?"firstChild":"lastChild"];while(r){if(jo.isElement(r)){break}r=r[n?"nextSibling":"previousSibling"]}return r===t};var zO=function(e,t,n,r,i){var a=e.dom;var o=e.selection.getRng();if(n===e.getBody()){return}if(MO(n)){i="LI"}var u=i?t(i):a.create("BR");if(HO(n,r,true)&&HO(n,r,false)){if(IO(n,"LI")){a.insertAfter(u,FO(n))}else{a.replace(u,n)}}else if(HO(n,r,true)){if(IO(n,"LI")){a.insertAfter(u,FO(n));u.appendChild(a.doc.createTextNode(" "));u.appendChild(n)}else{n.parentNode.insertBefore(u,n)}}else if(HO(n,r,false)){a.insertAfter(u,FO(n))}else{n=FO(n);var s=o.cloneRange();s.setStartAfter(r);s.setEndAfter(n);var l=s.extractContents();if(i==="LI"&&BO(l,"LI")){u=l.firstChild;a.insertAfter(l,n)}else{a.insertAfter(l,n);a.insertAfter(u,n)}}a.remove(r);AO.moveToCaretPosition(e,u)};var UO={insert:zO};var WO=function(e){L(ds(vi.fromDom(e),Di),(function(e){var t=e.dom();t.nodeValue=qs.trim(t.nodeValue)}))};var jO=function(e,t){return t&&t.nodeName==="A"&&e.isEmpty(t)};var VO=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var qO=function(e){e.innerHTML='<br data-mce-bogus="1">'};var $O=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t};var KO=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true"};var YO=function(e,t,n){var r=n;var i=[];var a;if(!r){return}while(r=r.firstChild){if(e.isBlock(r)){return}if(jo.isElement(r)&&!t[r.nodeName.toLowerCase()]){i.push(r)}}a=i.length;while(a--){r=i[a];if(!r.hasChildNodes()||r.firstChild===r.lastChild&&r.firstChild.nodeValue===""){e.remove(r)}else{if(jO(e,r)){e.remove(r)}}}};var XO=function(e,t,n){if(jo.isText(t)===false){return n}else if(e){return n===1&&t.data.charAt(n-1)===qs.ZWSP?0:n}else{return n===t.data.length-1&&t.data.charAt(n)===qs.ZWSP?t.data.length:n}};var GO=function(e){var t=e.cloneRange();t.setStart(e.startContainer,XO(true,e.startContainer,e.startOffset));t.setEnd(e.endContainer,XO(false,e.endContainer,e.endOffset));return t};var JO=function(e){do{if(jo.isText(e)){e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")}e=e.firstChild}while(e)};var ZO=function(e,t){var n=e.getRoot();var r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var QO=function(e,t,n){b.from(n.style).map(e.dom.parseStyle).each((function(n){var r=Ji(vi.fromDom(t));var i=Ds(Ds({},r),n);e.dom.setStyles(t,i)}));var r=b.from(n.class).map((function(e){return e.split(/\s+/)}));var i=b.from(t.className).map((function(e){return H(e.split(/\s+/),(function(e){return e!==""}))}));Fl(r,i,(function(n,r){var i=H(r,(function(e){return!A(n,e)}));var a=Ps(n,i);e.dom.setAttrib(t,"class",a.join(" "))}));var a=["style","class"];var o=Li(n,(function(e,t){return!A(a,t)})).t;e.dom.setAttribs(t,o)};var eP=function(e,t){var n=og.getForcedRootBlock(e);if(n&&n.toLowerCase()===t.tagName.toLowerCase()){var r=og.getForcedRootBlockAttrs(e);QO(e,t,r)}};var tP=function(e,t,n,r,i){var a,o,u,s,l,f;var c=t||"P";var d=e.dom,v=ZO(d,r);o=d.getParent(r,d.isBlock);if(!o||!KO(d,o)){o=o||v;if(o===e.getBody()||VO(o)){f=o.nodeName.toLowerCase()}else{f=o.parentNode.nodeName.toLowerCase()}if(!o.hasChildNodes()){a=d.create(c);eP(e,a);o.appendChild(a);n.setStart(a,0);n.setEnd(a,0);return a}s=r;while(s.parentNode!==o){s=s.parentNode}while(s&&!d.isBlock(s)){u=s;s=s.previousSibling}if(u&&e.schema.isValidChild(f,c.toLowerCase())){a=d.create(c);eP(e,a);u.parentNode.insertBefore(a,u);s=u;while(s&&!d.isBlock(s)){l=s.nextSibling;a.appendChild(s);s=l}n.setStart(r,i);n.setEnd(r,i)}}return r};var nP=function(e,t){var n;t.normalize();n=t.lastChild;if(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",true))){e.add(t,"br")}};var rP=function(e,t){var n,r,i,a,o,u;var s,l,f,c,d,v,m;var g=e.dom;var p=e.schema,h=p.getNonEmptyElements();var b=e.selection.getRng();var y=function(t){var n=i,a,u,s;var l=p.getTextInlineElements();if(t||c==="TABLE"||c==="HR"){a=g.create(t||v)}else{a=o.cloneNode(false)}s=a;if(og.shouldKeepStyles(e)===false){g.setAttrib(a,"style",null);g.setAttrib(a,"class",null)}else{do{if(l[n.nodeName]){if(Yf(n)||zd.isBookmarkNode(n)){continue}u=n.cloneNode(false);g.setAttrib(u,"id","");if(a.hasChildNodes()){u.appendChild(a.firstChild);a.appendChild(u)}else{s=u;a.appendChild(u)}}}while((n=n.parentNode)&&n!==r)}eP(e,a);qO(s);return a};var w=function(e){var t,n,r,u;u=XO(e,i,a);if(jo.isText(i)&&(e?u>0:u<i.nodeValue.length)){return false}if(i.parentNode===o&&m&&!e){return true}if(e&&jo.isElement(i)&&i===o.firstChild){return true}if($O(i,"TABLE")||$O(i,"HR")){return m&&!e||!m&&e}t=new to(i,o);if(jo.isText(i)){if(e&&u===0){t.prev()}else if(!e&&u===i.nodeValue.length){t.next()}}while(n=t.current()){if(jo.isElement(n)){if(!n.getAttribute("data-mce-bogus")){r=n.nodeName.toLowerCase();if(h[r]&&r!=="br"){return false}}}else if(jo.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue)){return false}if(e){t.prev()}else{t.next()}}return true};var x=function(){if(/^(H[1-6]|PRE|FIGURE)$/.test(c)&&d!=="HGROUP"){s=y(v)}else{s=y()}if(og.shouldEndContainerOnEmptyBlock(e)&&KO(g,f)&&g.isEmpty(o)){s=g.split(f,o)}else{g.insertAfter(s,o)}AO.moveToCaretPosition(e,s)};yx.normalize(g,b).each((function(e){b.setStart(e.startContainer,e.startOffset);b.setEnd(e.endContainer,e.endOffset)}));i=b.startContainer;a=b.startOffset;v=og.getForcedRootBlock(e);u=t.shiftKey;if(jo.isElement(i)&&i.hasChildNodes()){m=a>i.childNodes.length-1;i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i;if(m&&jo.isText(i)){a=i.nodeValue.length}else{a=0}}r=ZO(g,i);if(!r){return}if(v&&!u||!v&&u){i=tP(e,v,b,i,a)}o=g.getParent(i,g.isBlock);f=o?g.getParent(o.parentNode,g.isBlock):null;c=o?o.nodeName.toUpperCase():"";d=f?f.nodeName.toUpperCase():"";if(d==="LI"&&!t.ctrlKey){o=f;f=f.parentNode;c=d}if(/^(LI|DT|DD)$/.test(c)){if(g.isEmpty(o)){UO.insert(e,y,f,o,v);return}}if(v&&o===e.getBody()){return}v=v||"P";if(Ys(o)){s=ol(o);if(g.isEmpty(o)){qO(o)}eP(e,s);AO.moveToCaretPosition(e,s)}else if(w()){x()}else if(w(true)){s=o.parentNode.insertBefore(y(),o);AO.moveToCaretPosition(e,$O(o,"HR")?s:o)}else{n=GO(b).cloneRange();n.setEndAfter(o);l=n.extractContents();WO(l);JO(l);s=l.firstChild;g.insertAfter(l,o);YO(g,h,s);nP(g,o);if(g.isEmpty(o)){qO(o)}s.normalize();if(g.isEmpty(s)){g.remove(s);x()}else{eP(e,s);AO.moveToCaretPosition(e,s)}}g.setAttrib(s,"id","");e.fire("NewBlock",{newBlock:s})};var iP={insert:rP};var aP=function(e,t){return AO.getParentBlock(e).filter((function(e){return t.length>0&&sa(vi.fromDom(e),t)})).isSome()};var oP=function(e){return aP(e,og.getBrNewLineSelector(e))};var uP=function(e){return aP(e,og.getNoNewLineSelector(e))};var sP={shouldInsertBr:oP,shouldBlockNewLine:uP};var lP=bp.generate([{br:[]},{block:[]},{none:[]}]);var fP=function(e,t){return sP.shouldBlockNewLine(e)};var cP=function(e){return function(t,n){var r=og.getForcedRootBlock(t)==="";return r===e}};var dP=function(e){return function(t,n){return AO.isListItemParentBlock(t)===e}};var vP=function(e,t){return function(n,r){var i=AO.getParentBlockName(n)===e.toUpperCase();return i===t}};var mP=function(e){return vP("pre",e)};var gP=function(){return vP("summary",true)};var pP=function(e){return function(t,n){return og.shouldPutBrInPre(t)===e}};var hP=function(e,t){return sP.shouldInsertBr(e)};var bP=function(e,t){return t};var yP=function(e){var t=og.getForcedRootBlock(e);var n=AO.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t?t:"P")};var wP=function(e,t){return function(n,r){var i=U(e,(function(e,t){return e&&t(n,r)}),true);return i?b.some(t):b.none()}};var xP=function(e,t){return qh.evaluateUntil([wP([fP],lP.none()),wP([gP()],lP.br()),wP([mP(true),pP(false),bP],lP.br()),wP([mP(true),pP(false)],lP.block()),wP([mP(true),pP(true),bP],lP.block()),wP([mP(true),pP(true)],lP.br()),wP([dP(true),bP],lP.br()),wP([dP(true)],lP.block()),wP([cP(true),bP,yP],lP.block()),wP([cP(true)],lP.br()),wP([hP],lP.br()),wP([cP(false),bP],lP.br()),wP([yP],lP.block())],[e,t.shiftKey]).getOr(lP.none())};var CP={getAction:xP};var kP=function(e,t){CP.getAction(e,t).fold((function(){Ax.insert(e,t)}),(function(){iP.insert(e,t)}),a)};var SP={insert:kP};var TP=function(e){if(e.typing){e.typing=false;e.add()}};var EP=function(e,t){if(t.isDefaultPrevented()){return}t.preventDefault();TP(e.undoManager);e.undoManager.transact((function(){if(e.selection.isCollapsed()===false){e.execCommand("Delete")}SP.insert(e,t)}))};var NP=function(e){e.on("keydown",(function(t){if(t.keyCode===nT.ENTER){EP(e,t)}}))};var RP={setup:NP};var _P=function(e,t){var n=t.container();var r=t.offset();if(jo.isText(n)){n.insertData(r,e);return b.some(cf(n,r+e.length))}else{return Hc(t).map((function(n){var r=vi.fromText(e);if(t.isAtEnd()){ju(n,r)}else{Wu(n,r)}return cf(r.dom(),e.length)}))}};var DP=l(_P,"");var OP=l(_P," ");var PP=function(e,t,n){return pd.navigateIgnore(e,t,n,Pp)};var AP=function(e,t){return W(Yg.parentsAndSelf(vi.fromDom(t.container()),e),mo)};var BP=function(e,t,n){return PP(e,t.dom(),n).forall((function(e){return AP(t,n).fold((function(){return _c(e,n,t.dom())===false}),(function(r){return _c(e,n,t.dom())===false&&pa(r,vi.fromDom(e.container()))}))}))};var IP=function(e,t,n){return AP(t,n).fold((function(){return PP(e,t.dom(),n).forall((function(e){return _c(e,n,t.dom())===false}))}),(function(t){return PP(e,t.dom(),n).isNone()}))};var LP=l(IP,false);var MP=l(IP,true);var FP=l(BP,false);var HP=l(BP,true);var zP="";var UP=function(e){return cf.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()};var WP=function(e,t){var n=H(Yg.parentsAndSelf(vi.fromDom(t.container()),e),mo);return J(n).getOr(e)};var jP=function(e,t){if(UP(t)){return Op(t)}else{return Op(t)||pd.prevPosition(WP(e,t).dom(),t).exists(Op)}};var VP=function(e,t){if(UP(t)){return Dp(t)}else{return Dp(t)||pd.nextPosition(WP(e,t).dom(),t).exists(Dp)}};var qP=function(e){return A(["pre","pre-wrap"],e)};var $P=function(e){return Hc(e).bind((function(e){return ps(e,_i)})).exists((function(e){return qP(Yi(e,"white-space"))}))};var KP=function(e,t){return pd.prevPosition(e.dom(),t).isNone()};var YP=function(e,t){return pd.nextPosition(e.dom(),t).isNone()};var XP=function(e,t){return KP(e,t)||YP(e,t)||LP(e,t)||MP(e,t)||Cp(e,t)||xp(e,t)};var GP=function(e,t){if($P(t)){return false}else{return XP(e,t)||jP(e,t)||VP(e,t)}};var JP=function(e,t){if($P(t)){return false}else{return LP(e,t)||FP(e,t)||Cp(e,t)||jP(e,t)}};var ZP=function(e){var t=e.container();var n=e.offset();if(jo.isText(t)&&n<t.data.length){return cf(t,n+1)}else{return e}};var QP=function(e,t){var n=ZP(t);if($P(n)){return false}else{return MP(e,n)||HP(e,n)||xp(e,n)||VP(e,n)}};var eA=function(e,t){return JP(e,t)||QP(e,t)};var tA=function(e,t){return Ep(e.charAt(t))};var nA=function(e){var t=e.container();return jo.isText(t)&&Xr(t.data,zP)};var rA=function(e){var t=e.split("");return I(t,(function(e,n){if(Ep(e)&&n>0&&n<t.length-1&&Rp(t[n-1])&&Rp(t[n+1])){return" "}else{return e}})).join("")};var iA=function(e,t){var n=t.data;var r=cf(t,0);if(tA(n,0)&&!eA(e,r)){t.data=" "+n.slice(1);return true}else{return false}};var aA=function(e){var t=e.data;var n=rA(t);if(n!==t){e.data=n;return true}else{return false}};var oA=function(e,t){var n=t.data;var r=cf(t,n.length-1);if(tA(n,n.length-1)&&!eA(e,r)){t.data=n.slice(0,-1)+" ";return true}else{return false}};var uA=function(e,t){return b.some(t).filter(nA).bind((function(t){var n=t.container();var r=iA(e,n)||aA(n)||oA(e,n);return r?b.some(t):b.none()}))};var sA=function(e){var t=vi.fromDom(e.getBody());if(e.selection.isCollapsed()){uA(t,cf.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))}};var lA=function(e){return function(t){return t.fold((function(t){return pd.prevPosition(e.dom(),df.before(t))}),(function(e){return pd.firstPositionIn(e)}),(function(e){return pd.lastPositionIn(e)}),(function(t){return pd.nextPosition(e.dom(),df.after(t))}))}};var fA=function(e,t){return function(n){return GP(e,n)?DP(t):OP(t)}};var cA=function(e){return function(t){e.selection.setRng(t.toRange());e.nodeChanged();return true}};var dA=function(e){var t=df.fromRangeStart(e.selection.getRng());var n=vi.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=l(pg.isInlineTarget,e);var i=df.fromRangeStart(e.selection.getRng());return db.readLocation(r,e.getBody(),i).bind(lA(n)).bind(fA(n,t)).exists(cA(e))}else{return false}};var vA=function(e,t){yO.execute([{keyCode:nT.SPACEBAR,action:yO.action(dA,e)}],t).each((function(e){t.preventDefault()}))};var mA=function(e){e.on("keydown",(function(t){if(t.isDefaultPrevented()===false){vA(e,t)}}))};var gA={setup:mA};var pA=function(e){return bs(vi.fromDom(e.getBody()),"*[data-mce-caret]").fold(u(null),(function(e){return e.dom()}))};var hA=function(e){e.selection.setRng(e.selection.getRng())};var bA=function(e,t){if(t.hasAttribute("data-mce-caret")){ol(t);hA(e);e.selection.scrollIntoView(t)}};var yA=function(e,t){var n=pA(e);if(!n){return}if(t.type==="compositionstart"){t.preventDefault();t.stopPropagation();bA(e,n);return}if(Js(n)){bA(e,n);e.undoManager.add()}};var wA=function(e){e.on("keyup compositionstart",l(yA,e))};var xA={setup:wA};var CA=ui.detect().browser;var kA=function(e){var t=Zu((function(){if(!e.composing){sA(e)}}),0);if(CA.isIE()){e.on("keypress",(function(e){t.throttle()}));e.on("remove",(function(e){t.cancel()}))}};var SA=function(e){kA(e);e.on("input",(function(t){if(t.isComposing===false){sA(e)}}))};var TA=function(e,t){yO.execute([{keyCode:nT.END,action:_D(e,true)},{keyCode:nT.HOME,action:_D(e,false)}],t).each((function(e){t.preventDefault()}))};var EA=function(e){e.on("keydown",(function(t){if(t.isDefaultPrevented()===false){TA(e,t)}}))};var NA={setup:EA};var RA=function(e){var t=Db.setupSelectedState(e);xA.setup(e);CO.setup(e,t);EO.setup(e,t);RP.setup(e);gA.setup(e);SA(e);NA.setup(e)};var _A={setup:RA};function DA(e){var t=Hn.each;var n=nT.BACKSPACE,r=nT.DELETE,a=e.dom,o=e.selection,u=e.settings,s=e.parser;var l=Ne.gecko,f=Ne.ie,c=Ne.webkit;var d="data:text/mce-internal,";var v=f?"Text":"URL";var m=function(t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}};var g=function(e){return e.isDefaultPrevented()};var p=function(t){var n,r;if(t.dataTransfer){if(e.selection.isCollapsed()&&t.target.tagName==="IMG"){o.select(t.target)}n=e.selection.getContent();if(n.length>0){r=d+escape(e.id)+","+escape(n);t.dataTransfer.setData(v,r)}}};var h=function(e){var t;if(e.dataTransfer){t=e.dataTransfer.getData(v);if(t&&t.indexOf(d)>=0){t=t.substr(d.length).split(",");return{id:unescape(t[0]),html:unescape(t[1])}}}return null};var b=function(t,n){if(e.queryCommandSupported("mceInsertClipboardContent")){e.execCommand("mceInsertClipboardContent",false,{content:t,internal:n})}else{e.execCommand("mceInsertContent",false,t)}};var y=function(){var t=function(e){var t=a.create("body");var n=e.cloneContents();t.appendChild(n);return o.serializer.serialize(t,{format:"html"})};var i=function(n){var r=t(n);var i=a.createRng();i.selectNode(e.getBody());var o=t(i);return r===o};e.on("keydown",(function(t){var o=t.keyCode;var u,s;if(!g(t)&&(o===r||o===n)){u=e.selection.isCollapsed();s=e.getBody();if(u&&!a.isEmpty(s)){return}if(!u&&!i(e.selection.getRng())){return}t.preventDefault();e.setContent("");if(s.firstChild&&a.isBlock(s.firstChild)){e.selection.setCursorLocation(s.firstChild,0)}else{e.selection.setCursorLocation(s,0)}e.nodeChanged()}}))};var w=function(){e.shortcuts.add("meta+a",null,"SelectAll")};var x=function(){if(!e.settings.content_editable){a.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement){n=o.getRng();e.getBody().focus();if(t.type==="mousedown"){if(Gs(n.startContainer)){return}o.placeCaretAt(t.clientX,t.clientY)}else{o.setRng(n)}}}))}};var C=function(){e.on("keydown",(function(t){if(!g(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length){return}if(o.isCollapsed()&&o.getRng().startOffset===0){var r=o.getNode();var i=r.previousSibling;if(r.nodeName==="HR"){a.remove(r);t.preventDefault();return}if(i&&i.nodeName&&i.nodeName.toLowerCase()==="hr"){a.remove(i);t.preventDefault()}}}}))};var k=function(){if(!i.Range.prototype.getClientRects){e.on("mousedown",(function(t){if(!g(t)&&t.target.nodeName==="HTML"){var n=e.getBody();n.blur();Me.setEditorTimeout(e,(function(){n.focus()}))}}))}};var S=function(){e.on("click",(function(t){var n=t.target;if(/^(IMG|HR)$/.test(n.nodeName)&&a.getContentEditableParent(n)!=="false"){t.preventDefault();e.selection.select(n);e.nodeChanged()}if(n.nodeName==="A"&&a.hasClass(n,"mce-item-anchor")){t.preventDefault();o.select(n)}}))};var T=function(){var n=function(){var n=a.getAttribs(o.getStart().cloneNode(false));return function(){var r=o.getStart();if(r!==e.getBody()){a.setAttrib(r,"style",null);t(n,(function(e){r.setAttributeNode(e.cloneNode(true))}))}}};var r=function(){return!o.isCollapsed()&&a.getParent(o.getStart(),a.isBlock)!==a.getParent(o.getEnd(),a.isBlock)};e.on("keypress",(function(t){var i;if(!g(t)&&(t.keyCode===8||t.keyCode===46)&&r()){i=n();e.getDoc().execCommand("delete",false,null);i();t.preventDefault();return false}}));a.bind(e.getDoc(),"cut",(function(t){var i;if(!g(t)&&r()){i=n();Me.setEditorTimeout(e,(function(){i()}))}}))};var E=function(){e.on("keydown",(function(e){if(!g(e)&&e.keyCode===n){if(o.isCollapsed()&&o.getRng().startOffset===0){var t=o.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table"){e.preventDefault();return false}}}}))};var N=function(){e.on("keydown",(function(t){var n,r,i,u,s;if(g(t)||t.keyCode!==nT.BACKSPACE){return}n=o.getRng();r=n.startContainer;i=n.startOffset;u=a.getRoot();s=r;if(!n.collapsed||i!==0){return}while(s&&s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==u){s=s.parentNode}if(s.tagName==="BLOCKQUOTE"){e.formatter.toggle("blockquote",null,s);n=a.createRng();n.setStart(r,0);n.setEnd(r,0);o.setRng(n)}}))};var R=function(){var t=function(){m("StyleWithCSS",false);m("enableInlineTableEditing",false);if(!u.object_resizing){m("enableObjectResizing",false)}};if(!u.readonly){e.on("BeforeExecCommand MouseDown",t)}};var _=function(){var n=function(){t(a.select("a"),(function(e){var t=e.parentNode;var n=a.getRoot();if(t.lastChild===e){while(t&&!a.isBlock(t)){if(t.parentNode.lastChild!==t||t===n){return}t=t.parentNode}a.add(t,"br",{"data-mce-bogus":1})}}))};e.on("SetContent ExecCommand",(function(e){if(e.type==="setcontent"||e.command==="mceInsertLink"){n()}}))};var D=function(){if(u.forced_root_block){e.on("init",(function(){m("DefaultParagraphSeparator",u.forced_root_block)}))}};var O=function(){e.on("keyup focusin mouseup",(function(e){if(!nT.modifierPressed(e)){o.normalize()}}),true)};var P=function(){e.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")};var A=function(){if(!e.inline){e.on("keydown",(function(){if(i.document.activeElement===i.document.body){e.getWin().focus()}}))}};var B=function(){if(!e.inline){e.contentStyles.push("body {min-height: 150px}");e.on("click",(function(t){var n;if(t.target.nodeName==="HTML"){if(Ne.ie>11){e.getBody().focus();return}n=e.selection.getRng();e.getBody().focus();e.selection.setRng(n);e.selection.normalize();e.nodeChanged()}}))}};var I=function(){if(Ne.mac){e.on("keydown",(function(t){if(nT.metaKeyPressed(t)&&!t.shiftKey&&(t.keyCode===37||t.keyCode===39)){t.preventDefault();e.selection.getSel().modify("move",t.keyCode===37?"backward":"forward","lineboundary")}}))}};var L=function(){m("AutoUrlDetect",false)};var M=function(){e.on("click",(function(e){var t=e.target;do{if(t.tagName==="A"){e.preventDefault();return}}while(t=t.parentNode)}));e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")};var F=function(){e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))}))};var H=function(){s.addNodeFilter("br",(function(e){var t=e.length;while(t--){if(e[t].attr("class")==="Apple-interchange-newline"){e[t].remove()}}}))};var z=function(){e.on("dragstart",(function(e){p(e)}));e.on("drop",(function(t){if(!g(t)){var n=h(t);if(n&&n.id!==e.id){t.preventDefault();var r=r_.fromPoint(t.x,t.y,e.getDoc());o.setRng(r);b(n.html,true)}}}))};var U=function(){};var W=function(){var t;if(!l||e.removed){return 0}t=e.selection.getSel();return!t||!t.rangeCount||t.rangeCount===0};N();y();if(!Ne.windowsPhone){O()}if(c){x();S();D();F();E();H();if(Ne.iOS){A();B();M()}else{w()}}if(Ne.ie>=11){B();E()}if(Ne.ie){w();L();z()}if(l){C();k();T();R();_();P();I();E()}return{refreshContentEditable:U,isHidden:W}}var OA=function(e){return jo.isElement(e)&&ho(vi.fromDom(e))};var PA=function(e){var t=e.selection.getRng();var n=cf.fromRangeStart(t);var r=cf.fromRangeEnd(t);if(cf.isElementPosition(n)){var i=n.container();if(OA(i)){pd.firstPositionIn(i).each((function(e){return t.setStart(e.container(),e.offset())}))}}if(cf.isElementPosition(r)){var i=n.container();if(OA(i)){pd.lastPositionIn(i).each((function(e){return t.setEnd(e.container(),e.offset())}))}}e.selection.setRng(mm.normalize(t))};var AA=function(e){e.on("click",(function(t){if(t.detail>=3){PA(e)}}))};var BA=function(e){e.on("click",(function(t){if(e.dom.getParent(t.target,"details")){t.preventDefault()}}))};var IA=function(e){e.parser.addNodeFilter("details",(function(e){L(e,(function(e){e.attr("data-mce-open",e.attr("open"));e.attr("open","open")}))}));e.serializer.addNodeFilter("details",(function(e){L(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",x(t)?t:null);e.attr("data-mce-open",null)}))}))};var LA=function(e){BA(e);IA(e)};var MA=Bu.DOM;var FA=function(e,t){var n=vi.fromDom(e.getDoc().head);var r=vi.fromTag("style");Ui(r,"type","text/css");qu(r,vi.fromText(t));qu(n,r)};var HA=function(e){var t=MR(e.settings,e.schema);t.addAttributeFilter("src,href,style,tabindex",(function(t,n){var r=t.length,i;var a=e.dom;var o,u;while(r--){i=t[r];o=i.attr(n);u="data-mce-"+n;if(!i.attributes.map[u]){if(o.indexOf("data:")===0||o.indexOf("blob:")===0){continue}if(n==="style"){o=a.serializeStyle(a.parseStyle(o),i.name);if(!o.length){o=null}i.attr(u,o);i.attr(n,o)}else if(n==="tabindex"){i.attr(u,o);i.attr(n,null)}else{i.attr(u,e.convertURL(o,n,i.name))}}}}));t.addNodeFilter("script",(function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("type")||"no/type";if(r.indexOf("mce-")!==0){n.attr("type","mce-"+r)}}}));t.addNodeFilter("#cdata",(function(e){var t=e.length,n;while(t--){n=e[t];n.type=8;n.name="#comment";n.value="[CDATA["+n.value+"]]"}}));t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){var n=t.length,r;var i=e.schema.getNonEmptyElements();while(n--){r=t[n];if(r.isEmpty(i)&&r.getAll("br").length===0){r.append(new TR("br",1)).shortEnded=true}}}));return t};var zA=function(e){if(e.settings.auto_focus){Me.setEditorTimeout(e,(function(){var t;if(e.settings.auto_focus===true){t=e}else{t=e.editorManager.get(e.settings.auto_focus)}if(!t.destroyed){t.focus()}}),100)}};var UA=function(e){e.bindPendingEventDelegates();e.initialized=true;e.fire("init");e.focus(true);e.nodeChanged({initial:true});e.execCallback("init_instance_callback",e);zA(e)};var WA=function(e){return e.inline?MA.styleSheetLoader:e.dom.styleSheetLoader};var jA=function(e,t){var n=e.settings;var r=e.getElement();var a=e.getDoc(),o,u;if(!n.inline){e.getElement().style.visibility=e.orgVisibility}if(!t&&!n.content_editable){a.open();a.write(e.iframeHTML);a.close()}if(n.content_editable){e.on("remove",(function(){var e=this.getBody();MA.removeClass(e,"mce-content-body");MA.removeClass(e,"mce-edit-focus");MA.setAttrib(e,"contentEditable",null)}));MA.addClass(r,"mce-content-body");e.contentDocument=a=n.content_document||i.document;e.contentWindow=n.content_window||i.window;e.bodyElement=r;n.content_document=n.content_window=null;n.root_name=r.nodeName.toLowerCase()}o=e.getBody();o.disabled=true;e.readonly=n.readonly;if(!e.readonly){if(e.inline&&MA.getStyle(o,"position",true)==="static"){o.style.position="relative"}o.contentEditable=e.getParam("content_editable_state",true)}o.disabled=false;e.editorUpload=zS(e);e.schema=Cu(n);e.dom=Bu(a,{keep_values:true,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:true,root_element:e.inline?e.getBody():null,collect:n.content_editable,schema:e.schema,contentCssCors:og.shouldUseContentCssCors(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}});e.parser=HA(e);e.serializer=qR(n,e);e.selection=tD(e.dom,e.getWin(),e.serializer,e);e.annotator=Dv(e);e.formatter=iR(e);e.undoManager=KE(e);e._nodeChangeDispatcher=new tT(e);e._selectionOverrides=lE(e);LA(e);AA(e);_A.setup(e);KS.setup(e);e.fire("PreInit");if(!n.browser_spellcheck&&!n.gecko_spellcheck){a.body.spellcheck=false;MA.setAttrib(o,"spellcheck","false")}e.quirks=DA(e);e.fire("PostRender");if(n.directionality){o.dir=n.directionality}if(n.nowrap){o.style.whiteSpace="nowrap"}if(n.protect){e.on("BeforeSetContent",(function(e){Hn.each(n.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))}))}e.on("SetContent",(function(){e.addVisual(e.getBody())}));e.load({initial:true,format:"html"});e.startContent=e.getContent({format:"raw"});e.on("compositionstart compositionend",(function(t){e.composing=t.type==="compositionstart"}));if(e.contentStyles.length>0){u="";Hn.each(e.contentStyles,(function(e){u+=e+"\r\n"}));e.dom.addStyle(u)}WA(e).loadAll(e.contentCSS,(function(t){UA(e)}),(function(t){UA(e)}));if(n.content_style){FA(e,n.content_style)}};var VA={initContentBody:jA};var qA=Bu.DOM;var $A=function(e,t){if(i.document.domain!==i.window.location.hostname&&Ne.ie&&Ne.ie<12){var n=MS.uuid("mce");e[n]=function(){VA.initContentBody(e)};var r="javascript:(function(){"+'document.open();document.domain="'+i.document.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed."+n+"(true);})()";qA.setAttrib(t,"src",r);return true}return false};var KA=function(e){var t=typeof e==="number"?e+"px":e;return t?t:""};var YA=function(e,t,n,r){var i=vi.fromTag("iframe");Wi(i,r);Wi(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t});Ki(i,{width:"100%",height:KA(n),display:"block"});return i};var XA=function(e){var t,n,r;r=og.getDocType(e)+"<html><head>";if(og.getDocumentBaseUrl(e)!==e.documentBaseUrl){r+='<base href="'+e.documentBaseURI.getURI()+'" />'}r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';t=og.getBodyId(e);n=og.getBodyClass(e);if(og.getContentSecurityPolicy(e)){r+='<meta http-equiv="Content-Security-Policy" content="'+og.getContentSecurityPolicy(e)+'" />'}r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>';return r};var GA=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help");var r=YA(e.id,n,t.height,og.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null;e.fire("load")};var i=$A(e,r);e.contentAreaContainer=t.iframeContainer;e.iframeElement=r;e.iframeHTML=XA(e);qA.add(t.iframeContainer,r);return i};var JA=function(e,t){var n=GA(e,t);if(t.editorContainer){qA.get(t.editorContainer).style.display=e.orgDisplay;e.hidden=qA.isHidden(t.editorContainer)}e.getElement().style.display="none";qA.setAttrib(e.id,"aria-hidden","true");if(!n){VA.initContentBody(e)}};var ZA={init:JA};var QA=Bu.DOM;var eB=function(e,t,n){var r=mS.get(n);var i=mS.urls[n]||e.documentBaseUrl.replace(/\/$/,"");n=Hn.trim(n);if(r&&Hn.inArray(t,n)===-1){Hn.each(mS.dependencies(n),(function(n){eB(e,t,n)}));if(e.plugins[n]){return}try{var a=new r(e,i,e.$);e.plugins[n]=a;if(a.init){a.init(e,i);t.push(n)}}catch(t){vS.pluginInitError(e,n,t)}}};var tB=function(e){return e.replace(/^\-/,"")};var nB=function(e){var t=[];Hn.each(e.settings.plugins.split(/[ ,]/),(function(n){eB(e,t,tB(n))}))};var rB=function(e){var t;var n=e.settings.theme;if(x(n)){e.settings.theme=tB(n);t=gS.get(n);e.theme=new t(e,gS.urls[n]);if(e.theme.init){e.theme.init(e,gS.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)}}else{e.theme={}}};var iB=function(e){var t,n,r,i,a;var o=e.settings;var u=e.getElement();t=o.width||QA.getStyle(u,"width")||"100%";n=o.height||QA.getStyle(u,"height")||u.offsetHeight;r=o.min_height||100;i=/^[0-9\.]+(|px)$/i;if(i.test(""+t)){t=Math.max(parseInt(t,10),100)}if(i.test(""+n)){n=Math.max(parseInt(n,10),r)}a=e.theme.renderUI({targetNode:u,width:t,height:n,deltaWidth:o.delta_width,deltaHeight:o.delta_height});if(!o.content_editable){n=(a.iframeHeight||n)+(typeof n==="number"?a.deltaHeight||0:"");if(n<r){n=r}}a.height=n;return a};var aB=function(e){var t;var n=e.getElement();t=e.settings.theme(e,n);if(t.editorContainer.nodeType){t.editorContainer.id=t.editorContainer.id||e.id+"_parent"}if(t.iframeContainer&&t.iframeContainer.nodeType){t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"}t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight;return t};var oB=function(e){return{editorContainer:e,iframeContainer:e}};var uB=function(e){var t=QA.create("div");QA.insertAfter(t,e);return oB(t)};var sB=function(e){var t=e.getElement();return e.inline?oB(null):uB(t)};var lB=function(e){var t=e.settings,n=e.getElement();e.orgDisplay=n.style.display;if(x(t.theme)){return iB(e)}else if(E(t.theme)){return aB(e)}else{return sB(e)}};var fB=function(e){var t=e.settings;var n=e.getElement();var r;e.rtl=t.rtl_ui||e.editorManager.i18n.rtl;e.editorManager.i18n.setCode(t.language);t.aria_label=t.aria_label||QA.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area"));e.fire("ScriptsLoaded");rB(e);nB(e);r=lB(e);e.editorContainer=r.editorContainer?r.editorContainer:null;if(t.content_css){Hn.each(Hn.explode(t.content_css),(function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}))}if(t.content_editable){return VA.initContentBody(e)}else{return ZA.init(e,r)}};var cB={init:fB};var dB=Bu.DOM;var vB=function(e){return e.charAt(0)==="-"};var mB=function(e,t){var n=t.settings;if(n.language&&n.language!=="en"&&!n.language_url){n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"}if(n.language_url&&!t.editorManager.i18n.data[n.language]){e.add(n.language_url)}};var gB=function(e,t,n,r){var i=t.settings,a=i.theme;if(x(a)){if(!vB(a)&&!gS.urls.hasOwnProperty(a)){var o=i.theme_url;if(o){gS.load(a,t.documentBaseURI.toAbsolute(o))}else{gS.load(a,"themes/"+a+"/theme"+n+".js")}}e.loadQueue((function(){gS.waitFor(a,r)}))}else{r()}};var pB=function(e,t){if(Hn.isArray(e.plugins)){e.plugins=e.plugins.join(" ")}Hn.each(e.external_plugins,(function(t,n){mS.load(n,t);e.plugins+=" "+n}));Hn.each(e.plugins.split(/[ ,]/),(function(e){e=Hn.trim(e);if(e&&!mS.urls[e]){if(vB(e)){e=e.substr(1,e.length);var n=mS.dependencies(e);Hn.each(n,(function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=mS.createUrl(n,e);mS.load(e.resource,e)}))}else{mS.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}}}))};var hB=function(e,t){var n=Hu.ScriptLoader;gB(n,e,t,(function(){mB(n,e);pB(e.settings,t);n.loadQueue((function(){if(!e.removed){cB.init(e)}}),e,(function(t){vS.pluginLoadError(e,t[0]);if(!e.removed){cB.init(e)}}))}))};var bB=function(e){var t=e.settings,n=e.id;var r=function(){dB.unbind(i.window,"ready",r);e.render()};if(!Xe.Event.domLoaded){dB.bind(i.window,"ready",r);return}if(!e.getElement()){return}if(!Ne.contentEditable){return}if(!t.inline){e.orgVisibility=e.getElement().style.visibility;e.getElement().style.visibility="hidden"}else{e.inline=true}var a=e.getElement().form||dB.getParent(n,"form");if(a){e.formElement=a;if(t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)){dB.insertAfter(dB.create("input",{type:"hidden",name:n}),n);e.hasHiddenInput=true}e.formEventDelegate=function(t){e.fire(t.type,t)};dB.bind(a,"submit reset",e.formEventDelegate);e.on("reset",(function(){e.setContent(e.startContent,{format:"raw"})}));if(t.submit_patch&&!a.submit.nodeType&&!a.submit.length&&!a._mceOldSubmit){a._mceOldSubmit=a.submit;a.submit=function(){e.editorManager.triggerSave();e.setDirty(false);return a._mceOldSubmit(a)}}}e.windowManager=eS(e);e.notificationManager=Zk(e);if(t.encoding==="xml"){e.on("GetContent",(function(e){if(e.save){e.content=dB.encode(e.content)}}))}if(t.add_form_submit_trigger){e.on("submit",(function(){if(e.initialized){e.save()}}))}if(t.add_unload_trigger){e._beforeUnload=function(){if(e.initialized&&!e.destroyed&&!e.isHidden()){e.save({format:"raw",no_events:true,set_dirty:false})}};e.editorManager.on("BeforeUnload",e._beforeUnload)}e.editorManager.add(e);hB(e,e.suffix)};var yB={render:bB};var wB=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n});e.sidebars=r};var xB={add:wB};var CB=Hn.each,kB=Hn.trim;var SB="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");var TB={ftp:21,http:80,https:443,mailto:25};var EB=function(e,t){var n=this;var r,a;e=kB(e);t=n.settings=t||{};r=t.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){n.source=e;return}var o=e.indexOf("//")===0;if(e.indexOf("/")===0&&!o){e=(r?r.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w\-]*:?\/\//.test(e)){a=t.base_uri?t.base_uri.path:new EB(i.document.location.href).directory;if(t.base_uri.protocol==""){e="//mce_host"+n.toAbsPath(a,e)}else{e=/([^#?]*)([#?]?.*)/.exec(e);e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(a,e[1])+e[2]}}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);CB(SB,(function(t,r){var i=e[r];if(i){i=i.replace(/\(mce_at\)/g,"@@")}n[t]=i}));if(r){if(!n.protocol){n.protocol=r.protocol}if(!n.userInfo){n.userInfo=r.userInfo}if(!n.port&&n.host==="mce_host"){n.port=r.port}if(!n.host||n.host==="mce_host"){n.host=r.host}n.source=""}if(o){n.protocol=""}};EB.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t=this;var n;if(e==="./"){return e}e=new EB(e,{base_uri:t});if(e.host!=="mce_host"&&t.host!==e.host&&e.host||t.port!==e.port||t.protocol!==e.protocol&&e.protocol!==""){return e.getURI()}var r=t.getURI(),i=e.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i){return r}n=t.toRelPath(t.path,e.path);if(e.query){n+="?"+e.query}if(e.anchor){n+="#"+e.anchor}return n},toAbsolute:function(e,t){e=new EB(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port){return true}var t=TB[this.protocol];if(t&&(this.port||t)==(e.port||t)){return true}}return false},toRelPath:function(e,t){var n,r=0,i="",a,o;e=e.substring(0,e.lastIndexOf("/"));e=e.split("/");n=t.split("/");if(e.length>=n.length){for(a=0,o=e.length;a<o;a++){if(a>=n.length||e[a]!==n[a]){r=a+1;break}}}if(e.length<n.length){for(a=0,o=n.length;a<o;a++){if(a>=e.length||e[a]!==n[a]){r=a+1;break}}}if(r===1){return t}for(a=0,o=e.length-(r-1);a<o;a++){i+="../"}for(a=r-1,o=n.length;a<o;a++){if(a!==r-1){i+="/"+n[a]}else{i+=n[a]}}return i},toAbsPath:function(e,t){var n,r=0,i=[],a,o;a=/\/$/.test(t)?"/":"";e=e.split("/");t=t.split("/");CB(e,(function(e){if(e){i.push(e)}}));e=i;for(n=t.length-1,i=[];n>=0;n--){if(t[n].length===0||t[n]==="."){continue}if(t[n]===".."){r++;continue}if(r>0){r--;continue}i.push(t[n])}n=e.length-r;if(n<=0){o=i.reverse().join("/")}else{o=e.slice(0,n).join("/")+"/"+i.reverse().join("/")}if(o.indexOf("/")!==0){o="/"+o}if(a&&o.lastIndexOf("/")!==o.length-1){o+=a}return o},getURI:function(e){var t;var n=this;if(!n.source||e){t="";if(!e){if(n.protocol){t+=n.protocol+"://"}else{t+="//"}if(n.userInfo){t+=n.userInfo+"@"}if(n.host){t+=n.host}if(n.port){t+=":"+n.port}}if(n.path){t+=n.path}if(n.query){t+="?"+n.query}if(n.anchor){t+="#"+n.anchor}n.source=t}return n.source}};EB.parseDataUri=function(e){var t,n;e=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(e[0]);if(n){t=n[1]}return{type:t,data:e[1]}};EB.getDocumentBaseUrl=function(e){var t;if(e.protocol.indexOf("http")!==0&&e.protocol!=="file:"){t=e.href}else{t=e.protocol+"//"+e.host+e.pathname}if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(t)){t+="/"}}return t};var NB="html";var RB=function(e,t){var n=og.getForcedRootBlock(e);var r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")};var _B=function(e,t,n){var r;t.format=t.format?t.format:NB;t.get=true;t.getInner=true;if(!t.no_events){e.fire("BeforeGetContent",t)}if(t.format==="raw"){r=Hn.trim(wE.trimExternal(e.serializer,n.innerHTML))}else if(t.format==="text"){r=qs.trim(n.innerText||n.textContent)}else if(t.format==="tree"){return e.serializer.serialize(n,t)}else{r=RB(e,e.serializer.serialize(n,t))}if(t.format!=="text"&&!ko(vi.fromDom(n))){t.content=Hn.trim(r)}else{t.content=r}if(!t.no_events){e.fire("GetContent",t)}return t.content};var DB=function(e,t){if(t===void 0){t={}}return b.from(e.getBody()).fold(u(t.format==="tree"?new TR("body",11):""),(function(n){return _B(e,t,n)}))};var OB=function(e,t){t(e);if(e.firstChild){OB(e.firstChild,t)}if(e.next){OB(e.next,t)}};var PB=function(e,t,n){var r={};var i={};var a=[];if(n.firstChild){OB(n.firstChild,(function(n){L(e,(function(e){if(e.name===n.name){if(r[e.name]){r[e.name].nodes.push(n)}else{r[e.name]={filter:e,nodes:[n]}}}}));L(t,(function(e){if(typeof n.attr(e.name)==="string"){if(i[e.name]){i[e.name].nodes.push(n)}else{i[e.name]={filter:e,nodes:[n]}}}}))}))}for(var o in r){if(r.hasOwnProperty(o)){a.push(r[o])}}for(var o in i){if(i.hasOwnProperty(o)){a.push(i[o])}}return a};var AB=function(e,t,n){var r=PB(e,t,n);L(r,(function(e){L(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))};var BB="html";var IB=function(e){return e instanceof TR};var LB=function(e){if(Mk.hasFocus(e)){pd.firstPositionIn(e.getBody()).each((function(t){var n=t.getNode();var r=jo.isTable(n)?pd.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())}))}};var MB=function(e,t){e.dom.setHTML(e.getBody(),t);LB(e)};var FB=function(e,t,n,r){var i,a;if(n.length===0||/^\s+$/.test(n)){a='<br data-mce-bogus="1">';if(t.nodeName==="TABLE"){n="<tr><td>"+a+"</td></tr>"}else if(/^(UL|OL)$/.test(t.nodeName)){n="<li>"+a+"</li>"}i=og.getForcedRootBlock(e);if(i&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())){n=a;n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)}else if(!n){n='<br data-mce-bogus="1">'}MB(e,n);e.fire("SetContent",r)}else{if(r.format!=="raw"){n=fm({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:true,insert:true}))}r.content=ko(vi.fromDom(t))?n:Hn.trim(n);MB(e,r.content);if(!r.no_events){e.fire("SetContent",r)}}return r.content};var HB=function(e,t,n,r){AB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=fm({validate:e.validate},e.schema).serialize(n);r.content=ko(vi.fromDom(t))?i:Hn.trim(i);MB(e,r.content);if(!r.no_events){e.fire("SetContent",r)}return n};var zB=function(e,t,n){if(n===void 0){n={}}n.format=n.format?n.format:BB;n.set=true;n.content=IB(t)?"":t;if(!IB(t)&&!n.no_events){e.fire("BeforeSetContent",n);t=n.content}return b.from(e.getBody()).fold(u(t),(function(r){return IB(t)?HB(e,r,t,n):FB(e,r,t,n)}))};var UB=Bu.DOM;var WB=function(e){UB.setStyle(e.id,"display",e.orgDisplay)};var jB=function(e){return b.from(e).each((function(e){return e.destroy()}))};var VB=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null;e.bodyElement=e.contentDocument=e.contentWindow=null;e.iframeElement=e.targetElm=null;if(e.selection){e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null}};var qB=function(e){var t=e.formElement;if(t){if(t._mceOldSubmit){t.submit=t._mceOldSubmit;t._mceOldSubmit=null}UB.unbind(t,"submit reset",e.formEventDelegate)}};var $B=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload;var r=e.getBody();var i=e.getElement();if(r){e.save({is_removing:true})}e.removed=true;e.unbindAllNativeEvents();if(e.hasHiddenInput&&i){UB.remove(i.nextSibling)}IC.fireRemove(e);e.editorManager.remove(e);if(!e.inline&&r){WB(e)}IC.fireDetach(e);UB.remove(e.getContainer());jB(t);jB(n);e.destroy()}};var KB=function(e,t){var n=e.selection,r=e.dom;if(e.destroyed){return}if(!t&&!e.removed){e.remove();return}if(!t){e.editorManager.off("beforeunload",e._beforeUnload);if(e.theme&&e.theme.destroy){e.theme.destroy()}jB(n);jB(r)}qB(e);VB(e);e.destroyed=true};var YB=Bu.DOM;var XB=Hn.extend,GB=Hn.each;var JB=Hn.resolve;var ZB=Ne.ie;var QB=function(e,t,n){var r=this;var i=r.documentBaseUrl=n.documentBaseURL;var a=n.baseURI;t=dk(r,e,i,n.defaultSettings,t);r.settings=t;Uu.language=t.language||"en";Uu.languageLoad=t.language_load;Uu.baseURL=n.baseURL;r.id=e;r.setDirty(false);r.plugins={};r.documentBaseURI=new EB(t.document_base_url,{base_uri:a});r.baseURI=a;r.contentCSS=[];r.contentStyles=[];r.shortcuts=new xk(r);r.loadedCSS={};r.editorCommands=new kC(r);r.suffix=n.suffix;r.editorManager=n;r.inline=t.inline;r.buttons={};r.menuItems={};if(t.cache_suffix){Ne.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")}if(t.override_viewport===false){Ne.overrideViewPort=false}n.fire("SetupEditor",{editor:r});r.execCallback("setup",r);r.$=ar.overrideDefaults((function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}}))};QB.prototype={render:function(){yB.render(this)},focus:function(e){Mk.focus(this,e)},hasFocus:function(){return Mk.hasFocus(this)},execCallback:function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=this;var i=r.settings[e],a;if(!i){return}if(r.callbackLookup&&(a=r.callbackLookup[e])){i=a.func;a=a.scope}if(typeof i==="string"){a=i.replace(/\.\w+$/,"");a=a?JB(a):0;i=JB(i);r.callbackLookup=r.callbackLookup||{};r.callbackLookup[e]={func:i,scope:a}}return i.apply(a||r,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Hn.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,(function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}))}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){return pk(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}if(t.stateSelector&&typeof t.active==="undefined"){t.active=false}if(!t.text&&!t.icon){t.icon=e}t.tooltip=t.tooltip||t.title;n.buttons[e]=t},addSidebar:function(e,t){return xB.add(this,e,t)},addMenuItem:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this;var r;n.contextToolbars=n.contextToolbars||[];if(typeof e==="string"){r=e;e=function(e){return n.dom.is(e,r)}}n.contextToolbars.push({id:MS.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){e.hidden=false;if(e.inline){e.getBody().contentEditable=true}else{YB.show(e.getContainer());YB.hide(e.id)}e.load();e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){if(ZB&&t&&!e.inline){t.execCommand("SelectAll")}e.save();if(e.inline){e.getBody().contentEditable=false;if(e===e.editorManager.focusedEditor){e.editorManager.focusedEditor=null}}else{YB.hide(e.getContainer());YB.setStyle(e.id,"display",e.orgDisplay)}e.hidden=true;e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t=this;var n=t.getElement(),r;if(t.removed){return""}if(n){e=e||{};e.load=true;r=t.setContent(n.value!==undefined?n.value:n.innerHTML,e);e.element=n;if(!e.no_events){t.fire("LoadContent",e)}e.element=n=null;return r}},save:function(e){var t=this;var n=t.getElement(),r,i;if(!n||!t.initialized||t.removed){return}e=e||{};e.save=true;e.element=n;r=e.content=t.getContent(e);if(!e.no_events){t.fire("SaveContent",e)}if(e.format==="raw"){t.fire("RawSaveContent",e)}r=e.content;if(!/TEXTAREA|INPUT/i.test(n.nodeName)){if(e.is_removing||!t.inline){n.innerHTML=r}if(i=YB.getParent(t.id,"form")){GB(i.elements,(function(e){if(e.name===t.id){e.value=r;return false}}))}}else{n.value=r}e.element=n=null;if(e.set_dirty!==false){t.setDirty(false)}return r},setContent:function(e,t){return zB(this,e,t)},getContent:function(e){return DB(this,e)},insertContent:function(e,t){if(t){e=XB({content:e},t)}this.execCommand("mceInsertContent",false,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e;if(e&&e!==t){this.fire("dirty")}},setMode:function(e){HC(this,e)},getContainer:function(){var e=this;if(!e.container){e.container=YB.get(e.editorContainer||e.id+"_parent")}return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm){this.targetElm=YB.get(this.id)}return this.targetElm},getWin:function(){var e=this;var t;if(!e.contentWindow){t=e.iframeElement;if(t){e.contentWindow=t.contentWindow}}return e.contentWindow},getDoc:function(){var e=this;var t;if(!e.contentDocument){t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback){return r.execCallback("urlconverter_callback",e,n,true,t)}if(!i.convert_urls||n&&n.nodeName==="LINK"||e.indexOf("file:")===0||e.length===0){return e}if(i.relative_urls){return r.documentBaseURI.toRelative(e)}e=r.documentBaseURI.toAbsolute(e,i.remove_script_host);return e},addVisual:function(e){var t=this;var n=t.settings;var r=t.dom;var i;e=e||t.getBody();if(t.hasVisual===undefined){t.hasVisual=n.visual}GB(r.select("table,a",e),(function(e){var a;switch(e.nodeName){case"TABLE":i=n.visual_table_class||"mce-item-table";a=r.getAttrib(e,"border");if((!a||a==="0")&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}return;case"A":if(!r.getAttrib(e,"href")){a=r.getAttrib(e,"name")||e.id;i=n.visual_anchor_class||"mce-item-anchor";if(a&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}}return}}));t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})},remove:function(){$B(this)},destroy:function(e){KB(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}};XB(QB.prototype,XC);var eI=function(e){return e.className.toString().indexOf("mce-")!==-1};var tI={isEditorUIElement:eI};var nI=function(e){return e.type==="nodechange"&&e.selectionChange};var rI=function(e,t){var n=function(){t.throttle()};Bu.DOM.bind(i.document,"mouseup",n);e.on("remove",(function(){Bu.DOM.unbind(i.document,"mouseup",n)}))};var iI=function(e){e.on("focusout",(function(){vC.store(e)}))};var aI=function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))};var oI=function(e,t){var n=ui.detect().browser;if(n.isIE()){iI(e)}else{aI(e,t)}e.on("keyup nodechange",(function(t){if(!nI(t)){vC.store(e)}}))};var uI=function(e){var t=Zu((function(){vC.store(e)}),0);if(e.inline){rI(e,t)}e.on("init",(function(){oI(e,t)}));e.on("remove",(function(){t.cancel()}))};var sI={register:uI};var lI;var fI=Bu.DOM;var cI=function(e){return tI.isEditorUIElement(e)};var dI=function(e,t){var n=e?e.settings.custom_ui_selector:"";var r=fI.getParent(t,(function(t){return cI(t)||(n?e.dom.is(t,n):false)}));return r!==null};var vI=function(){try{return i.document.activeElement}catch(e){return i.document.body}};var mI=function(e,t){var n=t.editor;sI.register(n);n.on("focusin",(function(){var t=this;var n=e.focusedEditor;if(n!==t){if(n){n.fire("blur",{focusedEditor:t})}e.setActive(t);e.focusedEditor=t;t.fire("focus",{blurredEditor:n});t.focus(true)}}));n.on("focusout",(function(){var t=this;Me.setEditorTimeout(t,(function(){var n=e.focusedEditor;if(!dI(t,vI())&&n===t){t.fire("blur",{focusedEditor:null});e.focusedEditor=null}}))}));if(!lI){lI=function(t){var n=e.activeEditor;var r;r=t.target;if(n&&r.ownerDocument===i.document){if(r!==i.document.body&&!dI(n,r)&&e.focusedEditor===n){n.fire("blur",{focusedEditor:null});e.focusedEditor=null}}};fI.bind(i.document,"focusin",lI)}};var gI=function(e,t){if(e.focusedEditor===t.editor){e.focusedEditor=null}if(!e.activeEditor){fI.unbind(i.document,"focusin",lI);lI=null}};var pI=function(e){e.on("AddEditor",l(mI,e));e.on("RemoveEditor",l(gI,e))};var hI={setup:pI,isEditorUIElement:cI,isUIElement:dI};var bI=Bu.DOM;var yI=Hn.explode,wI=Hn.each,xI=Hn.extend;var CI=0,kI,SI,TI=false;var EI=[];var NI=[];var RI=function(e){return e!=="length"};var _I=function(e){var t=e.type;wI(SI.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e);break}}))};var DI=function(e){if(e!==TI){if(e){ar(window).on("resize scroll",_I)}else{ar(window).off("resize scroll",_I)}TI=e}};var OI=function(e){var t=NI;delete EI[e.id];for(var n=0;n<EI.length;n++){if(EI[n]===e){EI.splice(n,1);break}}NI=H(NI,(function(t){return e!==t}));if(SI.activeEditor===e){SI.activeEditor=NI.length>0?NI[0]:null}if(SI.focusedEditor===e){SI.focusedEditor=null}return t.length!==NI.length};var PI=function(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode){OI(e);e.unbindAllNativeEvents();e.destroy(true);e.removed=true;e=null}return e};SI={defaultSettings:{},$:ar,majorVersion:"4",minorVersion:"9.11",releaseDate:"2020-07-13",editors:EI,i18n:rS,activeEditor:null,settings:{},setup:function(){var e=this;var t,n,r="";n=EB.getDocumentBaseUrl(i.document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(n)){n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(n)){n+="/"}}var a=window.tinymce||window.tinyMCEPreInit;if(a){t=a.base||a.baseURL;r=a.suffix}else{var o=i.document.getElementsByTagName("script");for(var u=0;u<o.length;u++){var s=o[u].src||"";if(s===""){continue}var l=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){if(l.indexOf(".min")!==-1){r=".min"}t=s.substring(0,s.lastIndexOf("/"));break}}if(!t&&i.document.currentScript){var s=i.document.currentScript.src;if(s.indexOf(".min")!==-1){r=".min"}t=s.substring(0,s.lastIndexOf("/"))}}e.baseURL=new EB(n).toAbsolute(t);e.documentBaseURL=n;e.baseURI=new EB(e.baseURL);e.suffix=r;hI.setup(e)},overrideDefaults:function(e){var t,n;t=e.base_url;if(t){this.baseURL=new EB(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,""));this.baseURI=new EB(this.baseURL)}n=e.suffix;if(e.suffix){this.suffix=n}this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r){Uu.PluginManager.urls[i]=r[i]}},init:function(e){var t=this;var n,r;r=Hn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var a=function(e,t){return e.inline&&t.tagName.toLowerCase()in r};var o=function(e){var t=e.id;if(!t){t=e.name;if(t&&!bI.get(t)){t=e.name}else{t=bI.uniqueId()}e.setAttribute("id",t)}return t};var u=function(n){var r=e[n];if(!r){return}return r.apply(t,Array.prototype.slice.call(arguments,2))};var s=function(e,t){return t.constructor===RegExp?t.test(e.className):bI.hasClass(e,t)};var l=function(e){var t,n=[];if(Ne.ie&&Ne.ie<11){vS.initError("TinyMCE does not support the browser you are using. For a list of supported"+" browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/");return[]}if(e.types){wI(e.types,(function(e){n=n.concat(bI.select(e.selector))}));return n}else if(e.selector){return bI.select(e.selector)}else if(e.target){return[e.target]}switch(e.mode){case"exact":t=e.elements||"";if(t.length>0){wI(yI(t),(function(e){var t;if(t=bI.get(e)){n.push(t)}else{wI(i.document.forms,(function(t){wI(t.elements,(function(t){if(t.name===e){e="mce_editor_"+CI++;bI.setAttrib(t,"id",e);n.push(t)}}))}))}}))}break;case"textareas":case"specific_textareas":wI(bI.select("textarea"),(function(t){if(e.editor_deselector&&s(t,e.editor_deselector)){return}if(!e.editor_selector||s(t,e.editor_selector)){n.push(t)}}));break}return n};var f=function(e){n=e};var c=function(){var n=0;var r=[];var i;var s=function(e,a,o){var u=new QB(e,a,t);r.push(u);u.on("init",(function(){if(++n===i.length){f(r)}}));u.targetElm=u.targetElm||o;u.render()};bI.unbind(window,"ready",c);u("onpageload");i=ar.unique(l(e));if(e.types){wI(e.types,(function(t){Hn.each(i,(function(n){if(bI.is(n,t.selector)){s(o(n),xI({},e,t),n);return false}return true}))}));return}Hn.each(i,(function(e){PI(t.get(e.id))}));i=Hn.grep(i,(function(e){return!t.get(e.id)}));if(i.length===0){f([])}else{wI(i,(function(t){if(a(e,t)){vS.initError("Could not initialize inline editor on invalid inline target element",t)}else{s(o(t),e,t)}}))}};t.settings=e;bI.bind(window,"ready",c);return new _e((function(e){if(n){e(n)}else{f=function(t){e(t)}}}))},get:function(e){if(arguments.length===0){return NI.slice(0)}else if(x(e)){return W(NI,(function(t){return t.id===e})).getOr(null)}else if(N(e)){return NI[e]?NI[e]:null}else{return null}},add:function(e){var t=this;var n;n=EI[e.id];if(n===e){return e}if(t.get(e.id)===null){if(RI(e.id)){EI[e.id]=e}EI.push(e);NI.push(e)}DI(true);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!kI){kI=function(){t.fire("BeforeUnload")};bI.bind(window,"beforeunload",kI)}return e},createEditor:function(e,t){return this.add(new QB(e,t,this))},remove:function(e){var t=this;var n,r;if(!e){for(n=NI.length-1;n>=0;n--){t.remove(NI[n])}return}if(x(e)){wI(bI.select(e),(function(e){r=t.get(e.id);if(r){t.remove(r)}}));return}r=e;if(S(t.get(r.id))){return null}if(OI(r)){t.fire("RemoveEditor",{editor:r})}if(NI.length===0){bI.unbind(window,"beforeunload",kI)}r.remove();DI(NI.length>0);return r},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":if(!r.get(n)){new QB(n,r.settings,r).render()}return true;case"mceRemoveEditor":if(i){i.remove()}return true;case"mceToggleEditor":if(!i){r.execCommand("mceAddEditor",0,n);return true}if(i.isHidden()){i.show()}else{i.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(e,t,n)}return false},triggerSave:function(){wI(NI,(function(e){e.save()}))},addI18n:function(e,t){rS.add(e,t)},translate:function(e){return rS.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!==e){if(t){t.fire("deactivate",{relatedTarget:e})}e.fire("activate",{relatedTarget:t})}this.activeEditor=e}};xI(SI,NC);SI.setup();var AI=SI;function BI(e){var t=function(t,n){return bv.walk(e,t,n)};var n=Ky.split;var r=function(t){return yx.normalize(e,t).fold(u(false),(function(e){t.setStart(e.startContainer,e.startOffset);t.setEnd(e.endContainer,e.endOffset);return true}))};return{walk:t,split:n,normalize:r}}(function(e){e.compareRanges=ox.isEq;e.getCaretRangeFromPoint=r_.fromPoint;e.getSelectedNode=Bl;e.getNode=Il})(BI||(BI={}));var II=BI;var LI=Math.min,MI=Math.max,FI=Math.round;var HI=function(e,t,n){var r,i,a,o,u,s;r=t.x;i=t.y;a=e.w;o=e.h;u=t.w;s=t.h;n=(n||"").split("");if(n[0]==="b"){i+=s}if(n[1]==="r"){r+=u}if(n[0]==="c"){i+=FI(s/2)}if(n[1]==="c"){r+=FI(u/2)}if(n[3]==="b"){i-=o}if(n[4]==="r"){r-=a}if(n[3]==="c"){i-=FI(o/2)}if(n[4]==="c"){r-=FI(a/2)}return VI(r,i,a,o)};var zI=function(e,t,n,r){var i,a;for(a=0;a<r.length;a++){i=HI(e,t,r[a]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y){return r[a]}}return null};var UI=function(e,t,n){return VI(e.x-t,e.y-n,e.w+t*2,e.h+n*2)};var WI=function(e,t){var n,r,i,a;n=MI(e.x,t.x);r=MI(e.y,t.y);i=LI(e.x+e.w,t.x+t.w);a=LI(e.y+e.h,t.y+t.h);if(i-n<0||a-r<0){return null}return VI(n,r,i-n,a-r)};var jI=function(e,t,n){var r,i,a,o,u,s,l,f,c,d;u=e.x;s=e.y;l=e.x+e.w;f=e.y+e.h;c=t.x+t.w;d=t.y+t.h;r=MI(0,t.x-u);i=MI(0,t.y-s);a=MI(0,l-c);o=MI(0,f-d);u+=r;s+=i;if(n){l+=r;f+=i;u-=a;s-=o}l-=a;f-=o;return VI(u,s,l-u,f-s)};var VI=function(e,t,n,r){return{x:e,y:t,w:n,h:r}};var qI=function(e){return VI(e.left,e.top,e.width,e.height)};var $I={inflate:UI,relativePosition:HI,findBestRelativePosition:zI,intersect:WI,clamp:jI,create:VI,fromClientRect:qI};var KI={};var YI={add:function(e,t){KI[e.toLowerCase()]=t},has:function(e){return!!KI[e.toLowerCase()]},get:function(e){var t=e.toLowerCase();var n=KI.hasOwnProperty(t)?KI[t]:null;if(n===null){throw new Error("Could not find module for type: "+e)}return n},create:function(e,t){var n;if(typeof e==="string"){t=t||{};t.type=e}else{t=e;e=t.type}e=e.toLowerCase();n=KI[e];if(!n){throw new Error("Could not find control by type: "+e)}n=new n(t);n.type=e;return n}};var XI=Hn.each,GI=Hn.extend;var JI,ZI;var QI=function(){};QI.extend=JI=function(e){var t=this;var n=t.prototype;var r,i,a;var o=function(){var e,t,n;var r=this;if(!ZI){if(r.init){r.init.apply(r,arguments)}t=r.Mixins;if(t){e=t.length;while(e--){n=t[e];if(n.init){n.init.apply(r,arguments)}}}}};var u=function(){return this};var s=function(e,t){return function(){var r=this;var i=r._super;var a;r._super=n[e];a=t.apply(r,arguments);r._super=i;return a}};ZI=true;r=new t;ZI=false;if(e.Mixins){XI(e.Mixins,(function(t){for(var n in t){if(n!=="init"){e[n]=t[n]}}}));if(n.Mixins){e.Mixins=n.Mixins.concat(e.Mixins)}}if(e.Methods){XI(e.Methods.split(","),(function(t){e[t]=u}))}if(e.Properties){XI(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;if(e!==undefined){t[n]=e;return t}return t[n]}}))}if(e.Statics){XI(e.Statics,(function(e,t){o[t]=e}))}if(e.Defaults&&n.Defaults){e.Defaults=GI({},n.Defaults,e.Defaults)}for(i in e){a=e[i];if(typeof a==="function"&&n[i]){r[i]=s(i,a)}else{r[i]=a}}o.prototype=r;o.constructor=o;o.extend=JI;return o};var eL=Math.min,tL=Math.max,nL=Math.round;var rL=function(e){var t={};var n=0,r=0,i=0;var a=function(e,t,n){var r,i,a,o,u,s;r=0;i=0;a=0;e=e/255;t=t/255;n=n/255;u=eL(e,eL(t,n));s=tL(e,tL(t,n));if(u===s){a=u;return{h:0,s:0,v:a*100}}o=e===u?t-n:n===u?e-t:n-e;r=e===u?3:n===u?1:5;r=60*(r-o/(s-u));i=(s-u)/s;a=s;return{h:nL(r),s:nL(i*100),v:nL(a*100)}};var o=function(e,t,a){var o,u,s,l;e=(parseInt(e,10)||0)%360;t=parseInt(t,10)/100;a=parseInt(a,10)/100;t=tL(0,eL(t,1));a=tL(0,eL(a,1));if(t===0){n=r=i=nL(255*a);return}o=e/60;u=a*t;s=u*(1-Math.abs(o%2-1));l=a-u;switch(Math.floor(o)){case 0:n=u;r=s;i=0;break;case 1:n=s;r=u;i=0;break;case 2:n=0;r=u;i=s;break;case 3:n=0;r=s;i=u;break;case 4:n=s;r=0;i=u;break;case 5:n=u;r=0;i=s;break;default:n=r=i=0}n=nL(255*(n+l));r=nL(255*(r+l));i=nL(255*(i+l))};var u=function(){var e=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)};var s=function(){return{r:n,g:r,b:i}};var l=function(){return a(n,r,i)};var f=function(e){var a;if(typeof e==="object"){if("r"in e){n=e.r;r=e.g;i=e.b}else if("v"in e){o(e.h,e.s,e.v)}}else{if(a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e)){n=parseInt(a[1],10);r=parseInt(a[2],10);i=parseInt(a[3],10)}else if(a=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e)){n=parseInt(a[1],16);r=parseInt(a[2],16);i=parseInt(a[3],16)}else if(a=/#([0-F])([0-F])([0-F])/gi.exec(e)){n=parseInt(a[1]+a[1],16);r=parseInt(a[2]+a[2],16);i=parseInt(a[3]+a[3],16)}}n=n<0?0:n>255?255:n;r=r<0?0:r>255?255:r;i=i<0?0:i>255?255:i;return t};if(e){f(e)}t.toRgb=s;t.toHsv=l;t.toHex=u;t.parse=f;return t};var iL=function(e,t){var n,r,i,a;t=t||'"';if(e===null){return"null"}i=typeof e;if(i==="string"){r="\bb\tt\nn\ff\rr\"\"''\\\\";return t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(e,i){if(t==='"'&&e==="'"){return e}n=r.indexOf(i);if(n+1){return"\\"+r.charAt(n+1)}e=i.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e}))+t}if(i==="object"){if(e.hasOwnProperty&&Object.prototype.toString.call(e)==="[object Array]"){for(n=0,r="[";n<e.length;n++){r+=(n>0?",":"")+iL(e[n],t)}return r+"]"}r="{";for(a in e){if(e.hasOwnProperty(a)){r+=typeof e[a]!=="function"?(r.length>1?","+t:t)+a+t+":"+iL(e[a],t):""}}return r+"}"}return""+e};var aL={serialize:iL,parse:function(e){try{return JSON.parse(e)}catch(e){}}};var oL={callbacks:{},count:0,send:function(e){var t=this,n=Bu.DOM,r=e.count!==undefined?e.count:t.count;var i="tinymce_jsonp_"+r;t.callbacks[r]=function(a){n.remove(i);delete t.callbacks[r];e.callback(a)};n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"});t.count++}};var uL={send:function(e){var t,n=0;var r=function(){if(!e.async||t.readyState===4||n++>1e4){if(e.success&&n<1e4&&t.status===200){e.success.call(e.success_scope,""+t.responseText,t,e)}else if(e.error){e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e)}t=null}else{setTimeout(r,10)}};e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===false?false:true;e.data=e.data||"";uL.fire("beforeInitialize",{settings:e});t=pS();if(t){if(t.overrideMimeType){t.overrideMimeType(e.content_type)}t.open(e.type||(e.data?"POST":"GET"),e.url,e.async);if(e.crossDomain){t.withCredentials=true}if(e.content_type){t.setRequestHeader("Content-Type",e.content_type)}if(e.requestheaders){Hn.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)}))}t.setRequestHeader("X-Requested-With","XMLHttpRequest");t=uL.fire("beforeSend",{xhr:t,settings:e}).xhr;t.send(e.data);if(!e.async){return r()}setTimeout(r,10)}}};Hn.extend(uL,NC);var sL=Hn.extend;var lL=function(e){this.settings=sL({},e);this.count=0};lL.sendRPC=function(e){return(new lL).send(e)};lL.prototype={send:function(e){var t=e.error,n=e.success;e=sL(this.settings,e);e.success=function(r,i){r=aL.parse(r);if(typeof r==="undefined"){r={error:"JSON Parse error."}}if(r.error){t.call(e.error_scope||e.scope,r.error,i)}else{n.call(e.success_scope||e.scope,r.result)}};e.error=function(n,r){if(t){t.call(e.error_scope||e.scope,n,r)}};e.data=aL.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params});e.content_type="application/json";uL.send(e)}};var fL=function(){return function(){var e={};var t=[];var n={getItem:function(t){var n=e[t];return n?n:null},setItem:function(n,r){t.push(n);e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter((function(e){return e===n}));delete e[n]},clear:function(){t=[];e={}},length:0};Object.defineProperty(n,"length",{get:function(){return t.length},configurable:false,enumerable:false});return n}()};var cL;try{cL=i.window.localStorage}catch(e){cL=fL()}var dL=cL;var vL=AI;var mL={geom:{Rect:$I},util:{Promise:_e,Delay:Me,Tools:Hn,VK:nT,URI:EB,Class:QI,EventDispatcher:TC,Observable:NC,I18n:rS,XHR:uL,JSON:aL,JSONRequest:lL,JSONP:oL,LocalStorage:dL,Color:rL},dom:{EventUtils:Xe,Sizzle:Zt,DomQuery:ar,TreeWalker:to,DOMUtils:Bu,ScriptLoader:Hu,RangeUtils:II,Serializer:qR,ControlSelection:JR,BookmarkManager:KR,Selection:tD,Event:Xe.Event},html:{Styles:Su,Entities:cu,Node:TR,Schema:Cu,SaxParser:pE,DomParser:MR,Writer:lm,Serializer:fm},ui:{Factory:YI},Env:Ne,AddOnManager:Uu,Annotator:Dv,Formatter:iR,UndoManager:KE,EditorCommands:kC,WindowManager:eS,NotificationManager:Zk,EditorObservable:XC,Shortcuts:xk,Editor:QB,FocusManager:tI,EditorManager:AI,DOM:Bu.DOM,ScriptLoader:Hu.ScriptLoader,PluginManager:Uu.PluginManager,ThemeManager:Uu.ThemeManager,trim:Hn.trim,isArray:Hn.isArray,is:Hn.is,toArray:Hn.toArray,makeMap:Hn.makeMap,each:Hn.each,map:Hn.map,grep:Hn.grep,inArray:Hn.inArray,extend:Hn.extend,create:Hn.create,walk:Hn.walk,createNS:Hn.createNS,resolve:Hn.resolve,explode:Hn.explode,_addCacheSuffix:Hn._addCacheSuffix,isOpera:Ne.opera,isWebKit:Ne.webkit,isIE:Ne.ie,isGecko:Ne.gecko,isMac:Ne.mac};vL=Hn.extend(vL,mL);var gL=vL;var pL=function(t){if(true){try{e.exports=t}catch(e){}}};var hL=function(e){window.tinymce=e;window.tinyMCE=e};hL(gL);pL(gL)})(window)})()}).call(this,n(108).setImmediate,n(5),n(6))},557:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.ThemeManager");var n=tinymce.util.Tools.resolve("tinymce.EditorManager");var r=tinymce.util.Tools.resolve("tinymce.util.Tools");var i=function(e){return e.getParam("branding",true,"boolean")};var a=function(e){return o(e)!==false};var o=function(e){return e.getParam("menubar")};var u=function(e){return e.getParam("statusbar",true,"boolean")};var s=function(e){return e.getParam("toolbar_items_size")};var l=function(e){return e.getParam("readonly",false,"boolean")};var f=function(e){return e.getParam("fixed_toolbar_container")};var c=function(e){return e.getParam("inline_toolbar_position_handler")};var d=function(e){return e.getParam("menu")};var v=function(e){return e.getParam("removed_menuitems","")};var m=function(e){return e.getParam("min_width",100,"number")};var g=function(e){return e.getParam("min_height",100,"number")};var p=function(e){return e.getParam("max_width",65535,"number")};var h=function(e){return e.getParam("max_height",65535,"number")};var b=function(e){return e.settings.skin===false};var y=function(e){return e.getParam("inline",false,"boolean")};var w=function(e){var t=e.getParam("resize","vertical");if(t===false){return"none"}else if(t==="both"){return"both"}else{return"vertical"}};var x=function(e){var t=e.settings;var r=t.skin;var i=t.skin_url;if(r!==false){var a=r?r:"lightgray";if(i){i=e.documentBaseURI.toAbsolute(i)}else{i=n.baseURL+"/skins/"+a}}return i};var C=function(e,t){var n=[];for(var r=1;r<10;r++){var i=e["toolbar"+r];if(!i){break}n.push(i)}var a=e.toolbar?[e.toolbar]:[t];return n.length>0?n:a};var k=function(e){var t=e.getParam("toolbar");var n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";if(t===false){return[]}else if(r.isArray(t)){return r.grep(t,(function(e){return e.length>0}))}else{return C(e.settings,n)}};var S=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var T=tinymce.util.Tools.resolve("tinymce.ui.Factory");var E=tinymce.util.Tools.resolve("tinymce.util.I18n");var N=function(e){return e.fire("SkinLoaded")};var R=function(e){return e.fire("ResizeEditor")};var _=function(e){return e.fire("BeforeRenderUI")};var D={fireSkinLoaded:N,fireResizeEditor:R,fireBeforeRenderUI:_};var O=function(e,t){return function(){var n=e.find(t)[0];if(n){n.focus(true)}}};var P=function(e,t){e.shortcuts.add("Alt+F9","",O(t,"menubar"));e.shortcuts.add("Alt+F10,F10","",O(t,"toolbar"));e.shortcuts.add("Alt+F11","",O(t,"elementpath"));t.on("cancel",(function(){e.focus()}))};var A={addKeys:P};var B=tinymce.util.Tools.resolve("tinymce.geom.Rect");var I=tinymce.util.Tools.resolve("tinymce.util.Delay");var L=function(){};var M=function(e){return function(){return e}};var F=M(false);var H=M(true);var z=function(){return U};var U=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r={fold:function(e,t){return e()},is:F,isSome:F,isNone:H,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:M(null),getOrUndefined:M(undefined),or:n,orThunk:t,map:z,each:L,bind:z,exists:F,forall:H,filter:z,equals:e,equals_:e,toArray:function(){return[]},toString:M("none()")};if(Object.freeze){Object.freeze(r)}return r}();var W=function(e){var t=M(e);var n=function(){return i};var r=function(t){return t(e)};var i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:H,isNone:F,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return W(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:U},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(F,(function(t){return n(e,t)}))}};return i};var j=function(e){return e===null||e===undefined?U:W(e)};var V={some:W,none:z,from:j};var q=function(e){var t=K(e);if(t&&S.DOM.getStyle(t,"position",true)!=="static"){var n=S.DOM.getPos(t);var r=t.scrollLeft-n.x;var i=t.scrollTop-n.y;return V.some({x:r,y:i})}else{return V.none()}};var $=function(e,t){var n=S.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n};var K=function(e){return e?e.getRoot().uiContainer:null};var Y=function(e,t){return t.uiContainer=K(e)};var X={getUiContainerDelta:q,setUiContainer:$,getUiContainer:K,inheritUiContainer:Y};var G=function(e,t,n){var i=[];var a;if(!t){return}r.each(t.split(/[ ,]/),(function(t){var r;var o=function(){var n=e.selection;if(t.settings.stateSelector){n.selectorChanged(t.settings.stateSelector,(function(e){t.active(e)}),true)}if(t.settings.disabledStateSelector){n.selectorChanged(t.settings.disabledStateSelector,(function(e){t.disabled(e)}))}};if(t==="|"){a=null}else{if(!a){a={type:"buttongroup",items:[]};i.push(a)}if(e.buttons[t]){r=t;t=e.buttons[r];if(typeof t==="function"){t=t()}t.type=t.type||"button";t.size=n;t=T.create(t);a.items.push(t);if(e.initialized){o()}else{e.on("init",o)}}}}));return{type:"toolbar",layout:"flow",items:i}};var J=function(e,t){var n=[];var i=function(r){if(r){n.push(G(e,r,t))}};r.each(k(e),(function(e){i(e)}));if(n.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:n}}};var Z={createToolbar:G,createToolbars:J};var Q=S.DOM;var ee=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}};var te=function(e){r.each(e.contextToolbars,(function(e){if(e.panel){e.panel.hide()}}))};var ne=function(e,t){e.moveTo(t.left,t.top)};var re=function(e,t,n){t=t?t.substr(0,2):"";r.each({t:"down",b:"up"},(function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(0,1)))}));r.each({l:"left",r:"right"},(function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(1,1)))}))};var ie=function(e,t,n,r,i,a){a=ee({x:t,y:n,w:a.w,h:a.h});if(e){a=e({elementRect:ee(r),contentAreaRect:ee(i),panelRect:a})}return a};var ae=function(e){var t;var n=function(){return e.contextToolbars||[]};var i=function(t){var n,r,i;n=Q.getPos(e.getContentAreaContainer());r=e.dom.getRect(t);i=e.dom.getRoot();if(i.nodeName==="BODY"){r.x-=i.ownerDocument.documentElement.scrollLeft||i.scrollLeft;r.y-=i.ownerDocument.documentElement.scrollTop||i.scrollTop}r.x+=n.x;r.y+=n.y;return r};var a=function(t,n){var r,a,o,u,s,l,f,d;var v=c(e);if(e.removed){return}if(!t||!t.toolbar.panel){te(e);return}f=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"];s=t.toolbar.panel;if(n){s.show()}o=i(t.element);a=Q.getRect(s.getEl());u=Q.getRect(e.getContentAreaContainer()||e.getBody());var m=X.getUiContainerDelta(s).getOr({x:0,y:0});o.x+=m.x;o.y+=m.y;a.x+=m.x;a.y+=m.y;u.x+=m.x;u.y+=m.y;d=25;if(Q.getStyle(t.element,"display",true)!=="inline"){var g=t.element.getBoundingClientRect();o.w=g.width;o.h=g.height}if(!e.inline){u.w=e.getDoc().documentElement.offsetWidth}if(e.selection.controlSelection.isResizable(t.element)&&o.w<d){o=B.inflate(o,0,8)}r=B.findBestRelativePosition(a,o,u,f);o=B.clamp(o,u);if(r){l=B.relativePosition(a,o,r);ne(s,ie(v,l.x,l.y,o,u,a))}else{u.h+=a.h;o=B.intersect(u,o);if(o){r=B.findBestRelativePosition(a,o,u,["bc-tc","bl-tl","br-tr"]);if(r){l=B.relativePosition(a,o,r);ne(s,ie(v,l.x,l.y,o,u,a))}else{ne(s,ie(v,o.x,o.y,o,u,a))}}else{s.hide()}}re(s,r,(function(e,t){return e===t}))};var o=function(t){return function(){var n=function(){if(e.selection){a(f(e.selection.getNode()),t)}};I.requestAnimationFrame(n)}};var u=function(n){if(!t){var r=o(true);var i=X.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin();Q.bind(t,"scroll",r);Q.bind(i,"scroll",r);e.on("remove",(function(){Q.unbind(t,"scroll",r);Q.unbind(i,"scroll",r)}))}};var s=function(t){var n;if(t.toolbar.panel){t.toolbar.panel.show();a(t);return}n=T.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:true,border:1,items:Z.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}});X.setUiContainer(e,n);u(n);t.toolbar.panel=n;n.renderTo().reflow();a(t)};var l=function(){r.each(n(),(function(e){if(e.panel){e.panel.hide()}}))};var f=function(t){var r,i,a;var o=n();a=e.$(t).parents().add(t);for(r=a.length-1;r>=0;r--){for(i=o.length-1;i>=0;i--){if(o[i].predicate(a[r])){return{toolbar:o[i],element:a[r]}}}}return null};e.on("click keyup setContent ObjectResized",(function(t){if(t.type==="setcontent"&&!t.selection){return}I.setEditorTimeout(e,(function(){var t;t=f(e.selection.getNode());if(t){l();s(t)}else{l()}}))}));e.on("blur hide contextmenu",l);e.on("ObjectResizeStart",(function(){var t=f(e.selection.getNode());if(t&&t.toolbar.panel){t.toolbar.panel.hide()}}));e.on("ResizeEditor ResizeWindow",o(true));e.on("nodeChange",o(false));e.on("remove",(function(){r.each(n(),(function(e){if(e.panel){e.panel.remove()}}));e.contextToolbars={}}));e.shortcuts.add("ctrl+F9","",(function(){var t=f(e.selection.getNode());if(t&&t.toolbar.panel){t.toolbar.panel.items()[0].focus()}}))};var oe={addContextualToolbars:ae};var ue=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var se=function(e){return function(t){return ue(t)===e}};var le=se("array");var fe=se("function");var ce=se("number");var de=Array.prototype.slice;var ve=Array.prototype.indexOf;var me=Array.prototype.push;var ge=function(e,t){return ve.call(e,t)};var pe=function(e,t){var n=ge(e,t);return n===-1?V.none():V.some(n)};var he=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return true}}return false};var be=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i)}return r};var ye=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}};var we=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r)){n.push(a)}}return n};var xe=function(e,t,n){ye(e,(function(e){n=t(n,e)}));return n};var Ce=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return V.some(i)}}return V.none()};var ke=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return V.some(n)}}return V.none()};var Se=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!le(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}me.apply(t,e[n])}return t};var Te=fe(Array.from)?Array.from:function(e){return de.call(e)};var Ee={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}};var Ne=function(){return{name:"|",item:{text:"|"}}};var Re=function(e,t){var n=t?{name:e,item:t}:null;return e==="|"?Ne():n};var _e=function(e,t){return ke(e,(function(e){return e.name===t})).isSome()};var De=function(e){return e&&e.item.text==="|"};var Oe=function(e,t){var n=we(e,(function(e){return t.hasOwnProperty(e.name)===false}));var r=we(n,(function(e,t){return!De(e)||!De(n[t-1])}));return we(r,(function(e,t){return!De(e)||t>0&&t<r.length-1}))};var Pe=function(e,t,n,i){var a,o,u,s;if(t){o=t[i];s=true}else{o=Ee[i]}if(o){a={text:o.title};u=[];r.each((o.items||"").split(/[ ,]/),(function(t){var n=Re(t,e[t]);if(n){u.push(n)}}));if(!s){r.each(e,(function(e,t){if(e.context===i&&!_e(u,t)){if(e.separator==="before"){u.push(Ne())}if(e.prependToContext){u.unshift(Re(t,e))}else{u.push(Re(t,e))}if(e.separator==="after"){u.push(Ne())}}}))}a.menu=be(Oe(u,n),(function(e){return e.item}));if(!a.menu.length){return null}}return a};var Ae=function(e){var t;var n=[];var r=d(e);if(r){for(t in r){n.push(t)}}else{for(t in Ee){n.push(t)}}return n};var Be=function(e){var t=[];var n=Ae(e);var i=r.makeMap(v(e).split(/[ ,]/));var a=o(e);var u=typeof a==="string"?a.split(/[ ,]/):n;for(var s=0;s<u.length;s++){var l=u[s];var f=Pe(e.menuItems,d(e),i,l);if(f){t.push(f)}}return t};var Ie={createMenuButtons:Be};var Le=S.DOM;var Me=function(e){return{width:e.clientWidth,height:e.clientHeight}};var Fe=function(e,t,n){var r,i,a,o;r=e.getContainer();i=e.getContentAreaContainer().firstChild;a=Me(r);o=Me(i);if(t!==null){t=Math.max(m(e),t);t=Math.min(p(e),t);Le.setStyle(r,"width",t+(a.width-o.width));Le.setStyle(i,"width",t)}n=Math.max(g(e),n);n=Math.min(h(e),n);Le.setStyle(i,"height",n);D.fireResizeEditor(e)};var He=function(e,t,n){var r=e.getContentAreaContainer();Fe(e,r.clientWidth+t,r.clientHeight+n)};var ze={resizeTo:Fe,resizeBy:He};var Ue=tinymce.util.Tools.resolve("tinymce.Env");var We=function(e){return{element:function(){return e}}};var je=function(e,t,n){var r=e.settings[n];if(r){r(We(t.getEl("body")))}};var Ve=function(e,t,n){r.each(n,(function(n){var r=t.items().filter("#"+n.name)[0];if(r&&r.visible()&&n.name!==e){je(n,r,"onhide");r.visible(false)}}))};var qe=function(e){e.items().each((function(e){e.active(false)}))};var $e=function(e,t){return r.grep(e,(function(e){return e.name===t}))[0]};var Ke=function(e,t,n){return function(r){var i=r.control;var a=i.parents().filter("panel")[0];var o=a.find("#"+t)[0];var u=$e(n,t);Ve(t,a,n);qe(i.parent());if(o&&o.visible()){je(u,o,"onhide");o.hide();i.active(false)}else{if(o){o.show();je(u,o,"onshow")}else{o=T.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""});a.prepend(o);je(u,o,"onrender");je(u,o,"onshow")}i.active(true)}D.fireResizeEditor(e)}};var Ye=function(){return!Ue.ie||Ue.ie>=11};var Xe=function(e){return Ye()&&e.sidebars?e.sidebars.length>0:false};var Ge=function(e){var t=r.map(e.sidebars,(function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:Ke(e,t.name,e.sidebars)}}));return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:t}]}};var Je={hasSidebar:Xe,createSidebar:Ge};var Ze=function(e){var t=function(){e._skinLoaded=true;D.fireSkinLoaded(e)};return function(){if(e.initialized){t()}else{e.on("init",t)}}};var Qe={fireSkinLoaded:Ze};var et=S.DOM;var tt=function(e){return function(t){e.find("*").disabled(t.mode==="readonly")}};var nt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}};var rt=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[nt("0"),Je.createSidebar(e)]}};var it=function(e,t,n){var r,o,f;if(b(e)===false&&n.skinUiCss){et.styleSheetLoader.load(n.skinUiCss,Qe.fireSkinLoaded(e))}else{Qe.fireSkinLoaded(e)()}r=t.panel=T.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[a(e)===false?null:{type:"menubar",border:"0 0 1 0",items:Ie.createMenuButtons(e)},Z.createToolbars(e,s(e))]},Je.hasSidebar(e)?rt(e):nt("1 0 0 0")]});X.setUiContainer(e,r);if(w(e)!=="none"){o={type:"resizehandle",direction:w(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;f={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){if(w(e)==="both"){ze.resizeTo(e,f.width+t.deltaX,f.height+t.deltaY)}else{ze.resizeTo(e,null,f.height+t.deltaY)}}}}if(u(e)){var c='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>';var d=E.translate(["Powered by {0}",c]);var v=i(e)?{type:"label",classes:"branding",html:" "+d}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath",editor:e},o,v]})}D.fireBeforeRenderUI(e);e.on("SwitchMode",tt(r));r.renderBefore(n.targetNode).reflow();if(l(e)){e.setMode("readonly")}if(n.width){et.setStyle(r.getEl(),"width",n.width)}e.on("remove",(function(){r.remove();r=null}));A.addKeys(e,r);oe.addContextualToolbars(e);return{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}};var at={render:it};var ot=tinymce.util.Tools.resolve("tinymce.dom.DomQuery");var ut=0;var st={id:function(){return"mceu_"+ut++},create:function(t,n,i){var a=e.document.createElement(t);S.DOM.setAttribs(a,n);if(typeof i==="string"){a.innerHTML=i}else{r.each(i,(function(e){if(e.nodeType){a.appendChild(e)}}))}return a},createFragment:function(e){return S.DOM.createFragment(e)},getWindowSize:function(){return S.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth);n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else{t=e.offsetWidth;n=e.offsetHeight}return{width:t,height:n}},getPos:function(e,t){return S.DOM.getPos(e,t||st.getContainer())},getContainer:function(){return Ue.container?Ue.container:e.document.body},getViewPort:function(e){return S.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return S.DOM.addClass(e,t)},removeClass:function(e,t){return S.DOM.removeClass(e,t)},hasClass:function(e,t){return S.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return S.DOM.toggleClass(e,t,n)},css:function(e,t,n){return S.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return S.DOM.getStyle(e,t,true)},on:function(e,t,n,r){return S.DOM.bind(e,t,n,r)},off:function(e,t,n){return S.DOM.unbind(e,t,n)},fire:function(e,t,n){return S.DOM.fire(e,t,n)},innerHtml:function(e,t){S.DOM.setHTML(e,t)}};var lt=function(e){return st.getRuntimeStyle(e,"position")==="static"};var ft=function(e){return e.state.get("fixed")};function ct(t,n,r){var i,a,o,u,s,l,f,c,d,v;d=vt();a=st.getPos(n,X.getUiContainer(t));o=a.x;u=a.y;if(ft(t)&&lt(e.document.body)){o-=d.x;u-=d.y}i=t.getEl();v=st.getSize(i);s=v.width;l=v.height;v=st.getSize(n);f=v.width;c=v.height;r=(r||"").split("");if(r[0]==="b"){u+=c}if(r[1]==="r"){o+=f}if(r[0]==="c"){u+=Math.round(c/2)}if(r[1]==="c"){o+=Math.round(f/2)}if(r[3]==="b"){u-=l}if(r[4]==="r"){o-=s}if(r[3]==="c"){u-=Math.round(l/2)}if(r[4]==="c"){o-=Math.round(s/2)}return{x:o,y:u,w:s,h:l}}var dt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}};var vt=function(){var t=e.window;var n=Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft);var r=Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop);var i=t.innerWidth||e.document.documentElement.clientWidth;var a=t.innerHeight||e.document.documentElement.clientHeight;return{x:n,y:r,w:i,h:a}};var mt=function(e){var t=X.getUiContainer(e);return t&&!ft(e)?dt(t):vt()};var gt={testMoveRel:function(e,t){var n=mt(this);for(var r=0;r<t.length;r++){var i=ct(this,e,t[r]);if(ft(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h){return t[r]}}else{if(i.x>n.x&&i.x+i.w<n.w+n.x&&i.y>n.y&&i.y+i.h<n.h+n.y){return t[r]}}}return t[0]},moveRel:function(e,t){if(typeof t!=="string"){t=this.testMoveRel(e,t)}var n=ct(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();n.moveTo(r.x+e,r.y+t);return n},moveTo:function(e,t){var n=this;function r(e,t,n){if(e<0){return 0}if(e+n>t){e=t-n;return e<0?0:e}return e}if(n.settings.constrainToViewport){var i=mt(this);var a=n.layoutRect();e=r(e,i.w+i.x,a.w);t=r(t,i.h+i.y,a.h)}var o=X.getUiContainer(n);if(o&&lt(o)&&!ft(n)){e-=o.scrollLeft;t-=o.scrollTop}if(o){e+=1;t+=1}if(n.state.get("rendered")){n.layoutRect({x:e,y:t}).repaint()}else{n.settings.x=e;n.settings.y=t}n.fire("move",{x:e,y:t});return n}};var pt=tinymce.util.Tools.resolve("tinymce.util.Class");var ht=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher");var bt={parseBox:function(e){var t;var n=10;if(!e){return}if(typeof e==="number"){e=e||0;return{top:e,left:e,bottom:e,right:e}}e=e.split(" ");t=e.length;if(t===1){e[1]=e[2]=e[3]=e[0]}else if(t===2){e[2]=e[0];e[3]=e[1]}else if(t===3){e[3]=e[1]}return{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0}},measureBox:function(e,t){function n(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);if(r){t=t.replace(/[A-Z]/g,(function(e){return"-"+e}));return r.getPropertyValue(t)}else{return null}}return e.currentStyle[t]}function r(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}};function yt(){}function wt(e){this.cls=[];this.cls._map={};this.onchange=e||yt;this.prefix=""}r.extend(wt.prototype,{add:function(e){if(e&&!this.contains(e)){this.cls._map[e]=true;this.cls.push(e);this._change()}return this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length;t++){if(this.cls[t]===e){break}}this.cls.splice(t,1);delete this.cls._map[e];this._change()}return this},toggle:function(e,t){var n=this.contains(e);if(n!==t){if(n){this.remove(e)}else{this.add(e)}this._change()}return this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue;this.onchange.call(this)}});wt.prototype.toString=function(){var e;if(this.clsValue){return this.clsValue}e="";for(var t=0;t<this.cls.length;t++){if(t>0){e+=" "}e+=this.prefix+this.cls[t]}return e};function xt(e){var t=[];var n=e.length,r;while(n--){r=e[n];if(!r.__checked){t.push(r);r.__checked=1}}n=t.length;while(n--){delete t[n].__checked}return t}var Ct=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i;var kt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;var St=/^\s*|\s*$/g;var Tt;var Et=pt.extend({init:function(e){var t=this.match;function n(e){if(e){e=e.toLowerCase();return function(t){return e==="*"||t.type===e}}}function r(e){if(e){return function(t){return t._name===e}}}function i(e){if(e){e=e.split(".");return function(t){var n=e.length;while(n--){if(!t.classes.contains(e[n])){return false}}return true}}}function a(e,t,n){if(e){return function(r){var i=r[e]?r[e]():"";return!t?!!n:t==="="?i===n:t==="*="?i.indexOf(n)>=0:t==="~="?(" "+i+" ").indexOf(" "+n+" ")>=0:t==="!="?i!==n:t==="^="?i.indexOf(n)===0:t==="$="?i.substr(i.length-n.length)===n:false}}}function o(e){var n;if(e){e=/(?:not\((.+)\))|(.+)/i.exec(e);if(!e[1]){e=e[2];return function(t,n,r){return e==="first"?n===0:e==="last"?n===r-1:e==="even"?n%2===0:e==="odd"?n%2===1:t[e]?t[e]():false}}n=s(e[1],[]);return function(e){return!t(e,n)}}}function u(e,t,u){var s;function l(e){if(e){t.push(e)}}s=Ct.exec(e.replace(St,""));l(n(s[1]));l(r(s[2]));l(i(s[3]));l(a(s[4],s[5],s[6]));l(o(s[7]));t.pseudo=!!s[7];t.direct=u;return t}function s(e,t){var n=[];var r,i,a;do{kt.exec("");i=kt.exec(e);if(i){e=i[3];n.push(i[1]);if(i[2]){r=i[3];break}}}while(i);if(r){s(r,t)}e=[];for(a=0;a<n.length;a++){if(n[a]!==">"){e.push(u(n[a],[],n[a-1]===">"))}}t.push(e);return t}this._selectors=s(e,[])},match:function(e,t){var n,r,i,a,o,u,s,l,f,c,d,v,m;t=t||this._selectors;for(n=0,r=t.length;n<r;n++){o=t[n];a=o.length;m=e;v=0;for(i=a-1;i>=0;i--){l=o[i];while(m){if(l.pseudo){d=m.parent().items();f=c=d.length;while(f--){if(d[f]===m){break}}}for(u=0,s=l.length;u<s;u++){if(!l[u](m,f,c)){u=s+1;break}}if(u===s){v++;break}else{if(i===a-1){break}}m=m.parent()}}if(v===a){return true}}return false},find:function(e){var t=[],n,r;var i=this._selectors;function a(e,n,r){var i,o,u,s,l;var f=n[r];for(i=0,o=e.length;i<o;i++){l=e[i];for(u=0,s=f.length;u<s;u++){if(!f[u](l,i,o)){u=s+1;break}}if(u===s){if(r===n.length-1){t.push(l)}else{if(l.items){a(l.items(),n,r+1)}}}else if(f.direct){return}if(l.items){a(l.items(),n,r)}}}if(e.items){for(n=0,r=i.length;n<r;n++){a(e.items(),i[n],0)}if(r>1){t=xt(t)}}if(!Tt){Tt=Et.Collection}return new Tt(t)}});var Nt,Rt;var _t=Array.prototype.push,Dt=Array.prototype.slice;Rt={length:0,init:function(e){if(e){this.add(e)}},add:function(e){var t=this;if(!r.isArray(e)){if(e instanceof Nt){t.add(e.toArray())}else{_t.call(t,e)}}else{_t.apply(t,e)}return t},set:function(e){var t=this;var n=t.length;var r;t.length=0;t.add(e);for(r=t.length;r<n;r++){delete t[r]}return t},filter:function(e){var t=this;var n,r;var i=[];var a,o;if(typeof e==="string"){e=new Et(e);o=function(t){return e.match(t)}}else{o=e}for(n=0,r=t.length;n<r;n++){a=t[n];if(o(a)){i.push(a)}}return new Nt(i)},slice:function(){return new Nt(Dt.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(e){r.each(this,e);return this},toArray:function(){return r.toArray(this)},indexOf:function(e){var t=this;var n=t.length;while(n--){if(t[n]===e){break}}return n},reverse:function(){return new Nt(r.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].classes.contains(e):false},prop:function(e,t){var n=this;var r;if(t!==undefined){n.each((function(n){if(n[e]){n[e](t)}}));return n}r=n[0];if(r&&r[e]){return r[e]()}},exec:function(e){var t=this,n=r.toArray(arguments).slice(1);t.each((function(t){if(t[e]){t[e].apply(t,n)}}));return t},remove:function(){var e=this.length;while(e--){this[e].remove()}return this},addClass:function(e){return this.each((function(t){t.classes.add(e)}))},removeClass:function(e){return this.each((function(t){t.classes.remove(e)}))}};r.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){Rt[e]=function(){var t=r.toArray(arguments);this.each((function(n){if(e in n){n[e].apply(n,t)}}));return this}}));r.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){Rt[e]=function(t){return this.prop(e,t)}}));Nt=pt.extend(Rt);Et.Collection=Nt;var Ot=Nt;var Pt=function(e){this.create=e.create};Pt.create=function(e,t){return new Pt({create:function(n,r){var i;var a=function(e){n.set(r,e.value)};var o=function(n){e.set(t,n.value)};n.on("change:"+r,o);e.on("change:"+t,a);i=n._bindings;if(!i){i=n._bindings=[];n.on("destroy",(function(){var e=i.length;while(e--){i[e]()}}))}i.push((function(){e.off("change:"+t,a)}));return e.get(t)}})};var At=tinymce.util.Tools.resolve("tinymce.util.Observable");function Bt(e){return e.nodeType>0}function It(e,t){var n,i;if(e===t){return true}if(e===null||t===null){return e===t}if(typeof e!=="object"||typeof t!=="object"){return e===t}if(r.isArray(t)){if(e.length!==t.length){return false}n=e.length;while(n--){if(!It(e[n],t[n])){return false}}}if(Bt(e)||Bt(t)){return e===t}i={};for(n in t){if(!It(e[n],t[n])){return false}i[n]=true}for(n in e){if(!i[n]&&!It(e[n],t[n])){return false}}return true}var Lt=pt.extend({Mixins:[At],init:function(e){var t,n;e=e||{};for(t in e){n=e[t];if(n instanceof Pt){e[t]=n.create(this,t)}}this.data=e},set:function(e,t){var n,r;var i=this.data[e];if(t instanceof Pt){t=t.create(this,e)}if(typeof e==="object"){for(n in e){this.set(n,e[n])}return this}if(!It(i,t)){this.data[e]=t;r={target:this,name:e,value:t,oldValue:i};this.fire("change:"+e,r);this.fire("change",r)}return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Pt.create(this,e)},destroy:function(){this.fire("destroy")}});var Mt={},Ft;var Ht={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative()){return}if(!Mt[n._id]){Mt[n._id]=n}if(!Ft){Ft=true;I.requestAnimationFrame((function(){var e,t;Ft=false;for(e in Mt){t=Mt[e];if(t.state.get("rendered")){t.reflow()}}Mt={}}),e.document.body)}}},remove:function(e){if(Mt[e._id]){delete Mt[e._id]}}};var zt="onmousewheel"in e.document;var Ut=false;var Wt="mce-";var jt,Vt=0;var qt={Statics:{classPrefix:Wt},isRtl:function(){return jt.rtl},classPrefix:Wt,init:function(e){var t=this;var n,i;function a(e){var n;e=e.split(" ");for(n=0;n<e.length;n++){t.classes.add(e[n])}}t.settings=e=r.extend({},t.Defaults,e);t._id=e.id||"mceu_"+Vt++;t._aria={role:e.role};t._elmCache={};t.$=ot;t.state=new Lt({visible:true,active:false,disabled:false,value:""});t.data=new Lt(e.data);t.classes=new wt((function(){if(t.state.get("rendered")){t.getEl().className=this.toString()}}));t.classes.prefix=t.classPrefix;n=e.classes;if(n){if(t.Defaults){i=t.Defaults.classes;if(i&&n!==i){a(i)}}a(n)}r.each("title text name visible disabled active value".split(" "),(function(n){if(n in e){t[n](e[n])}}));t.on("click",(function(){if(t.disabled()){return false}}));t.settings=e;t.borderBox=bt.parseBox(e.border);t.paddingBox=bt.parseBox(e.padding);t.marginBox=bt.parseBox(e.margin);if(e.hidden){t.hide()}},Properties:"parent,name",getContainerElm:function(){var e=X.getUiContainer(this);return e?e:st.getContainer()},getParentCtrl:function(e){var t;var n=this.getRoot().controlIdLookup;while(e&&n){t=n[e.id];if(t){break}e=e.parentNode}return t},initLayoutRect:function(){var e=this;var t=e.settings;var n,r;var i=e.getEl();var a,o,u,s,l;var f,c,d;n=e.borderBox=e.borderBox||bt.measureBox(i,"border");e.paddingBox=e.paddingBox||bt.measureBox(i,"padding");e.marginBox=e.marginBox||bt.measureBox(i,"margin");d=st.getSize(i);f=t.minWidth;c=t.minHeight;u=f||d.width;s=c||d.height;a=t.width;o=t.height;l=t.autoResize;l=typeof l!=="undefined"?l:!a&&!o;a=a||u;o=o||s;var v=n.left+n.right;var m=n.top+n.bottom;var g=t.maxWidth||65535;var p=t.maxHeight||65535;e._layoutRect=r={x:t.x||0,y:t.y||0,w:a,h:o,deltaW:v,deltaH:m,contentW:a-v,contentH:o-m,innerW:a-v,innerH:o-m,startMinWidth:f||0,startMinHeight:c||0,minW:Math.min(u,g),minH:Math.min(s,p),maxW:g,maxH:p,autoResize:l,scrollW:0};e._lastLayoutRect={};return r},layoutRect:function(e){var t=this;var n=t._layoutRect,r,i,a,o,u;if(!n){n=t.initLayoutRect()}if(e){a=n.deltaW;o=n.deltaH;if(e.x!==undefined){n.x=e.x}if(e.y!==undefined){n.y=e.y}if(e.minW!==undefined){n.minW=e.minW}if(e.minH!==undefined){n.minH=e.minH}i=e.w;if(i!==undefined){i=i<n.minW?n.minW:i;i=i>n.maxW?n.maxW:i;n.w=i;n.innerW=i-a}i=e.h;if(i!==undefined){i=i<n.minH?n.minH:i;i=i>n.maxH?n.maxH:i;n.h=i;n.innerH=i-o}i=e.innerW;if(i!==undefined){i=i<n.minW-a?n.minW-a:i;i=i>n.maxW-a?n.maxW-a:i;n.innerW=i;n.w=i+a}i=e.innerH;if(i!==undefined){i=i<n.minH-o?n.minH-o:i;i=i>n.maxH-o?n.maxH-o:i;n.innerH=i;n.h=i+o}if(e.contentW!==undefined){n.contentW=e.contentW}if(e.contentH!==undefined){n.contentH=e.contentH}r=t._lastLayoutRect;if(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h){u=jt.repaintControls;if(u){if(u.map&&!u.map[t._id]){u.push(t);u.map[t._id]=true}}r.x=n.x;r.y=n.y;r.w=n.w;r.h=n.h}return t}return n},repaint:function(){var t=this;var n,r,i,a,o;var u,s,l,f,c;f=!e.document.createRange?Math.round:function(e){return e};n=t.getEl().style;a=t._layoutRect;l=t._lastRepaintRect||{};o=t.borderBox;u=o.left+o.right;s=o.top+o.bottom;if(a.x!==l.x){n.left=f(a.x)+"px";l.x=a.x}if(a.y!==l.y){n.top=f(a.y)+"px";l.y=a.y}if(a.w!==l.w){c=f(a.w-u);n.width=(c>=0?c:0)+"px";l.w=a.w}if(a.h!==l.h){c=f(a.h-s);n.height=(c>=0?c:0)+"px";l.h=a.h}if(t._hasBody&&a.innerW!==l.innerW){c=f(a.innerW);i=t.getEl("body");if(i){r=i.style;r.width=(c>=0?c:0)+"px"}l.innerW=a.innerW}if(t._hasBody&&a.innerH!==l.innerH){c=f(a.innerH);i=i||t.getEl("body");if(i){r=r||i.style;r.height=(c>=0?c:0)+"px"}l.innerH=a.innerH}t._lastRepaintRect=l;t.fire("repaint",{},false)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null;st.css(e.getEl(),{width:"",height:""});e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null;e.initLayoutRect()},on:function(e,t){var n=this;function r(e){var t,r;if(typeof e!=="string"){return e}return function(i){if(!t){n.parentsAndSelf().each((function(n){var i=n.settings.callbacks;if(i&&(t=i[e])){r=n;return false}}))}if(!t){i.action=e;this.fire("execute",i);return}return t.call(r,i)}}$t(n).on(e,r(t));return n},off:function(e,t){$t(this).off(e,t);return this},fire:function(e,t,n){var r=this;t=t||{};if(!t.control){t.control=r}t=$t(r).fire(e,t);if(n!==false&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped()){i.fire(e,t,false);i=i.parent()}}return t},hasEventListeners:function(e){return $t(this).has(e)},parents:function(e){var t=this;var n,r=new Ot;for(n=t.parent();n;n=n.parent()){r.add(n)}if(e){r=r.filter(e)}return r},parentsAndSelf:function(e){return new Ot(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){this.$el.html(e);return this},getEl:function(e){var t=e?this._id+"-"+e:this._id;if(!this._elmCache[t]){this._elmCache[t]=ot("#"+t)[0]}return this._elmCache[t]},show:function(){return this.visible(true)},hide:function(){return this.visible(false)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){this.getEl().blur();return this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);if(typeof t==="undefined"){return n._aria[e]}n._aria[e]=t;if(n.state.get("rendered")){r.setAttribute(e==="role"?e:"aria-"+e,t)}return n},encode:function(e,t){if(t!==false){e=this.translate(e)}return(e||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(e){return jt.translate?jt.translate(e):e},before:function(e){var t=this,n=t.parent();if(n){n.insert(e,n.items().indexOf(t),true)}return t},after:function(e){var t=this,n=t.parent();if(n){n.insert(e,n.items().indexOf(t))}return t},remove:function(){var e=this;var t=e.getEl();var n=e.parent();var r,i;if(e.items){var a=e.items().toArray();i=a.length;while(i--){a[i].remove()}}if(n&&n.items){r=[];n.items().each((function(t){if(t!==e){r.push(t)}}));n.items().set(r);n._lastRect=null}if(e._eventsRoot&&e._eventsRoot===e){ot(t).off()}var o=e.getRoot().controlIdLookup;if(o){delete o[e._id]}if(t&&t.parentNode){t.parentNode.removeChild(t)}e.state.set("rendered",false);e.state.destroy();e.fire("remove");return e},renderBefore:function(e){ot(e).before(this.renderHtml());this.postRender();return this},renderTo:function(e){ot(e||this.getContainerElm()).append(this.renderHtml());this.postRender();return this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e=this;var t=e.settings;var n,r,i,a,o;e.$el=ot(e.getEl());e.state.set("rendered",true);for(a in t){if(a.indexOf("on")===0){e.on(a.substr(2),t[a])}}if(e._eventsRoot){for(i=e.parent();!o&&i;i=i.parent()){o=i._eventsRoot}if(o){for(a in o._nativeEvents){e._nativeEvents[a]=true}}}Kt(e);if(t.style){n=e.getEl();if(n){n.setAttribute("style",t.style);n.style.cssText=t.style}}if(e.settings.border){r=e.borderBox;e.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left})}var u=e.getRoot();if(!u.controlIdLookup){u.controlIdLookup={}}u.controlIdLookup[e._id]=e;for(var s in e._aria){e.aria(s,e._aria[s])}if(e.state.get("visible")===false){e.getEl().style.display="none"}e.bindStates();e.state.on("change:visible",(function(t){var n=t.value;var r;if(e.state.get("rendered")){e.getEl().style.display=n===false?"none":"";e.getEl().getBoundingClientRect()}r=e.parent();if(r){r._lastRect=null}e.fire(n?"show":"hide");Ht.add(e)}));e.fire("postrender",{},false)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,r,i=e;n=r=0;while(i&&i!==t&&i.nodeType){n+=i.offsetLeft||0;r+=i.offsetTop||0;i=i.offsetParent}return{x:n,y:r}}var n=this.getEl(),r=n.parentNode;var i,a,o,u,s,l;var f=t(n,r);i=f.x;a=f.y;o=n.offsetWidth;u=n.offsetHeight;s=r.clientWidth;l=r.clientHeight;if(e==="end"){i-=s-o;a-=l-u}else if(e==="center"){i-=s/2-o/2;a-=l/2-u/2}r.scrollLeft=i;r.scrollTop=a;return this},getRoot:function(){var e=this,t;var n=[];while(e){if(e.rootControl){t=e.rootControl;break}n.push(e);t=e;e=e.parent()}if(!t){t=this}var r=n.length;while(r--){n[r].rootControl=t}return t},reflow:function(){Ht.remove(this);var e=this.parent();if(e&&e._layout&&!e._layout.isNative()){e.reflow()}return this}};r.each("text title visible disabled active value".split(" "),(function(e){qt[e]=function(t){if(arguments.length===0){return this.state.get(e)}if(typeof t!=="undefined"){this.state.set(e,t)}return this}}));jt=pt.extend(qt);function $t(e){if(!e._eventDispatcher){e._eventDispatcher=new ht({scope:e,toggleEvent:function(t,n){if(n&&ht.isNative(t)){if(!e._nativeEvents){e._nativeEvents={}}e._nativeEvents[t]=true;if(e.state.get("rendered")){Kt(e)}}}})}return e._eventDispatcher}function Kt(e){var t,n,r,i,a,o;function u(t){var n=e.getParentCtrl(t.target);if(n){n.fire(t.type,t)}}function s(){var e=i._lastHoverCtrl;if(e){e.fire("mouseleave",{target:e.getEl()});e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})}));i._lastHoverCtrl=null}}function l(t){var n=e.getParentCtrl(t.target),r=i._lastHoverCtrl,a=0,o,u,s;if(n!==r){i._lastHoverCtrl=n;u=n.parents().toArray().reverse();u.push(n);if(r){s=r.parents().toArray().reverse();s.push(r);for(a=0;a<s.length;a++){if(u[a]!==s[a]){break}}for(o=s.length-1;o>=a;o--){r=s[o];r.fire("mouseleave",{target:r.getEl()})}}for(o=a;o<u.length;o++){n=u[o];n.fire("mouseenter",{target:n.getEl()})}}}function f(t){t.preventDefault();if(t.type==="mousewheel"){t.deltaY=-1/40*t.wheelDelta;if(t.wheelDeltaX){t.deltaX=-1/40*t.wheelDeltaX}}else{t.deltaX=0;t.deltaY=t.detail}t=e.fire("wheel",t)}a=e._nativeEvents;if(a){r=e.parents().toArray();r.unshift(e);for(t=0,n=r.length;!i&&t<n;t++){i=r[t]._eventsRoot}if(!i){i=r[r.length-1]||e}e._eventsRoot=i;for(n=t,t=0;t<n;t++){r[t]._eventsRoot=i}var c=i._delegates;if(!c){c=i._delegates={}}for(o in a){if(!a){return false}if(o==="wheel"&&!Ut){if(zt){ot(e.getEl()).on("mousewheel",f)}else{ot(e.getEl()).on("DOMMouseScroll",f)}continue}if(o==="mouseenter"||o==="mouseleave"){if(!i._hasMouseEnter){ot(i.getEl()).on("mouseleave",s).on("mouseover",l);i._hasMouseEnter=1}}else if(!c[o]){ot(i.getEl()).on(o,u);c[o]=true}a[o]=false}}}var Yt=jt;var Xt=function(e){return e.getAttribute("data-mce-tabstop")?true:false};function Gt(t){var n=t.root;var r,i;function a(e){return e&&e.nodeType===1}try{r=e.document.activeElement}catch(t){r=e.document.body}i=n.getParentCtrl(r);function o(e){e=e||r;if(a(e)){return e.getAttribute("role")}return null}function u(e){var t,n=e||r;while(n=n.parentNode){if(t=o(n)){return t}}}function s(e){var t=r;if(a(t)){return t.getAttribute("aria-"+e)}}function l(e){var t=e.tagName.toUpperCase();return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}function f(e){if(l(e)&&!e.hidden){return true}if(Xt(e)){return true}if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(e))){return true}return false}function c(e){var t=[];function r(e){if(e.nodeType!==1||e.style.display==="none"||e.disabled){return}if(f(e)){t.push(e)}for(var n=0;n<e.childNodes.length;n++){r(e.childNodes[n])}}r(e||n.getEl());return t}function d(e){var t,n;e=e||i;n=e.parents().toArray();n.unshift(e);for(var r=0;r<n.length;r++){t=n[r];if(t.settings.ariaRoot){break}}return t}function v(e){var t=d(e);var n=c(t.getEl());if(t.settings.ariaRemember&&"lastAriaIndex"in t){m(t.lastAriaIndex,n)}else{m(0,n)}}function m(e,t){if(e<0){e=t.length-1}else if(e>=t.length){e=0}if(t[e]){t[e].focus()}return e}function g(e,t){var n=-1;var i=d();t=t||c(i.getEl());for(var a=0;a<t.length;a++){if(t[a]===r){n=a}}n+=e;i.lastAriaIndex=m(n,t)}function p(){var e=u();if(e==="tablist"){g(-1,c(r.parentNode))}else if(i.parent().submenu){x()}else{g(-1)}}function h(){var e=o(),t=u();if(t==="tablist"){g(1,c(r.parentNode))}else if(e==="menuitem"&&t==="menu"&&s("haspopup")){C()}else{g(1)}}function b(){g(-1)}function y(){var e=o(),t=u();if(e==="menuitem"&&t==="menubar"){C()}else if(e==="button"&&s("haspopup")){C({key:"down"})}else{g(1)}}function w(e){var t=u();if(t==="tablist"){var n=c(i.getEl("body"))[0];if(n){n.focus()}}else{g(e.shiftKey?-1:1)}}function x(){i.fire("cancel")}function C(e){e=e||{};i.fire("click",{target:r,aria:e})}n.on("keydown",(function(e){function t(e,t){if(l(r)||Xt(r)){return}if(o(r)==="slider"){return}if(t(e)!==false){e.preventDefault()}}if(e.isDefaultPrevented()){return}switch(e.keyCode){case 37:t(e,p);break;case 39:t(e,h);break;case 38:t(e,b);break;case 40:t(e,y);break;case 27:x();break;case 14:case 13:case 32:t(e,C);break;case 9:w(e);e.preventDefault();break}}));n.on("focusin",(function(e){r=e.target;i=e.control}));return{focusFirst:v}}var Jt={};var Zt=Yt.extend({init:function(e){var t=this;t._super(e);e=t.settings;if(e.fixed){t.state.set("fixed",true)}t._items=new Ot;if(t.isRtl()){t.classes.add("rtl")}t.bodyClasses=new wt((function(){if(t.state.get("rendered")){t.getEl("body").className=this.toString()}}));t.bodyClasses.prefix=t.classPrefix;t.classes.add("container");t.bodyClasses.add("container-body");if(e.containerCls){t.classes.add(e.containerCls)}t._layout=T.create((e.layout||"")+"layout");if(t.settings.items){t.add(t.settings.items)}else{t.add(t.render())}t._hasBody=true},items:function(){return this._items},find:function(e){e=Jt[e]=Jt[e]||new Et(e);return e.find(this)},add:function(e){var t=this;t.items().add(t.create(e)).parent(t);return t},focus:function(e){var t=this;var n,r,i;if(e){r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav;if(r){r.focusFirst(t);return}}i=t.find("*");if(t.statusbar){i.add(t.statusbar.items())}i.each((function(e){if(e.settings.autofocus){n=null;return false}if(e.canFocus){n=n||e}}));if(n){n.focus()}return t},replace:function(e,t){var n;var r=this.items();var i=r.length;while(i--){if(r[i]===e){r[i]=t;break}}if(i>=0){n=t.getEl();if(n){n.parentNode.removeChild(n)}n=e.getEl();if(n){n.parentNode.removeChild(n)}}t.parent(this)},create:function(e){var t=this;var n;var i=[];if(!r.isArray(e)){e=[e]}r.each(e,(function(e){if(e){if(!(e instanceof Yt)){if(typeof e==="string"){e={type:e}}n=r.extend({},t.settings.defaults,e);e.type=n.type=n.type||e.type||t.settings.defaultType||(n.defaults?n.defaults.type:null);e=T.create(n)}i.push(e)}}));return i},renderNew:function(){var e=this;e.items().each((function(t,n){var r;t.parent(e);if(!t.state.get("rendered")){r=e.getEl("body");if(r.hasChildNodes()&&n<=r.childNodes.length-1){ot(r.childNodes[n]).before(t.renderHtml())}else{ot(r).append(t.renderHtml())}t.postRender();Ht.add(t)}}));e._layout.applyClasses(e.items().filter(":visible"));e._lastRect=null;return e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;t.items().set(t.create(e).concat(t.items().toArray()));return t.renderNew()},insert:function(e,t,n){var r=this;var i,a,o;e=r.create(e);i=r.items();if(!n&&t<i.length-1){t+=1}if(t>=0&&t<i.length){a=i.slice(0,t).toArray();o=i.slice(t).toArray();i.set(a.concat(e,o))}return r.renderNew()},fromJSON:function(e){var t=this;for(var n in e){t.find("#"+n).value(e[n])}return t},toJSON:function(){var e=this,t={};e.find("*").each((function(e){var n=e.name(),r=e.value();if(n&&typeof r!=="undefined"){t[n]=r}}));return t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;e.preRender();t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+">"+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;var t;e.items().exec("postRender");e._super();e._layout.postRender(e);e.state.set("rendered",true);if(e.settings.style){e.$el.css(e.settings.style)}if(e.settings.border){t=e.borderBox;e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})}if(!e.parent()){e.keyboardNav=Gt({root:e})}return e},initLayoutRect:function(){var e=this,t=e._super();e._layout.recalc(e);return t},recalc:function(){var e=this;var t=e._layoutRect;var n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h){e._layout.recalc(e);t=e.layoutRect();e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h};return true}},reflow:function(){var e;Ht.remove(this);if(this.visible()){Yt.repaintControls=[];Yt.repaintControls.map={};this.recalc();e=Yt.repaintControls.length;while(e--){Yt.repaintControls[e].repaint()}if(this.settings.layout!=="flow"&&this.settings.layout!=="stack"){this.repaint()}Yt.repaintControls=[]}return this}});function Qt(e){var t,n,r,i;var a,o,u,s;var l=Math.max;t=e.documentElement;n=e.body;r=l(t.scrollWidth,n.scrollWidth);i=l(t.clientWidth,n.clientWidth);a=l(t.offsetWidth,n.offsetWidth);o=l(t.scrollHeight,n.scrollHeight);u=l(t.clientHeight,n.clientHeight);s=l(t.offsetHeight,n.offsetHeight);return{width:r<a?i:r,height:o<s?u:o}}function en(e){var t,n;if(e.changedTouches){t="screenX screenY pageX pageY clientX clientY".split(" ");for(n=0;n<t.length;n++){e[t[n]]=e.changedTouches[0][t[n]]}}}function tn(t,n){var r;var i=n.document||e.document;var a;var o,u,s,l,f;n=n||{};var c=i.getElementById(n.handle||t);o=function(t){var o=Qt(i);var d,v;en(t);t.preventDefault();a=t.button;d=c;l=t.screenX;f=t.screenY;if(e.window.getComputedStyle){v=e.window.getComputedStyle(d,null).getPropertyValue("cursor")}else{v=d.runtimeStyle.cursor}r=ot("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:v}).appendTo(i.body);ot(i).on("mousemove touchmove",s).on("mouseup touchend",u);n.start(t)};s=function(e){en(e);if(e.button!==a){return u(e)}e.deltaX=e.screenX-l;e.deltaY=e.screenY-f;e.preventDefault();n.drag(e)};u=function(e){en(e);ot(i).off("mousemove touchmove",s).off("mouseup touchend",u);r.remove();if(n.stop){n.stop(e)}};this.destroy=function(){ot(c).off()};ot(c).on("mousedown touchstart",o)}var nn={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){var e=this,t=2;function n(){var n,r,i;function a(i,a,o,u,s,l){var f,c,d;var v,m,g,p;var h,b;c=e.getEl("scroll"+i);if(c){h=a.toLowerCase();b=o.toLowerCase();ot(e.getEl("absend")).css(h,e.layoutRect()[u]-1);if(!s){ot(c).css("display","none");return}ot(c).css("display","block");f=e.getEl("body");d=e.getEl("scroll"+i+"t");v=f["client"+o]-t*2;v-=n&&r?c["client"+l]:0;m=f["scroll"+o];g=v/m;p={};p[h]=f["offset"+a]+t;p[b]=v;ot(c).css(p);p={};p[h]=f["scroll"+a]*g;p[b]=v*g;ot(d).css(p)}}i=e.getEl("body");n=i.scrollWidth>i.clientWidth;r=i.scrollHeight>i.clientHeight;a("h","Left","Width","contentW",n,"Height");a("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,i,a,o){var u;var s=e._id+"-scroll"+n,l=e.classPrefix;ot(e.getEl()).append('<div id="'+s+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'">'+'<div id="'+s+'t" class="'+l+'scrollbar-thumb"></div>'+"</div>");e.draghelper=new tn(s+"t",{start:function(){u=e.getEl("body")["scroll"+r];ot("#"+s).addClass(l+"active")},drag:function(s){var l,f,c,d;var v=e.layoutRect();f=v.contentW>v.innerW;c=v.contentH>v.innerH;d=e.getEl("body")["client"+i]-t*2;d-=f&&c?e.getEl("scroll"+n)["client"+o]:0;l=d/e.getEl("body")["scroll"+i];e.getEl("body")["scroll"+r]=u+s["delta"+a]/l},stop:function(){ot("#"+s).removeClass(l+"active")}})}e.classes.add("scroll");n("v","Top","Height","Y","Width");n("h","Left","Width","X","Height")}if(e.settings.autoScroll){if(!e._hasScroll){e._hasScroll=true;r();e.on("wheel",(function(t){var r=e.getEl("body");r.scrollLeft+=(t.deltaX||0)*10;r.scrollTop+=t.deltaY*10;n()}));ot(e.getEl("body")).on("scroll",n)}n()}}};var rn=Zt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[nn],renderHtml:function(){var e=this;var t=e._layout;var n=e.settings.html;e.preRender();t.preRender(e);if(typeof n==="undefined"){n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>"}else{if(typeof n==="function"){n=n.call(e)}e._hasBody=false}return'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}});var an={resizeToContent:function(){this._layoutRect.autoResize=true;this._lastRect=null;this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=st.getWindowSize();e=e<=1?e*n.w:e;t=t<=1?t*n.h:t}this._layoutRect.autoResize=false;return this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}};var on,un,sn;var ln=[];var fn=[];var cn;function dn(e,t){while(e){if(e===t){return true}e=e.parent()}}function vn(e){var t=ln.length;while(t--){var n=ln[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r){if(dn(r,n)||n.parent()===r){continue}}e=n.fire("autohide",{target:e.target});if(!e.isDefaultPrevented()){n.hide()}}}}function mn(){if(!on){on=function(e){if(e.button===2){return}vn(e)};ot(e.document).on("click touchstart",on)}}function gn(){if(!un){un=function(){var e;e=ln.length;while(e--){hn(ln[e])}};ot(e.window).on("scroll",un)}}function pn(){if(!sn){var t=e.document.documentElement;var n=t.clientWidth,r=t.clientHeight;sn=function(){if(!e.document.all||n!==t.clientWidth||r!==t.clientHeight){n=t.clientWidth;r=t.clientHeight;yn.hideAll()}};ot(e.window).on("resize",sn)}}function hn(e){var t=st.getViewPort().y;function n(t,n){var r;for(var i=0;i<ln.length;i++){if(ln[i]!==e){r=ln[i].parent();while(r&&(r=r.parent())){if(r===e){ln[i].fixed(t).moveBy(0,n).repaint()}}}}}if(e.settings.autofix){if(!e.state.get("fixed")){e._autoFixY=e.layoutRect().y;if(e._autoFixY<t){e.fixed(true).layoutRect({y:0}).repaint();n(true,t-e._autoFixY)}}else{if(e._autoFixY>t){e.fixed(false).layoutRect({y:e._autoFixY}).repaint();n(false,e._autoFixY-t)}}}}function bn(e,t){var n,r=yn.zIndex||65535,i;if(e){fn.push(t)}else{n=fn.length;while(n--){if(fn[n]===t){fn.splice(n,1)}}}if(fn.length){for(n=0;n<fn.length;n++){if(fn[n].modal){r++;i=fn[n]}fn[n].getEl().style.zIndex=r;fn[n].zIndex=r;r++}}var a=ot("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];if(i){ot(a).css("z-index",i.zIndex-1)}else if(a){a.parentNode.removeChild(a);cn=false}yn.currentZIndex=r}var yn=rn.extend({Mixins:[gt,an],init:function(e){var t=this;t._super(e);t._eventsRoot=t;t.classes.add("floatpanel");if(e.autohide){mn();pn();ln.push(t)}if(e.autofix){gn();t.on("move",(function(){hn(this)}))}t.on("postrender show",(function(e){if(e.control===t){var n;var r=t.classPrefix;if(t.modal&&!cn){n=ot("#"+r+"modal-block",t.getContainerElm());if(!n[0]){n=ot('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())}I.setTimeout((function(){n.addClass(r+"in");ot(t.getEl()).addClass(r+"in")}));cn=true}bn(true,t)}}));t.on("show",(function(){t.parents().each((function(e){if(e.state.get("fixed")){t.fixed(true);return false}}))}));if(e.popover){t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>';t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")}t.aria("label",e.ariaLabel);t.aria("labelledby",t._id);t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=st.getViewPort();if(e){t.layoutRect().y-=n.y}else{t.layoutRect().y+=n.y}}t.classes.toggle("fixed",e);t.state.set("fixed",e)}return t},show:function(){var e=this;var t;var n=e._super();t=ln.length;while(t--){if(ln[t]===e){break}}if(t===-1){ln.push(e)}return n},hide:function(){wn(this);bn(false,this);return this._super()},hideAll:function(){yn.hideAll()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented()){e.remove();bn(false,e)}return e},remove:function(){wn(this);this._super()},postRender:function(){var e=this;if(e.settings.bodyRole){this.getEl("body").setAttribute("role",e.settings.bodyRole)}return e._super()}});yn.hideAll=function(){var e=ln.length;while(e--){var t=ln[e];if(t&&t.settings.autohide){t.hide();ln.splice(e,1)}}};function wn(e){var t;t=ln.length;while(t--){if(ln[t]===e){ln.splice(t,1)}}t=fn.length;while(t--){if(fn[t]===e){fn.splice(t,1)}}}var xn=function(e,t){return!!(e&&!t.settings.ui_container)};var Cn=function(e,t,n){var r,i;var o=S.DOM;var u=f(e);if(u){i=o.select(u)[0]}var l=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody();var i=0,a=0;if(t){var u=o.getPos(n),s=o.getPos(t);i=Math.max(0,s.x-u.x);a=Math.max(0,s.y-u.y)}r.fixed(false).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,a)}};var c=function(){if(r){r.show();l();o.addClass(e.getBody(),"mce-edit-focus")}};var d=function(){if(r){r.hide();yn.hideAll();o.removeClass(e.getBody(),"mce-edit-focus")}};var v=function(){if(r){if(!r.visible()){c()}return}r=t.panel=T.create({type:i?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:xn(i,e),border:1,items:[a(e)===false?null:{type:"menubar",border:"0 0 1 0",items:Ie.createMenuButtons(e)},Z.createToolbars(e,s(e))]});X.setUiContainer(e,r);D.fireBeforeRenderUI(e);if(i){r.renderTo(i).reflow()}else{r.renderTo().reflow()}A.addKeys(e,r);c();oe.addContextualToolbars(e);e.on("nodeChange",l);e.on("ResizeWindow",l);e.on("activate",c);e.on("deactivate",d);e.nodeChanged()};e.settings.content_editable=true;e.on("focus",(function(){if(b(e)===false&&n.skinUiCss){o.styleSheetLoader.load(n.skinUiCss,v,v)}else{v()}}));e.on("blur hide",d);e.on("remove",(function(){if(r){r.remove();r=null}}));if(b(e)===false&&n.skinUiCss){o.styleSheetLoader.load(n.skinUiCss,Qe.fireSkinLoaded(e))}else{Qe.fireSkinLoaded(e)()}return{}};var kn={render:Cn};function Sn(e,t){var n=this;var r;var i=Yt.classPrefix;var a;n.show=function(o,u){function s(){if(r){ot(e).append('<div class="'+i+"throbber"+(t?" "+i+"throbber-inline":"")+'"></div>');if(u){u()}}}n.hide();r=true;if(o){a=I.setTimeout(s,o)}else{s()}return n};n.hide=function(){var t=e.lastChild;I.clearTimeout(a);if(t&&t.className.indexOf("throbber")!==-1){t.parentNode.removeChild(t)}r=false;return n}}var Tn=function(e,t){var n;e.on("ProgressState",(function(e){n=n||new Sn(t.panel.getEl("body"));if(e.state){n.show(e.time)}else{n.hide()}}))};var En={setup:Tn};var Nn=function(e,t,n){var r=x(e);if(r){n.skinUiCss=r+"/skin.min.css";e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")}En.setup(e,t);return y(e)?kn.render(e,t,n):at.render(e,t,n)};var Rn={renderUI:Nn};var _n=Yt.extend({Mixins:[gt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div>"+"</div>"},bindStates:function(){var e=this;e.state.on("change:text",(function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}));return e._super()},repaint:function(){var e=this;var t,n;t=e.getEl().style;n=e._layoutRect;t.left=n.x+"px";t.top=n.y+"px";t.zIndex=65535+65535}});var Dn=Yt.extend({init:function(e){var t=this;t._super(e);e=t.settings;t.canFocus=true;if(e.tooltip&&Dn.tooltips!==false){t.on("mouseenter",(function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n",i==="bc-tc");r.classes.toggle("tooltip-nw",i==="bc-tl");r.classes.toggle("tooltip-ne",i==="bc-tr");r.moveRel(t.getEl(),i)}else{r.hide()}}));t.on("mouseleave mousedown click",(function(){t.tooltip().remove();t._tooltip=null}))}t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){if(!this._tooltip){this._tooltip=new _n({type:"tooltip"});X.inheritUiContainer(this,this._tooltip);this._tooltip.renderTo()}return this._tooltip},postRender:function(){var e=this,t=e.settings;e._super();if(!e.parent()&&(t.width||t.height)){e.initLayoutRect();e.repaint()}if(t.autofocus){e.focus()}},bindStates:function(){var e=this;function t(t){e.aria("disabled",t);e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t);e.classes.toggle("active",t)}e.state.on("change:disabled",(function(e){t(e.value)}));e.state.on("change:active",(function(e){n(e.value)}));if(e.state.get("disabled")){t(true)}if(e.state.get("active")){n(true)}return e._super()},remove:function(){this._super();if(this._tooltip){this._tooltip.remove();this._tooltip=null}}});var On=Dn.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e);t.classes.add("progress");if(!t.settings.filter){t.settings.filter=function(e){return Math.round(e)}}},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div class="'+n+'bar-container">'+'<div class="'+n+'bar"></div>'+"</div>"+'<div class="'+n+'text">0%</div>'+"</div>"},postRender:function(){var e=this;e._super();e.value(e.settings.value);return e},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t);e.getEl().lastChild.innerHTML=t+"%";e.getEl().firstChild.firstChild.style.width=t+"%"}e.state.on("change:value",(function(e){t(e.value)}));t(e.state.get("value"));return e._super()}});var Pn=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")};var An=Yt.extend({Mixins:[gt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e);t.maxWidth=e.maxWidth;if(e.text){t.text(e.text)}if(e.icon){t.icon=e.icon}if(e.color){t.color=e.color}if(e.type){t.classes.add("notification-"+e.type)}if(e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton){t.closeButton=false}else{t.classes.add("has-close");t.closeButton=true}if(e.progressBar){t.progressBar=new On}t.on("click",(function(e){if(e.target.className.indexOf(t.classPrefix+"close")!==-1){t.close()}}))},renderHtml:function(){var e=this;var t=e.classPrefix;var n="",r="",i="",a="";if(e.icon){n='<i class="'+t+"ico"+" "+t+"i-"+e.icon+'"></i>'}a=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"');if(e.closeButton){r='<button type="button" class="'+t+'close" aria-hidden="true"></button>'}if(e.progressBar){i=e.progressBar.renderHtml()}return'<div id="'+e._id+'" class="'+e.classes+'"'+a+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;"'+' aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'+"</div>"},postRender:function(){var e=this;I.setTimeout((function(){e.$el.addClass(e.classPrefix+"in");Pn(e,e.state.get("text"))}),100);return e._super()},bindStates:function(){var e=this;e.state.on("change:text",(function(t){e.getEl().firstChild.innerHTML=t.value;Pn(e,t.value)}));if(e.progressBar){e.progressBar.bindStates();e.progressBar.state.on("change:value",(function(t){Pn(e,e.state.get("text"))}))}return e._super()},close:function(){var e=this;if(!e.fire("close").isDefaultPrevented()){e.remove()}return e},repaint:function(){var e=this;var t,n;t=e.getEl().style;n=e._layoutRect;t.left=n.x+"px";t.top=n.y+"px";t.zIndex=65535-1}});function Bn(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};var n=function(){var n=t(e);return st.getSize(n).width};var i=function(e){ye(e,(function(e){e.moveTo(0,0)}))};var a=function(n){if(n.length>0){var r=n.slice(0,1)[0];var i=t(e);r.moveRel(i,"tc-tc");ye(n,(function(e,t){if(t>0){e.moveRel(n[t-1].getEl(),"bc-tc")}}))}};var o=function(e){i(e);a(e)};var u=function(e,t){var i=r.extend(e,{maxWidth:n()});var a=new An(i);a.args=i;if(i.timeout>0){a.timer=setTimeout((function(){a.close();t()}),i.timeout)}a.on("close",(function(){t()}));a.renderTo();return a};var s=function(e){e.close()};var l=function(e){return e.args};return{open:u,close:s,reposition:o,getArgs:l}}var In=[];var Ln="";function Mn(t){var n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0";var r=ot("meta[name=viewport]")[0],i;if(Ue.overrideViewPort===false){return}if(!r){r=e.document.createElement("meta");r.setAttribute("name","viewport");e.document.getElementsByTagName("head")[0].appendChild(r)}i=r.getAttribute("content");if(i&&typeof Ln!=="undefined"){Ln=i}r.setAttribute("content",t?n:Ln)}function Fn(t,n){if(Hn()&&n===false){ot([e.document.documentElement,e.document.body]).removeClass(t+"fullscreen")}}function Hn(){for(var e=0;e<In.length;e++){if(In[e]._fullscreen){return true}}return false}function zn(){if(!Ue.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};I.setInterval((function(){var n=e.window.innerWidth,r=e.window.innerHeight;if(t.w!==n||t.h!==r){t={w:n,h:r};ot(e.window).trigger("resize")}}),100)}function n(){var e;var t=st.getWindowSize();var n;for(e=0;e<In.length;e++){n=In[e].layoutRect();In[e].moveTo(In[e].settings.x||Math.max(0,t.w/2-n.w/2),In[e].settings.y||Math.max(0,t.h/2-n.h/2))}}ot(e.window).on("resize",n)}var Un=yn.extend({modal:true,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e);if(t.isRtl()){t.classes.add("rtl")}t.classes.add("window");t.bodyClasses.add("window-body");t.state.set("fixed",true);if(e.buttons){t.statusbar=new rn({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons});t.statusbar.classes.add("foot");t.statusbar.parent(t)}t.on("click",(function(e){var n=t.classPrefix+"close";if(st.hasClass(e.target,n)||st.hasClass(e.target.parentNode,n)){t.close()}}));t.on("cancel",(function(){t.close()}));t.on("move",(function(e){if(e.control===t){yn.hideAll()}}));t.aria("describedby",t.describedBy||t._id+"-none");t.aria("label",e.title);t._fullscreen=false},recalc:function(){var e=this;var t=e.statusbar;var n,r,i,a;if(e._fullscreen){e.layoutRect(st.getWindowSize());e.layoutRect().contentH=e.layoutRect().innerH}e._super();n=e.layoutRect();if(e.settings.title&&!e._fullscreen){r=n.headerW;if(r>n.w){i=n.x-Math.max(0,r/2);e.layoutRect({w:r,x:i});a=true}}if(t){t.layoutRect({w:e.layoutRect().innerW}).recalc();r=t.layoutRect().minW+n.deltaW;if(r>n.w){i=n.x-Math.max(0,r-n.w);e.layoutRect({w:r,x:i});a=true}}if(a){e.recalc()}},initLayoutRect:function(){var e=this;var t=e._super();var n=0,r;if(e.settings.title&&!e._fullscreen){r=e.getEl("head");var i=st.getSize(r);t.headerW=i.width;t.headerH=i.height;n+=t.headerH}if(e.statusbar){n+=e.statusbar.layoutRect().h}t.deltaH+=n;t.minH+=n;t.h+=n;var a=st.getWindowSize();t.x=e.settings.x||Math.max(0,a.w/2-t.w/2);t.y=e.settings.y||Math.max(0,a.h/2-t.h/2);return t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix;var i=e.settings;var a="",o="",u=i.html;e.preRender();t.preRender(e);if(i.title){a='<div id="'+n+'-head" class="'+r+'window-head">'+'<div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+"</div>"+'<div id="'+n+'-dragh" class="'+r+'dragh"></div>'+'<button type="button" class="'+r+'close" aria-hidden="true">'+'<i class="mce-ico mce-i-remove"></i>'+"</button>"+"</div>"}if(i.url){u='<iframe src="'+i.url+'" tabindex="-1"></iframe>'}if(typeof u==="undefined"){u=t.renderHtml(e)}if(e.statusbar){o=e.statusbar.renderHtml()}return'<div id="'+n+'" class="'+e.classes+'" hidefocus="1">'+'<div class="'+e.classPrefix+'reset" role="application">'+a+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+u+"</div>"+o+"</div>"+"</div>"},fullscreen:function(t){var n=this;var r=e.document.documentElement;var i;var a=n.classPrefix;var o;if(t!==n._fullscreen){ot(e.window).on("resize",(function(){var e;if(n._fullscreen){if(!i){e=(new Date).getTime();var t=st.getWindowSize();n.moveTo(0,0).resizeTo(t.w,t.h);if((new Date).getTime()-e>50){i=true}}else{if(!n._timer){n._timer=I.setTimeout((function(){var e=st.getWindowSize();n.moveTo(0,0).resizeTo(e.w,e.h);n._timer=0}),50)}}}}));o=n.layoutRect();n._fullscreen=t;if(!t){n.borderBox=bt.parseBox(n.settings.border);n.getEl("head").style.display="";o.deltaH+=o.headerH;ot([r,e.document.body]).removeClass(a+"fullscreen");n.classes.remove("fullscreen");n.moveTo(n._initial.x,n._initial.y).resizeTo(n._initial.w,n._initial.h)}else{n._initial={x:o.x,y:o.y,w:o.w,h:o.h};n.borderBox=bt.parseBox("0");n.getEl("head").style.display="none";o.deltaH-=o.headerH+2;ot([r,e.document.body]).addClass(a+"fullscreen");n.classes.add("fullscreen");var u=st.getWindowSize();n.moveTo(0,0).resizeTo(u.w,u.h)}}return n.reflow()},postRender:function(){var e=this;var t;setTimeout((function(){e.classes.add("in");e.fire("open")}),0);e._super();if(e.statusbar){e.statusbar.postRender()}e.focus();this.dragHelper=new tn(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}});e.on("submit",(function(t){if(!t.isDefaultPrevented()){e.close()}}));In.push(e);Mn(true)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this;var t;e.dragHelper.destroy();e._super();if(e.statusbar){this.statusbar.remove()}Fn(e.classPrefix,false);t=In.length;while(t--){if(In[t]===e){In.splice(t,1)}}Mn(In.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});zn();var Wn=Un.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:true,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:true,maxWidth:500,maxHeight:200}};this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n;var r=t.callback||function(){};function i(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close();r(t)}}}switch(t.buttons){case Wn.OK_CANCEL:n=[i("Ok",true,true),i("Cancel",false)];break;case Wn.YES_NO:case Wn.YES_NO_CANCEL:n=[i("Yes",1,true),i("No",0)];if(t.buttons===Wn.YES_NO_CANCEL){n.push(i("Cancel",-1))}break;default:n=[i("Ok",true,true)];break}return new Un({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:true,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){r(false)}}).renderTo(e.document.body).reflow()},alert:function(e,t){if(typeof e==="string"){e={text:e}}e.callback=t;return Wn.msgBox(e)},confirm:function(e,t){if(typeof e==="string"){e={text:e}}e.callback=t;e.buttons=Wn.OK_CANCEL;return Wn.msgBox(e)}}});function jn(t){var n=function(t,n,r){var i;t.title=t.title||" ";t.url=t.url||t.file;if(t.url){t.width=parseInt(t.width||320,10);t.height=parseInt(t.height||240,10)}if(t.body){t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}}if(!t.url&&!t.buttons){t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]}i=new Un(t);i.on("close",(function(){r(i)}));if(t.data){i.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();if(n in t.data){e.value(t.data[n])}}))}))}i.features=t||{};i.params=n||{};i=i.renderTo(e.document.body).reflow();return i};var r=function(e,t,n){var r;r=Wn.alert(e,(function(){t()}));r.on("close",(function(){n(r)}));return r};var i=function(e,t,n){var r;r=Wn.confirm(e,(function(e){t(e)}));r.on("close",(function(){n(r)}));return r};var a=function(e){e.close()};var o=function(e){return e.params};var u=function(e,t){e.params=t};return{open:n,alert:r,confirm:i,close:a,getParams:o,setParams:u}}var Vn=function(e){var t=function(t){return Rn.renderUI(e,this,t)};var n=function(t,n){return ze.resizeTo(e,t,n)};var r=function(t,n){return ze.resizeBy(e,t,n)};var i=function(){return Bn(e)};var a=function(){return jn()};return{renderUI:t,resizeTo:n,resizeBy:r,getNotificationManagerImpl:i,getWindowManagerImpl:a}};var qn={get:Vn};var $n=pt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=r.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t=this;var n=t.settings;var r,i,a,o;r=n.firstControlClass;i=n.lastControlClass;e.each((function(e){e.classes.remove(r).remove(i).add(n.controlClass);if(e.visible()){if(!a){a=e}o=e}}));if(a){a.classes.add(r)}if(o){o.classes.add(i)}},renderHtml:function(e){var t=this;var n="";t.applyClasses(e.items());e.items().each((function(e){n+=e.renderHtml()}));return n},recalc:function(){},postRender:function(){},isNative:function(){return false}});var Kn=$n.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});if(e.recalc){e.recalc()}}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}});var Yn=Dn.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this;var n;t._super(e);e=t.settings;n=t.settings.size;t.on("click mousedown",(function(e){e.preventDefault()}));t.on("touchstart",(function(e){t.fire("click",e);e.preventDefault()}));if(e.subtype){t.classes.add(e.subtype)}if(n){t.classes.add("btn-"+n)}if(e.icon){t.icon(e.icon)}},icon:function(e){if(!arguments.length){return this.state.get("icon")}this.state.set("icon",e);return this},repaint:function(){var e=this.getEl().firstChild;var t;if(e){t=e.style;t.width=t.height="100%"}this._super()},renderHtml:function(){var t=this,n=t._id,r=t.classPrefix;var i=t.state.get("icon"),a;var o=t.state.get("text");var u="";var s;var l=t.settings;a=l.image;if(a){i="none";if(typeof a!=="string"){a=e.window.getSelection?a[0]:a[1]}a=" style=\"background-image: url('"+a+"')\""}else{a=""}if(o){t.classes.add("btn-has-text");u='<span class="'+r+'txt">'+t.encode(o)+"</span>"}i=i?r+"ico "+r+"i-"+i:"";s=typeof l.active==="boolean"?' aria-pressed="'+l.active+'"':"";return'<div id="'+n+'" class="'+t.classes+'" tabindex="-1"'+s+">"+'<button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+u+"</button>"+"</div>"},bindStates:function(){var t=this,n=t.$,r=t.classPrefix+"txt";function i(e){var i=n("span."+r,t.getEl());if(e){if(!i[0]){n("button:first",t.getEl()).append('<span class="'+r+'"></span>');i=n("span."+r,t.getEl())}i.html(t.encode(e))}else{i.remove()}t.classes.toggle("btn-has-text",!!e)}t.state.on("change:text",(function(e){i(e.value)}));t.state.on("change:icon",(function(n){var r=n.value;var a=t.classPrefix;t.settings.icon=r;r=r?a+"ico "+a+"i-"+t.settings.icon:"";var o=t.getEl().firstChild;var u=o.getElementsByTagName("i")[0];if(r){if(!u||u!==o.firstChild){u=e.document.createElement("i");o.insertBefore(u,o.firstChild)}u.className=r}else if(u){o.removeChild(u)}i(t.state.get("text"))}));return t._super()}});var Xn=Yn.extend({init:function(e){var t=this;e=r.extend({text:"Browse...",multiple:false,accept:null},e);t._super(e);t.classes.add("browsebutton");if(e.multiple){t.classes.add("multiple")}},postRender:function(){var e=this;var t=st.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super();ot(t).on("change",(function(t){var n=t.target.files;e.value=function(){if(!n.length){return null}else if(e.settings.multiple){return n}else{return n[0]}};t.preventDefault();if(n.length){e.fire("change",t)}}));ot(t).on("click",(function(e){e.stopPropagation()}));ot(e.getEl("button")).on("click touchstart",(function(e){e.stopPropagation();t.click();e.preventDefault()}));e.getEl().appendChild(t)},remove:function(){ot(this.getEl("button")).off();ot(this.getEl("input")).off();this._super()}});var Gn=Zt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;e.classes.add("btn-group");e.preRender();t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}});var Jn=Dn.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:false},init:function(e){var t=this;t._super(e);t.on("click mousedown",(function(e){e.preventDefault()}));t.on("click",(function(e){e.preventDefault();if(!t.disabled()){t.checked(!t.checked())}}));t.checked(t.settings.checked)},checked:function(e){if(!arguments.length){return this.state.get("checked")}this.state.set("checked",e);return this},value:function(e){if(!arguments.length){return this.checked()}return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span>"+"</div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e);t.aria("checked",e)}t.state.on("change:text",(function(e){t.getEl("al").firstChild.data=t.translate(e.value)}));t.state.on("change:checked change:value",(function(e){t.fire("change");n(e.value)}));t.state.on("change:icon",(function(n){var r=n.value;var i=t.classPrefix;if(typeof r==="undefined"){return t.settings.icon}t.settings.icon=r;r=r?i+"ico "+i+"i-"+t.settings.icon:"";var a=t.getEl().firstChild;var o=a.getElementsByTagName("i")[0];if(r){if(!o||o!==a.firstChild){o=e.document.createElement("i");a.insertBefore(o,a.firstChild)}o.className=r}else if(o){a.removeChild(o)}}));if(t.state.get("checked")){n(true)}return t._super()}});var Zn=tinymce.util.Tools.resolve("tinymce.util.VK");var Qn=Dn.extend({init:function(e){var t=this;t._super(e);e=t.settings;t.classes.add("combobox");t.subinput=true;t.ariaTarget="inp";e.menu=e.menu||e.values;if(e.menu){e.icon="caret"}t.on("click",(function(n){var r=n.target;var i=t.getEl();if(!ot.contains(i,r)&&r!==i){return}while(r&&r!==i){if(r.id&&r.id.indexOf("-open")!==-1){t.fire("action");if(e.menu){t.showMenu();if(n.aria){t.menu.items()[0].focus()}}}r=r.parentNode}}));t.on("keydown",(function(e){var n;if(e.keyCode===13&&e.target.nodeName==="INPUT"){e.preventDefault();t.parents().reverse().each((function(e){if(e.toJSON){n=e;return false}}));t.fire("submit",{data:n.toJSON()})}}));t.on("keyup",(function(e){if(e.target.nodeName==="INPUT"){var n=t.state.get("value");var r=e.target.value;if(r!==n){t.state.set("value",r);t.fire("autocomplete",e)}}}));t.on("mouseover",(function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&e.target.className.indexOf(t.classPrefix+"status")!==-1){var r=t.statusMessage()||"Ok";var i=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n",i==="bc-tc");n.classes.toggle("tooltip-nw",i==="bc-tl");n.classes.toggle("tooltip-ne",i==="bc-tr");n.moveRel(e.target,i)}}))},statusLevel:function(e){if(arguments.length>0){this.state.set("statusLevel",e)}return this.state.get("statusLevel")},statusMessage:function(e){if(arguments.length>0){this.state.set("statusMessage",e)}return this.state.get("statusMessage")},showMenu:function(){var e=this;var t=e.settings;var n;if(!e.menu){n=t.menu||[];if(n.length){n={type:"menu",items:n}}else{n.type=n.type||"menu"}e.menu=T.create(n).parent(e).renderTo(e.getContainerElm());e.fire("createmenu");e.menu.reflow();e.menu.on("cancel",(function(t){if(t.control===e.menu){e.focus()}}));e.menu.on("show hide",(function(t){t.control.items().each((function(t){t.active(t.value()===e.value())}))})).fire("show");e.menu.on("select",(function(t){e.value(t.control.value())}));e.on("focusin",(function(t){if(t.target.tagName.toUpperCase()==="INPUT"){e.menu.hide()}}));e.aria("expanded",true)}e.menu.show();e.menu.layoutRect({w:e.layoutRect().w});e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t=this,n=t.getEl(),r=t.getEl("open"),i=t.layoutRect();var a,o,u=0;var s=n.firstChild;if(t.statusLevel()&&t.statusLevel()!=="none"){u=parseInt(st.getRuntimeStyle(s,"padding-right"),10)-parseInt(st.getRuntimeStyle(s,"padding-left"),10)}if(r){a=i.w-st.getSize(r).width-10}else{a=i.w-10}var l=e.document;if(l.all&&(!l.documentMode||l.documentMode<=8)){o=t.layoutRect().h-2+"px"}ot(s).css({width:a-u,lineHeight:o});t._super();return t},postRender:function(){var e=this;ot(this.getEl("inp")).on("change",(function(t){e.state.set("value",t.target.value);e.fire("change",t)}));return e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix;var i=e.state.get("value")||"";var a,o,u="",s="",l="";if("spellcheck"in n){s+=' spellcheck="'+n.spellcheck+'"'}if(n.maxLength){s+=' maxlength="'+n.maxLength+'"'}if(n.size){s+=' size="'+n.size+'"'}if(n.subtype){s+=' type="'+n.subtype+'"'}l='<i id="'+t+'-status" class="mce-status mce-ico" style="display: none"></i>';if(e.disabled()){s+=' disabled="disabled"'}a=n.icon;if(a&&a!=="caret"){a=r+"ico "+r+"i-"+n.icon}o=e.state.get("text");if(a||o){u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button">'+'<button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+(a!=="caret"?'<i class="'+a+'"></i>':'<i class="'+r+'caret"></i>')+(o?(a?" ":"")+o:"")+"</button>"+"</div>";e.classes.add("has-open")}return'<div id="'+t+'" class="'+e.classes+'">'+'<input id="'+t+'-inp" class="'+r+'textbox" value="'+e.encode(i,false)+'" hidefocus="1"'+s+' placeholder="'+e.encode(n.placeholder)+'" />'+l+u+"</div>"},value:function(e){if(arguments.length){this.state.set("value",e);return this}if(this.state.get("rendered")){this.state.set("value",this.getEl("inp").value)}return this.state.get("value")},showAutoComplete:function(e,t){var n=this;if(e.length===0){n.hideMenu();return}var i=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};if(n.menu){n.menu.items().remove()}else{n.menu=T.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo()}r.each(e,(function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:i(e.value,e.title)})}));n.menu.renderNew();n.hideMenu();n.menu.on("cancel",(function(e){if(e.control.parent()===n.menu){e.stopPropagation();n.focus();n.hideMenu()}}));n.menu.on("select",(function(){n.focus()}));var a=n.layoutRect().w;n.menu.layoutRect({w:a,minW:0,maxW:a});n.menu.repaint();n.menu.reflow();n.menu.show();n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){if(this.menu){this.menu.hide()}},bindStates:function(){var e=this;e.state.on("change:value",(function(t){if(e.getEl("inp").value!==t.value){e.getEl("inp").value=t.value}}));e.state.on("change:disabled",(function(t){e.getEl("inp").disabled=t.value}));e.state.on("change:statusLevel",(function(t){var n=e.getEl("status");var r=e.classPrefix,i=t.value;st.css(n,"display",i==="none"?"none":"");st.toggleClass(n,r+"i-checkmark",i==="ok");st.toggleClass(n,r+"i-warning",i==="warn");st.toggleClass(n,r+"i-error",i==="error");e.classes.toggle("has-status",i!=="none");e.repaint()}));st.on(e.getEl("status"),"mouseleave",(function(){e.tooltip().hide()}));e.on("cancel",(function(t){if(e.menu&&e.menu.visible()){t.stopPropagation();e.hideMenu()}}));var t=function(e,t){if(t&&t.items().length>0){t.items().eq(e)[0].focus()}};e.on("keydown",(function(n){var r=n.keyCode;if(n.target.nodeName==="INPUT"){if(r===Zn.DOWN){n.preventDefault();e.fire("autocomplete");t(0,e.menu)}else if(r===Zn.UP){n.preventDefault();t(-1,e.menu)}}}));return e._super()},remove:function(){ot(this.getEl("inp")).off();if(this.menu){this.menu.remove()}this._super()}});var er=Qn.extend({init:function(e){var t=this;e.spellcheck=false;if(e.onaction){e.icon="none"}t._super(e);t.classes.add("colorbox");t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl("open");var n=t?t.getElementsByTagName("i")[0]:null;if(n){try{n.style.background=e}catch(e){}}},bindStates:function(){var e=this;e.state.on("change:value",(function(t){if(e.state.get("rendered")){e.repaintColor(t.value)}}));return e._super()}});var tr=Yn.extend({showPanel:function(){var e=this,t=e.settings;e.classes.add("opened");if(!e.panel){var n=t.panel;if(n.type){n={layout:"grid",items:n}}n.role=n.role||"dialog";n.popover=true;n.autohide=true;n.ariaRoot=true;e.panel=new yn(n).on("hide",(function(){e.classes.remove("opened")})).on("cancel",(function(t){t.stopPropagation();e.focus();e.hidePanel()})).parent(e).renderTo(e.getContainerElm());e.panel.fire("show");e.panel.reflow()}else{e.panel.show()}var r=["bc-tc","bc-tl","bc-tr"];var i=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"];var a=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?r:i));e.panel.classes.toggle("start",a.substr(-1)==="l");e.panel.classes.toggle("end",a.substr(-1)==="r");var o=a.substr(0,1)==="t";e.panel.classes.toggle("bottom",!o);e.panel.classes.toggle("top",o);e.panel.moveRel(e.getEl(),a)},hidePanel:function(){var e=this;if(e.panel){e.panel.hide()}},postRender:function(){var e=this;e.aria("haspopup",true);e.on("click",(function(t){if(t.control===e){if(e.panel&&e.panel.visible()){e.hidePanel()}else{e.showPanel();e.panel.focus(!!t.aria)}}}));return e._super()},remove:function(){if(this.panel){this.panel.remove();this.panel=null}return this._super()}});var nr=S.DOM;var rr=tr.extend({init:function(e){this._super(e);this.classes.add("splitbtn");this.classes.add("colorbutton")},color:function(e){if(e){this._color=e;this.getEl("preview").style.backgroundColor=e;return this}return this._color},resetColor:function(){this._color=null;this.getEl("preview").style.backgroundColor=null;return this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text");var i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";var a=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";var o="";if(r){e.classes.add("btn-has-text");o='<span class="'+n+'txt">'+e.encode(r)+"</span>"}return'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+o+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;e.on("click",(function(n){if(n.aria&&n.aria.key==="down"){return}if(n.control===e&&!nr.getParent(n.target,"."+e.classPrefix+"open")){n.stopImmediatePropagation();t.call(e,n)}}));delete e.settings.onclick;return e._super()}});var ir=tinymce.util.Tools.resolve("tinymce.util.Color");var ar=Dn.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e=this;var t=e.color();var n,r,i,a,o;r=e.getEl("h");i=e.getEl("hp");a=e.getEl("sv");o=e.getEl("svp");function u(e,t){var n=st.getPos(e);var r,i;r=t.pageX-n.x;i=t.pageY-n.y;r=Math.max(0,Math.min(r/e.clientWidth,1));i=Math.max(0,Math.min(i/e.clientHeight,1));return{x:r,y:i}}function s(t,n){var r=(360-t.h)/360;st.css(i,{top:r*100+"%"});if(!n){st.css(o,{left:t.s+"%",top:100-t.v+"%"})}a.style.background=ir({s:100,v:100,h:t.h}).toHex();e.color().parse({s:t.s,v:t.v,h:t.h})}function l(t){var r;r=u(a,t);n.s=r.x*100;n.v=(1-r.y)*100;s(n);e.fire("change")}function f(i){var a;a=u(r,i);n=t.toHsv();n.h=(1-a.y)*360;s(n,true);e.fire("change")}e._repaint=function(){n=t.toHsv();s(n)};e._super();e._svdraghelper=new tn(e._id+"-sv",{start:l,drag:l});e._hdraghelper=new tn(e._id+"-h",{start:f,drag:f});e._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(arguments.length){t.color().parse(e);if(t._rendered){t._repaint()}}else{return t.color().toHex()}},color:function(){if(!this._color){this._color=ir()}return this._color},renderHtml:function(){var e=this;var t=e._id;var n=e.classPrefix;var r;var i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";function a(){var e,t,r="",a,o;a="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=";o=i.split(",");for(e=0,t=o.length-1;e<t;e++){r+='<div class="'+n+'colorpicker-h-chunk" style="'+"height:"+100/t+"%;"+a+o[e]+",endColorstr="+o[e+1]+");"+"-ms-"+a+o[e]+",endColorstr="+o[e+1]+")"+'"></div>'}return r}var o="background: -ms-linear-gradient(top,"+i+");"+"background: linear-gradient(to bottom,"+i+");";r='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="'+o+'">'+a()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div>'+"</div>";return'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-sv" class="'+n+'colorpicker-sv">'+'<div class="'+n+'colorpicker-overlay1">'+'<div class="'+n+'colorpicker-overlay2">'+'<div id="'+t+'-svp" class="'+n+'colorpicker-selector1">'+'<div class="'+n+'colorpicker-selector2"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+r+"</div>"}});var or=Dn.extend({init:function(e){var t=this;e=r.extend({height:100,text:"Drop an image here",multiple:false,accept:null},e);t._super(e);t.classes.add("dropzone");if(e.multiple){t.classes.add("multiple")}},renderHtml:function(){var e=this;var t,n;var r=e.settings;t={id:e._id,hidefocus:"1"};n=st.create("div",t,"<span>"+this.translate(r.text)+"</span>");if(r.height){st.css(n,"height",r.height+"px")}if(r.width){st.css(n,"width",r.width+"px")}n.className=e.classes;return n.outerHTML},postRender:function(){var e=this;var t=function(t){t.preventDefault();e.classes.toggle("dragenter");e.getEl().className=e.classes};var n=function(t){var n=e.settings.accept;if(typeof n!=="string"){return t}var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return r.grep(t,(function(e){return i.test(e.name)}))};e._super();e.$el.on("dragover",(function(e){e.preventDefault()}));e.$el.on("dragenter",t);e.$el.on("dragleave",t);e.$el.on("drop",(function(t){t.preventDefault();if(e.state.get("disabled")){return}var r=n(t.dataTransfer.files);e.value=function(){if(!r.length){return null}else if(e.settings.multiple){return r}else{return r[0]}};if(r.length){e.fire("change",t)}}))},remove:function(){this.$el.off();this._super()}});var ur=Dn.extend({init:function(e){var t=this;if(!e.delimiter){e.delimiter=""}t._super(e);t.classes.add("path");t.canFocus=true;t.on("click",(function(e){var n;var r=e.target;if(n=r.getAttribute("data-index")){t.fire("select",{value:t.row()[n],index:n})}}));t.row(t.settings.row)},focus:function(){var e=this;e.getEl().firstChild.focus();return e},row:function(e){if(!arguments.length){return this.state.get("row")}this.state.set("row",e);return this},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;e.state.on("change:row",(function(t){e.innerHtml(e._getDataPathHtml(t.value))}));return e._super()},_getDataPathHtml:function(e){var t=this;var n=e||[];var r,i,a="";var o=t.classPrefix;for(r=0,i=n.length;r<i;r++){a+=(r>0?'<div class="'+o+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(r===i-1?" "+o+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+t._id+"-"+r+'" aria-level="'+(r+1)+'">'+n[r].name+"</div>"}if(!a){a='<div class="'+o+'path-item"></div>'}return a}});var sr=ur.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(e.nodeType===1){if(e.nodeName==="BR"||!!e.getAttribute("data-mce-bogus")){return true}if(e.getAttribute("data-mce-type")==="bookmark"){return true}}return false}if(t.settings.elementpath!==false){e.on("select",(function(e){t.focus();t.selection.select(this.row()[e.index].element);t.nodeChanged()}));t.on("nodeChange",(function(r){var i=[];var a=r.parents;var o=a.length;while(o--){if(a[o].nodeType===1&&!n(a[o])){var u=t.fire("ResolveName",{name:a[o].nodeName.toLowerCase(),target:a[o]});if(!u.isDefaultPrevented()){i.push({name:u.name,element:a[o]})}if(u.isPropagationStopped()){break}}}e.row(i)}))}return e._super()}});var lr=Zt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;e.classes.add("formitem");t.preRender(e);return'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}});var fr=Zt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();if(!e.settings.formItemDefaults){e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}}t.each((function(t){var n;var i=t.settings.label;if(i){n=new lr(r.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults));n.type="formitem";t.aria("labelledby",t._id+"-l");if(typeof t.settings.flex==="undefined"){t.settings.flex=1}e.replace(t,n);n.add(t)}}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super();e.fromJSON(e.settings.data)},bindStates:function(){var e=this;e._super();function t(){var t=0;var n=[];var r,i,a;if(e.settings.labelGapCalc===false){return}if(e.settings.labelGapCalc==="children"){a=e.find("formitem")}else{a=e.items()}a.filter("formitem").each((function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t;n.push(r)}));i=e.settings.labelGap||0;r=n.length;while(r--){n[r].settings.minWidth=t+i}}e.on("show",t);t()}});var cr=fr.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;e.preRender();t.preRender(e);return'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}});var dr=0;var vr=function(e){var t=new Date;var n=t.getTime();var r=Math.floor(Math.random()*1e9);dr++;return e+"_"+r+dr+String(n)};var mr=function(t,n){var r=n||e.document;var i=r.createElement("div");i.innerHTML=t;if(!i.hasChildNodes()||i.childNodes.length>1){e.console.error("HTML does not have a single root node",t);throw new Error("HTML must have a single root node")}return hr(i.childNodes[0])};var gr=function(t,n){var r=n||e.document;var i=r.createElement(t);return hr(i)};var pr=function(t,n){var r=n||e.document;var i=r.createTextNode(t);return hr(i)};var hr=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:M(e)}};var br=function(e,t,n){var r=e.dom();return V.from(r.elementFromPoint(t,n)).map(hr)};var yr={fromHtml:mr,fromTag:gr,fromText:pr,fromDom:hr,fromPoint:br};var wr=function(e){var t=false;var n;return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}if(!t){t=true;n=e.apply(null,r)}return n}};var xr=e.Node.ATTRIBUTE_NODE;var Cr=e.Node.CDATA_SECTION_NODE;var kr=e.Node.COMMENT_NODE;var Sr=e.Node.DOCUMENT_NODE;var Tr=e.Node.DOCUMENT_TYPE_NODE;var Er=e.Node.DOCUMENT_FRAGMENT_NODE;var Nr=e.Node.ELEMENT_NODE;var Rr=e.Node.TEXT_NODE;var _r=e.Node.PROCESSING_INSTRUCTION_NODE;var Dr=e.Node.ENTITY_REFERENCE_NODE;var Or=e.Node.ENTITY_NODE;var Pr=e.Node.NOTATION_NODE;var Ar=typeof e.window!=="undefined"?e.window:Function("return this;")();var Br=function(e,t){var n=t!==undefined&&t!==null?t:Ar;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var Ir=function(e,t){var n=e.split(".");return Br(n,t)};var Lr=function(e,t){return Ir(e,t)};var Mr=function(e,t){var n=Lr(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};var Fr={getOrDie:Mr};var Hr=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};ye(e,(function(e,n){r[e]=M(t[n])}));return r}};var zr=function(){var e=Fr.getOrDie("Node");return e};var Ur=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var Wr=function(e,t){return Ur(e,t,zr().DOCUMENT_POSITION_PRECEDING)};var jr=function(e,t){return Ur(e,t,zr().DOCUMENT_POSITION_CONTAINED_BY)};var Vr={documentPositionPreceding:Wr,documentPositionContainedBy:jr};var qr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var $r=function(e,t){var n=qr(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return Xr(r(1),r(2))};var Kr=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return Yr()}return $r(e,n)};var Yr=function(){return Xr(0,0)};var Xr=function(e,t){return{major:e,minor:t}};var Gr={nu:Xr,detect:Kr,unknown:Yr};var Jr="Edge";var Zr="Chrome";var Qr="IE";var ei="Opera";var ti="Firefox";var ni="Safari";var ri=function(e,t){return function(){return t===e}};var ii=function(){return ai({current:undefined,version:Gr.unknown()})};var ai=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:ri(Jr,t),isChrome:ri(Zr,t),isIE:ri(Qr,t),isOpera:ri(ei,t),isFirefox:ri(ti,t),isSafari:ri(ni,t)}};var oi={unknown:ii,nu:ai,edge:M(Jr),chrome:M(Zr),ie:M(Qr),opera:M(ei),firefox:M(ti),safari:M(ni)};var ui="Windows";var si="iOS";var li="Android";var fi="Linux";var ci="OSX";var di="Solaris";var vi="FreeBSD";var mi=function(e,t){return function(){return t===e}};var gi=function(){return pi({current:undefined,version:Gr.unknown()})};var pi=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:mi(ui,t),isiOS:mi(si,t),isAndroid:mi(li,t),isOSX:mi(ci,t),isLinux:mi(fi,t),isSolaris:mi(di,t),isFreeBSD:mi(vi,t)}};var hi={unknown:gi,nu:pi,windows:M(ui),ios:M(si),android:M(li),linux:M(fi),osx:M(ci),solaris:M(di),freebsd:M(vi)};var bi=function(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var i=e.isiOS()&&!r;var a=e.isAndroid()&&e.version.major===3;var o=e.isAndroid()&&e.version.major===4;var u=r||a||o&&/mobile/i.test(n)===true;var s=e.isiOS()||e.isAndroid();var l=s&&!u;var f=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:M(r),isiPhone:M(i),isTablet:M(u),isPhone:M(l),isTouch:M(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:M(f)}};var yi=function(e,t){var n=String(t).toLowerCase();return Ce(e,(function(e){return e.search(n)}))};var wi=function(e,t){return yi(e,t).map((function(e){var n=Gr.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var xi=function(e,t){return yi(e,t).map((function(e){var n=Gr.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Ci={detectBrowser:wi,detectOs:xi};var ki=function(e,t){return e.indexOf(t)!==-1};var Si=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var Ti=function(e){return function(t){return ki(t,e)}};var Ei=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ki(e,"edge/")&&ki(e,"chrome")&&ki(e,"safari")&&ki(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Si],search:function(e){return ki(e,"chrome")&&!ki(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ki(e,"msie")||ki(e,"trident")}},{name:"Opera",versionRegexes:[Si,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ti("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ti("firefox")},{name:"Safari",versionRegexes:[Si,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ki(e,"safari")||ki(e,"mobile/"))&&ki(e,"applewebkit")}}];var Ni=[{name:"Windows",search:Ti("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ki(e,"iphone")||ki(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ti("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ti("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ti("linux"),versionRegexes:[]},{name:"Solaris",search:Ti("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ti("freebsd"),versionRegexes:[]}];var Ri={browsers:M(Ei),oses:M(Ni)};var _i=function(e){var t=Ri.browsers();var n=Ri.oses();var r=Ci.detectBrowser(t,e).fold(oi.unknown,oi.nu);var i=Ci.detectOs(n,e).fold(hi.unknown,hi.nu);var a=bi(i,r,e);return{browser:r,os:i,deviceType:a}};var Di={detect:_i};var Oi=wr((function(){var t=e.navigator.userAgent;return Di.detect(t)}));var Pi={detect:Oi};var Ai=Nr;var Bi=Sr;var Ii=function(e){return e.nodeType!==Ai&&e.nodeType!==Bi||e.childElementCount===0};var Li=function(t,n){var r=n===undefined?e.document:n.dom();return Ii(r)?[]:be(r.querySelectorAll(t),yr.fromDom)};var Mi=function(t,n){var r=n===undefined?e.document:n.dom();return Ii(r)?V.none():V.from(r.querySelector(t)).map(yr.fromDom)};var Fi=function(e,t){var n=e.dom();var r=t.dom();return n===r?false:n.contains(r)};var Hi=function(e,t){return Vr.documentPositionContainedBy(e.dom(),t.dom())};var zi=Pi.detect().browser;var Ui=zi.isIE()?Hi:Fi;var Wi=Hr("element","offset");var ji=function(e,t){return Li(t,e)};var Vi=r.trim;var qi=function(e){return function(t){if(t&&t.nodeType===1){if(t.contentEditable===e){return true}if(t.getAttribute("data-mce-contenteditable")===e){return true}}return false}};var $i=qi("true");var Ki=qi("false");var Yi=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}};var Xi=function(e){while(e=e.parentNode){var t=e.contentEditable;if(t&&t!=="inherit"){return $i(e)}}return false};var Gi=function(e,t){return be(ji(yr.fromDom(t),e),(function(e){return e.dom()}))};var Ji=function(e){return e.innerText||e.textContent};var Zi=function(e){return e.id?e.id:vr("h")};var Qi=function(e){return e&&e.nodeName==="A"&&(e.id||e.name)};var ea=function(e){return Qi(e)&&na(e)};var ta=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)};var na=function(e){return Xi(e)&&!Ki(e)};var ra=function(e){return ta(e)&&na(e)};var ia=function(e){return ta(e)?parseInt(e.nodeName.substr(1),10):0};var aa=function(e){var t=Zi(e);var n=function(){e.id=t};return Yi("header",Ji(e),"#"+t,ia(e),n)};var oa=function(e){var t=e.id||e.name;var n=Ji(e);return Yi("anchor",n?n:"#"+t,"#"+t,0,L)};var ua=function(e){return be(we(e,ra),aa)};var sa=function(e){return be(we(e,ea),oa)};var la=function(e){var t=Gi("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t};var fa=function(e){return Vi(e.title).length>0};var ca=function(e){var t=la(e);return we(ua(t).concat(sa(t)),fa)};var da={find:ca};var va=function(){return window.tinymce?window.tinymce.activeEditor:n.activeEditor};var ma={};var ga=5;var pa=function(){ma={}};var ha=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}};var ba=function(e){return r.map(e,ha)};var ya=function(e,t){return{title:e,value:{title:e,url:t,attach:L}}};var wa=function(e,t){var n=he(t,(function(t){return t.url===e}));return!n};var xa=function(e,t,n){var r=t in e?e[t]:n;return r===false?null:r};var Ca=function(e,t,n,i){var a={title:"-"};var o=function(e){var i=e.hasOwnProperty(n)?e[n]:[];var a=we(i,(function(e){return wa(e,t)}));return r.map(a,(function(e){return{title:e,value:{title:e,url:e,attach:L}}}))};var u=function(e){var n=we(t,(function(t){return t.type===e}));return ba(n)};var s=function(){var e=u("anchor");var t=xa(i,"anchor_top","#top");var n=xa(i,"anchor_bottom","#bottom");if(t!==null){e.unshift(ya("<top>",t))}if(n!==null){e.push(ya("<bottom>",n))}return e};var l=function(e){return xe(e,(function(e,t){var n=e.length===0||t.length===0;return n?e.concat(t):e.concat(a,t)}),[])};if(i.typeahead_urls===false){return[]}return n==="file"?l([Sa(e,o(ma)),Sa(e,u("header")),Sa(e,s())]):Sa(e,o(ma))};var ka=function(e,t){var n=ma[t];if(!/^https?/.test(e)){return}if(n){if(pe(n,e).isNone()){ma[t]=n.slice(0,ga).concat(e)}}else{ma[t]=[e]}};var Sa=function(e,t){var n=e.toLowerCase();var i=r.grep(t,(function(e){return e.title.toLowerCase().indexOf(n)!==-1}));return i.length===1&&i[0].title===e?[]:i};var Ta=function(e){var t=e.title;return t.raw?t.raw:t};var Ea=function(e,t,n,r){var i=function(i){var a=da.find(n);var o=Ca(i,a,r,t);e.showAutoComplete(o,i)};e.on("autocomplete",(function(){i(e.value())}));e.on("selectitem",(function(t){var n=t.value;e.value(n.url);var i=Ta(n);if(r==="image"){e.fire("change",{meta:{alt:i,attach:n.attach}})}else{e.fire("change",{meta:{text:i,attach:n.attach}})}e.focus()}));e.on("click",(function(t){if(e.value().length===0&&t.target.nodeName==="INPUT"){i("")}}));e.on("PostRender",(function(){e.getRoot().on("submit",(function(t){if(!t.isDefaultPrevented()){ka(e.value(),r)}}))}))};var Na=function(e){var t=e.status,n=e.message;if(t==="valid"){return{status:"ok",message:n}}else if(t==="unknown"){return{status:"warn",message:n}}else if(t==="invalid"){return{status:"warn",message:n}}else{return{status:"none",message:""}}};var Ra=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var i=function(t){if(t.length===0){e.statusLevel("none");return}r({url:t,type:n},(function(t){var n=Na(t);e.statusMessage(n.message);e.statusLevel(n.status)}))};e.state.on("change:value",(function(e){i(e.value)}))}};var _a=Qn.extend({Statics:{clearHistory:pa},init:function(e){var t=this,n=va(),i=n.settings;var a,o,u;var s=e.filetype;e.spellcheck=false;u=i.file_picker_types||i.file_browser_callback_types;if(u){u=r.makeMap(u,/[, ]/)}if(!u||u[s]){o=i.file_picker_callback;if(o&&(!u||u[s])){a=function(){var e=t.fire("beforecall").meta;e=r.extend({filetype:s},e);o.call(n,(function(e,n){t.value(e).fire("change",{meta:n})}),t.value(),e)}}else{o=i.file_browser_callback;if(o&&(!u||u[s])){a=function(){o(t.getEl("inp").id,t.value(),s,window)}}}}if(a){e.icon="browse";e.onaction=a}t._super(e);t.classes.add("filepicker");Ea(t,i,n.getBody(),s);Ra(t,i,s)}});var Da=Kn.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom});if(e.recalc){e.recalc()}}))}});var Oa=Kn.extend({recalc:function(e){var t,n,r,i,a,o,u,s,l,f,c,d;var v,m,g,p;var h=[];var b,y,w,x,C,k;var S,T,E,N,R,_,D,O;var P,A,B,I,L,M;var F,H;var z=Math.max,U=Math.min;r=e.items().filter(":visible");i=e.layoutRect();a=e.paddingBox;o=e.settings;d=e.isRtl()?o.direction||"row-reversed":o.direction;u=o.align;s=e.isRtl()?o.pack||"end":o.pack;l=o.spacing||0;if(d==="row-reversed"||d==="column-reverse"){r=r.set(r.toArray().reverse());d=d.split("-")[0]}if(d==="column"){E="y";S="h";T="minH";N="maxH";_="innerH";R="top";D="deltaH";O="contentH";L="left";B="w";P="x";A="innerW";I="minW";M="right";F="deltaW";H="contentW"}else{E="x";S="w";T="minW";N="maxW";_="innerW";R="left";D="deltaW";O="contentW";L="top";B="h";P="y";A="innerH";I="minH";M="bottom";F="deltaH";H="contentH"}c=i[_]-a[R]-a[R];k=f=0;for(t=0,n=r.length;t<n;t++){v=r[t];m=v.layoutRect();g=v.settings;p=g.flex;c-=t<n-1?l:0;if(p>0){f+=p;if(m[N]){h.push(v)}m.flex=p}c-=m[T];b=a[L]+m[I]+a[M];if(b>k){k=b}}x={};if(c<0){x[T]=i[T]-c+i[D]}else{x[T]=i[_]-c+i[D]}x[I]=k+i[F];x[O]=i[_]-c;x[H]=k;x.minW=U(x.minW,i.maxW);x.minH=U(x.minH,i.maxH);x.minW=z(x.minW,i.startMinWidth);x.minH=z(x.minH,i.startMinHeight);if(i.autoResize&&(x.minW!==i.minW||x.minH!==i.minH)){x.w=x.minW;x.h=x.minH;e.layoutRect(x);this.recalc(e);if(e._lastRect===null){var W=e.parent();if(W){W._lastRect=null;W.recalc()}}return}w=c/f;for(t=0,n=h.length;t<n;t++){v=h[t];m=v.layoutRect();y=m[N];b=m[T]+m.flex*w;if(b>y){c-=m[N]-m[T];f-=m.flex;m.flex=0;m.maxFlexSize=y}else{m.maxFlexSize=0}}w=c/f;C=a[R];x={};if(f===0){if(s==="end"){C=c+a[R]}else if(s==="center"){C=Math.round(i[_]/2-(i[_]-c)/2)+a[R];if(C<0){C=a[R]}}else if(s==="justify"){C=a[R];l=Math.floor(c/(r.length-1))}}x[P]=a[L];for(t=0,n=r.length;t<n;t++){v=r[t];m=v.layoutRect();b=m.maxFlexSize||m[T];if(u==="center"){x[P]=Math.round(i[A]/2-m[B]/2)}else if(u==="stretch"){x[B]=z(m[I]||0,i[A]-a[L]-a[M]);x[P]=a[L]}else if(u==="end"){x[P]=i[A]-m[B]-a.top}if(m.flex>0){b+=m.flex*w}x[S]=b;x[E]=C;v.layoutRect(x);if(v.recalc){v.recalc()}C+=b+l}}});var Pa=$n.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){if(e.recalc){e.recalc()}}))},isNative:function(){return true}});var Aa=function(e,t){return Mi(t,e)};var Ba=function(e,t){return function(){e.execCommand("mceToggleFormat",false,t)}};var Ia=function(e,t,n){var r=function(e){n(e,t)};if(e.formatter){e.formatter.formatChanged(t,r)}else{e.on("init",(function(){e.formatter.formatChanged(t,r)}))}};var La=function(e,t){return function(n){Ia(e,t,(function(e){n.control.active(e)}))}};var Ma=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"];var n="alignleft";var i=[{text:"Left",icon:"alignleft",onclick:Ba(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Ba(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Ba(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Ba(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:i});e.addButton("align",{type:"menubutton",icon:n,menu:i,onShowMenu:function(n){var i=n.control.menu;r.each(t,(function(t,n){i.items().eq(n).each((function(n){return n.active(e.formatter.match(t))}))}))},onPostRender:function(i){var a=i.control;r.each(t,(function(t,r){Ia(e,t,(function(e){a.icon(n);if(e){a.icon(t)}}))}))}});r.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(t,n){e.addButton(n,{active:false,tooltip:t[0],cmd:t[1],onPostRender:La(e,n)})}))};var Fa={register:Ma};var Ha=function(e){return e?e.split(",")[0]:""};var za=function(e,t){var n=t?t.toLowerCase():"";var i;r.each(e,(function(e){if(e.value.toLowerCase()===n){i=e.value}}));r.each(e,(function(e){if(!i&&Ha(e.value).toLowerCase()===Ha(n).toLowerCase()){i=e.value}}));return i};var Ua=function(e,t){return function(){var n=this;n.state.set("value",null);e.on("init nodeChange",(function(r){var i=e.queryCommandValue("FontName");var a=za(t,i);n.value(a?a:null);if(!a&&i){n.text(Ha(i))}}))}};var Wa=function(e){e=e.replace(/;$/,"").split(";");var t=e.length;while(t--){e[t]=e[t].split("=")}return e};var ja=function(e){var t="Andale Mono=andale mono,monospace;"+"Arial=arial,helvetica,sans-serif;"+"Arial Black=arial black,sans-serif;"+"Book Antiqua=book antiqua,palatino,serif;"+"Comic Sans MS=comic sans ms,sans-serif;"+"Courier New=courier new,courier,monospace;"+"Georgia=georgia,palatino,serif;"+"Helvetica=helvetica,arial,sans-serif;"+"Impact=impact,sans-serif;"+"Symbol=symbol;"+"Tahoma=tahoma,arial,helvetica,sans-serif;"+"Terminal=terminal,monaco,monospace;"+"Times New Roman=times new roman,times,serif;"+"Trebuchet MS=trebuchet ms,geneva,sans-serif;"+"Verdana=verdana,geneva,sans-serif;"+"Webdings=webdings;"+"Wingdings=wingdings,zapf dingbats";var n=Wa(e.settings.font_formats||t);return r.map(n,(function(e){return{text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")===-1?"font-family:"+e[1]:""}}))};var Va=function(e){e.addButton("fontselect",(function(){var t=ja(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:true,onPostRender:Ua(e,t),onselect:function(t){if(t.control.settings.value){e.execCommand("FontName",false,t.control.settings.value)}}}}))};var qa=function(e){Va(e)};var $a={register:qa};var Ka=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n};var Ya=function(e,t){if(/[0-9.]+px$/.test(e)){return Ka(parseInt(e,10)*72/96,t||0)+"pt"}return e};var Xa=function(e,t,n){var i;r.each(e,(function(e){if(e.value===n){i=n}else if(e.value===t){i=t}}));return i};var Ga=function(e,t){return function(){var n=this;e.on("init nodeChange",(function(r){var i,a,o,u;i=e.queryCommandValue("FontSize");if(i){for(o=3;!u&&o>=0;o--){a=Ya(i,o);u=Xa(t,a,i)}}n.value(u?u:null);if(!u){n.text(a)}}))}};var Ja=function(e){var t="8pt 10pt 12pt 14pt 18pt 24pt 36pt";var n=e.settings.fontsize_formats||t;return r.map(n.split(" "),(function(e){var t=e,n=e;var r=e.split("=");if(r.length>1){t=r[0];n=r[1]}return{text:t,value:n}}))};var Za=function(e){e.addButton("fontsizeselect",(function(){var t=Ja(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:true,onPostRender:Ga(e,t),onclick:function(t){if(t.control.settings.value){e.execCommand("FontSize",false,t.control.settings.value)}}}}))};var Qa=function(e){Za(e)};var eo={register:Qa};var to=function(e,t){var n=t.length;r.each(t,(function(t){if(t.menu){t.hidden=to(e,t.menu)===0}var r=t.format;if(r){t.hidden=!e.formatter.canApply(r)}if(t.hidden){n--}}));return n};var no=function(e,t){var n=t.items().length;t.items().each((function(t){if(t.menu){t.visible(no(e,t.menu)>0)}if(!t.menu&&t.settings.menu){t.visible(to(e,t.settings.menu)>0)}var r=t.settings.format;if(r){t.visible(e.formatter.canApply(r))}if(!t.visible()){n--}}));return n};var ro=function(e){var t=0;var n=[];var i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];var a=function(e){var i=[];if(!e){return}r.each(e,(function(e){var r={text:e.title,icon:e.icon};if(e.items){r.menu=a(e.items)}else{var o=e.format||"custom"+t++;if(!e.format){e.name=o;n.push(e)}r.format=o;r.cmd=e.cmd}i.push(r)}));return i};var o=function(){var t;if(e.settings.style_formats_merge){if(e.settings.style_formats){t=a(i.concat(e.settings.style_formats))}else{t=a(i)}}else{t=a(e.settings.style_formats||i)}return t};e.on("init",(function(){r.each(n,(function(t){e.formatter.register(t.name,t)}))}));return{type:"menu",items:o(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:true,textStyle:function(){if(this.settings.format){return e.formatter.getCssText(this.settings.format)}},onPostRender:function(){var t=this;t.parent().on("show",(function(){var n,r;n=t.settings.format;if(n){t.disabled(!e.formatter.canApply(n));t.active(e.formatter.match(n))}r=t.settings.cmd;if(r){t.active(e.queryCommandState(r))}}))},onclick:function(){if(this.settings.format){Ba(e,this.settings.format)()}if(this.settings.cmd){e.execCommand(this.settings.cmd)}}}}};var io=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})};var ao=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){if(e.settings.style_formats_autohide){no(e,this.menu)}}})};var oo=function(e){var t=ro(e);io(e,t);ao(e,t)};var uo={register:oo};var so="Paragraph=p;"+"Heading 1=h1;"+"Heading 2=h2;"+"Heading 3=h3;"+"Heading 4=h4;"+"Heading 5=h5;"+"Heading 6=h6;"+"Preformatted=pre";var lo=function(e){e=e.replace(/;$/,"").split(";");var t=e.length;while(t--){e[t]=e[t].split("=")}return e};var fo=function(e,t,n){return function(){var i=this;e.on("nodeChange",(function(a){var o=e.formatter;var u=null;r.each(a.parents,(function(e){r.each(t,(function(t){if(n){if(o.matchNode(e,n,{value:t.value})){u=t.value}}else{if(o.matchNode(e,t.value)){u=t.value}}if(u){return false}}));if(u){return false}}));i.value(u)}))}};var co=function(e,t){return function(){var n=[];r.each(t,(function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}));return{type:"listbox",text:t[0][0],values:n,fixedWidth:true,onselect:function(t){if(t.control){var n=t.control.value();Ba(e,n)()}},onPostRender:fo(e,n)}}};var vo=function(e,t){return r.map(t,(function(t){return{text:t[0],onclick:Ba(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}}))};var mo=function(e){var t=lo(e.settings.block_formats||so);e.addMenuItem("blockformats",{text:"Blocks",menu:vo(e,t)});e.addButton("formatselect",co(e,t))};var go={register:mo};var po=function(e,t){var n,i;if(typeof t==="string"){i=t.split(" ")}else if(r.isArray(t)){return Se(r.map(t,(function(t){return po(e,t)})))}n=r.grep(i,(function(t){return t==="|"||t in e.menuItems}));return r.map(n,(function(t){return t==="|"?{text:"-"}:e.menuItems[t]}))};var ho=function(e){return e&&e.text==="-"};var bo=function(e){var t=we(e,(function(t,n){return!ho(t)||!ho(e[n-1])}));return we(t,(function(e,n){return!ho(e)||n>0&&n<t.length-1}))};var yo=function(e,t){var n=[{text:"-"}];var i=r.grep(e.menuItems,(function(e){return e.context===t}));r.each(i,(function(e){if(e.separator==="before"){n.push({text:"|"})}if(e.prependToContext){n.unshift(e)}else{n.push(e)}if(e.separator==="after"){n.push({text:"|"})}}));return n};var wo=function(e){var t=e.settings.insert_button_items;if(t){return bo(po(e,t))}else{return bo(yo(e,"insert"))}};var xo=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(wo(e));this.menu.renderNew()}})};var Co=function(e){xo(e)};var ko={register:Co};var So=function(e){r.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(t,n){e.addButton(n,{active:false,tooltip:t,onPostRender:La(e,n),onclick:Ba(e,n)})}))};var To=function(e){r.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}))};var Eo=function(e){r.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(t,n){e.addButton(n,{active:false,tooltip:t[0],cmd:t[1],onPostRender:La(e,n)})}))};var No=function(e){So(e);To(e);Eo(e)};var Ro=function(e){r.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}));e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Ba(e,"code")})};var _o=function(e){No(e);Ro(e)};var Do={register:_o};var Oo=function(e,t){return function(){var n=this;var r=function(){var n=t==="redo"?"hasRedo":"hasUndo";return e.undoManager?e.undoManager[n]():false};n.disabled(!r());e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(e.readonly||!r())}))}};var Po=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Oo(e,"undo"),cmd:"undo"});e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Oo(e,"redo"),cmd:"redo"})};var Ao=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:Oo(e,"undo"),cmd:"undo"});e.addButton("redo",{tooltip:"Redo",onPostRender:Oo(e,"redo"),cmd:"redo"})};var Bo=function(e){Po(e);Ao(e)};var Io={register:Bo};var Lo=function(e){return function(){var t=this;e.on("VisualAid",(function(e){t.active(e.hasVisual)}));t.active(e.hasVisual)}};var Mo=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:true,onPostRender:Lo(e),cmd:"mceToggleVisualAid"})};var Fo=function(e){Mo(e)};var Ho={register:Fo};var zo=function(){Dn.tooltips=!Ue.iOS;Yt.translate=function(e){return n.translate(e)}};var Uo=function(t){if(t.settings.ui_container){Ue.container=Aa(yr.fromDom(e.document.body),t.settings.ui_container).fold(M(null),(function(e){return e.dom()}))}};var Wo=function(e){if(e.rtl){Yt.rtl=true}};var jo=function(e){e.on("mousedown progressstate",(function(){yn.hideAll()}))};var Vo=function(e){Wo(e);jo(e);Uo(e);zo();go.register(e);Fa.register(e);Do.register(e);Io.register(e);eo.register(e);$a.register(e);uo.register(e);Ho.register(e);ko.register(e)};var qo={setup:Vo};var $o=Kn.extend({recalc:function(e){var t,n,r,i,a,o,u,s,l,f,c,d,v,m,g,p,h,b,y,w,x,C,k;var S=[];var T=[];var E,N,R,_,D,O;t=e.settings;i=e.items().filter(":visible");a=e.layoutRect();r=t.columns||Math.ceil(Math.sqrt(i.length));n=Math.ceil(i.length/r);b=t.spacingH||t.spacing||0;y=t.spacingV||t.spacing||0;w=t.alignH||t.align;x=t.alignV||t.align;p=e.paddingBox;D="reverseRows"in t?t.reverseRows:e.isRtl();if(w&&typeof w==="string"){w=[w]}if(x&&typeof x==="string"){x=[x]}for(c=0;c<r;c++){S.push(0)}for(d=0;d<n;d++){T.push(0)}for(d=0;d<n;d++){for(c=0;c<r;c++){f=i[d*r+c];if(!f){break}l=f.layoutRect();E=l.minW;N=l.minH;S[c]=E>S[c]?E:S[c];T[d]=N>T[d]?N:T[d]}}R=a.innerW-p.left-p.right;for(C=0,c=0;c<r;c++){C+=S[c]+(c>0?b:0);R-=(c>0?b:0)+S[c]}_=a.innerH-p.top-p.bottom;for(k=0,d=0;d<n;d++){k+=T[d]+(d>0?y:0);_-=(d>0?y:0)+T[d]}C+=p.left+p.right;k+=p.top+p.bottom;s={};s.minW=C+(a.w-a.innerW);s.minH=k+(a.h-a.innerH);s.contentW=s.minW-a.deltaW;s.contentH=s.minH-a.deltaH;s.minW=Math.min(s.minW,a.maxW);s.minH=Math.min(s.minH,a.maxH);s.minW=Math.max(s.minW,a.startMinWidth);s.minH=Math.max(s.minH,a.startMinHeight);if(a.autoResize&&(s.minW!==a.minW||s.minH!==a.minH)){s.w=s.minW;s.h=s.minH;e.layoutRect(s);this.recalc(e);if(e._lastRect===null){var P=e.parent();if(P){P._lastRect=null;P.recalc()}}return}if(a.autoResize){s=e.layoutRect(s);s.contentW=s.minW-a.deltaW;s.contentH=s.minH-a.deltaH}var A;if(t.packV==="start"){A=0}else{A=_>0?Math.floor(_/n):0}var B=0;var I=t.flexWidths;if(I){for(c=0;c<I.length;c++){B+=I[c]}}else{B=r}var L=R/B;for(c=0;c<r;c++){S[c]+=I?I[c]*L:L}m=p.top;for(d=0;d<n;d++){v=p.left;u=T[d]+A;for(c=0;c<r;c++){if(D){O=d*r+r-1-c}else{O=d*r+c}f=i[O];if(!f){break}g=f.settings;l=f.layoutRect();o=Math.max(S[c],l.startMinWidth);l.x=v;l.y=m;h=g.alignH||(w?w[c]||w[0]:null);if(h==="center"){l.x=v+o/2-l.w/2}else if(h==="right"){l.x=v+o-l.w}else if(h==="stretch"){l.w=o}h=g.alignV||(x?x[c]||x[0]:null);if(h==="center"){l.y=m+u/2-l.h/2}else if(h==="bottom"){l.y=m+u-l.h}else if(h==="stretch"){l.h=u}f.layoutRect(l);v+=o+b;if(f.recalc){f.recalc()}}m+=u+y}}});var Ko=Dn.extend({renderHtml:function(){var e=this;e.classes.add("iframe");e.canFocus=false;return'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;if(!r){I.setTimeout((function(){n.html(e)}))}else{r.innerHTML=e;if(t){t()}}return this}});var Yo=Dn.extend({init:function(e){var t=this;t._super(e);t.classes.add("widget").add("infobox");t.canFocus=false},severity:function(e){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'">'+'<div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1">'+'<i class="'+t+"ico "+t+'i-help"></i>'+"</button>"+"</div>"+"</div>"},bindStates:function(){var e=this;e.state.on("change:text",(function(t){e.getEl("body").firstChild.data=e.encode(t.value);if(e.state.get("rendered")){e.updateLayoutRect()}}));e.state.on("change:help",(function(t){e.classes.toggle("has-help",t.value);if(e.state.get("rendered")){e.updateLayoutRect()}}));return e._super()}});var Xo=Dn.extend({init:function(e){var t=this;t._super(e);t.classes.add("widget").add("label");t.canFocus=false;if(e.multiline){t.classes.add("autoscroll")}if(e.strong){t.classes.add("strong")}},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){var n=st.getSize(e.getEl());if(n.width>t.maxW){t.minW=t.maxW;e.classes.add("multiline")}e.getEl().style.width=t.minW+"px";t.startMinH=t.h=t.minH=Math.min(t.maxH,st.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;if(!e.settings.multiline){e.getEl().style.lineHeight=e.layoutRect().h+"px"}return e._super()},severity:function(e){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(e)},renderHtml:function(){var e=this;var t,n,r=e.settings.forId;var i=e.settings.html?e.settings.html:e.encode(e.state.get("text"));if(!r&&(n=e.settings.forName)){t=e.getRoot().find("#"+n)[0];if(t){r=t._id}}if(r){return'<label id="'+e._id+'" class="'+e.classes+'"'+(r?' for="'+r+'"':"")+">"+i+"</label>"}return'<span id="'+e._id+'" class="'+e.classes+'">'+i+"</span>"},bindStates:function(){var e=this;e.state.on("change:text",(function(t){e.innerHtml(e.encode(t.value));if(e.state.get("rendered")){e.updateLayoutRect()}}));return e._super()}});var Go=Zt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e);t.classes.add("toolbar")},postRender:function(){var e=this;e.items().each((function(e){e.classes.add("toolbar-item")}));return e._super()}});var Jo=Go.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:true,defaults:{type:"menubutton"}}});function Zo(e,t){while(e){if(t===e){return true}e=e.parentNode}return false}var Qo=Yn.extend({init:function(e){var t=this;t._renderOpen=true;t._super(e);e=t.settings;t.classes.add("menubtn");if(e.fixedWidth){t.classes.add("fixed-width")}t.aria("haspopup",true);t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t=this;var n;if(t.menu&&t.menu.visible()&&e!==false){return t.hideMenu()}if(!t.menu){n=t.state.get("menu")||[];t.classes.add("opened");if(n.length){n={type:"menu",animate:true,items:n}}else{n.type=n.type||"menu";n.animate=true}if(!n.renderTo){t.menu=T.create(n).parent(t).renderTo()}else{t.menu=n.parent(t).show().renderTo()}t.fire("createmenu");t.menu.reflow();t.menu.on("cancel",(function(e){if(e.control.parent()===t.menu){e.stopPropagation();t.focus();t.hideMenu()}}));t.menu.on("select",(function(){t.focus()}));t.menu.on("show hide",(function(e){if(e.type==="hide"&&e.control.parent()===t){t.classes.remove("opened-under")}if(e.control===t.menu){t.activeMenu(e.type==="show");t.classes.toggle("opened",e.type==="show")}t.aria("expanded",e.type==="show")})).fire("show")}t.menu.show();t.menu.layoutRect({w:t.layoutRect().w});t.menu.repaint();t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=t.menu.layoutRect();var i=t.$el.offset().top+t.layoutRect().h;if(i>r.y&&i<r.y+r.h){t.classes.add("opened-under")}t.fire("showmenu")},hideMenu:function(){var e=this;if(e.menu){e.menu.items().each((function(e){if(e.hideMenu){e.hideMenu()}}));e.menu.hide()}},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t=this,n=t._id,r=t.classPrefix;var i=t.settings.icon,a;var o=t.state.get("text");var u="";a=t.settings.image;if(a){i="none";if(typeof a!=="string"){a=e.window.getSelection?a[0]:a[1]}a=" style=\"background-image: url('"+a+"')\""}else{a=""}if(o){t.classes.add("btn-has-text");u='<span class="'+r+'txt">'+t.encode(o)+"</span>"}i=t.settings.icon?r+"ico "+r+"i-"+i:"";t.aria("role",t.parent()instanceof Jo?"menuitem":"button");return'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'">'+'<button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+a+"></i>":"")+u+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;e.on("click",(function(t){if(t.control===e&&Zo(t.target,e.getEl())){e.focus();e.showMenu(!t.aria);if(t.aria){e.menu.items().filter(":visible")[0].focus()}}}));e.on("mouseenter",(function(t){var n=t.control;var r=e.parent();var i;if(n&&r&&n instanceof Qo&&n.parent()===r){r.items().filter("MenuButton").each((function(e){if(e.hideMenu&&e!==n){if(e.menu&&e.menu.visible()){i=true}e.hideMenu()}}));if(i){n.focus();n.showMenu()}}}));return e._super()},bindStates:function(){var e=this;e.state.on("change:menu",(function(){if(e.menu){e.menu.remove()}e.menu=null}));return e._super()},remove:function(){this._super();if(this.menu){this.menu.remove()}}});var eu=yn.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:true},init:function(e){var t=this;e.autohide=true;e.constrainToViewport=true;if(typeof e.items==="function"){e.itemsFactory=e.items;e.items=[]}if(e.itemDefaults){var n=e.items;var i=n.length;while(i--){n[i]=r.extend({},e.itemDefaults,n[i])}}t._super(e);t.classes.add("menu");if(e.animate&&Ue.ie!==11){t.classes.add("animate")}},repaint:function(){this.classes.toggle("menu-align",true);this._super();this.getEl().style.height="";this.getEl("body").style.height="";return this},cancel:function(){var e=this;e.hideAll();e.fire("select")},load:function(){var e=this;var t,n;function r(){if(e.throbber){e.throbber.hide();e.throbber=null}}n=e.settings.itemsFactory;if(!n){return}if(!e.throbber){e.throbber=new Sn(e.getEl("body"),true);if(e.items().length===0){e.throbber.show();e.fire("loading")}else{e.throbber.show(100,(function(){e.items().remove();e.fire("loading")}))}e.on("hide close",r)}e.requestTime=t=(new Date).getTime();e.settings.itemsFactory((function(n){if(n.length===0){e.hide();return}if(e.requestTime!==t){return}e.getEl().style.width="";e.getEl("body").style.width="";r();e.items().remove();e.getEl("body").innerHTML="";e.add(n);e.renderNew();e.fire("loaded")}))},hideAll:function(){var e=this;this.find("menuitem").exec("hideMenu");return e._super()},preRender:function(){var e=this;e.items().each((function(t){var n=t.settings;if(n.icon||n.image||n.selectable){e._hasIcons=true;return false}}));if(e.settings.itemsFactory){e.on("postrender",(function(){if(e.settings.itemsFactory){e.load()}}))}e.on("show hide",(function(t){if(t.control===e){if(t.type==="show"){I.setTimeout((function(){e.classes.add("in")}),0)}else{e.classes.remove("in")}}}));return e._super()}});var tu=Qo.extend({init:function(e){var t=this;var n,r,i,a;function o(n){for(var a=0;a<n.length;a++){r=n[a].selected||e.value===n[a].value;if(r){i=i||n[a].text;t.state.set("value",n[a].value);return true}if(n[a].menu){if(o(n[a].menu)){return true}}}}t._super(e);e=t.settings;t._values=n=e.values;if(n){if(typeof e.value!=="undefined"){o(n)}if(!r&&n.length>0){i=n[0].text;t.state.set("value",n[0].value)}t.state.set("menu",n)}t.state.set("text",e.text||i);t.classes.add("listbox");t.on("select",(function(n){var r=n.control;if(a){n.lastControl=a}if(e.multiple){r.active(!r.active())}else{t.value(n.control.value())}a=r}))},value:function(e){if(arguments.length===0){return this.state.get("value")}if(typeof e==="undefined"){return this}function t(n){return he(n,(function(n){return n.menu?t(n.menu):n.value===e}))}if(this.settings.values){if(t(this.settings.values)){this.state.set("value",e)}else if(e===null){this.state.set("value",null)}}else{this.state.set("value",e)}return this},bindStates:function(){var e=this;function t(e,t){if(e instanceof eu){e.items().each((function(e){if(!e.hasMenus()){e.active(e.value()===t)}}))}}function n(e,t){var r;if(!e){return}for(var i=0;i<e.length;i++){if(e[i].value===t){return e[i]}if(e[i].menu){r=n(e[i].menu,t);if(r){return r}}}}e.on("show",(function(n){t(n.control,e.value())}));e.state.on("change:value",(function(t){var r=n(e.state.get("menu"),t.value);if(r){e.text(r.text)}else{e.text(e.settings.text)}}));return e._super()}});var nu=function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n);if(t){r.style.color="";r.style.backgroundColor=""}}};var ru=Dn.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;var n;t._super(e);e=t.settings;t.classes.add("menu-item");if(e.menu){t.classes.add("menu-item-expand")}if(e.preview){t.classes.add("menu-item-preview")}n=t.state.get("text");if(n==="-"||n==="|"){t.classes.add("menu-item-sep");t.aria("role","separator");t.state.set("text","-")}if(e.selectable){t.aria("role","menuitemcheckbox");t.classes.add("menu-item-checkbox");e.icon="selected"}if(!e.preview&&!e.selectable){t.classes.add("menu-item-normal")}t.on("mousedown",(function(e){e.preventDefault()}));if(e.menu&&!e.ariaHideMenu){t.aria("haspopup",true)}},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this;var t=e.settings;var n;var r=e.parent();r.items().each((function(t){if(t!==e){t.hideMenu()}}));if(t.menu){n=e.menu;if(!n){n=t.menu;if(n.length){n={type:"menu",items:n}}else{n.type=n.type||"menu"}if(r.settings.itemDefaults){n.itemDefaults=r.settings.itemDefaults}n=e.menu=T.create(n).parent(e).renderTo();n.reflow();n.on("cancel",(function(t){t.stopPropagation();e.focus();n.hide()}));n.on("show hide",(function(e){if(e.control.items){e.control.items().each((function(e){e.active(e.settings.selected)}))}})).fire("show");n.on("hide",(function(t){if(t.control===n){e.classes.remove("selected")}}));n.submenu=true}else{n.show()}n._parentMenu=r;n.classes.add("menu-sub");var i=n.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);n.moveRel(e.getEl(),i);n.rel=i;i="menu-sub-"+i;n.classes.remove(n._lastRel).add(i);n._lastRel=i;e.classes.add("selected");e.aria("expanded",true)}},hideMenu:function(){var e=this;if(e.menu){e.menu.items().each((function(e){if(e.hideMenu){e.hideMenu()}}));e.menu.hide();e.aria("expanded",false)}return e},renderHtml:function(){var e=this;var t=e._id;var n=e.settings;var r=e.classPrefix;var i=e.state.get("text");var a=e.settings.icon,o="",u=n.shortcut;var s=e.encode(n.url),l="";function f(e){var t,n,r={};if(Ue.mac){r={alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}}else{r={meta:"Ctrl"}}e=e.split("+");for(t=0;t<e.length;t++){n=r[e[t].toLowerCase()];if(n){e[t]=n}}return e.join("+")}function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(e){var t=n.match||"";return t?e.replace(new RegExp(c(t),"gi"),(function(e){return"!mce~match["+e+"]mce~match!"})):e}function v(e){return e.replace(new RegExp(c("!mce~match["),"g"),"<b>").replace(new RegExp(c("]mce~match!"),"g"),"</b>")}if(a){e.parent().classes.add("menu-has-icons")}if(n.image){o=" style=\"background-image: url('"+n.image+"')\""}if(u){u=f(u)}a=r+"ico "+r+"i-"+(e.settings.icon||"none");l=i!=="-"?'<i class="'+a+'"'+o+"></i>":"";i=v(e.encode(d(i)));s=v(e.encode(d(s)));return'<div id="'+t+'" class="'+e.classes+'" tabindex="-1">'+l+(i!=="-"?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(u?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+u+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(s?'<div class="'+r+'menu-item-link">'+s+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings;var n=t.textStyle;if(typeof n==="function"){n=n.call(this)}if(n){var r=e.getEl("text");if(r){r.setAttribute("style",n);e._textStyle=n}}e.on("mouseenter click",(function(n){if(n.control===e){if(!t.menu&&n.type==="click"){e.fire("select");I.requestAnimationFrame((function(){e.parent().hideAll()}))}else{e.showMenu();if(n.aria){e.menu.focus(true)}}}}));e._super();return e},hover:function(){var e=this;e.parent().items().each((function(e){e.classes.remove("selected")}));e.classes.toggle("selected",true);return e},active:function(e){nu(this,e);if(typeof e!=="undefined"){this.aria("checked",e)}return this._super(e)},remove:function(){this._super();if(this.menu){this.menu.remove()}}});var iu=Jn.extend({Defaults:{classes:"radio",role:"radio"}});var au=Dn.extend({renderHtml:function(){var e=this,t=e.classPrefix;e.classes.add("resizehandle");if(e.settings.direction==="both"){e.classes.add("resizehandle-both")}e.canFocus=false;return'<div id="'+e._id+'" class="'+e.classes+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var e=this;e._super();e.resizeDragHelper=new tn(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){if(e.settings.direction!=="both"){t.deltaX=0}e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){if(this.resizeDragHelper){this.resizeDragHelper.destroy()}return this._super()}});function ou(e){var t="";if(e){for(var n=0;n<e.length;n++){t+='<option value="'+e[n]+'">'+e[n]+"</option>"}}return t}var uu=Dn.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e);if(t.settings.size){t.size=t.settings.size}if(t.settings.options){t._options=t.settings.options}t.on("keydown",(function(e){var n;if(e.keyCode===13){e.preventDefault();t.parents().reverse().each((function(e){if(e.toJSON){n=e;return false}}));t.fire("submit",{data:n.toJSON()})}}))},options:function(e){if(!arguments.length){return this.state.get("options")}this.state.set("options",e);return this},renderHtml:function(){var e=this;var t,n="";t=ou(e._options);if(e.size){n=' size = "'+e.size+'"'}return'<select id="'+e._id+'" class="'+e.classes+'"'+n+">"+t+"</select>"},bindStates:function(){var e=this;e.state.on("change:options",(function(t){e.getEl().innerHTML=ou(t.value)}));return e._super()}});function su(e,t,n){if(e<t){e=t}if(e>n){e=n}return e}function lu(e,t,n){e.setAttribute("aria-"+t,n)}function fu(e,t){var n,r,i,a,o,u;if(e.settings.orientation==="v"){a="top";i="height";r="h"}else{a="left";i="width";r="w"}u=e.getEl("handle");n=(e.layoutRect()[r]||100)-st.getSize(u)[i];o=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px";u.style[a]=o;u.style.height=e.layoutRect().h+"px";lu(u,"valuenow",t);lu(u,"valuetext",""+e.settings.previewFilter(t));lu(u,"valuemin",e._minValue);lu(u,"valuemax",e._maxValue)}var cu=Dn.extend({init:function(e){var t=this;if(!e.previewFilter){e.previewFilter=function(e){return Math.round(e*100)/100}}t._super(e);t.classes.add("slider");if(e.orientation==="v"){t.classes.add("vertical")}t._minValue=ce(e.minValue)?e.minValue:0;t._maxValue=ce(e.maxValue)?e.maxValue:100;t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'">'+'<div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div>'+"</div>"},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e=this;var t,n,r,i,a,o;function u(e,t,n){return(n+e)/(t-e)}function s(e,t,n){return n*(t-e)-e}function l(t,n){function r(r){var i;i=e.value();i=s(t,n,u(t,n,i)+r*.05);i=su(i,t,n);e.value(i);e.fire("dragstart",{value:i});e.fire("drag",{value:i});e.fire("dragend",{value:i})}e.on("keydown",(function(e){switch(e.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1);break}}))}function f(t,n,u){var s,l,f,c,d;e._dragHelper=new tn(e._id,{handle:e._id+"-handle",start:function(t){s=t[r];l=parseInt(e.getEl("handle").style[i],10);f=(e.layoutRect()[o]||100)-st.getSize(u)[a];e.fire("dragstart",{value:d})},drag:function(a){var o=a[r]-s;c=su(l+o,0,f);u.style[i]=c+"px";d=t+c/f*(n-t);e.value(d);e.tooltip().text(""+e.settings.previewFilter(d)).show().moveRel(u,"bc tc");e.fire("drag",{value:d})},stop:function(){e.tooltip().hide();e.fire("dragend",{value:d})}})}t=e._minValue;n=e._maxValue;if(e.settings.orientation==="v"){r="screenY";i="top";a="height";o="h"}else{r="screenX";i="left";a="width";o="w"}e._super();l(t,n);f(t,n,e.getEl("handle"))},repaint:function(){this._super();fu(this,this.value())},bindStates:function(){var e=this;e.state.on("change:value",(function(t){fu(e,t.value)}));return e._super()}});var du=Dn.extend({renderHtml:function(){var e=this;e.classes.add("spacer");e.canFocus=false;return'<div id="'+e._id+'" class="'+e.classes+'"></div>'}});var vu=Qo.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this;var t=e.getEl();var n=e.layoutRect();var r,i;e._super();r=t.firstChild;i=t.lastChild;ot(r).css({width:n.w-st.getSize(i).width,height:n.h-2});ot(i).css({height:n.h-2});return e},activeMenu:function(e){var t=this;ot(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var t=this;var n=t._id;var r=t.classPrefix;var i;var a=t.state.get("icon");var o=t.state.get("text");var u=t.settings;var s="",l;i=u.image;if(i){a="none";if(typeof i!=="string"){i=e.window.getSelection?i[0]:i[1]}i=" style=\"background-image: url('"+i+"')\""}else{i=""}a=u.icon?r+"ico "+r+"i-"+a:"";if(o){t.classes.add("btn-has-text");s='<span class="'+r+'txt">'+t.encode(o)+"</span>"}l=typeof u.active==="boolean"?' aria-pressed="'+u.active+'"':"";return'<div id="'+n+'" class="'+t.classes+'" role="button"'+l+' tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(a?'<i class="'+a+'"'+i+"></i>":"")+s+"</button>"+'<button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(a?"":"")+t._menuBtnText:"")+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;e.on("click",(function(e){var n=e.target;if(e.control===this){while(n){if(e.aria&&e.aria.key!=="down"||n.nodeName==="BUTTON"&&n.className.indexOf("open")===-1){e.stopImmediatePropagation();if(t){t.call(this,e)}return}n=n.parentNode}}}));delete e.settings.onclick;return e._super()}});var mu=Pa.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return true}});var gu=rn.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;if(this.activeTabId){t=this.getEl(this.activeTabId);ot(t).removeClass(this.classPrefix+"active");t.setAttribute("aria-selected","false")}this.activeTabId="t"+e;t=this.getEl("t"+e);t.setAttribute("aria-selected","true");ot(t).addClass(this.classPrefix+"active");this.items()[e].show().fire("showtab");this.reflow();this.items().each((function(t,n){if(e!==n){t.hide()}}))},renderHtml:function(){var e=this;var t=e._layout;var n="";var r=e.classPrefix;e.preRender();t.preRender(e);e.items().each((function(t,i){var a=e._id+"-t"+i;t.aria("role","tabpanel");t.aria("labelledby",a);n+='<div id="'+a+'" class="'+r+'tab" '+'unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}));return'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super();e.settings.activeTab=e.settings.activeTab||0;e.activateTab(e.settings.activeTab);this.on("click",(function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head"){var r=n.childNodes.length;while(r--){if(n.childNodes[r]===t.target){e.activateTab(r)}}}}))},initLayoutRect:function(){var e=this;var t,n,r;n=st.getSize(e.getEl("head")).width;n=n<0?0:n;r=0;e.items().each((function(e){n=Math.max(n,e.layoutRect().minW);r=Math.max(r,e.layoutRect().minH)}));e.items().each((function(e){e.settings.x=0;e.settings.y=0;e.settings.w=n;e.settings.h=r;e.layoutRect({x:0,y:0,w:n,h:r})}));var i=st.getSize(e.getEl("head")).height;e.settings.minWidth=n;e.settings.minHeight=r+i;t=e._super();t.deltaH+=i;t.innerH=t.h-t.deltaH;return t}});var pu=Dn.extend({init:function(e){var t=this;t._super(e);t.classes.add("textbox");if(e.multiline){t.classes.add("multiline")}else{t.on("keydown",(function(e){var n;if(e.keyCode===13){e.preventDefault();t.parents().reverse().each((function(e){if(e.toJSON){n=e;return false}}));t.fire("submit",{data:n.toJSON()})}}));t.on("keyup",(function(e){t.state.set("value",e.target.value)}))}},repaint:function(){var t=this;var n,r,i,a,o=0,u;n=t.getEl().style;r=t._layoutRect;u=t._lastRepaintRect||{};var s=e.document;if(!t.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)){n.lineHeight=r.h-o+"px"}i=t.borderBox;a=i.left+i.right+8;o=i.top+i.bottom+(t.settings.multiline?8:0);if(r.x!==u.x){n.left=r.x+"px";u.x=r.x}if(r.y!==u.y){n.top=r.y+"px";u.y=r.y}if(r.w!==u.w){n.width=r.w-a+"px";u.w=r.w}if(r.h!==u.h){n.height=r.h-o+"px";u.h=r.h}t._lastRepaintRect=u;t.fire("repaint",{},false);return t},renderHtml:function(){var e=this;var t=e.settings;var n,i;n={id:e._id,hidefocus:"1"};r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(e){n[e]=t[e]}));if(e.disabled()){n.disabled="disabled"}if(t.subtype){n.type=t.subtype}i=st.create(t.multiline?"textarea":"input",n);i.value=e.state.get("value");i.className=e.classes.toString();return i.outerHTML},value:function(e){if(arguments.length){this.state.set("value",e);return this}if(this.state.get("rendered")){this.state.set("value",this.getEl().value)}return this.state.get("value")},postRender:function(){var e=this;e.getEl().value=e.state.get("value");e._super();e.$el.on("change",(function(t){e.state.set("value",t.target.value);e.fire("change",t)}))},bindStates:function(){var e=this;e.state.on("change:value",(function(t){if(e.getEl().value!==t.value){e.getEl().value=t.value}}));e.state.on("change:disabled",(function(t){e.getEl().disabled=t.value}));return e._super()},remove:function(){this.$el.off();this._super()}});var hu=function(){return{Selector:Et,Collection:Ot,ReflowQueue:Ht,Control:Yt,Factory:T,KeyboardNavigation:Gt,Container:Zt,DragHelper:tn,Scrollable:nn,Panel:rn,Movable:gt,Resizable:an,FloatPanel:yn,Window:Un,MessageBox:Wn,Tooltip:_n,Widget:Dn,Progress:On,Notification:An,Layout:$n,AbsoluteLayout:Kn,Button:Yn,ButtonGroup:Gn,Checkbox:Jn,ComboBox:Qn,ColorBox:er,PanelButton:tr,ColorButton:rr,ColorPicker:ar,Path:ur,ElementPath:sr,FormItem:lr,Form:fr,FieldSet:cr,FilePicker:_a,FitLayout:Da,FlexLayout:Oa,FlowLayout:Pa,FormatControls:qo,GridLayout:$o,Iframe:Ko,InfoBox:Yo,Label:Xo,Toolbar:Go,MenuBar:Jo,MenuButton:Qo,MenuItem:ru,Throbber:Sn,Menu:eu,ListBox:tu,Radio:iu,ResizeHandle:au,SelectBox:uu,Slider:cu,Spacer:du,SplitButton:vu,StackLayout:mu,TabPanel:gu,TextBox:pu,DropZone:or,BrowseButton:Xn}};var bu=function(e){if(e.ui){r.each(hu(),(function(t,n){e.ui[n]=t}))}else{e.ui=hu()}};var yu=function(){r.each(hu(),(function(e,t){T.add(t,e)}))};var wu={appendTo:bu,registerToFactory:yu};wu.registerToFactory();wu.appendTo(window.tinymce?window.tinymce:{});t.add("modern",(function(e){qo.setup(e);return qn.get(e)}));function xu(){}return xu}(window)})()},558:function(e,t,n){n(559)},559:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=function(){};var r=function(e,t){return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}return e(t.apply(null,n))}};var i=function(e){return function(){return e}};var a=function(e){return e};function o(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}}var u=function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return!e.apply(null,t)}};var s=function(e){return function(){throw new Error(e)}};var l=i(false);var f=i(true);var c=function(){return d};var d=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var r=function(e){return e};var a={fold:function(e,t){return e()},is:l,isSome:l,isNone:f,getOr:r,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(undefined),or:r,orThunk:t,map:c,each:n,bind:c,exists:l,forall:f,filter:c,equals:e,equals_:e,toArray:function(){return[]},toString:i("none()")};if(Object.freeze){Object.freeze(a)}return a}();var v=function(e){var t=i(e);var n=function(){return a};var r=function(t){return t(e)};var a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return v(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,(function(t){return n(e,t)}))}};return a};var m=function(e){return e===null||e===undefined?d:v(e)};var g={some:v,none:c,from:m};var p=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var h=function(e){return function(t){return p(t)===e}};var b=h("string");var y=h("array");var w=h("boolean");var x=h("function");var C=h("number");var k=Array.prototype.slice;var S=Array.prototype.indexOf;var T=Array.prototype.push;var E=function(e,t){return S.call(e,t)};var N=function(e,t){return E(e,t)>-1};var R=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return true}}return false};var _=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i)}return r};var D=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}};var O=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n)}};var P=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r)){n.push(a)}}return n};var A=function(e,t,n){O(e,(function(e){n=t(n,e)}));return n};var B=function(e,t,n){D(e,(function(e){n=t(n,e)}));return n};var I=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return g.some(i)}}return g.none()};var L=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return g.some(n)}}return g.none()};var M=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!y(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}T.apply(t,e[n])}return t};var F=function(e,t){var n=_(e,t);return M(n)};var H=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n)!==true){return false}}return true};var z=function(e){var t=k.call(e,0);t.reverse();return t};var U=function(e){return e.length===0?g.none():g.some(e[e.length-1])};var W=x(Array.from)?Array.from:function(e){return k.call(e)};var j=Object.keys;var V=function(e,t){var n=j(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];t(o,a)}};var q=function(e,t){return $(e,(function(e,n){return{k:n,v:t(e,n)}}))};var $=function(e,t){var n={};V(e,(function(e,r){var i=t(e,r);n[i.k]=i.v}));return n};var K=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};D(e,(function(e,n){r[e]=i(t[n])}));return r}};var Y=function(e){return e.slice(0).sort()};var X=function(e,t){throw new Error("All required keys ("+Y(e).join(", ")+") were not specified. Specified keys were: "+Y(t).join(", ")+".")};var G=function(e){throw new Error("Unsupported keys for object: "+Y(e).join(", "))};var J=function(e,t){if(!y(t)){throw new Error("The "+e+" fields must be an array. Was: "+t+".")}D(t,(function(t){if(!b(t)){throw new Error("The value "+t+" in the "+e+" fields was not a string.")}}))};var Z=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+Y(e).join(", ")+") were not.")};var Q=function(e){var t=Y(e);var n=I(t,(function(e,n){return n<t.length-1&&e===t[n+1]}));n.each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))};var ee=function(e,t){var n=e.concat(t);if(n.length===0){throw new Error("You must specify at least one required or optional field.")}J("required",e);J("optional",t);Q(n);return function(r){var a=j(r);var o=H(e,(function(e){return N(a,e)}));if(!o){X(e,a)}var u=P(a,(function(e){return!N(n,e)}));if(u.length>0){G(u)}var s={};D(e,(function(e){s[e]=i(r[e])}));D(t,(function(e){s[e]=i(Object.prototype.hasOwnProperty.call(r,e)?g.some(r[e]):g.none())}));return s}};var te=e.Node.ATTRIBUTE_NODE;var ne=e.Node.CDATA_SECTION_NODE;var re=e.Node.COMMENT_NODE;var ie=e.Node.DOCUMENT_NODE;var ae=e.Node.DOCUMENT_TYPE_NODE;var oe=e.Node.DOCUMENT_FRAGMENT_NODE;var ue=e.Node.ELEMENT_NODE;var se=e.Node.TEXT_NODE;var le=e.Node.PROCESSING_INSTRUCTION_NODE;var fe=e.Node.ENTITY_REFERENCE_NODE;var ce=e.Node.ENTITY_NODE;var de=e.Node.NOTATION_NODE;var ve=typeof e.window!=="undefined"?e.window:Function("return this;")();var me=function(e,t){var n=t!==undefined&&t!==null?t:ve;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var ge=function(e,t){var n=e.split(".");return me(n,t)};var pe=function(e,t){return ge(e,t)};var he=function(e,t){var n=pe(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};var be={getOrDie:he};var ye=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var we=function(e){return e.dom().nodeType};var xe=function(e){return function(t){return we(t)===e}};var Ce=function(e){return we(e)===re||ye(e)==="#comment"};var ke=xe(ue);var Se=xe(se);var Te=function(t,n,r){if(b(r)||w(r)||C(r)){t.setAttribute(n,r+"")}else{e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t);throw new Error("Attribute value was not simple")}};var Ee=function(e,t,n){Te(e.dom(),t,n)};var Ne=function(e,t){var n=e.dom();V(t,(function(e,t){Te(n,t,e)}))};var Re=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var _e=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var De=function(e,t){e.dom().removeAttribute(t)};var Oe=function(e){return B(e.dom().attributes,(function(e,t){e[t.name]=t.value;return e}),{})};var Pe=function(e,t,n){if(t===""){return true}if(e.length<t.length){return false}var r=e.substr(n,n+t.length);return r===t};var Ae=function(e,t){return e.indexOf(t)!==-1};var Be=function(e,t){return Pe(e,t,e.length-t.length)};var Ie=function(e){return e.replace(/^\s+|\s+$/g,"")};var Le=function(e){return e.style!==undefined&&x(e.style.getPropertyValue)};var Me=function(e){var t=false;var n;return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}if(!t){t=true;n=e.apply(null,r)}return n}};var Fe=function(t,n){var r=n||e.document;var i=r.createElement("div");i.innerHTML=t;if(!i.hasChildNodes()||i.childNodes.length>1){e.console.error("HTML does not have a single root node",t);throw new Error("HTML must have a single root node")}return Ue(i.childNodes[0])};var He=function(t,n){var r=n||e.document;var i=r.createElement(t);return Ue(i)};var ze=function(t,n){var r=n||e.document;var i=r.createTextNode(t);return Ue(i)};var Ue=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:i(e)}};var We=function(e,t,n){var r=e.dom();return g.from(r.elementFromPoint(t,n)).map(Ue)};var je={fromHtml:Fe,fromTag:He,fromText:ze,fromDom:Ue,fromPoint:We};var Ve=function(e){var t=Se(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var qe=Me((function(){return $e(je.fromDom(e.document))}));var $e=function(e){var t=e.dom().body;if(t===null||t===undefined){throw new Error("Body is not available yet")}return je.fromDom(t)};var Ke=function(t,n,r){if(!b(r)){e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t);throw new Error("CSS value must be a string: "+r)}if(Le(t)){t.style.setProperty(n,r)}};var Ye=function(e,t){if(Le(e)){e.style.removeProperty(t)}};var Xe=function(e,t,n){var r=e.dom();Ke(r,t,n)};var Ge=function(e,t){var n=e.dom();V(t,(function(e,t){Ke(n,t,e)}))};var Je=function(t,n){var r=t.dom();var i=e.window.getComputedStyle(r);var a=i.getPropertyValue(n);var o=a===""&&!Ve(t)?Ze(r,n):a;return o===null?undefined:o};var Ze=function(e,t){return Le(e)?e.style.getPropertyValue(t):""};var Qe=function(e,t){var n=e.dom();var r=Ze(n,t);return g.from(r).filter((function(e){return e.length>0}))};var et=function(e,t){var n=e.dom();Ye(n,t);if(_e(e,"style")&&Ie(Re(e,"style"))===""){De(e,"style")}};var tt=function(e,t){var n=e.dom();var r=t.dom();if(Le(n)&&Le(r)){r.style.cssText=n.style.cssText}};var nt=function(){var e=be.getOrDie("Node");return e};var rt=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var it=function(e,t){return rt(e,t,nt().DOCUMENT_POSITION_PRECEDING)};var at=function(e,t){return rt(e,t,nt().DOCUMENT_POSITION_CONTAINED_BY)};var ot={documentPositionPreceding:it,documentPositionContainedBy:at};var ut=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var st=function(e,t){var n=ut(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return ct(r(1),r(2))};var lt=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return ft()}return st(e,n)};var ft=function(){return ct(0,0)};var ct=function(e,t){return{major:e,minor:t}};var dt={nu:ct,detect:lt,unknown:ft};var vt="Edge";var mt="Chrome";var gt="IE";var pt="Opera";var ht="Firefox";var bt="Safari";var yt=function(e,t){return function(){return t===e}};var wt=function(){return xt({current:undefined,version:dt.unknown()})};var xt=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:yt(vt,t),isChrome:yt(mt,t),isIE:yt(gt,t),isOpera:yt(pt,t),isFirefox:yt(ht,t),isSafari:yt(bt,t)}};var Ct={unknown:wt,nu:xt,edge:i(vt),chrome:i(mt),ie:i(gt),opera:i(pt),firefox:i(ht),safari:i(bt)};var kt="Windows";var St="iOS";var Tt="Android";var Et="Linux";var Nt="OSX";var Rt="Solaris";var _t="FreeBSD";var Dt=function(e,t){return function(){return t===e}};var Ot=function(){return Pt({current:undefined,version:dt.unknown()})};var Pt=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:Dt(kt,t),isiOS:Dt(St,t),isAndroid:Dt(Tt,t),isOSX:Dt(Nt,t),isLinux:Dt(Et,t),isSolaris:Dt(Rt,t),isFreeBSD:Dt(_t,t)}};var At={unknown:Ot,nu:Pt,windows:i(kt),ios:i(St),android:i(Tt),linux:i(Et),osx:i(Nt),solaris:i(Rt),freebsd:i(_t)};var Bt=function(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var a=e.isiOS()&&!r;var o=e.isAndroid()&&e.version.major===3;var u=e.isAndroid()&&e.version.major===4;var s=r||o||u&&/mobile/i.test(n)===true;var l=e.isiOS()||e.isAndroid();var f=l&&!s;var c=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:i(r),isiPhone:i(a),isTablet:i(s),isPhone:i(f),isTouch:i(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:i(c)}};var It=function(e,t){var n=String(t).toLowerCase();return I(e,(function(e){return e.search(n)}))};var Lt=function(e,t){return It(e,t).map((function(e){var n=dt.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Mt=function(e,t){return It(e,t).map((function(e){var n=dt.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Ft={detectBrowser:Lt,detectOs:Mt};var Ht=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var zt=function(e){return function(t){return Ae(t,e)}};var Ut=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ae(e,"edge/")&&Ae(e,"chrome")&&Ae(e,"safari")&&Ae(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ht],search:function(e){return Ae(e,"chrome")&&!Ae(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ae(e,"msie")||Ae(e,"trident")}},{name:"Opera",versionRegexes:[Ht,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:zt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:zt("firefox")},{name:"Safari",versionRegexes:[Ht,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ae(e,"safari")||Ae(e,"mobile/"))&&Ae(e,"applewebkit")}}];var Wt=[{name:"Windows",search:zt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ae(e,"iphone")||Ae(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:zt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:zt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:zt("linux"),versionRegexes:[]},{name:"Solaris",search:zt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:zt("freebsd"),versionRegexes:[]}];var jt={browsers:i(Ut),oses:i(Wt)};var Vt=function(e){var t=jt.browsers();var n=jt.oses();var r=Ft.detectBrowser(t,e).fold(Ct.unknown,Ct.nu);var i=Ft.detectOs(n,e).fold(At.unknown,At.nu);var a=Bt(i,r,e);return{browser:r,os:i,deviceType:a}};var qt={detect:Vt};var $t=Me((function(){var t=e.navigator.userAgent;return qt.detect(t)}));var Kt={detect:$t};var Yt=ue;var Xt=ie;var Gt=function(e,t){var n=e.dom();if(n.nodeType!==Yt){return false}else{var r=n;if(r.matches!==undefined){return r.matches(t)}else if(r.msMatchesSelector!==undefined){return r.msMatchesSelector(t)}else if(r.webkitMatchesSelector!==undefined){return r.webkitMatchesSelector(t)}else if(r.mozMatchesSelector!==undefined){return r.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}}};var Jt=function(e){return e.nodeType!==Yt&&e.nodeType!==Xt||e.childElementCount===0};var Zt=function(t,n){var r=n===undefined?e.document:n.dom();return Jt(r)?[]:_(r.querySelectorAll(t),je.fromDom)};var Qt=function(t,n){var r=n===undefined?e.document:n.dom();return Jt(r)?g.none():g.from(r.querySelector(t)).map(je.fromDom)};var en=function(e,t){return e.dom()===t.dom()};var tn=function(e,t){var n=e.dom();var r=t.dom();return n===r?false:n.contains(r)};var nn=function(e,t){return ot.documentPositionContainedBy(e.dom(),t.dom())};var rn=Kt.detect().browser;var an=rn.isIE()?nn:tn;var on=Gt;var un=function(e){return je.fromDom(e.dom().ownerDocument)};var sn=function(e){return je.fromDom(e.dom().ownerDocument.defaultView)};var ln=function(e){return g.from(e.dom().parentNode).map(je.fromDom)};var fn=function(e,t){var n=x(t)?t:l;var r=e.dom();var i=[];while(r.parentNode!==null&&r.parentNode!==undefined){var a=r.parentNode;var o=je.fromDom(a);i.push(o);if(n(o)===true){break}else{r=a}}return i};var cn=function(e){return g.from(e.dom().previousSibling).map(je.fromDom)};var dn=function(e){return g.from(e.dom().nextSibling).map(je.fromDom)};var vn=function(e){return _(e.dom().childNodes,je.fromDom)};var mn=function(e,t){var n=e.dom().childNodes;return g.from(n[t]).map(je.fromDom)};var gn=function(e){return mn(e,0)};var pn=K("element","offset");var hn=function(e,t){var n=ln(e);n.each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))};var bn=function(e,t){var n=dn(e);n.fold((function(){var n=ln(e);n.each((function(e){wn(e,t)}))}),(function(e){hn(e,t)}))};var yn=function(e,t){var n=gn(e);n.fold((function(){wn(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))};var wn=function(e,t){e.dom().appendChild(t.dom())};var xn=function(e,t){hn(e,t);wn(t,e)};var Cn=function(e,t){D(t,(function(t){hn(e,t)}))};var kn=function(e,t){D(t,(function(n,r){var i=r===0?e:t[r-1];bn(i,n)}))};var Sn=function(e,t){D(t,(function(t){wn(e,t)}))};var Tn=function(e){e.dom().textContent="";D(vn(e),(function(e){En(e)}))};var En=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var Nn=function(e){var t=vn(e);if(t.length>0){Cn(e,t)}En(e)};var Rn=K("width","height");var _n=K("width","height");var Dn=K("rows","columns");var On=K("row","column");var Pn=K("x","y");var An=K("element","rowspan","colspan");var Bn=K("element","rowspan","colspan","isNew");var In=K("element","rowspan","colspan","row","column");var Ln=K("element","cells","section");var Mn=K("element","isNew");var Fn=K("element","cells","section","isNew");var Hn=K("cells","section");var zn=K("details","section");var Un=K("startRow","startCol","finishRow","finishCol");var Wn=function(e,t,n){return P(fn(e,n),t)};var jn=function(e,t){return P(vn(e),t)};var Vn=function(e,t){var n=[];D(vn(e),(function(e){if(t(e)){n=n.concat([e])}n=n.concat(Vn(e,t))}));return n};var qn=function(e,t,n){return Wn(e,(function(e){return Gt(e,t)}),n)};var $n=function(e,t){return jn(e,(function(e){return Gt(e,t)}))};var Kn=function(e,t){return Zt(t,e)};function Yn(e,t,n,r,i){return e(n,r)?g.some(n):x(i)&&i(n)?g.none():t(n,r,i)}var Xn=function(e,t,n){var r=e.dom();var a=x(n)?n:i(false);while(r.parentNode){r=r.parentNode;var o=je.fromDom(r);if(t(o)){return g.some(o)}else if(a(o)){break}}return g.none()};var Gn=function(e,t,n){var r=function(e,t){return t(e)};return Yn(r,Xn,e,t,n)};var Jn=function(e,t){var n=function(e){return t(je.fromDom(e))};var r=I(e.dom().childNodes,n);return r.map(je.fromDom)};var Zn=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){var i=je.fromDom(e.childNodes[r]);if(t(i)){return g.some(i)}var a=n(e.childNodes[r]);if(a.isSome()){return a}}return g.none()};return n(e.dom())};var Qn=function(e,t,n){return Xn(e,(function(e){return Gt(e,t)}),n)};var er=function(e,t){return Jn(e,(function(e){return Gt(e,t)}))};var tr=function(e,t){return Qt(t,e)};var nr=function(e,t,n){return Yn(Gt,Qn,e,t,n)};var rr=function(e,t){return ir(e,t,i(true))};var ir=function(e,t,n){return F(vn(e),(function(e){return Gt(e,t)?n(e)?[e]:[]:ir(e,t,n)}))};var ar={firstLayer:rr,filterFirstLayer:ir};var or=function(e,t,n){if(n===void 0){n=l}if(n(t)){return g.none()}if(N(e,ye(t))){return g.some(t)}var r=function(e){return Gt(e,"table")||n(e)};return Qn(t,e.join(","),r)};var ur=function(e,t){return or(["td","th"],e,t)};var sr=function(e){return ar.firstLayer(e,"th,td")};var lr=function(e,t){return or(["caption","tr","tbody","tfoot","thead"],e,t)};var fr=function(e,t){return ln(t).map((function(t){return $n(t,e)}))};var cr=o(fr,"th,td");var dr=o(fr,"tr");var vr=function(e){return tr(e,"th,td")};var mr=function(e,t){return nr(e,"table",t)};var gr=function(e,t){return or(["tr"],e,t)};var pr=function(e){return ar.firstLayer(e,"tr")};var hr=function(e,t){return parseInt(Re(e,t),10)};var br=function(e,t,n){var r=hr(e,t);var i=hr(e,n);return Dn(r,i)};var yr={cell:ur,firstCell:vr,cells:sr,neighbourCells:cr,table:mr,row:gr,rows:pr,notCell:lr,neighbourRows:dr,attr:hr,grid:br};var wr=function(e){var t=yr.rows(e);return _(t,(function(e){var t=e;var n=ln(t);var r=n.map((function(e){var t=ye(e);return t==="tfoot"||t==="thead"||t==="tbody"?t:"tbody"})).getOr("tbody");var i=_(yr.cells(e),(function(e){var t=_e(e,"rowspan")?parseInt(Re(e,"rowspan"),10):1;var n=_e(e,"colspan")?parseInt(Re(e,"colspan"),10):1;return An(e,t,n)}));return Ln(t,i,r)}))};var xr=function(e,t){return _(e,(function(e){var n=_(yr.cells(e),(function(e){var t=_e(e,"rowspan")?parseInt(Re(e,"rowspan"),10):1;var n=_e(e,"colspan")?parseInt(Re(e,"colspan"),10):1;return An(e,t,n)}));return Ln(e,n,t.section())}))};var Cr={fromTable:wr,fromPastedRows:xr};var kr=function(e,t){return e+","+t};var Sr=function(e,t,n){var r=e.access()[kr(t,n)];return r!==undefined?g.some(r):g.none()};var Tr=function(e,t,n){var r=Er(e,(function(e){return n(t,e.element())}));return r.length>0?g.some(r[0]):g.none()};var Er=function(e,t){var n=F(e.all(),(function(e){return e.cells()}));return P(n,t)};var Nr=function(e){var t={};var n=[];var r=e.length;var a=0;D(e,(function(e,r){var i=[];D(e.cells(),(function(e){var n=0;while(t[kr(r,n)]!==undefined){n++}var o=In(e.element(),e.rowspan(),e.colspan(),r,n);for(var u=0;u<e.colspan();u++){for(var s=0;s<e.rowspan();s++){var l=r+s;var f=n+u;var c=kr(l,f);t[c]=o;a=Math.max(a,f+1)}}i.push(o)}));n.push(Ln(e.element(),i,e.section()))}));var o=Dn(r,a);return{grid:i(o),access:i(t),all:i(n)}};var Rr=function(e){var t=_(e.all(),(function(e){return e.cells()}));return M(t)};var _r={generate:Nr,getAt:Sr,findItem:Tr,filterItems:Er,justCells:Rr};var Dr=K("minRow","minCol","maxRow","maxCol");var Or=function(e,t){var n=e.grid().columns();var r=e.grid().rows();var i=r;var a=n;var o=0;var u=0;V(e.access(),(function(e){if(t(e)){var n=e.row();var r=n+e.rowspan()-1;var s=e.column();var l=s+e.colspan()-1;if(n<i){i=n}else if(r>o){o=r}if(s<a){a=s}else if(l>u){u=l}}}));return Dr(i,a,o,u)};var Pr=function(e,t,n){var r=e[n].element();var i=je.fromTag("td");wn(i,je.fromTag("br"));var a=t?wn:yn;a(r,i)};var Ar=function(e,t,n,r){var i=t.grid().columns();var a=t.grid().rows();for(var o=0;o<a;o++){var u=false;for(var s=0;s<i;s++){if(!(o<n.minRow()||o>n.maxRow()||s<n.minCol()||s>n.maxCol())){var l=_r.getAt(t,o,s).filter(r).isNone();if(l){Pr(e,u,o)}else{u=true}}}}};var Br=function(e,t){var n=P(ar.firstLayer(e,"tr"),(function(e){return e.dom().childElementCount===0}));D(n,En);if(t.minCol()===t.maxCol()||t.minRow()===t.maxRow()){D(ar.firstLayer(e,"th,td"),(function(e){De(e,"rowspan");De(e,"colspan")}))}De(e,"width");De(e,"height");et(e,"width");et(e,"height")};var Ir=function(e,t){var n=function(e){return Gt(e.element(),t)};var r=Cr.fromTable(e);var i=_r.generate(r);var a=Or(i,n);var o="th:not("+t+")"+",td:not("+t+")";var u=ar.filterFirstLayer(e,"th,td",(function(e){return Gt(e,o)}));D(u,En);Ar(r,i,a,n);Br(e,a);return e};var Lr={extract:Ir};function Mr(e,t){var n=function(n){if(!e(n)){throw new Error("Can only get "+t+" value of a "+t+" node")}return r(n).getOr("")};var r=function(t){return e(t)?g.from(t.dom().nodeValue):g.none()};var i=function(n,r){if(!e(n)){throw new Error("Can only set raw "+t+" value of a "+t+" node")}n.dom().nodeValue=r};return{get:n,getOption:r,set:i}}var Fr=Mr(Se,"text");var Hr=function(e){return Fr.get(e)};var zr=function(e){return Fr.getOption(e)};var Ur=function(e,t){Fr.set(e,t)};var Wr=function(e){return ye(e)==="img"?1:zr(e).fold((function(){return vn(e).length}),(function(e){return e.length}))};var jr="";var Vr=function(e){return zr(e).filter((function(e){return e.trim().length!==0||e.indexOf(jr)>-1})).isSome()};var qr=["img","br"];var $r=function(e){var t=Vr(e);return t||N(qr,ye(e))};var Kr=function(e){return Zn(e,$r)};var Yr=function(e){return Xr(e,$r)};var Xr=function(e,t){var n=function(e){var r=vn(e);for(var i=r.length-1;i>=0;i--){var a=r[i];if(t(a)){return g.some(a)}var o=n(a);if(o.isSome()){return o}}return g.none()};return n(e)};var Gr=function(e,t){return je.fromDom(e.dom().cloneNode(t))};var Jr=function(e){return Gr(e,false)};var Zr=function(e){return Gr(e,true)};var Qr=function(e,t){var n=je.fromTag(t);var r=Oe(e);Ne(n,r);return n};var ei=function(e,t){var n=Qr(e,t);var r=vn(Zr(e));Sn(n,r);return n};var ti=function(){var e=je.fromTag("td");wn(e,je.fromTag("br"));return e};var ni=function(e,t,n){var r=ei(e,t);V(n,(function(e,t){if(e===null){De(r,t)}else{Ee(r,t,e)}}));return r};var ri=function(e){return e};var ii=function(e){return function(){return je.fromTag("tr",e.dom())}};var ai=function(e,t,n){var r=Kr(e);return r.map((function(r){var i=n.join(",");var a=qn(r,i,(function(t){return en(t,e)}));return A(a,(function(e,t){var n=Jr(t);De(n,"contenteditable");wn(e,n);return n}),t)})).getOr(t)};var oi=function(e,t,n){var r=function(t){var r=un(t.element());var i=je.fromTag(ye(t.element()),r.dom());var a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]);var o=a.length>0?ai(t.element(),i,a):i;wn(o,je.fromTag("br"));tt(t.element(),i);et(i,"height");if(t.colspan()!==1){et(t.element(),"width")}e(t.element(),i);return i};return{row:ii(t),cell:r,replace:ni,gap:ti}};var ui=function(e){return{row:ii(e),cell:ti,replace:ri,gap:ti}};var si={cellOperations:oi,paste:ui};var li=function(t,n){var r=n||e.document;var i=r.createElement("div");i.innerHTML=t;return vn(je.fromDom(i))};var fi=function(e,t){var n=t.column();var r=t.column()+t.colspan()-1;var i=t.row();var a=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&(i<=e.finishRow()&&a>=e.startRow())};var ci=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};var di=function(e,t){var n=true;var r=o(ci,t);for(var i=t.startRow();i<=t.finishRow();i++){for(var a=t.startCol();a<=t.finishCol();a++){n=n&&_r.getAt(e,i,a).exists(r)}}return n?g.some(t):g.none()};var vi={inSelection:fi,isWithin:ci,isRectangular:di};var mi=function(e,t){return Un(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))};var gi=function(e,t,n){var r=_r.findItem(e,t,en);var i=_r.findItem(e,n,en);return r.bind((function(e){return i.map((function(t){return mi(e,t)}))}))};var pi=function(e,t,n){return gi(e,t,n).bind((function(t){return vi.isRectangular(e,t)}))};var hi={getAnyBox:gi,getBox:pi};var bi=function(e,t,n,r){return _r.findItem(e,t,en).bind((function(t){var i=n>0?t.row()+t.rowspan()-1:t.row();var a=r>0?t.column()+t.colspan()-1:t.column();var o=_r.getAt(e,i+n,a+r);return o.map((function(e){return e.element()}))}))};var yi=function(e,t,n){return hi.getAnyBox(e,t,n).map((function(t){var n=_r.filterItems(e,o(vi.inSelection,t));return _(n,(function(e){return e.element()}))}))};var wi=function(e,t){var n=function(e,t){return an(t,e)};return _r.findItem(e,t,n).map((function(e){return e.element()}))};var xi={moveBy:bi,intercepts:yi,parentCell:wi};var Ci=function(e,t,n){return yr.table(e).bind((function(r){var i=Ei(r);return xi.moveBy(i,e,t,n)}))};var ki=function(e,t,n){var r=Ei(e);return xi.intercepts(r,t,n)};var Si=function(e,t,n,r,i){var a=Ei(e);var o=en(e,n)?g.some(t):xi.parentCell(a,t);var u=en(e,i)?g.some(r):xi.parentCell(a,r);return o.bind((function(e){return u.bind((function(t){return xi.intercepts(a,e,t)}))}))};var Ti=function(e,t,n){var r=Ei(e);return hi.getBox(r,t,n)};var Ei=function(e){var t=Cr.fromTable(e);return _r.generate(t)};var Ni={moveBy:Ci,intercepts:ki,nestedIntercepts:Si,getBox:Ti};var Ri=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function _i(){var e=function(e){return je.fromDom(e.dom().cloneNode(false))};var t=function(e){return e.dom().ownerDocument};var n=function(e){if(!ke(e)){return false}if(ye(e)==="body"){return true}return N(Ri,ye(e))};var r=function(e){if(!ke(e)){return false}return N(["br","img","hr","input"],ye(e))};var a=function(e,t){return e.dom().compareDocumentPosition(t.dom())};var o=function(e,t){var n=Oe(e);Ne(t,n)};return{up:i({selector:Qn,closest:nr,predicate:Xn,all:fn}),down:i({selector:Kn,predicate:Vn}),styles:i({get:Je,getRaw:Qe,set:Xe,remove:et}),attrs:i({get:Re,set:Ee,remove:De,copyTo:o}),insert:i({before:hn,after:bn,afterAll:kn,append:wn,appendAll:Sn,prepend:yn,wrap:xn}),remove:i({unwrap:Nn,remove:En}),create:i({nu:je.fromTag,clone:e,text:je.fromText}),query:i({comparePosition:a,prevSibling:cn,nextSibling:dn}),property:i({children:vn,name:ye,parent:ln,document:t,isText:Se,isComment:Ce,isElement:ke,getText:Hr,setText:Ur,isBoundary:n,isEmptyTag:r}),eq:en,is:on}}var Di=K("left","right");var Oi=K("first","second","splits");var Pi=function(e,t,n){var r=e.property().children(t);var a=L(r,o(e.eq,n));return a.map((function(e){return{before:i(r.slice(0,e)),after:i(r.slice(e+1))}}))};var Ai=function(e,t,n){return Pi(e,t,n).map((function(n){var r=e.create().clone(t);e.insert().appendAll(r,n.after());e.insert().after(t,r);return Di(t,r)}))};var Bi=function(e,t,n){return Pi(e,t,n).map((function(r){var i=e.create().clone(t);e.insert().appendAll(i,r.before().concat([n]));e.insert().appendAll(t,r.after());e.insert().before(t,i);return Di(i,t)}))};var Ii=function(e,t,n,r){var i=function(t,a,o){var u=Oi(t,g.none(),o);if(n(t)){return Oi(t,a,o)}else{return e.property().parent(t).bind((function(a){return r(e,a,t).map((function(e){var t=[{first:e.left,second:e.right}];var r=n(a)?a:e.left();return i(r,g.some(e.right()),o.concat(t))}))})).getOr(u)}};return i(t,g.none(),[])};var Li=function(e,t,n,r){var i=n[0];var a=n.slice(1);return r(e,t,i,a)};var Mi=function(e,t,n){return n.length>0?Li(e,t,n,Fi):g.none()};var Fi=function(e,t,n,r){var i=t(e,n);return A(r,(function(n,r){var i=t(e,r);return Hi(e,n,i)}),i)};var Hi=function(e,t,n){return t.bind((function(t){return n.filter(o(e.eq,t))}))};var zi=function(e,t){return o(e.eq,t)};var Ui=function(e,t,n,r){var i=e.property().children(t);if(e.eq(t,n[0])){return g.some([n[0]])}if(e.eq(t,r[0])){return g.some([r[0]])}var a=function(n){var r=z(n);var a=L(r,zi(e,t)).getOr(-1);var o=a<r.length-1?r[a+1]:r[a];return L(i,zi(e,o))};var o=a(n);var u=a(r);return o.bind((function(e){return u.map((function(t){var n=Math.min(e,t);var r=Math.max(e,t);return i.slice(n,r+1)}))}))};var Wi=function(e,t,n,r){if(r===void 0){r=l}var a=[t].concat(e.up().all(t));var o=[n].concat(e.up().all(n));var u=function(e){var t=L(e,r);return t.fold((function(){return e}),(function(t){return e.slice(0,t+1)}))};var s=u(a);var f=u(o);var c=I(s,(function(t){return R(f,zi(e,t))}));return{firstpath:i(s),secondpath:i(f),shared:i(c)}};var ji=function(e,t,n){var r=Wi(e,t,n);return r.shared().bind((function(t){return Ui(e,t,r.firstpath(),r.secondpath())}))};var Vi={subset:ji,ancestors:Wi};var qi=Mi;var $i=Vi.subset;var Ki=Vi.ancestors;var Yi=Bi;var Xi=Ai;var Gi=Ii;var Ji={sharedOne:qi,subset:$i,ancestors:Ki,breakToLeft:Yi,breakToRight:Xi,breakPath:Gi};var Zi=_i();var Qi=function(e,t){return Ji.sharedOne(Zi,(function(t,n){return e(n)}),t)};var ea=function(e,t){return Ji.subset(Zi,e,t)};var ta=function(e,t,n){return Ji.ancestors(Zi,e,t,n)};var na=function(e,t){return Ji.breakToLeft(Zi,e,t)};var ra=function(e,t){return Ji.breakToRight(Zi,e,t)};var ia=function(e,t,n){return Ji.breakPath(Zi,e,t,(function(e,t,r){return n(t,r)}))};var aa={sharedOne:Qi,subset:ea,ancestors:ta,breakToLeft:na,breakToRight:ra,breakPath:ia};var oa=ee(["boxes","start","finish"],[]);var ua={create:oa};var sa=function(e){return Qn(e,"table")};var la=function(e,t,n){var r=function(e){return function(t){return n!==undefined&&n(t)||en(t,e)}};if(en(e,t)){return g.some(ua.create({boxes:g.some([e]),start:e,finish:t}))}else{return sa(e).bind((function(i){return sa(t).bind((function(a){if(en(i,a)){return g.some(ua.create({boxes:Ni.intercepts(i,e,t),start:e,finish:t}))}else if(an(i,a)){var o=qn(t,"td,th",r(i));var u=o.length>0?o[o.length-1]:t;return g.some(ua.create({boxes:Ni.nestedIntercepts(i,e,i,t,a),start:e,finish:u}))}else if(an(a,i)){var o=qn(e,"td,th",r(a));var s=o.length>0?o[o.length-1]:e;return g.some(ua.create({boxes:Ni.nestedIntercepts(a,e,i,t,a),start:e,finish:s}))}else{return aa.ancestors(e,t).shared().bind((function(o){return nr(o,"table",n).bind((function(n){var o=qn(t,"td,th",r(n));var u=o.length>0?o[o.length-1]:t;var s=qn(e,"td,th",r(n));var l=s.length>0?s[s.length-1]:e;return g.some(ua.create({boxes:Ni.nestedIntercepts(n,e,i,t,a),start:l,finish:u}))}))}))}}))}))}};var fa=function(e,t){var n=Kn(e,t);return n.length>0?g.some(n):g.none()};var ca=function(e,t){return I(e,(function(e){return Gt(e,t)}))};var da=function(e,t,n){return tr(e,t).bind((function(t){return tr(e,n).bind((function(e){return aa.sharedOne(sa,[t,e]).map((function(n){return{first:i(t),last:i(e),table:i(n)}}))}))}))};var va=function(e,t){return Qn(e,"table").bind((function(n){return tr(n,t).bind((function(t){return la(t,e).bind((function(e){return e.boxes().map((function(t){return{boxes:i(t),start:i(e.start()),finish:i(e.finish())}}))}))}))}))};var ma=function(e,t,n,r,i){return ca(e,i).bind((function(e){return Ni.moveBy(e,t,n).bind((function(e){return va(e,r)}))}))};var ga={identify:la,retrieve:fa,shiftSelection:ma,getEdges:da};var pa=function(e,t){return ga.retrieve(e,t)};var ha=function(e,t,n){return ga.getEdges(e,t,n).bind((function(t){var n=function(t){return en(e,t)};var r=Qn(t.first(),"thead,tfoot,tbody,table",n);var i=Qn(t.last(),"thead,tfoot,tbody,table",n);return r.bind((function(e){return i.bind((function(n){return en(e,n)?Ni.getBox(t.table(),t.first(),t.last()):g.none()}))}))}))};var ba={retrieve:pa,retrieveBox:ha};var ya="data-mce-selected";var wa="td["+ya+"],th["+ya+"]";var xa="["+ya+"]";var Ca="data-mce-first-selected";var ka="td["+Ca+"],th["+Ca+"]";var Sa="data-mce-last-selected";var Ta="td["+Sa+"],th["+Sa+"]";var Ea={selected:i(ya),selectedSelector:i(wa),attributeSelector:i(xa),firstSelected:i(Ca),firstSelectedSelector:i(ka),lastSelected:i(Sa),lastSelectedSelector:i(Ta)};var Na=function(t){if(!y(t)){throw new Error("cases must be an array")}if(t.length===0){throw new Error("there must be at least one case")}var n=[];var r={};D(t,(function(i,a){var o=j(i);if(o.length!==1){throw new Error("one and only one name per case")}var u=o[0];var s=i[u];if(r[u]!==undefined){throw new Error("duplicate key detected:"+u)}else if(u==="cata"){throw new Error("cannot have a case named cata (sorry)")}else if(!y(s)){throw new Error("case arguments must be an array")}n.push(u);r[u]=function(){var r=arguments.length;if(r!==s.length){throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+r)}var i=new Array(r);for(var o=0;o<i.length;o++){i[o]=arguments[o]}var l=function(e){var t=j(e);if(n.length!==t.length){throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","))}var r=H(n,(function(e){return N(t,e)}));if(!r){throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "))}return e[u].apply(null,i)};return{fold:function(){if(arguments.length!==t.length){throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length)}var e=arguments[a];return e.apply(null,i)},match:l,log:function(t){e.console.log(t,{constructors:n,constructor:u,params:i})}}}}));return r};var Ra={generate:Na};var _a=Ra.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);var Da=function(e,t,n,r){return e.fold(t,n,r)};var Oa={cata:Da,none:_a.none,multiple:_a.multiple,single:_a.single};var Pa=function(e,t){return Oa.cata(t.get(),i([]),a,i([e]))};var Aa=function(e,t){var n=function(e){return _e(e,"rowspan")&&parseInt(Re(e,"rowspan"),10)>1||_e(e,"colspan")&&parseInt(Re(e,"colspan"),10)>1};var r=Pa(e,t);return r.length>0&&H(r,n)?g.some(r):g.none()};var Ba=function(e,t){return Oa.cata(t.get(),g.none,(function(t,n){if(t.length===0){return g.none()}return ba.retrieveBox(e,Ea.firstSelectedSelector(),Ea.lastSelectedSelector()).bind((function(e){return t.length>1?g.some({bounds:i(e),cells:i(t)}):g.none()}))}),g.none)};var Ia={mergable:Ba,unmergable:Aa,selection:Pa};var La=function(e){return{element:i(e),mergable:g.none,unmergable:g.none,selection:i([e])}};var Ma=function(e,t,n){return{element:i(n),mergable:i(Ia.mergable(t,e)),unmergable:i(Ia.unmergable(n,e)),selection:i(Ia.selection(n,e))}};var Fa=function(e){return La(e)};var Ha=K("element","clipboard","generators");var za=function(e,t,n,r,a){return{element:i(n),mergable:g.none,unmergable:g.none,selection:i(Ia.selection(n,e)),clipboard:i(r),generators:i(a)}};var Ua={noMenu:La,forMenu:Ma,notCell:Fa,paste:Ha,pasteRows:za};var Wa=function(e){return yr.table(e[0]).map(Zr).map((function(e){return[Lr.extract(e,Ea.attributeSelector())]}))};var ja=function(e,t){return _(t,(function(t){return e.selection.serializer.serialize(t.dom(),{})})).join("")};var Va=function(e){return _(e,(function(e){return e.dom().innerText})).join("")};var qa=function(e,t,r,i){e.on("BeforeGetContent",(function(r){var i=function(t){r.preventDefault();Wa(t).each((function(t){r.content=r.format==="text"?Va(t):ja(e,t)}))};if(r.selection===true){Oa.cata(t.get(),n,i,n)}}));e.on("BeforeSetContent",(function(t){if(t.selection===true&&t.paste===true){var n=g.from(e.dom.getParent(e.selection.getStart(),"th,td"));n.each((function(n){var a=je.fromDom(n);yr.table(a).each((function(n){var o=P(li(t.content),(function(e){return ye(e)!=="meta"}));if(o.length===1&&ye(o[0])==="table"){t.preventDefault();var u=je.fromDom(e.getDoc());var s=si.paste(u);var l=Ua.paste(a,o[0],s);r.pasteCells(n,l).each((function(t){e.selection.setRng(t);e.focus();i.clear(n)}))}}))}))}}))};var $a={registerEvents:qa};function Ka(e,t){var n=function(t,n){if(!C(n)&&!n.match(/^[0-9]+$/)){throw new Error(e+".set accepts only positive integer values. Value was "+n)}var r=t.dom();if(Le(r)){r.style[e]=n+"px"}};var r=function(n){var r=t(n);if(r<=0||r===null){var i=Je(n,e);return parseFloat(i)||0}return r};var i=r;var a=function(e,t){return B(t,(function(t,n){var r=Je(e,n);var i=r===undefined?0:parseInt(r,10);return isNaN(i)?t:t+i}),0)};var o=function(e,t,n){var r=a(e,n);var i=t>r?t-r:0;return i};return{set:n,get:r,getOuter:i,aggregate:a,max:o}}var Ya=Ka("height",(function(e){var t=e.dom();return Ve(e)?t.getBoundingClientRect().height:t.offsetHeight}));var Xa=function(e){return Ya.get(e)};var Ga=function(e){return Ya.getOuter(e)};var Ja=Ka("width",(function(e){return e.dom().offsetWidth}));var Za=function(e){return Ja.get(e)};var Qa=function(e){return Ja.getOuter(e)};var eo=Kt.detect();var to=function(){return eo.browser.isIE()||eo.browser.isEdge()};var no=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n};var ro=function(e,t,n){return no(Je(e,t),n)};var io=function(e){var t=ro(e,"padding-top",0);var n=ro(e,"padding-bottom",0);var r=ro(e,"border-top-width",0);var i=ro(e,"border-bottom-width",0);var a=e.dom().getBoundingClientRect().height;var o=Je(e,"box-sizing");var u=r+i;return o==="border-box"?a:a-t-n-u};var ao=function(e){return ro(e,"width",Za(e))};var oo=function(e){return to()?io(e):ro(e,"height",Xa(e))};var uo={getWidth:ao,getHeight:oo};var so=/(\d+(\.\d+)?)(\w|%)*/;var lo=/(\d+(\.\d+)?)%/;var fo=/(\d+(\.\d+)?)px|em/;var co=function(e,t){Xe(e,"width",t+"px")};var vo=function(e,t){Xe(e,"width",t+"%")};var mo=function(e,t){Xe(e,"height",t+"px")};var go=function(e){return Qe(e,"height").getOrThunk((function(){return uo.getHeight(e)+"px"}))};var po=function(e,t,n,r){var i=yr.table(e).map((function(e){var r=n(e);return Math.floor(t/100*r)})).getOr(t);r(e,i);return i};var ho=function(e,t,n,r){var i=parseInt(e,10);return Be(e,"%")&&ye(t)!=="table"?po(t,i,n,r):i};var bo=function(e){var t=go(e);if(!t){return Xa(e)}return ho(t,e,Xa,mo)};var yo=function(e,t,n){var r=n(e);var i=wo(e,t);return r/i};var wo=function(e,t){return _e(e,t)?parseInt(Re(e,t),10):1};var xo=function(e){var t=Qe(e,"width");return t.fold((function(){return g.from(Re(e,"width"))}),(function(e){return g.some(e)}))};var Co=function(e,t){return e/t.pixelWidth()*100};var ko=function(e,t,n){var r=lo.exec(t);if(r!==null){return parseFloat(r[1])}else{var i=Za(e);return Co(i,n)}};var So=function(e,t){var n=xo(e);return n.fold((function(){var n=Za(e);return Co(n,t)}),(function(n){return ko(e,n,t)}))};var To=function(e,t){return e/100*t.pixelWidth()};var Eo=function(e,t,n){var r=fo.exec(t);if(r!==null){return parseInt(r[1],10)}var i=lo.exec(t);if(i!==null){var a=parseFloat(i[1]);return To(a,n)}return Za(e)};var No=function(e,t){var n=xo(e);return n.fold((function(){return Za(e)}),(function(n){return Eo(e,n,t)}))};var Ro=function(e){return yo(e,"rowspan",bo)};var _o=function(e){var t=xo(e);return t.bind((function(e){var t=so.exec(e);if(t!==null){return g.some({width:i(parseFloat(t[1])),unit:i(t[3])})}else{return g.none()}}))};var Do=function(e,t,n){Xe(e,"width",t+n)};var Oo={percentageBasedSizeRegex:i(lo),pixelBasedSizeRegex:i(fo),setPixelWidth:co,setPercentageWidth:vo,setHeight:mo,getPixelWidth:No,getPercentageWidth:So,getGenericWidth:_o,setGenericWidth:Do,getHeight:Ro,getRawWidth:xo};var Po=function(e,t){var n=Oo.getGenericWidth(e);n.each((function(n){var r=n.width()/2;Oo.setGenericWidth(e,r,n.unit());Oo.setGenericWidth(t,r,n.unit())}))};var Ao={halve:Po};var Bo=function(e,t){var n=function(n,r){return Bo(e+n,t+r)};return{left:i(e),top:i(t),translate:n}};var Io=Bo;var Lo=function(e){var t=e.getBoundingClientRect();return Io(t.left,t.top)};var Mo=function(e,t){return e!==undefined?e:t!==undefined?t:0};var Fo=function(e){var t=e.dom().ownerDocument;var n=t.body;var r=t.defaultView;var i=t.documentElement;var a=Mo(r.pageYOffset,i.scrollTop);var o=Mo(r.pageXOffset,i.scrollLeft);var u=Mo(i.clientTop,n.clientTop);var s=Mo(i.clientLeft,n.clientLeft);return Ho(e).translate(o-s,a-u)};var Ho=function(e){var t=e.dom();var n=t.ownerDocument;var r=n.body;if(r===t){return Io(r.offsetLeft,r.offsetTop)}if(!Ve(e)){return Io(0,0)}return Lo(t)};var zo=K("row","y");var Uo=K("col","x");var Wo=function(e){var t=Fo(e);return t.left()+Qa(e)};var jo=function(e){return Fo(e).left()};var Vo=function(e,t){return Uo(e,jo(t))};var qo=function(e,t){return Uo(e,Wo(t))};var $o=function(e){return Fo(e).top()};var Ko=function(e,t){return zo(e,$o(t))};var Yo=function(e,t){return zo(e,$o(t)+Ga(t))};var Xo=function(e,t,n){if(n.length===0){return[]}var r=_(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))}));var i=n[n.length-1].map((function(e){return t(n.length-1,e)}));return r.concat([i])};var Go=function(e){return-e};var Jo={delta:a,positions:function(e){return Xo(Ko,Yo,e)},edge:$o};var Zo={delta:a,edge:jo,positions:function(e){return Xo(Vo,qo,e)}};var Qo={delta:Go,edge:Wo,positions:function(e){return Xo(qo,Vo,e)}};var eu={height:Jo,rtl:Qo,ltr:Zo};var tu={ltr:eu.ltr,rtl:eu.rtl};function nu(e){var t=function(t){return e(t).isRtl()?tu.rtl:tu.ltr};var n=function(e,n){return t(n).delta(e,n)};var r=function(e,n){return t(n).positions(e,n)};var i=function(e){return t(e).edge(e)};return{delta:n,edge:i,positions:r}}var ru=function(e){var t=Cr.fromTable(e);var n=_r.generate(t);return n.grid()};var iu={getGridSize:ru};var au=function(){au=Object.assign||function e(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a))t[a]=n[a]}return t};return au.apply(this,arguments)};var ou=function(e){var t=[];var n=function(e){t.push(e)};for(var r=0;r<e.length;r++){e[r].each(n)}return t};var uu=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome()){return r}}return g.none()};var su=function(e,t,n,r){if(n===r){De(e,t)}else{Ee(e,t,n)}};var lu=function(e,t){var n=[];var r=[];var a=function(t,i){var a=er(e,i).getOrThunk((function(){var t=je.fromTag(i,un(e).dom());wn(e,t);return t}));Tn(a);var o=_(t,(function(e){if(e.isNew()){n.push(e.element())}var t=e.element();Tn(t);D(e.cells(),(function(e){if(e.isNew()){r.push(e.element())}su(e.element(),"colspan",e.colspan(),1);su(e.element(),"rowspan",e.rowspan(),1);wn(t,e.element())}));return t}));Sn(a,o)};var o=function(t){er(e,t).each(En)};var u=function(e,t){if(e.length>0){a(e,t)}else{o(t)}};var s=[];var l=[];var f=[];D(t,(function(e){switch(e.section()){case"thead":s.push(e);break;case"tbody":l.push(e);break;case"tfoot":f.push(e);break}}));u(s,"thead");u(l,"tbody");u(f,"tfoot");return{newRows:i(n),newCells:i(r)}};var fu=function(e){var t=_(e,(function(e){var t=Jr(e.element());D(e.cells(),(function(e){var n=Zr(e.element());su(n,"colspan",e.colspan(),1);su(n,"rowspan",e.rowspan(),1);wn(t,n)}));return t}));return t};var cu={render:lu,copy:fu};var du=function(e,t){var n=Re(e,t);return n===undefined||n===""?[]:n.split(" ")};var vu=function(e,t,n){var r=du(e,t);var i=r.concat([n]);Ee(e,t,i.join(" "));return true};var mu=function(e,t,n){var r=P(du(e,t),(function(e){return e!==n}));if(r.length>0){Ee(e,t,r.join(" "))}else{De(e,t)}return false};var gu=function(e){return e.dom().classList!==undefined};var pu=function(e){return du(e,"class")};var hu=function(e,t){return vu(e,"class",t)};var bu=function(e,t){return mu(e,"class",t)};var yu=function(e,t){if(gu(e)){e.dom().classList.add(t)}else{hu(e,t)}};var wu=function(e){var t=gu(e)?e.dom().classList:pu(e);if(t.length===0){De(e,"class")}};var xu=function(e,t){if(gu(e)){var n=e.dom().classList;n.remove(t)}else{bu(e,t)}wu(e)};var Cu=function(e,t){return gu(e)&&e.dom().classList.contains(t)};var ku=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var Su=function(e,t){var n=[];for(var r=e;r<t;r++){n.push(r)}return n};var Tu=function(e,t){if(t<0||t>=e.length-1){return g.none()}var n=e[t].fold((function(){var n=z(e.slice(0,t));return uu(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return g.some({value:e,delta:0})}));var r=e[t+1].fold((function(){var n=e.slice(t+1);return uu(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return g.some({value:e,delta:1})}));return n.bind((function(e){return r.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))};var Eu=function(e){var t=e.grid();var n=Su(0,t.columns());var r=Su(0,t.rows());return _(n,(function(t){var n=function(){return F(r,(function(n){return _r.getAt(e,n,t).filter((function(e){return e.column()===t})).fold(i([]),(function(e){return[e]}))}))};var a=function(e){return e.colspan()===1};var o=function(){return _r.getAt(e,0,t)};return Nu(n,a,o)}))};var Nu=function(e,t,n){var r=e();var i=I(r,t);var a=i.orThunk((function(){return g.from(r[0]).orThunk(n)}));return a.map((function(e){return e.element()}))};var Ru=function(e){var t=e.grid();var n=Su(0,t.rows());var r=Su(0,t.columns());return _(n,(function(t){var n=function(){return F(r,(function(n){return _r.getAt(e,t,n).filter((function(e){return e.row()===t})).fold(i([]),(function(e){return[e]}))}))};var a=function(e){return e.rowspan()===1};var o=function(){return _r.getAt(e,t,0)};return Nu(n,a,o)}))};var _u={columns:Eu,rows:Ru};var Du=function(e){var t=e.replace(/\./g,"-");var n=function(e){return t+"-"+e};return{resolve:n}};var Ou=Du("ephox-snooker");var Pu={resolve:Ou.resolve};var Au=function(e,t,n,r,i){var a=je.fromTag("div");Ge(a,{position:"absolute",left:t-r/2+"px",top:n+"px",height:i+"px",width:r+"px"});Ne(a,{"data-column":e,role:"presentation"});return a};var Bu=function(e,t,n,r,i){var a=je.fromTag("div");Ge(a,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:r+"px"});Ne(a,{"data-row":e,role:"presentation"});return a};var Iu={col:Au,row:Bu};var Lu=Pu.resolve("resizer-bar");var Mu=Pu.resolve("resizer-rows");var Fu=Pu.resolve("resizer-cols");var Hu=7;var zu=function(e){var t=Kn(e.parent(),"."+Lu);D(t,En)};var Uu=function(e,t,n){var r=e.origin();D(t,(function(t,i){t.each((function(t){var i=n(r,t);yu(i,Lu);wn(e.parent(),i)}))}))};var Wu=function(e,t,n,r){Uu(e,t,(function(e,t){var i=Iu.col(t.col(),t.x()-e.left(),n.top()-e.top(),Hu,r);yu(i,Fu);return i}))};var ju=function(e,t,n,r){Uu(e,t,(function(e,t){var i=Iu.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,Hu);yu(i,Mu);return i}))};var Vu=function(e,t,n,r,i,a){var o=Fo(t);var u=n.length>0?i.positions(n,t):[];ju(e,u,o,Qa(t));var s=r.length>0?a.positions(r,t):[];Wu(e,s,o,Ga(t))};var qu=function(e,t,n,r){zu(e);var i=Cr.fromTable(t);var a=_r.generate(i);var o=_u.rows(a);var u=_u.columns(a);Vu(e,t,o,u,n,r)};var $u=function(e,t){var n=Kn(e.parent(),"."+Lu);D(n,t)};var Ku=function(e){$u(e,(function(e){Xe(e,"display","none")}))};var Yu=function(e){$u(e,(function(e){Xe(e,"display","block")}))};var Xu=function(e){return Cu(e,Mu)};var Gu=function(e){return Cu(e,Fu)};var Ju={refresh:qu,hide:Ku,show:Yu,destroy:zu,isRowBar:Xu,isColBar:Gu};var Zu=function(e,t,n){var r=e.cells();var i=r.slice(0,t);var a=r.slice(t);var o=i.concat([n]).concat(a);return es(e,o)};var Qu=function(e,t,n){var r=e.cells();r[t]=n};var es=function(e,t){return Hn(t,e.section())};var ts=function(e,t){var n=e.cells();var r=_(n,t);return Hn(r,e.section())};var ns=function(e,t){return e.cells()[t]};var rs=function(e,t){return ns(e,t).element()};var is=function(e){return e.cells().length};var as={addCell:Zu,setCells:es,mutateCell:Qu,getCell:ns,getCellElement:rs,mapCells:ts,cellLength:is};var os=function(e,t){return _(e,(function(e){return as.getCell(e,t)}))};var us=function(e,t){return e[t]};var ss=function(e,t){if(e.length===0){return 0}var n=e[0];var r=L(e,(function(e){return!t(n.element(),e.element())}));return r.fold((function(){return e.length}),(function(e){return e}))};var ls=function(e,t,n,r){var a=us(e,t).cells().slice(n);var o=ss(a,r);var u=os(e,n).slice(t);var s=ss(u,r);return{colspan:i(o),rowspan:i(s)}};var fs={subgrid:ls};var cs=function(e,t){var n=_(e,(function(e,t){return _(e.cells(),(function(e,t){return false}))}));var r=function(e,t,r,i){for(var a=e;a<e+r;a++){for(var o=t;o<t+i;o++){n[a][o]=true}}};return _(e,(function(i,a){var o=F(i.cells(),(function(i,o){if(n[a][o]===false){var u=fs.subgrid(e,a,o,t);r(a,o,u.rowspan(),u.colspan());return[Bn(i.element(),u.rowspan(),u.colspan(),i.isNew())]}else{return[]}}));return zn(o,i.section())}))};var ds=function(e,t,n){var r=[];for(var i=0;i<e.grid().rows();i++){var a=[];for(var o=0;o<e.grid().columns();o++){var u=_r.getAt(e,i,o).map((function(e){return Mn(e.element(),n)})).getOrThunk((function(){return Mn(t.gap(),true)}));a.push(u)}var s=Hn(a,e.all()[i].section());r.push(s)}return r};var vs={toDetails:cs,toGrid:ds};var ms=function(e,t){return vs.toGrid(e,t,false)};var gs=function(e,t){var n=function(e){var n=uu(e,(function(e){return ln(e.element()).map((function(e){var t=ln(e).isNone();return Mn(e,t)}))}));return n.getOrThunk((function(){return Mn(t.row(),true)}))};return _(e,(function(e){var t=n(e.details());return Fn(t.element(),e.details(),e.section(),t.isNew())}))};var ps=function(e,t){var n=vs.toDetails(e,en);return gs(n,t)};var hs=function(e,t){var n=M(_(e.all(),(function(e){return e.cells()})));return I(n,(function(e){return en(t,e.element())}))};var bs=function(e,t,n,r,a){return function(o,u,s,l,f){var c=Cr.fromTable(u);var d=_r.generate(c);var v=t(d,s).map((function(t){var n=ms(d,l);var r=e(n,t,en,a(l));var o=ps(r.grid(),l);return{grid:i(o),cursor:r.cursor}}));return v.fold((function(){return g.none()}),(function(e){var t=cu.render(u,e.grid());n(u,e.grid(),f);r(u);Ju.refresh(o,u,eu.height,f);return g.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}};var ys=function(e,t){return yr.cell(t.element()).bind((function(t){return hs(e,t)}))};var ws=function(e,t){return yr.cell(t.element()).bind((function(n){return hs(e,n).map((function(e){var n=au(au({},e),{generators:t.generators,clipboard:t.clipboard});return n}))}))};var xs=function(e,t){var n=_(t.selection(),(function(t){return yr.cell(t).bind((function(t){return hs(e,t)}))}));var r=ou(n);return r.length>0?g.some({cells:r,generators:t.generators,clipboard:t.clipboard}):g.none()};var Cs=function(e,t){return t.mergable()};var ks=function(e,t){return t.unmergable()};var Ss=function(e,t){var n=_(t.selection(),(function(t){return yr.cell(t).bind((function(t){return hs(e,t)}))}));var r=ou(n);return r.length>0?g.some(r):g.none()};var Ts=function(e){var t=function(t){return e===t};var n=function(t){return Ts(e)};var r=function(t){return Ts(e)};var a=function(t){return Ts(t(e))};var o=function(t){return Ts(e)};var u=function(t){t(e)};var s=function(t){return t(e)};var c=function(t,n){return n(e)};var d=function(t){return t(e)};var v=function(t){return t(e)};var m=function(){return g.some(e)};return{is:t,isValue:f,isError:l,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:n,orThunk:r,fold:c,map:a,mapError:o,each:u,bind:s,exists:d,forall:v,toOption:m}};var Es=function(e){var t=function(e){return e()};var r=function(){return s(String(e))()};var i=function(e){return e};var o=function(e){return e()};var u=function(t){return Es(e)};var c=function(t){return Es(t(e))};var d=function(t){return Es(e)};var v=function(t,n){return t(e)};return{is:l,isValue:l,isError:f,getOr:a,getOrThunk:t,getOrDie:r,or:i,orThunk:o,fold:v,map:u,mapError:c,each:n,bind:d,exists:l,forall:f,toOption:g.none}};var Ns=function(e,t){return e.fold((function(){return Es(t)}),Ts)};var Rs={value:Ts,error:Es,fromOption:Ns};var _s=function(e,t,n){if(e.row()>=t.length||e.column()>as.cellLength(t[0])){return Rs.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column())}var r=t.slice(e.row());var a=r[0].cells().slice(e.column());var o=as.cellLength(n[0]);var u=n.length;return Rs.value({rowDelta:i(r.length-u),colDelta:i(a.length-o)})};var Ds=function(e,t){var n=as.cellLength(e[0]);var r=as.cellLength(t[0]);return{rowDelta:i(0),colDelta:i(n-r)}};var Os=function(e,t){return _(e,(function(){return Mn(t.cell(),true)}))};var Ps=function(e,t,n){return e.concat(ku(t,(function(t){return as.setCells(e[e.length-1],Os(e[e.length-1].cells(),n))})))};var As=function(e,t,n){return _(e,(function(e){return as.setCells(e,e.cells().concat(Os(Su(0,t),n)))}))};var Bs=function(e,t,n){var r=t.colDelta()<0?As:a;var i=t.rowDelta()<0?Ps:a;var o=r(e,Math.abs(t.colDelta()),n);var u=i(o,Math.abs(t.rowDelta()),n);return u};var Is={measure:_s,measureWidth:Ds,tailor:Bs};var Ls=function(e,t,n,r){if(e.length===0){return e}for(var i=t.startRow();i<=t.finishRow();i++){for(var a=t.startCol();a<=t.finishCol();a++){as.mutateCell(e[i],a,Mn(r(),false))}}return e};var Ms=function(e,t,n,r){var i=true;for(var a=0;a<e.length;a++){for(var o=0;o<as.cellLength(e[0]);o++){var u=as.getCellElement(e[a],o);var s=n(u,t);if(s===true&&i===false){as.mutateCell(e[a],o,Mn(r(),true))}else if(s===true){i=false}}}return e};var Fs=function(e,t){return B(e,(function(e,n){return R(e,(function(e){return t(e.element(),n.element())}))?e:e.concat([n])}),[])};var Hs=function(e,t,n,r){if(t>0&&t<e.length){var i=e[t-1].cells();var a=Fs(i,n);D(a,(function(i){var a=g.none();var o=function(t){var o=function(o){var u=e[t].cells()[o];var s=n(u.element(),i.element());if(s){if(a.isNone()){a=g.some(r())}a.each((function(n){as.mutateCell(e[t],o,Mn(n,true))}))}};for(var u=0;u<as.cellLength(e[0]);u++){o(u)}};for(var u=t;u<e.length;u++){o(u)}}))}return e};var zs={merge:Ls,unmerge:Ms,splitRows:Hs};var Us=function(e,t,n,r){var i=as.getCell(e[t],n);var a=o(r,i.element());var u=e[t];return e.length>1&&as.cellLength(u)>1&&(n>0&&a(as.getCellElement(u,n-1))||n<u.cells().length-1&&a(as.getCellElement(u,n+1))||t>0&&a(as.getCellElement(e[t-1],n))||t<e.length-1&&a(as.getCellElement(e[t+1],n)))};var Ws=function(e,t,n,r,i){var a=e.row();var o=e.column();var u=n.length;var s=as.cellLength(n[0]);var l=a+u;var f=o+s;for(var c=a;c<l;c++){for(var d=o;d<f;d++){if(Us(t,c,d,i)){zs.unmerge(t,as.getCellElement(t[c],d),i,r.cell)}var v=as.getCellElement(n[c-a],d-o);var m=r.replace(v);as.mutateCell(t[c],d,Mn(m,true))}}return t};var js=function(e,t,n,r,i){var a=Is.measure(e,t,n);return a.map((function(a){var o=Is.tailor(t,a,r);return Ws(e,o,n,r,i)}))};var Vs=function(e,t,n,r,i){zs.splitRows(t,e,i,r.cell);var a=Is.measureWidth(n,t);var o=Is.tailor(n,a,r);var u=Is.measureWidth(t,o);var s=Is.tailor(t,u,r);return s.slice(0,e).concat(o).concat(s.slice(e,s.length))};var qs={merge:js,insert:Vs};var $s=function(e,t,n,r,i){var a=e.slice(0,t);var o=e.slice(t);var u=as.mapCells(e[n],(function(n,a){var o=t>0&&t<e.length&&r(as.getCellElement(e[t-1],a),as.getCellElement(e[t],a));var u=o?as.getCell(e[t],a):Mn(i(n.element(),r),true);return u}));return a.concat([u]).concat(o)};var Ks=function(e,t,n,r,i){return _(e,(function(e){var a=t>0&&t<as.cellLength(e)&&r(as.getCellElement(e,t-1),as.getCellElement(e,t));var o=a?as.getCell(e,t):Mn(i(as.getCellElement(e,n),r),true);return as.addCell(e,t,o)}))};var Ys=function(e,t,n,r,i){var a=n+1;return _(e,(function(e,o){var u=o===t;var s=u?Mn(i(as.getCellElement(e,n),r),true):as.getCell(e,n);return as.addCell(e,a,s)}))};var Xs=function(e,t,n,r,i){var a=t+1;var o=e.slice(0,a);var u=e.slice(a);var s=as.mapCells(e[t],(function(e,t){var a=t===n;return a?Mn(i(e.element(),r),true):e}));return o.concat([s]).concat(u)};var Gs=function(e,t,n){var r=_(e,(function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Hn(r,e.section())}));return P(r,(function(e){return e.cells().length>0}))};var Js=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))};var Zs={insertRowAt:$s,insertColumnAt:Ks,splitCellIntoColumns:Ys,splitCellIntoRows:Xs,deleteRowsAt:Js,deleteColumnsAt:Gs};var Qs=function(e,t,n,r){var i=function(e){return R(t,(function(t){return n(e.element(),t.element())}))};return _(e,(function(e){return as.mapCells(e,(function(e){return i(e)?Mn(r(e.element(),n),true):e}))}))};var el=function(e,t,n,r){return as.getCellElement(e[t],n)!==undefined&&(t>0&&r(as.getCellElement(e[t-1],n),as.getCellElement(e[t],n)))};var tl=function(e,t,n){return t>0&&n(as.getCellElement(e,t-1),as.getCellElement(e,t))};var nl=function(e,t,n,r){var i=F(e,(function(r,i){var a=el(e,i,t,n)||tl(r,t,n);return a?[]:[as.getCell(r,t)]}));return Qs(e,i,n,r)};var rl=function(e,t,n,r){var i=e[t];var a=F(i.cells(),(function(r,a){var o=el(e,t,a,n)||tl(i,a,n);return o?[]:[r]}));return Qs(e,a,n,r)};var il={replaceColumn:nl,replaceRow:rl};var al=Ra.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]);var ol=au({},al);var ul=function(e,t){if(e.length===0){return ol.none()}if(e.length===1){return ol.only(0)}if(t===0){return ol.left(0,1)}if(t===e.length-1){return ol.right(t-1,t)}if(t>0&&t<e.length-1){return ol.middle(t-1,t,t+1)}return ol.none()};var sl=function(e,t,n,r){var a=e.slice(0);var o=ul(e,t);var u=function(e){return _(e,i(0))};var s=i(u(a));var l=function(e){return r.singleColumnWidth(a[e],n)};var f=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),a[t]-n);return u(a.slice(0,e)).concat([n,i-a[t]]).concat(u(a.slice(t+1)))}else{var o=Math.max(r.minCellWidth(),a[e]+n);var s=a[e]-o;return u(a.slice(0,e)).concat([o-a[e],s]).concat(u(a.slice(t+1)))}};var c=f;var d=function(e,t,n){return f(t,n)};var v=function(e,t){if(n>=0){return u(a.slice(0,t)).concat([n])}else{var i=Math.max(r.minCellWidth(),a[t]+n);return u(a.slice(0,t)).concat([i-a[t]])}};return o.fold(s,l,c,d,v)};var ll={determine:sl};var fl=function(e,t){return _e(e,t)&&parseInt(Re(e,t),10)>1};var cl=function(e){return fl(e,"colspan")};var dl=function(e){return fl(e,"rowspan")};var vl=function(e,t){return parseInt(Je(e,t),10)};var ml={hasColspan:cl,hasRowspan:dl,minWidth:i(10),minHeight:i(10),getInt:vl};var gl=function(e,t,n){return Qe(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))};var pl=function(e,t){return gl(e,"width",(function(e){return Oo.getPixelWidth(e,t)}))};var hl=function(e){return gl(e,"height",Oo.getHeight)};var bl=function(e,t,n,r,i){var a=_u.columns(e);var o=_(a,(function(e){return e.map(t.edge)}));return _(a,(function(e,t){var a=e.filter(u(ml.hasColspan));return a.fold((function(){var e=Tu(o,t);return r(e)}),(function(e){return n(e,i)}))}))};var yl=function(e){return e.map((function(e){return e+"px"})).getOr("")};var wl=function(e,t,n){return bl(e,t,pl,yl,n)};var xl=function(e,t,n){return bl(e,t,Oo.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)};var Cl=function(e,t,n){return bl(e,t,Oo.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)};var kl=function(e,t,n,r){var i=_u.rows(e);var a=_(i,(function(e){return e.map(t.edge)}));return _(i,(function(e,t){var i=e.filter(u(ml.hasRowspan));return i.fold((function(){var e=Tu(a,t);return r(e)}),(function(e){return n(e)}))}))};var Sl=function(e,t){return kl(e,t,Oo.getHeight,(function(e){return e.getOrThunk(ml.minHeight)}))};var Tl=function(e,t){return kl(e,t,hl,yl)};var El={getRawWidths:wl,getPixelWidths:Cl,getPercentageWidths:xl,getPixelHeights:Sl,getRawHeights:Tl};var Nl=function(e,t,n){var r=0;for(var i=e;i<t;i++){r+=n[i]!==undefined?n[i]:0}return r};var Rl=function(e,t){var n=_r.justCells(e);return _(n,(function(e){var n=Nl(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:i(n),colspan:e.colspan}}))};var _l=function(e,t){var n=_r.justCells(e);return _(n,(function(e){var n=Nl(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:i(n),rowspan:e.rowspan}}))};var Dl=function(e,t){return _(e.all(),(function(e,n){return{element:e.element,height:i(t[n])}}))};var Ol={recalculateWidth:Rl,recalculateHeight:_l,matchRowHeight:Dl};var Pl=function(e,t){var n=parseFloat(e);var r=Za(t);var a=function(e){return e/r*100};var o=function(e,t){return[100-e]};var u=function(){return ml.minWidth()/r*100};var s=function(e,t,r){var i=r/100;var a=i*n;Oo.setPercentageWidth(e,n+a)};return{width:i(n),pixelWidth:i(r),getWidths:El.getPercentageWidths,getCellDelta:a,singleColumnWidth:o,minCellWidth:u,setElementWidth:Oo.setPercentageWidth,setTableWidth:s}};var Al=function(e){var t=a;var n=function(e,t){var n=Math.max(ml.minWidth(),e+t);return[n-e]};var r=function(e,t,n){var r=A(t,(function(e,t){return e+t}),0);Oo.setPixelWidth(e,r)};return{width:i(e),pixelWidth:i(e),getWidths:El.getPixelWidths,getCellDelta:t,singleColumnWidth:n,minCellWidth:ml.minWidth,setElementWidth:Oo.setPixelWidth,setTableWidth:r}};var Bl=function(e,t){var n=Oo.percentageBasedSizeRegex().exec(t);if(n!==null){return Pl(n[1],e)}var r=Oo.pixelBasedSizeRegex().exec(t);if(r!==null){var i=parseInt(r[1],10);return Al(i)}var a=Za(e);return Al(a)};var Il=function(e){var t=Oo.getRawWidth(e);return t.fold((function(){var t=Za(e);return Al(t)}),(function(t){return Bl(e,t)}))};var Ll={getTableSize:Il};var Ml=function(e){return _r.generate(e)};var Fl=function(e){return A(e,(function(e,t){return e+t}),0)};var Hl=function(e){var t=Cr.fromTable(e);return Ml(t)};var zl=function(e,t,n,r){var i=Ll.getTableSize(e);var a=i.getCellDelta(t);var o=Hl(e);var u=i.getWidths(o,r,i);var s=ll.determine(u,n,a,i);var l=_(s,(function(e,t){return e+u[t]}));var f=Ol.recalculateWidth(o,l);D(f,(function(e){i.setElementWidth(e.element(),e.width())}));if(n===o.grid().columns()-1){i.setTableWidth(e,l,a)}};var Ul=function(e,t,n,r){var i=Hl(e);var a=El.getPixelHeights(i,r);var o=_(a,(function(e,r){return n===r?Math.max(t+e,ml.minHeight()):e}));var u=Ol.recalculateHeight(i,o);var s=Ol.matchRowHeight(i,o);D(s,(function(e){Oo.setHeight(e.element(),e.height())}));D(u,(function(e){Oo.setHeight(e.element(),e.height())}));var l=Fl(o);Oo.setHeight(e,l)};var Wl=function(e,t,n){var r=Ll.getTableSize(e);var i=Ml(t);var a=r.getWidths(i,n,r);var o=Ol.recalculateWidth(i,a);D(o,(function(e){r.setElementWidth(e.element(),e.width())}));if(o.length>0){r.setTableWidth(e,a,r.getCellDelta(0))}};var jl={adjustWidth:zl,adjustHeight:Ul,adjustWidthTo:Wl};var Vl=function(e){var t=e;var n=function(){return t};var r=function(e){t=e};var i=function(){return Vl(n())};return{get:n,set:r,clone:i}};var ql=function(e,t){return $l(e,t,{validate:x,label:"function"})};var $l=function(e,t,n){if(t.length===0){throw new Error("You must specify at least one required field.")}J("required",t);Q(t);return function(r){var i=j(r);var a=H(t,(function(e){return N(i,e)}));if(!a){X(t,i)}e(t,i);var o=P(t,(function(e){return!n.validate(r[e],e)}));if(o.length>0){Z(o,n.label)}return r}};var Kl=function(e,t){var n=P(t,(function(t){return!N(e,t)}));if(n.length>0){G(n)}};var Yl=function(e){return ql(Kl,e)};var Xl=Yl(["cell","row","replace","gap"]);var Gl=function(e){var t=_e(e,"colspan")?parseInt(Re(e,"colspan"),10):1;var n=_e(e,"rowspan")?parseInt(Re(e,"rowspan"),10):1;return{element:i(e),colspan:i(t),rowspan:i(n)}};var Jl=function(e,t){if(t===void 0){t=Gl}Xl(e);var n=Vl(g.none());var r=function(t){return e.cell(t)};var i=function(e){var n=t(e);return r(n)};var a=function(e){var t=i(e);if(n.get().isNone()){n.set(g.some(t))}o=g.some({item:e,replacement:t});return t};var o=g.none();var u=function(e,t){return o.fold((function(){return a(e)}),(function(n){return t(e,n.item)?n.replacement:a(e)}))};return{getOrInit:u,cursor:n.get}};var Zl=function(e,t){return function(n){var r=Vl(g.none());Xl(n);var i=[];var a=function(e,t){return I(i,(function(n){return t(n.item,e)}))};var o=function(a){var o={scope:e};var u=n.replace(a,t,o);i.push({item:a,sub:u});if(r.get().isNone()){r.set(g.some(u))}return u};var u=function(e,t){return a(e,t).fold((function(){return o(e)}),(function(n){return t(e,n.item)?n.sub:o(e)}))};return{replaceOrInit:u,cursor:r.get}}};var Ql=function(e){Xl(e);var t=Vl(g.none());var n=function(n){if(t.get().isNone()){t.set(g.some(n))}return function(){var t=e.cell({element:i(n),colspan:i(1),rowspan:i(1)});et(t,"width");et(n,"width");return t}};return{combine:n,cursor:t.get}};var ef={modification:Jl,transform:Zl,merging:Ql};var tf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];var nf=function(e,t){var n=e.property().name(t);return N(["ol","ul"],n)};var rf=function(e,t){var n=e.property().name(t);return N(tf,n)};var af=function(e,t){var n=e.property().name(t);return N(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)};var of=function(e,t){var n=e.property().name(t);return N(["h1","h2","h3","h4","h5","h6"],n)};var uf=function(e,t){return N(["div","li","td","th","blockquote","body","caption"],e.property().name(t))};var sf=function(e,t){return N(["br","img","hr","input"],e.property().name(t))};var lf=function(e,t){return e.property().name(t)==="iframe"};var ff=function(e,t){return!(rf(e,t)||sf(e,t))&&e.property().name(t)!=="li"};var cf={isBlock:rf,isList:nf,isFormatting:af,isHeading:of,isContainer:uf,isEmptyTag:sf,isFrame:lf,isInline:ff};var df=_i();var vf=function(e){return cf.isBlock(df,e)};var mf=function(e){return cf.isList(df,e)};var gf=function(e){return cf.isFormatting(df,e)};var pf=function(e){return cf.isHeading(df,e)};var hf=function(e){return cf.isContainer(df,e)};var bf=function(e){return cf.isEmptyTag(df,e)};var yf=function(e){return cf.isFrame(df,e)};var wf=function(e){return cf.isInline(df,e)};var xf={isBlock:vf,isList:mf,isFormatting:gf,isHeading:pf,isContainer:hf,isEmptyTag:bf,isFrame:yf,isInline:wf};var Cf=function(e){var t=function(e){return ye(e)==="br"};var n=function(e){return H(e,(function(e){return t(e)||Se(e)&&Hr(e).trim().length===0}))};var r=function(e){return ye(e)==="li"||Xn(e,xf.isList).isSome()};var i=function(e){return dn(e).map((function(e){if(xf.isBlock(e)){return true}if(xf.isEmptyTag(e)){return ye(e)==="img"?false:true}return false})).getOr(false)};var a=function(e){return Yr(e).bind((function(n){var a=i(n);return ln(n).map((function(i){return a===true||r(i)||t(n)||xf.isBlock(i)&&!en(e,i)?[]:[je.fromTag("br")]}))})).getOr([])};var o=function(){var t=F(e,(function(e){var t=vn(e);return n(t)?[]:t.concat(a(e))}));return t.length===0?[je.fromTag("br")]:t};var u=o();Tn(e[0]);Sn(e[0],u)};var kf={merge:Cf};var Sf=function(e){var t=yr.cells(e);if(t.length===0){En(e)}};var Tf=K("grid","cursor");var Ef=function(e,t,n){return Nf(e,t,n).orThunk((function(){return Nf(e,0,0)}))};var Nf=function(e,t,n){return g.from(e[t]).bind((function(e){return g.from(e.cells()[n]).bind((function(e){return g.from(e.element())}))}))};var Rf=function(e,t,n){return Tf(e,Nf(e,t,n))};var _f=function(e){return B(e,(function(e,t){return R(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))};var Df=function(e){return B(e,(function(e,t){return R(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))};var Of=function(e,t,n,r){var i=t.row();var a=t.row();var o=Zs.insertRowAt(e,a,i,n,r.getOrInit);return Rf(o,a,t.column())};var Pf=function(e,t,n,r){var i=t[0].row();var a=t[0].row();var o=_f(t);var u=B(o,(function(e,t){return Zs.insertRowAt(e,a,i,n,r.getOrInit)}),e);return Rf(u,a,t[0].column())};var Af=function(e,t,n,r){var i=t.row();var a=t.row()+t.rowspan();var o=Zs.insertRowAt(e,a,i,n,r.getOrInit);return Rf(o,a,t.column())};var Bf=function(e,t,n,r){var i=_f(t);var a=i[i.length-1].row();var o=i[i.length-1].row()+i[i.length-1].rowspan();var u=B(i,(function(e,t){return Zs.insertRowAt(e,o,a,n,r.getOrInit)}),e);return Rf(u,o,t[0].column())};var If=function(e,t,n,r){var i=t.column();var a=t.column();var o=Zs.insertColumnAt(e,a,i,n,r.getOrInit);return Rf(o,t.row(),a)};var Lf=function(e,t,n,r){var i=Df(t);var a=i[0].column();var o=i[0].column();var u=B(i,(function(e,t){return Zs.insertColumnAt(e,o,a,n,r.getOrInit)}),e);return Rf(u,t[0].row(),o)};var Mf=function(e,t,n,r){var i=t.column();var a=t.column()+t.colspan();var o=Zs.insertColumnAt(e,a,i,n,r.getOrInit);return Rf(o,t.row(),a)};var Ff=function(e,t,n,r){var i=t[t.length-1].column();var a=t[t.length-1].column()+t[t.length-1].colspan();var o=Df(t);var u=B(o,(function(e,t){return Zs.insertColumnAt(e,a,i,n,r.getOrInit)}),e);return Rf(u,t[0].row(),a)};var Hf=function(e,t,n,r){var i=il.replaceRow(e,t.row(),n,r.replaceOrInit);return Rf(i,t.row(),t.column())};var zf=function(e,t,n,r){var i=il.replaceColumn(e,t.column(),n,r.replaceOrInit);return Rf(i,t.row(),t.column())};var Uf=function(e,t,n,r){var i=il.replaceRow(e,t.row(),n,r.replaceOrInit);return Rf(i,t.row(),t.column())};var Wf=function(e,t,n,r){var i=il.replaceColumn(e,t.column(),n,r.replaceOrInit);return Rf(i,t.row(),t.column())};var jf=function(e,t,n,r){var i=Zs.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return Rf(i,t.row(),t.column())};var Vf=function(e,t,n,r){var i=Zs.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return Rf(i,t.row(),t.column())};var qf=function(e,t,n,r){var i=Df(t);var a=Zs.deleteColumnsAt(e,i[0].column(),i[i.length-1].column());var o=Ef(a,t[0].row(),t[0].column());return Tf(a,o)};var $f=function(e,t,n,r){var i=_f(t);var a=Zs.deleteRowsAt(e,i[0].row(),i[i.length-1].row());var o=Ef(a,t[0].row(),t[0].column());return Tf(a,o)};var Kf=function(e,t,n,r){var a=t.cells();kf.merge(a);var o=zs.merge(e,t.bounds(),n,i(a[0]));return Tf(o,g.from(a[0]))};var Yf=function(e,t,n,r){var i=A(t,(function(e,t){return zs.unmerge(e,t,n,r.combine(t))}),e);return Tf(i,g.from(t[0]))};var Xf=function(e,t,n,r){var i=function(e,t){var n=Cr.fromTable(e);var r=_r.generate(n);return vs.toGrid(r,t,true)};var a=i(t.clipboard(),t.generators());var o=On(t.row(),t.column());var u=qs.merge(o,e,a,t.generators(),n);return u.fold((function(){return Tf(e,g.some(t.element()))}),(function(e){var n=Ef(e,t.row(),t.column());return Tf(e,n)}))};var Gf=function(e,t,n){var r=Cr.fromPastedRows(e,n);var i=_r.generate(r);return vs.toGrid(i,t,true)};var Jf=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[0].row();var o=Gf(t.clipboard(),t.generators(),i);var u=qs.insert(a,e,o,t.generators(),n);var s=Ef(u,t.cells[0].row(),t.cells[0].column());return Tf(u,s)};var Zf=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan();var o=Gf(t.clipboard(),t.generators(),i);var u=qs.insert(a,e,o,t.generators(),n);var s=Ef(u,t.cells[0].row(),t.cells[0].column());return Tf(u,s)};var Qf=jl.adjustWidthTo;var ec={insertRowBefore:bs(Of,ys,n,n,ef.modification),insertRowsBefore:bs(Pf,Ss,n,n,ef.modification),insertRowAfter:bs(Af,ys,n,n,ef.modification),insertRowsAfter:bs(Bf,Ss,n,n,ef.modification),insertColumnBefore:bs(If,ys,Qf,n,ef.modification),insertColumnsBefore:bs(Lf,Ss,Qf,n,ef.modification),insertColumnAfter:bs(Mf,ys,Qf,n,ef.modification),insertColumnsAfter:bs(Ff,Ss,Qf,n,ef.modification),splitCellIntoColumns:bs(jf,ys,Qf,n,ef.modification),splitCellIntoRows:bs(Vf,ys,n,n,ef.modification),eraseColumns:bs(qf,Ss,Qf,Sf,ef.modification),eraseRows:bs($f,Ss,n,Sf,ef.modification),makeColumnHeader:bs(zf,ys,n,n,ef.transform("row","th")),unmakeColumnHeader:bs(Wf,ys,n,n,ef.transform(null,"td")),makeRowHeader:bs(Hf,ys,n,n,ef.transform("col","th")),unmakeRowHeader:bs(Uf,ys,n,n,ef.transform(null,"td")),mergeCells:bs(Kf,Cs,n,n,ef.merging),unmergeCells:bs(Yf,ks,Qf,n,ef.merging),pasteCells:bs(Xf,ws,Qf,n,ef.modification),pasteRowsBefore:bs(Jf,xs,n,n,ef.modification),pasteRowsAfter:bs(Zf,xs,n,n,ef.modification)};var tc=function(e){return je.fromDom(e.getBody())};var nc=function(e){return e.getBoundingClientRect().width};var rc=function(e){return e.getBoundingClientRect().height};var ic=function(e){return function(t){return en(t,tc(e))}};var ac=function(e){return e?e.replace(/px$/,""):""};var oc=function(e){if(/^[0-9]+$/.test(e)){e+="px"}return e};var uc=function(e){var t=Kn(e,"td[data-mce-style],th[data-mce-style]");De(e,"data-mce-style");D(t,(function(e){De(e,"data-mce-style")}))};var sc=function(e){return Je(e,"direction")==="rtl"?"rtl":"ltr"};var lc={isRtl:i(false)};var fc={isRtl:i(true)};var cc=function(e){var t=sc(e);return t==="rtl"?fc:lc};var dc={directionAt:cc};var vc=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"];var mc={"border-collapse":"collapse",width:"100%"};var gc={border:"1"};var pc=function(e){return e.getParam("table_default_attributes",gc,"object")};var hc=function(e){return e.getParam("table_default_styles",mc,"object")};var bc=function(e){return e.getParam("table_resize_bars",true,"boolean")};var yc=function(e){return e.getParam("table_tab_navigation",true,"boolean")};var wc=function(e){return e.getParam("table_cell_advtab",true,"boolean")};var xc=function(e){return e.getParam("table_row_advtab",true,"boolean")};var Cc=function(e){return e.getParam("table_advtab",true,"boolean")};var kc=function(e){return e.getParam("table_appearance_options",true,"boolean")};var Sc=function(e){return e.getParam("table_grid",true,"boolean")};var Tc=function(e){return e.getParam("table_style_by_css",false,"boolean")};var Ec=function(e){return e.getParam("table_cell_class_list",[],"array")};var Nc=function(e){return e.getParam("table_row_class_list",[],"array")};var Rc=function(e){return e.getParam("table_class_list",[],"array")};var _c=function(e){return e.getParam("color_picker_callback")};var Dc=function(e){return e.getParam("table_responsive_width")===false};var Oc=function(e){var t=e.getParam("table_clone_elements");if(b(t)){return g.some(t.split(/[ ,]/))}else if(Array.isArray(t)){return g.some(t)}else{return g.none()}};var Pc=function(e){var t=e.getParam("object_resizing",true);return t==="table"||t};var Ac=function(e){var t=e.getParam("table_toolbar",vc);if(t===""||t===false){return[]}else if(b(t)){return t.split(/[ ,]/)}else if(y(t)){return t}else{return[]}};var Bc=function(e,t){return e.fire("newrow",{node:t})};var Ic=function(e,t){return e.fire("newcell",{node:t})};var Lc=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})};var Mc=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})};var Fc=function(e,t){var r=function(e){return ye(tc(e))==="table"};var i=function(t){var n=iu.getGridSize(t);return r(e)===false||n.rows()>1};var a=function(t){var n=iu.getGridSize(t);return r(e)===false||n.columns()>1};var o=Oc(e);var u=function(t,n,r,i){return function(a,u){uc(a);var s=i();var l=je.fromDom(e.getDoc());var f=nu(dc.directionAt);var c=si.cellOperations(r,l,o);return n(a)?t(s,a,u,c,f).bind((function(t){D(t.newRows(),(function(t){Bc(e,t.dom())}));D(t.newCells(),(function(t){Ic(e,t.dom())}));return t.cursor().map((function(t){var n=e.dom.createRng();n.setStart(t.dom(),0);n.setEnd(t.dom(),0);return n}))})):g.none()}};var s=u(ec.eraseRows,i,n,t);var l=u(ec.eraseColumns,a,n,t);var c=u(ec.insertRowsBefore,f,n,t);var d=u(ec.insertRowsAfter,f,n,t);var v=u(ec.insertColumnsBefore,f,Ao.halve,t);var m=u(ec.insertColumnsAfter,f,Ao.halve,t);var p=u(ec.mergeCells,f,n,t);var h=u(ec.unmergeCells,f,n,t);var b=u(ec.pasteRowsBefore,f,n,t);var y=u(ec.pasteRowsAfter,f,n,t);var w=u(ec.pasteCells,f,n,t);return{deleteRow:s,deleteColumn:l,insertRowsBefore:c,insertRowsAfter:d,insertColumnsBefore:v,insertColumnsAfter:m,mergeCells:p,unmergeCells:h,pasteRowsBefore:b,pasteRowsAfter:y,pasteCells:w}};var Hc=function(e,t,n){var r=Cr.fromTable(e);var i=_r.generate(r);var a=Ss(i,t);return a.map((function(e){var t=vs.toGrid(i,n,false);var r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());var a=ps(r,n);return cu.copy(a)}))};var zc={copyRows:Hc};var Uc=tinymce.util.Tools.resolve("tinymce.util.Tools");var Wc=function(e,t,n){var r=e.select("td,th",t);var i;var a=function(t,r){for(var i=0;i<r.length;i++){var a=e.getStyle(r[i],n);if(typeof t==="undefined"){t=a}if(t!==a){return""}}return t};i=a(i,r);return i};var jc=function(e,t,n){if(n){e.formatter.apply("align"+n,{},t)}};var Vc=function(e,t,n){if(n){e.formatter.apply("valign"+n,{},t)}};var qc=function(e,t){Uc.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))};var $c=function(e,t){Uc.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))};var Kc={applyAlign:jc,applyVAlign:Vc,unApplyAlign:qc,unApplyVAlign:$c,getTDTHOverallStyle:Wc};var Yc=function(e,t,n){var r=function(e,n){n=n||[];Uc.each(e,(function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;if(t){t(i)}}n.push(i)}));return n};return r(e,n||[])};function Xc(t){return t.control.rootControl.find("#style")[0].getEl().isEqualNode(e.document.activeElement)}var Gc=function(e,t){if(Xc(t)){Zc(e,t)}else{Jc(e,t)}};var Jc=function(e,t){var n=e.dom;var r=t.control.rootControl;var i=r.toJSON();var a=n.parseStyle(i.style);a["border-style"]=i.borderStyle;a["border-color"]=i.borderColor;a["background-color"]=i.backgroundColor;a.width=i.width?oc(i.width):"";a.height=i.height?oc(i.height):"";r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(a))))};var Zc=function(e,t){var n=e.dom;var r=t.control.rootControl;var i=r.toJSON();var a=n.parseStyle(i.style);r.find("#borderStyle").value(a["border-style"]||"");r.find("#borderColor").value(a["border-color"]||"");r.find("#backgroundColor").value(a["background-color"]||"");r.find("#width").value(a.width||"");r.find("#height").value(a.height||"")};var Qc=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style"));var r={};if(n["border-style"]){r.borderStyle=n["border-style"]}if(n["border-color"]){r.borderColor=n["border-color"]}if(n["background-color"]){r.backgroundColor=n["background-color"]}r.style=e.serializeStyle(n);return r};var ed=function(e){var t=function(){var t=_c(e);if(t){return function(n){return t.call(e,(function(e){n.control.value(e).fire("change")}),n.control.value())}}};return{title:"Advanced",type:"form",defaults:{onchange:o(Jc,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:o(Zc,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:o(Jc,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}};var td={createStyleForm:ed,buildListItems:Yc,updateStyleField:Jc,extractAdvancedStyles:Qc,updateAdvancedFields:Zc,syncAdvancedStyleFields:Gc};var nd=function(e,t){delete e.dataset.mceStyle;e.style.cssText+=";"+t};var rd=function(e,t){var n=e.dom;var r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};Uc.each("left center right".split(" "),(function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}}));Uc.each("top middle bottom".split(" "),(function(n){if(e.formatter.matchNode(t,"valign"+n)){r.valign=n}}));if(wc(e)){Uc.extend(r,td.extractAdvancedStyles(n,t))}return r};var id=function(e,t,n){var r=e.dom;var i;function a(e,n,i){if(t.length===1||i){r.setAttrib(e,n,i)}}function o(e,n,i){if(t.length===1||i){r.setStyle(e,n,i)}}if(wc(e)){td.syncAdvancedStyleFields(e,n)}i=n.control.rootControl.toJSON();e.undoManager.transact((function(){Uc.each(t,(function(n){a(n,"scope",i.scope);if(t.length===1){a(n,"style",i.style)}else{nd(n,i.style)}a(n,"class",i.class);o(n,"width",oc(i.width));o(n,"height",oc(i.height));if(i.type&&n.nodeName.toLowerCase()!==i.type){n=r.rename(n,i.type)}if(t.length===1){Kc.unApplyAlign(e,n);Kc.unApplyVAlign(e,n)}if(i.align){Kc.applyAlign(e,n,i.align)}if(i.valign){Kc.applyVAlign(e,n,i.valign)}}));e.focus()}))};var ad=function(e){var t,n,r,i=[];i=e.dom.select("td[data-mce-selected],th[data-mce-selected]");t=e.dom.getParent(e.selection.getStart(),"td,th");if(!i.length&&t){i.push(t)}t=t||i[0];if(!t){return}if(i.length>1){n={width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}}else{n=rd(e,t)}if(Ec(e).length>0){r={name:"class",type:"listbox",label:"Class",values:td.buildListItems(Ec(e),(function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})}}}))}}var a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:o(td.updateStyleField,e)},{label:"Height",name:"height",onchange:o(td.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};if(wc(e)){e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:a},td.createStyleForm(e)],onsubmit:o(id,e,i)})}else{e.windowManager.open({title:"Cell properties",data:n,body:a,onsubmit:o(id,e,i)})}};var od={open:ad};var ud=function(e,t){var n=e.dom;var r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};Uc.each("left center right".split(" "),(function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}}));if(xc(e)){Uc.extend(r,td.extractAdvancedStyles(n,t))}return r};var sd=function(e,t,n){var r=e.getParent(t,"table");var i=t.parentNode;var a=e.select(n,r)[0];if(!a){a=e.create(n);if(r.firstChild){if(r.firstChild.nodeName==="CAPTION"){e.insertAfter(a,r.firstChild)}else{r.insertBefore(a,r.firstChild)}}else{r.appendChild(a)}}a.appendChild(t);if(!i.hasChildNodes()){e.remove(i)}};function ld(e,t,n,r){var i=e.dom;function a(e,n,r){if(t.length===1||r){i.setAttrib(e,n,r)}}function o(e,n,r){if(t.length===1||r){i.setStyle(e,n,r)}}if(xc(e)){td.syncAdvancedStyleFields(e,r)}var u=r.control.rootControl.toJSON();e.undoManager.transact((function(){Uc.each(t,(function(t){a(t,"scope",u.scope);a(t,"style",u.style);a(t,"class",u.class);o(t,"height",oc(u.height));if(u.type!==t.parentNode.nodeName.toLowerCase()){sd(e.dom,t,u.type)}if(u.align!==n.align){Kc.unApplyAlign(e,t);Kc.applyAlign(e,t,u.align)}}));e.focus()}))}var fd=function(e){var t=e.dom;var n,r,i,a,u;var s=[];var l;n=t.getParent(e.selection.getStart(),"table");r=t.getParent(e.selection.getStart(),"td,th");Uc.each(n.rows,(function(e){Uc.each(e.cells,(function(n){if(t.getAttrib(n,"data-mce-selected")||n===r){s.push(e);return false}}))}));i=s[0];if(!i){return}if(s.length>1){u={height:"",scope:"",style:"",class:"",align:"",type:i.parentNode.nodeName.toLowerCase()}}else{u=ud(e,i)}if(Nc(e).length>0){a={name:"class",type:"listbox",label:"Class",values:td.buildListItems(Nc(e),(function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})}}}))}}l={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},a]};if(xc(e)){e.windowManager.open({title:"Row properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},td.createStyleForm(e)],onsubmit:o(ld,e,s,u)})}else{e.windowManager.open({title:"Row properties",data:u,body:l,onsubmit:o(ld,e,s,u)})}};var cd={open:fd};var dd=tinymce.util.Tools.resolve("tinymce.Env");var vd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:true};var md=function(){return je.fromTag("table")};var gd=function(){return je.fromTag("tbody")};var pd=function(){return je.fromTag("tr")};var hd=function(){return je.fromTag("th")};var bd=function(){return je.fromTag("td")};var yd=function(e,t,n,r,i){if(i===void 0){i=vd}var a=md();Ge(a,i.styles);Ne(a,i.attributes);var o=gd();wn(a,o);var u=[];for(var s=0;s<e;s++){var l=pd();for(var f=0;f<t;f++){var c=s<n||f<r?hd():bd();if(f<r){Ee(c,"scope","row")}if(s<n){Ee(c,"scope","col")}wn(c,je.fromTag("br"));if(i.percentages){Xe(c,"width",100/t+"%")}wn(l,c)}u.push(l)}Sn(o,u);return a};var wd=function(e){return e.dom().innerHTML};var xd=function(e){var t=je.fromTag("div");var n=je.fromDom(e.dom().cloneNode(true));wn(t,n);return wd(t)};var Cd=function(e,t){e.selection.select(t.dom(),true);e.selection.collapse(true)};var kd=function(e,t){tr(t,"td,th").each(o(Cd,e))};var Sd=function(e,t){D(Kn(t,"tr"),(function(t){Bc(e,t.dom());D(Kn(t,"th,td"),(function(t){Ic(e,t.dom())}))}))};var Td=function(e){return b(e)&&e.indexOf("%")!==-1};var Ed=function(e,t,n){var r=hc(e);var i={styles:r,attributes:pc(e),percentages:Td(r.width)&&!Dc(e)};var a=yd(n,t,0,0,i);Ee(a,"data-mce-id","__mce");var o=xd(a);e.insertContent(o);return tr(tc(e),'table[data-mce-id="__mce"]').map((function(t){if(Dc(e)){Xe(t,"width",Je(t,"width"))}De(t,"data-mce-id");Sd(e,t);kd(e,t);return t.dom()})).getOr(null)};var Nd={insert:Ed};function Rd(e,t,n,r){if(t.tagName==="TD"||t.tagName==="TH"){e.setStyle(t,n,r)}else{if(t.children){for(var i=0;i<t.children.length;i++){Rd(e,t.children[i],n,r)}}}}var _d=function(e,t){var n=e.dom;var r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||Kc.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||Kc.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};Uc.each("left center right".split(" "),(function(n){if(e.formatter.matchNode(t,"align"+n)){r.align=n}}));if(Cc(e)){Uc.extend(r,td.extractAdvancedStyles(n,t))}return r};var Dd=function(e,t,n){var r=e.dom;var i={};var a={};i.class=n.class;a.height=oc(n.height);if(r.getAttrib(t,"width")&&!Tc(e)){i.width=ac(n.width)}else{a.width=oc(n.width)}if(Tc(e)){a["border-width"]=oc(n.border);a["border-spacing"]=oc(n.cellspacing);Uc.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})}else{Uc.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing})}if(Tc(e)){if(t.children){for(var o=0;o<t.children.length;o++){Rd(r,t.children[o],{"border-width":oc(n.border),"border-color":n.borderColor,padding:oc(n.cellpadding)})}}}if(n.style){Uc.extend(a,r.parseStyle(n.style))}else{a=Uc.extend({},r.parseStyle(r.getAttrib(t,"style")),a)}i.style=r.serializeStyle(a);r.setAttribs(t,i)};var Od=function(e,t,n){var r=e.dom;var i;var a;if(Cc(e)){td.syncAdvancedStyleFields(e,n)}a=n.control.rootControl.toJSON();if(a.class===false){delete a.class}e.undoManager.transact((function(){if(!t){t=Nd.insert(e,a.cols||1,a.rows||1)}Dd(e,t,a);i=r.select("caption",t)[0];if(i&&!a.caption){r.remove(i)}if(!i&&a.caption){i=r.create("caption");i.innerHTML=!dd.ie?'<br data-mce-bogus="1"/>':"";t.insertBefore(i,t.firstChild)}Kc.unApplyAlign(e,t);if(a.align){Kc.applyAlign(e,t,a.align)}e.focus();e.addVisual()}))};var Pd=function(e,t){var n=e.dom;var r,i,a,u,s={},l;if(t===true){r=n.getParent(e.selection.getStart(),"table");if(r){s=_d(e,r)}}else{i={label:"Cols",name:"cols"};a={label:"Rows",name:"rows"}}if(Rc(e).length>0){if(s.class){s.class=s.class.replace(/\s*mce\-item\-table\s*/g,"")}u={name:"class",type:"listbox",label:"Class",values:td.buildListItems(Rc(e),(function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})}}}))}}l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:kc(e)?[i,a,{label:"Width",name:"width",onchange:o(td.updateStyleField,e)},{label:"Height",name:"height",onchange:o(td.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[i,a,{label:"Width",name:"width",onchange:o(td.updateStyleField,e)},{label:"Height",name:"height",onchange:o(td.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},u]};if(Cc(e)){e.windowManager.open({title:"Table properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},td.createStyleForm(e)],onsubmit:o(Od,e,r)})}else{e.windowManager.open({title:"Table properties",data:s,body:l,onsubmit:o(Od,e,r)})}};var Ad={open:Pd};var Bd=Uc.each;var Id=function(e,t,r,i,a){var s=ic(e);var l=function(){d().orThunk(c).each((function(t){var n=yr.table(t,s);n.filter(u(s)).each((function(t){var n=je.fromText("");bn(t,n);En(t);var r=e.dom.createRng();r.setStart(n.dom(),0);r.setEnd(n.dom(),0);e.selection.setRng(r)}))}))};var f=function(t){return function(){return g.from(e.dom.getParent(e.selection.getStart(),t)).map(je.fromDom)}};var c=f("caption");var d=f("th,td");var v=function(e){return yr.table(e,s)};var m=function(e){return{width:nc(e.dom()),height:nc(e.dom())}};var p=function(e,t,n){var r=m(n);if(t.width!==r.width||t.height!==r.height){Lc(e,n.dom(),t.width,t.height);Mc(e,n.dom(),r.width,r.height)}};var h=function(t){d().each((function(n){v(n).each((function(a){var o=Ua.forMenu(i,a,n);var u=m(a);t(a,o).each((function(t){p(e,u,a);e.selection.setRng(t);e.focus();r.clear(a);uc(a)}))}))}))};var b=function(t){return d().bind((function(t){return v(t).bind((function(r){var a=je.fromDom(e.getDoc());var o=Ua.forMenu(i,r,t);var u=si.cellOperations(n,a,g.none());return zc.copyRows(r,o,u)}))}))};var y=function(t){a.get().each((function(n){var a=_(n,(function(e){return Zr(e)}));d().each((function(n){v(n).each((function(o){var u=je.fromDom(e.getDoc());var s=si.paste(u);var l=Ua.pasteRows(i,o,n,a,s);t(o,l).each((function(t){e.selection.setRng(t);e.focus();r.clear(o)}))}))}))}))};Bd({mceTableSplitCells:function(){h(t.unmergeCells)},mceTableMergeCells:function(){h(t.mergeCells)},mceTableInsertRowBefore:function(){h(t.insertRowsBefore)},mceTableInsertRowAfter:function(){h(t.insertRowsAfter)},mceTableInsertColBefore:function(){h(t.insertColumnsBefore)},mceTableInsertColAfter:function(){h(t.insertColumnsAfter)},mceTableDeleteCol:function(){h(t.deleteColumn)},mceTableDeleteRow:function(){h(t.deleteRow)},mceTableCutRow:function(e){a.set(b());h(t.deleteRow)},mceTableCopyRow:function(e){a.set(b())},mceTablePasteRowBefore:function(e){y(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){y(t.pasteRowsAfter)},mceTableDelete:l},(function(t,n){e.addCommand(n,t)}));Bd({mceInsertTable:o(Ad.open,e),mceTableProps:o(Ad.open,e,true),mceTableRowProps:o(cd.open,e),mceTableCellProps:o(od.open,e)},(function(t,n){e.addCommand(n,(function(e,n){t(n)}))}))};var Ld={registerCommands:Id};var Md=function(e){var t=g.from(e.dom().documentElement).map(je.fromDom).getOr(e);return{parent:i(t),view:i(e),origin:i(Io(0,0))}};var Fd=function(e,t){var n=function(){return Fo(t)};return{parent:i(t),view:i(e),origin:n}};var Hd=function(e,t){return{parent:i(t),view:i(e),origin:i(Io(0,0))}};var zd={only:Md,detached:Fd,body:Hd};var Ud=function(e){var t=K.apply(null,e);var n=[];var r=function(e){if(e===undefined){throw new Error("Event bind error: undefined handler")}n.push(e)};var i=function(e){n=P(n,(function(t){return t!==e}))};var a=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var i=t.apply(null,e);D(n,(function(e){e(i)}))};return{bind:r,unbind:i,trigger:a}};var Wd=function(e){var t=q(e,(function(e){return{bind:e.bind,unbind:e.unbind}}));var n=q(e,(function(e){return e.trigger}));return{registry:t,trigger:n}};var jd={create:Wd};var Vd=function(e,t,n,r,a,o,u){return{target:i(e),x:i(t),y:i(n),stop:r,prevent:a,kill:o,raw:i(u)}};var qd=function(e,t){return function(n){if(!e(n)){return}var i=je.fromDom(n.target);var a=function(){n.stopPropagation()};var o=function(){n.preventDefault()};var u=r(o,a);var s=Vd(i,n.clientX,n.clientY,a,o,u,n);t(s)}};var $d=function(e,t,n,r,i){var a=qd(n,r);e.dom().addEventListener(t,a,i);return{unbind:o(Yd,e,t,a,i)}};var Kd=function(e,t,n,r){return $d(e,t,n,r,false)};var Yd=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};var Xd=i(true);var Gd=function(e,t,n){return Kd(e,t,Xd,n)};var Jd=Object.prototype.hasOwnProperty;var Zd=function(e,t){return t};var Qd=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(Jd.call(a,o)){r[o]=e(r[o],a[o])}}}return r}};var ev=Qd(Zd);var tv=Du("ephox-dragster");var nv={resolve:tv.resolve};var rv=function(e){var t=ev({layerClass:nv.resolve("blocker")},e);var n=je.fromTag("div");Ee(n,"role","presentation");Ge(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"});yu(n,nv.resolve("blocker"));yu(n,t.layerClass);var r=function(){return n};var i=function(){En(n)};return{element:r,destroy:i}};var iv=Yl(["compare","extract","mutate","sink"]);var av=Yl(["element","start","stop","destroy"]);var ov=Yl(["forceDrop","drop","move","delayDrop"]);var uv=function(e,t){return Io(t.left()-e.left(),t.top()-e.top())};var sv=function(e){return g.some(Io(e.x(),e.y()))};var lv=function(e,t){e.mutate(t.left(),t.top())};var fv=function(e,t){var n=rv(t);var r=Gd(n.element(),"mousedown",e.forceDrop);var i=Gd(n.element(),"mouseup",e.drop);var a=Gd(n.element(),"mousemove",e.move);var o=Gd(n.element(),"mouseout",e.delayDrop);var u=function(){n.destroy();i.unbind();a.unbind();o.unbind();r.unbind()};var s=function(e){wn(e,n.element())};var l=function(){En(n.element())};return av({element:n.element,start:s,stop:l,destroy:u})};var cv=iv({compare:uv,extract:sv,sink:fv,mutate:lv});var dv=function(t,n){var r=null;var i=function(){if(r!==null){e.clearTimeout(r);r=null}};var a=function(){var i=[];for(var a=0;a<arguments.length;a++){i[a]=arguments[a]}if(r!==null){e.clearTimeout(r)}r=e.setTimeout((function(){t.apply(null,i);r=null}),n)};return{cancel:i,throttle:a}};function vv(){var e=g.none();var t=function(){e=g.none()};var n=function(t,n){var r=e.map((function(e){return t.compare(e,n)}));e=g.some(n);return r};var r=function(e,t){var r=t.extract(e);r.each((function(e){var r=n(t,e);r.each((function(e){i.trigger.move(e)}))}))};var i=jd.create({move:Ud(["info"])});return{onEvent:r,reset:t,events:i.registry}}function mv(){return{onEvent:n,reset:n}}function gv(){var e=mv();var t=vv();var n=e;var r=function(){n.reset();n=t};var i=function(){n.reset();n=e};var a=function(e,t){n.onEvent(e,t)};var o=function(){return n===t};return{on:r,off:i,isOn:o,onEvent:a,events:t.events}}var pv=function(e,t,n){var r=false;var i=jd.create({start:Ud([]),stop:Ud([])});var a=gv();var o=function(){v.stop();if(a.isOn()){a.off();i.trigger.stop()}};var u=dv(o,200);var s=function(e){v.start(e);a.on();i.trigger.start()};var l=function(e){u.cancel();a.onEvent(e,t)};a.events.move.bind((function(n){t.mutate(e,n.info())}));var f=function(){r=true};var c=function(){r=false};var d=function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(r){e.apply(null,t)}}};var v=t.sink(ov({forceDrop:o,drop:d(o),move:d(l),delayDrop:d(u.throttle)}),n);var m=function(){v.destroy()};return{element:v.element,go:s,on:f,off:c,destroy:m,events:i.registry}};var hv={setup:pv};var bv=function(e,t){if(t===void 0){t={}}var n=t.mode!==undefined?t.mode:cv;return hv.setup(e,n,t)};var yv={transform:bv};var wv=function(){var e=jd.create({drag:Ud(["xDelta","yDelta"])});var t=function(t,n){e.trigger.drag(t,n)};return{mutate:t,events:e.registry}};var xv=function(){var e=jd.create({drag:Ud(["xDelta","yDelta","target"])});var t=g.none();var n=wv();n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)}))}));var r=function(e){t=g.some(e)};var i=function(){return t};return{assign:r,get:i,mutate:n.mutate,events:e.registry}};var Cv=function(e){return Re(e,"contenteditable")==="true"};var kv=function(e,t){return nr(e,"[contenteditable]",t)};var Sv=Pu.resolve("resizer-bar-dragging");var Tv=function(e,t,n){var r=xv();var i=yv.transform(r,{});var a=g.none();var u=function(e,t){return g.from(Re(e,t))};r.events.drag.bind((function(e){u(e.target(),"data-row").each((function(t){var n=ml.getInt(e.target(),"top");Xe(e.target(),"top",n+e.yDelta()+"px")}));u(e.target(),"data-column").each((function(t){var n=ml.getInt(e.target(),"left");Xe(e.target(),"left",n+e.xDelta()+"px")}))}));var s=function(e,t){var n=ml.getInt(e,t);var r=parseInt(Re(e,"data-initial-"+t),10);return n-r};i.events.stop.bind((function(){r.get().each((function(r){a.each((function(i){u(r,"data-row").each((function(e){var t=s(r,"top");De(r,"data-initial-top");h.trigger.adjustHeight(i,t,parseInt(e,10))}));u(r,"data-column").each((function(e){var t=s(r,"left");De(r,"data-initial-left");h.trigger.adjustWidth(i,t,parseInt(e,10))}));Ju.refresh(e,i,n,t)}))}))}));var l=function(t,n){h.trigger.startAdjust();r.assign(t);Ee(t,"data-initial-"+n,parseInt(Je(t,n),10));yu(t,Sv);Xe(t,"opacity","0.2");i.go(e.parent())};var f=Gd(e.parent(),"mousedown",(function(e){if(Ju.isRowBar(e.target())){l(e.target(),"top")}if(Ju.isColBar(e.target())){l(e.target(),"left")}}));var c=function(t){return en(t,e.view())};var d=function(e){return nr(e,"table",c).filter((function(e){return kv(e,c).exists(Cv)}))};var v=Gd(e.view(),"mouseover",(function(r){d(r.target()).fold((function(){if(Ve(r.target())){Ju.destroy(e)}}),(function(r){a=g.some(r);Ju.refresh(e,r,n,t)}))}));var m=function(){f.unbind();v.unbind();i.destroy();Ju.destroy(e)};var p=function(r){Ju.refresh(e,r,n,t)};var h=jd.create({adjustHeight:Ud(["table","delta","row"]),adjustWidth:Ud(["table","delta","column"]),startAdjust:Ud([])});return{destroy:m,refresh:p,on:i.on,off:i.off,hideBars:o(Ju.hide,e),showBars:o(Ju.show,e),events:h.registry}};var Ev=function(e,t){var n=eu.height;var r=Tv(e,t,n);var i=jd.create({beforeResize:Ud(["table"]),afterResize:Ud(["table"]),startDrag:Ud([])});r.events.adjustHeight.bind((function(e){i.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());jl.adjustHeight(e.table(),t,e.row(),n);i.trigger.afterResize(e.table())}));r.events.startAdjust.bind((function(e){i.trigger.startDrag()}));r.events.adjustWidth.bind((function(e){i.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());jl.adjustWidth(e.table(),n,e.column(),t);i.trigger.afterResize(e.table())}));return{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}};var Nv={create:Ev};var Rv=function(){var e=je.fromTag("div");Ge(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});wn(qe(),e);return e};var _v=function(e,t){return e.inline?zd.body(tc(e),Rv()):zd.only(je.fromDom(e.getDoc()))};var Dv=function(e,t){if(e.inline){En(t.parent())}};var Ov={get:_v,remove:Dv};var Pv=function(e){var t=g.none();var n=g.none();var r=g.none();var i=/(\d+(\.\d+)?)%/;var a,o;var u=function(e){return e.nodeName==="TABLE"};var s=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")};var l=function(){return n};var f=function(){return r.getOr(zd.only(je.fromDom(e.getBody())))};var c=function(){n.each((function(e){e.destroy()}));r.each((function(t){Ov.remove(e,t)}))};e.on("init",(function(){var i=nu(dc.directionAt);var a=Ov.get(e);r=g.some(a);if(Pc(e)&&bc(e)){var o=Nv.create(a,i);o.on();o.events.startDrag.bind((function(n){t=g.some(e.selection.getRng())}));o.events.beforeResize.bind((function(t){var n=t.table().dom();Lc(e,n,nc(n),rc(n))}));o.events.afterResize.bind((function(n){var r=n.table();var i=r.dom();uc(r);t.each((function(t){e.selection.setRng(t);e.focus()}));Mc(e,i,nc(i),rc(i));e.undoManager.add()}));n=g.some(o)}}));e.on("ObjectResizeStart",(function(e){var t=e.target;if(u(t)){a=e.width;o=s(t)}}));e.on("ObjectResized",(function(t){var n=t.target;if(u(n)){var r=n;if(i.test(o)){var s=parseFloat(i.exec(o)[1]);var l=t.width*s/a;e.dom.setStyle(r,"width",l+"%")}else{var f=[];Uc.each(r.rows,(function(t){Uc.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",true);f.push({cell:t,width:n})}))}));Uc.each(f,(function(t){e.dom.setStyle(t.cell,"width",t.width);e.dom.setAttrib(t.cell,"width",null)}))}}}));return{lazyResize:l,lazyWire:f,destroy:c}};var Av=Ra.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]);var Bv=function(e){if(e===void 0){e=undefined}return Av.none(e)};var Iv=au(au({},Av),{none:Bv});var Lv=function(e,t){return yr.table(e,t).bind((function(t){var n=yr.cells(t);var r=L(n,(function(t){return en(e,t)}));return r.map((function(e){return{index:i(e),all:i(n)}}))}))};var Mv=function(e,t){var n=Lv(e,t);return n.fold((function(){return Iv.none(e)}),(function(t){return t.index()+1<t.all().length?Iv.middle(e,t.all()[t.index()+1]):Iv.last(e)}))};var Fv=function(e,t){var n=Lv(e,t);return n.fold((function(){return Iv.none()}),(function(t){return t.index()-1>=0?Iv.middle(e,t.all()[t.index()-1]):Iv.first(e)}))};var Hv={next:Mv,prev:Fv};var zv=K("start","soffset","finish","foffset");var Uv={create:zv};var Wv=Ra.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var jv=function(e,t,n,r){return e.fold(t,n,r)};var Vv=function(e){return e.fold(a,a,a)};var qv=Wv.before;var $v=Wv.on;var Kv=Wv.after;var Yv={before:qv,on:$v,after:Kv,cata:jv,getStart:Vv};var Xv=Ra.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var Gv=function(e){return Xv.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var Jv=function(e){return e.match({domRange:function(e){return je.fromDom(e.startContainer)},relative:function(e,t){return Yv.getStart(e)},exact:function(e,t,n,r){return e}})};var Zv=Xv.domRange;var Qv=Xv.relative;var em=Xv.exact;var tm=function(e){var t=Jv(e);return sn(t)};var nm=Uv.create;var rm={domRange:Zv,relative:Qv,exact:em,exactFromRange:Gv,getWin:tm,range:nm};var im=function(e,t){var n=e.document.createRange();am(n,t);return n};var am=function(e,t){e.selectNodeContents(t.dom())};var om=function(e,t){t.fold((function(t){e.setStartBefore(t.dom())}),(function(t,n){e.setStart(t.dom(),n)}),(function(t){e.setStartAfter(t.dom())}))};var um=function(e,t){t.fold((function(t){e.setEndBefore(t.dom())}),(function(t,n){e.setEnd(t.dom(),n)}),(function(t){e.setEndAfter(t.dom())}))};var sm=function(e,t,n){var r=e.document.createRange();om(r,t);um(r,n);return r};var lm=function(e,t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a};var fm=function(e){return{left:i(e.left),top:i(e.top),right:i(e.right),bottom:i(e.bottom),width:i(e.width),height:i(e.height)}};var cm=function(e){var t=e.getClientRects();var n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?g.some(n).map(fm):g.none()};var dm=Ra.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);var vm=function(e,t,n){return t(je.fromDom(n.startContainer),n.startOffset,je.fromDom(n.endContainer),n.endOffset)};var mm=function(e,t){return t.match({domRange:function(e){return{ltr:i(e),rtl:g.none}},relative:function(t,n){return{ltr:Me((function(){return sm(e,t,n)})),rtl:Me((function(){return g.some(sm(e,n,t))}))}},exact:function(t,n,r,i){return{ltr:Me((function(){return lm(e,t,n,r,i)})),rtl:Me((function(){return g.some(lm(e,r,i,t,n))}))}}})};var gm=function(e,t){var n=t.ltr();if(n.collapsed){var r=t.rtl().filter((function(e){return e.collapsed===false}));return r.map((function(e){return dm.rtl(je.fromDom(e.endContainer),e.endOffset,je.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return vm(e,dm.ltr,n)}))}else{return vm(e,dm.ltr,n)}};var pm=function(e,t){var n=mm(e,t);return gm(e,n)};var hm=function(e,t){var n=pm(e,t);return n.match({ltr:function(t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a},rtl:function(t,n,r,i){var a=e.document.createRange();a.setStart(r.dom(),i);a.setEnd(t.dom(),n);return a}})};var bm=function(e,t,n,r,i){if(i===0){return 0}else if(t===r){return i-1}var a=r;for(var o=1;o<i;o++){var u=e(o);var s=Math.abs(t-u.left);if(n<=u.bottom){if(n<u.top||s>a){return o-1}else{a=s}}}return 0};var ym=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};var wm=function(e,t,n,r,i){var a=function(n){var r=e.dom().createRange();r.setStart(t.dom(),n);r.collapse(true);return r};var o=function(e){var t=a(e);return t.getBoundingClientRect()};var u=Hr(t).length;var s=bm(o,n,r,i.right,u);return a(s)};var xm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getClientRects();var o=uu(a,(function(e){return ym(e,n,r)?g.some(e):g.none()}));return o.map((function(i){return wm(e,t,n,r,i)}))};var Cm=function(e,t,n,r){var i=e.dom().createRange();var a=vn(t);return uu(a,(function(t){i.selectNode(t.dom());return ym(i.getBoundingClientRect(),n,r)?km(e,t,n,r):g.none()}))};var km=function(e,t,n,r){return Se(t)?xm(e,t,n,r):Cm(e,t,n,r)};var Sm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect();var o=Math.max(a.left,Math.min(a.right,n));var u=Math.max(a.top,Math.min(a.bottom,r));return km(e,t,o,u)};var Tm=true;var Em=false;var Nm=function(e,t){return t-e.left<e.right-t?Tm:Em};var Rm=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());r.collapse(n);return r};var _m=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var i=r.getBoundingClientRect();var a=Nm(i,n);var o=a===Tm?Kr:Yr;return o(t).map((function(t){return Rm(e,t,a)}))};var Dm=function(e,t,n){var r=t.dom().getBoundingClientRect();var i=Nm(r,n);return g.some(Rm(e,t,i))};var Om=function(e,t,n){var r=vn(t).length===0?Dm:_m;return r(e,t,n)};var Pm=function(e,t,n){return g.from(e.dom().caretPositionFromPoint(t,n)).bind((function(t){if(t.offsetNode===null){return g.none()}var n=e.dom().createRange();n.setStart(t.offsetNode,t.offset);n.collapse();return g.some(n)}))};var Am=function(e,t,n){return g.from(e.dom().caretRangeFromPoint(t,n))};var Bm=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect();var o=Math.max(a.left,Math.min(a.right,n));var u=Math.max(a.top,Math.min(a.bottom,r));return Sm(e,t,o,u)};var Im=function(e,t,n){return je.fromPoint(e,t,n).bind((function(r){var i=function(){return Om(e,r,t)};return vn(r).length===0?i():Bm(e,r,t,n).orThunk(i)}))};var Lm=document.caretPositionFromPoint?Pm:document.caretRangeFromPoint?Am:Im;var Mm=function(e,t,n){var r=je.fromDom(e.document);return Lm(r,t,n).map((function(e){return Uv.create(je.fromDom(e.startContainer),e.startOffset,je.fromDom(e.endContainer),e.endOffset)}))};var Fm=function(e,t){var n=ye(e);if("input"===n){return Yv.after(e)}else if(!N(["br","img"],n)){return Yv.on(e,t)}else{return t===0?Yv.before(e):Yv.after(e)}};var Hm=function(e,t){var n=e.fold(Yv.before,Fm,Yv.after);var r=t.fold(Yv.before,Fm,Yv.after);return rm.relative(n,r)};var zm=function(e,t,n,r){var i=Fm(e,t);var a=Fm(n,r);return rm.relative(i,a)};var Um=function(e){return e.match({domRange:function(e){var t=je.fromDom(e.startContainer);var n=je.fromDom(e.endContainer);return zm(t,e.startOffset,n,e.endOffset)},relative:Hm,exact:zm})};var Wm=function(e,t,n,r){var i=un(e);var a=i.dom().createRange();a.setStart(e.dom(),t);a.setEnd(n.dom(),r);return a};var jm=function(e,t,n,r){var i=Wm(e,t,n,r);var a=en(e,n)&&t===r;return i.collapsed&&!a};var Vm=function(e,t){g.from(e.getSelection()).each((function(e){e.removeAllRanges();e.addRange(t)}))};var qm=function(e,t,n,r,i){var a=lm(e,t,n,r,i);Vm(e,a)};var $m=function(e,t,n,r,i,a){t.collapse(n.dom(),r);t.extend(i.dom(),a)};var Km=function(e,t){return pm(e,t).match({ltr:function(t,n,r,i){qm(e,t,n,r,i)},rtl:function(t,n,r,i){var a=e.getSelection();if(a.setBaseAndExtent){a.setBaseAndExtent(t.dom(),n,r.dom(),i)}else if(a.extend){try{$m(e,a,t,n,r,i)}catch(a){qm(e,r,i,t,n)}}else{qm(e,r,i,t,n)}}})};var Ym=function(e,t,n,r,i){var a=zm(t,n,r,i);Km(e,a)};var Xm=function(e,t,n){var r=Hm(t,n);Km(e,r)};var Gm=function(e){var t=rm.getWin(e).dom();var n=function(e,n,r,i){return lm(t,e,n,r,i)};var r=Um(e);return pm(t,r).match({ltr:n,rtl:n})};var Jm=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0);var n=e.getRangeAt(e.rangeCount-1);return g.some(Uv.create(je.fromDom(t.startContainer),t.startOffset,je.fromDom(n.endContainer),n.endOffset))}else{return g.none()}};var Zm=function(e){var t=je.fromDom(e.anchorNode);var n=je.fromDom(e.focusNode);return jm(t,e.anchorOffset,n,e.focusOffset)?g.some(Uv.create(t,e.anchorOffset,n,e.focusOffset)):Jm(e)};var Qm=function(e,t){var n=im(e,t);Vm(e,n)};var eg=function(e){return g.from(e.getSelection()).filter((function(e){return e.rangeCount>0})).bind(Zm)};var tg=function(e){return eg(e).map((function(e){return rm.exact(e.start(),e.soffset(),e.finish(),e.foffset())}))};var ng=function(e,t){var n=hm(e,t);return cm(n)};var rg=function(e,t,n){return Mm(e,t,n)};var ig=function(e){var t=e.getSelection();t.removeAllRanges()};var ag=tinymce.util.Tools.resolve("tinymce.util.VK");var og=function(e,t,n,r){return fg(e,t,Hv.next(n),r)};var ug=function(e,t,n,r){return fg(e,t,Hv.prev(n),r)};var sg=function(e,t){var n=rm.exact(t,0,t,0);return Gm(n)};var lg=function(e,t){var n=Kn(t,"tr");return U(n).bind((function(t){return tr(t,"td,th").map((function(t){return sg(e,t)}))}))};var fg=function(e,t,n,r,i){return n.fold(g.none,g.none,(function(t,n){return Kr(n).map((function(t){return sg(e,t)}))}),(function(n){return yr.table(n,t).bind((function(t){var i=Ua.noMenu(n);e.undoManager.transact((function(){r.insertRowsAfter(t,i)}));return lg(e,t)}))}))};var cg=["table","li","dl"];var dg=function(e,t,n,r){if(e.keyCode===ag.TAB){var i=tc(t);var a=function(e){var t=ye(e);return en(e,i)||N(cg,t)};var o=t.selection.getRng();if(o.collapsed){var u=je.fromDom(o.startContainer);yr.cell(u,a).each((function(i){e.preventDefault();var o=e.shiftKey?ug:og;var u=o(t,a,i,n,r);u.each((function(e){t.selection.setRng(e)}))}))}}};var vg={handle:dg};var mg=K("selection","kill");var gg={create:mg};var pg=function(e,t,n,r){return{start:i(Yv.on(e,t)),finish:i(Yv.on(n,r))}};var hg={create:pg};var bg=function(e,t){var n=hm(e,t);return Uv.create(je.fromDom(n.startContainer),n.startOffset,je.fromDom(n.endContainer),n.endOffset)};var yg=hg.create;var wg={convertToRange:bg,makeSitus:yg};var xg=function(e,t,n,r,i,a,o){if(!(en(n,i)&&r===a)){return nr(n,"td,th",t).bind((function(n){return nr(i,"td,th",t).bind((function(r){return Cg(e,t,n,r,o)}))}))}else{return g.none()}};var Cg=function(e,t,n,r,i){if(!en(n,r)){return ga.identify(n,r,t).bind((function(t){var r=t.boxes().getOr([]);if(r.length>0){i(e,r,t.start(),t.finish());return g.some(gg.create(g.some(wg.makeSitus(n,0,n,Wr(n))),true))}else{return g.none()}}))}else{return g.none()}};var kg=function(e,t,n,r,i){var a=function(e){i.clear(n);i.selectRange(n,e.boxes(),e.start(),e.finish());return e.boxes()};return ga.shiftSelection(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map(a)};var Sg={sync:xg,detect:Cg,update:kg};var Tg=K("item","mode");var Eg=function(e,t,n,r){if(r===void 0){r=Ng}return e.property().parent(t).map((function(e){return Tg(e,r)}))};var Ng=function(e,t,n,r){if(r===void 0){r=Rg}return n.sibling(e,t).map((function(e){return Tg(e,r)}))};var Rg=function(e,t,n,r){if(r===void 0){r=Rg}var i=e.property().children(t);var a=n.first(i);return a.map((function(e){return Tg(e,r)}))};var _g=[{current:Eg,next:Ng,fallback:g.none()},{current:Ng,next:Rg,fallback:g.some(Eg)},{current:Rg,next:Rg,fallback:g.some(Ng)}];var Dg=function(e,t,n,r,i){if(i===void 0){i=_g}var a=I(i,(function(e){return e.current===n}));return a.bind((function(n){return n.current(e,t,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return Dg(e,t,n,r)}))}))}))};var Og=function(){var e=function(e,t){return e.query().prevSibling(t)};var t=function(e){return e.length>0?g.some(e[e.length-1]):g.none()};return{sibling:e,first:t}};var Pg=function(){var e=function(e,t){return e.query().nextSibling(t)};var t=function(e){return e.length>0?g.some(e[0]):g.none()};return{sibling:e,first:t}};var Ag={left:Og,right:Pg};var Bg=function(e,t,n,r,i,a){var o=Dg(e,t,r,i);return o.bind((function(t){if(a(t.item())){return g.none()}else{return n(t.item())?g.some(t.item()):Bg(e,t.item(),n,t.mode(),i,a)}}))};var Ig=function(e,t,n,r){return Bg(e,t,n,Ng,Ag.left(),r)};var Lg=function(e,t,n,r){return Bg(e,t,n,Ng,Ag.right(),r)};var Mg=function(e){return function(t){return e.property().children(t).length===0}};var Fg=function(e,t,n){return zg(e,t,Mg(e),n)};var Hg=function(e,t,n){return Ug(e,t,Mg(e),n)};var zg=Ig;var Ug=Lg;var Wg=_i();var jg=function(e,t){return Fg(Wg,e,t)};var Vg=function(e,t){return Hg(Wg,e,t)};var qg=function(e,t,n){return zg(Wg,e,t,n)};var $g=function(e,t,n){return Ug(Wg,e,t,n)};var Kg=function(e,t,n){return Xn(e,t,n).isSome()};var Yg=K("element","offset");var Xg=K("element","deltaOffset");var Gg=K("element","start","finish");var Jg=K("begin","end");var Zg=K("element","text");var Qg=Ra.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]);var ep=function(e,t,n){var r=e.getRect(t);var i=e.getRect(n);return i.right>r.left&&i.left<r.right};var tp=function(e){return nr(e,"tr")};var np=function(e,t,n,r,i,a,o){return nr(r,"td,th",o).bind((function(n){return nr(t,"td,th",o).map((function(t){if(!en(n,t)){return aa.sharedOne(tp,[n,t]).fold((function(){return ep(e,t,n)?Qg.success():a(t)}),(function(e){return a(t)}))}else{return en(r,n)&&Wr(n)===i?a(t):Qg.none("in same cell")}}))})).getOr(Qg.none("default"))};var rp=function(e,t,n,r,i){return e.fold(t,n,r,i)};var ip=au(au({},Qg),{verify:np,cata:rp});var ap=K("ancestor","descendants","element","index");var op=K("parent","children","element","index");var up=function(e){return ln(e).bind((function(t){var n=vn(t);return sp(n,e).map((function(r){return op(t,n,e,r)}))}))};var sp=function(e,t){return L(e,o(en,t))};var lp=function(e){return ye(e)==="br"};var fp=function(e,t,n){return t(e,n).bind((function(e){return Se(e)&&Hr(e).trim().length===0?fp(e,t,n):g.some(e)}))};var cp=function(e,t,n){return n.traverse(t).orThunk((function(){return fp(t,n.gather,e)})).map(n.relative)};var dp=function(e,t){return mn(e,t).filter(lp).orThunk((function(){return mn(e,t-1).filter(lp)}))};var vp=function(e,t,n,r){return dp(t,n).bind((function(t){return r.traverse(t).fold((function(){return fp(t,r.gather,e).map(r.relative)}),(function(e){return up(e).map((function(e){return Yv.on(e.parent(),e.index())}))}))}))};var mp=function(e,t,n,r){var a=lp(t)?cp(e,t,r):vp(e,t,n,r);return a.map((function(e){return{start:i(e),finish:i(e)}}))};var gp=function(e){return ip.cata(e,(function(e){return g.none()}),(function(){return g.none()}),(function(e){return g.some(Yg(e,0))}),(function(e){return g.some(Yg(e,Wr(e)))}))};var pp={tryBr:mp,process:gp};var hp=ee(["left","top","right","bottom"],[]);var bp=function(e,t){return hp({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})};var yp=function(e,t){return hp({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})};var wp=function(e,t){var n=e.bottom()-e.top();return hp({left:e.left(),top:t-n,right:e.right(),bottom:t})};var xp=function(e,t){var n=e.bottom()-e.top();return hp({left:e.left(),top:t,right:e.right(),bottom:t+n})};var Cp=function(e,t,n){return hp({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})};var kp=function(e){return e.top()};var Sp=function(e){return e.bottom()};var Tp=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"};var Ep={nu:hp,moveUp:yp,moveDown:bp,moveBottomTo:wp,moveTopTo:xp,getTop:kp,getBottom:Sp,translate:Cp,toString:Tp};var Np=function(e,t,n){if(n>=0&&n<Wr(t)){return e.getRangedRect(t,n,t,n+1)}else if(n>0){return e.getRangedRect(t,n-1,t,n)}return g.none()};var Rp=function(e){return Ep.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})};var _p=function(e,t){return g.some(e.getRect(t))};var Dp=function(e,t,n){if(ke(t)){return _p(e,t).map(Rp)}else if(Se(t)){return Np(e,t,n).map(Rp)}else{return g.none()}};var Op=function(e,t){if(ke(t)){return _p(e,t).map(Rp)}else if(Se(t)){return e.getRangedRect(t,0,t,Wr(t)).map(Rp)}else{return g.none()}};var Pp={getBoxAt:Dp,getEntireBox:Op};var Ap=5;var Bp=100;var Ip=Ra.generate([{none:[]},{retry:["caret"]}]);var Lp=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()};var Mp=function(e,t,n){return Gn(t,xf.isBlock).fold(i(false),(function(t){return Pp.getEntireBox(e,t).exists((function(e){return Lp(n,e)}))}))};var Fp=function(e,t,n,r,i){var a=Ep.moveDown(i,Ap);if(Math.abs(n.bottom()-r.bottom())<1){return Ip.retry(a)}else if(n.top()>i.bottom()){return Ip.retry(a)}else if(n.top()===i.bottom()){return Ip.retry(Ep.moveDown(i,1))}else{return Mp(e,t,i)?Ip.retry(Ep.translate(a,Ap,0)):Ip.none()}};var Hp=function(e,t,n,r,i){var a=Ep.moveUp(i,Ap);if(Math.abs(n.top()-r.top())<1){return Ip.retry(a)}else if(n.bottom()<i.top()){return Ip.retry(a)}else if(n.bottom()===i.top()){return Ip.retry(Ep.moveUp(i,1))}else{return Mp(e,t,i)?Ip.retry(Ep.translate(a,Ap,0)):Ip.none()}};var zp={point:Ep.getTop,adjuster:Hp,move:Ep.moveUp,gather:jg};var Up={point:Ep.getBottom,adjuster:Fp,move:Ep.moveDown,gather:Vg};var Wp=function(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return ye(e)==="table"})).isSome()};var jp=function(e,t,n,r,i){return Vp(e,t,n,t.move(r,Ap),i)};var Vp=function(e,t,n,r,i){if(i===0){return g.some(r)}if(Wp(e,r.left(),t.point(r))){return jp(e,t,n,r,i-1)}return e.situsFromPoint(r.left(),t.point(r)).bind((function(a){return a.start().fold(g.none,(function(a){return Pp.getEntireBox(e,a).bind((function(o){return t.adjuster(e,a,o,n,r).fold(g.none,(function(r){return Vp(e,t,n,r,i-1)}))})).orThunk((function(){return g.some(r)}))}),g.none)}))};var qp=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+Ap)};var $p=function(e,t){return e.situsFromPoint(t.left(),t.top()-Ap)};var Kp=function(e,t,n){if(e.point(t)>n.getInnerHeight()){return g.some(e.point(t)-n.getInnerHeight())}else if(e.point(t)<0){return g.some(-e.point(t))}else{return g.none()}};var Yp=function(e,t,n){var r=e.move(n,Ap);var i=Vp(t,e,n,r,Bp).getOr(r);return Kp(e,i,t).fold((function(){return t.situsFromPoint(i.left(),e.point(i))}),(function(n){t.scrollBy(0,n);return t.situsFromPoint(i.left(),e.point(i)-n)}))};var Xp={tryUp:o(Yp,zp),tryDown:o(Yp,Up),ieTryUp:$p,ieTryDown:qp,getJumpSize:i(Ap)};var Gp=20;var Jp=Kt.detect();var Zp=function(e,t,n){return e.getSelection().bind((function(r){return pp.tryBr(t,r.finish(),r.foffset(),n).fold((function(){return g.some(Yg(r.finish(),r.foffset()))}),(function(i){var a=e.fromSitus(i);var o=ip.verify(e,r.finish(),r.foffset(),a.finish(),a.foffset(),n.failure,t);return pp.process(o)}))}))};var Qp=function(e,t,n,r,i,a){if(a===0){return g.none()}return nh(e,t,n,r,i).bind((function(o){var u=e.fromSitus(o);var s=ip.verify(e,n,r,u.finish(),u.foffset(),i.failure,t);return ip.cata(s,(function(){return g.none()}),(function(){return g.some(o)}),(function(o){if(en(n,o)&&r===0){return eh(e,n,r,Ep.moveUp,i)}else{return Qp(e,t,o,0,i,a-1)}}),(function(o){if(en(n,o)&&r===Wr(o)){return eh(e,n,r,Ep.moveDown,i)}else{return Qp(e,t,o,Wr(o),i,a-1)}}))}))};var eh=function(e,t,n,r,i){return Pp.getBoxAt(e,t,n).bind((function(t){return th(e,i,r(t,Xp.getJumpSize()))}))};var th=function(e,t,n){if(Jp.browser.isChrome()||Jp.browser.isSafari()||Jp.browser.isFirefox()||Jp.browser.isEdge()){return t.otherRetry(e,n)}else if(Jp.browser.isIE()){return t.ieRetry(e,n)}else{return g.none()}};var nh=function(e,t,n,r,i){return Pp.getBoxAt(e,n,r).bind((function(t){return th(e,i,t)}))};var rh=function(e,t,n){return Zp(e,t,n).bind((function(r){return Qp(e,t,r.element(),r.offset(),n,Gp).map(e.fromSitus)}))};var ih={handle:rh};var ah=Kt.detect();var oh=function(e,t){return Kg(e,(function(e){return ln(e).exists((function(e){return en(e,t)}))}))};var uh=function(e,t,n,r,a){return nr(r,"td,th",t).bind((function(r){return nr(r,"table",t).bind((function(o){if(!oh(a,o)){return g.none()}return ih.handle(e,t,n).bind((function(e){return nr(e.finish(),"td,th",t).map((function(t){return{start:i(r),finish:i(t),range:i(e)}}))}))}))}))};var sh=function(e,t,n,r,i,a){if(ah.browser.isIE()){return g.none()}else{return a(r,t).orThunk((function(){return uh(e,t,n,r,i).map((function(e){var t=e.range();return gg.create(g.some(wg.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),true)}))}))}};var lh=function(e,t){return nr(e,"tr",t).bind((function(e){return nr(e,"table",t).bind((function(n){var r=Kn(n,"tr");if(en(e,r[0])){return qg(n,(function(e){return Yr(e).isSome()}),t).map((function(e){var t=Wr(e);return gg.create(g.some(wg.makeSitus(e,t,e,t)),true)}))}else{return g.none()}}))}))};var fh=function(e,t){return nr(e,"tr",t).bind((function(e){return nr(e,"table",t).bind((function(n){var r=Kn(n,"tr");if(en(e,r[r.length-1])){return $g(n,(function(e){return Kr(e).isSome()}),t).map((function(e){return gg.create(g.some(wg.makeSitus(e,0,e,0)),true)}))}else{return g.none()}}))}))};var ch=function(e,t,n,r,i,a,o){return uh(e,n,r,i,a).bind((function(e){return Sg.detect(t,n,e.start(),e.finish(),o)}))};var dh={navigate:sh,select:ch,firstUpCheck:lh,lastDownCheck:fh};var vh=function(e,t){return nr(e,"td,th",t)};function mh(e,t,n,r){var i=g.none();var a=function(){i=g.none()};var o=function(e){r.clear(t);i=vh(e.target(),n)};var u=function(a){i.each((function(i){r.clear(t);vh(a.target(),n).each((function(a){ga.identify(i,a,n).each((function(n){var o=n.boxes().getOr([]);if(o.length>1||o.length===1&&!en(i,a)){r.selectRange(t,o,n.start(),n.finish());e.selectContents(a)}}))}))}))};var s=function(e){i.each(a)};return{mousedown:o,mouseover:u,mouseup:s}}var gh={traverse:dn,gather:Vg,relative:Yv.before,otherRetry:Xp.tryDown,ieRetry:Xp.ieTryDown,failure:ip.failedDown};var ph={traverse:cn,gather:jg,relative:Yv.before,otherRetry:Xp.tryUp,ieRetry:Xp.ieTryUp,failure:ip.failedUp};var hh={down:gh,up:ph};var bh=function(e){return function(t){return t===e}};var yh=bh(38);var wh=bh(40);var xh=function(e){return e>=37&&e<=40};var Ch={ltr:{isBackward:bh(37),isForward:bh(39)},rtl:{isBackward:bh(39),isForward:bh(37)},isUp:yh,isDown:wh,isNavigation:xh};var kh=function(e){return{left:e.left(),top:e.top(),right:e.right(),bottom:e.bottom(),width:e.width(),height:e.height()}};var Sh={toRaw:kh};var Th=Kt.detect().browser.isSafari();var Eh=function(t){var n=t!==undefined?t.dom():e.document;var r=n.body.scrollLeft||n.documentElement.scrollLeft;var i=n.body.scrollTop||n.documentElement.scrollTop;return Io(r,i)};var Nh=function(t,n,r){var i=r!==undefined?r.dom():e.document;var a=i.defaultView;a.scrollBy(t,n)};var Rh=function(e){var t=function(t,n){return je.fromPoint(je.fromDom(e.document),t,n)};var n=function(e){return e.dom().getBoundingClientRect()};var r=function(t,n,r,i){var a=rm.exact(t,n,r,i);return ng(e,a).map(Sh.toRaw)};var i=function(){return tg(e).map((function(t){return wg.convertToRange(e,t)}))};var a=function(t){var n=rm.relative(t.start(),t.finish());return wg.convertToRange(e,n)};var o=function(t,n){return rg(e,t,n).map((function(e){return hg.create(e.start(),e.soffset(),e.finish(),e.foffset())}))};var u=function(){ig(e)};var s=function(t){Qm(e,t)};var l=function(t){Ym(e,t.start(),t.soffset(),t.finish(),t.foffset())};var f=function(t,n){Xm(e,t,n)};var c=function(){return e.innerHeight};var d=function(){var t=Eh(je.fromDom(e.document));return t.top()};var v=function(t,n){Nh(t,n,je.fromDom(e.document))};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:i,fromSitus:a,situsFromPoint:o,clearSelection:u,setSelection:l,setRelativeSelection:f,selectContents:s,getInnerHeight:c,getScrollY:d,scrollBy:v}};var _h=K("rows","cols");var Dh=function(e,t,n,r){var i=Rh(e);var a=mh(i,t,n,r);return{mousedown:a.mousedown,mouseover:a.mouseover,mouseup:a.mouseup}};var Oh=function(e,t,n,r){var i=Rh(e);var a=function(){r.clear(t);return g.none()};var u=function(e,u,s,l,f,c){var d=e.raw();var v=d.which;var m=d.shiftKey===true;var p=ga.retrieve(t,r.selectedSelector()).fold((function(){if(Ch.isDown(v)&&m){return o(dh.select,i,t,n,hh.down,l,u,r.selectRange)}else if(Ch.isUp(v)&&m){return o(dh.select,i,t,n,hh.up,l,u,r.selectRange)}else if(Ch.isDown(v)){return o(dh.navigate,i,n,hh.down,l,u,dh.lastDownCheck)}else if(Ch.isUp(v)){return o(dh.navigate,i,n,hh.up,l,u,dh.firstUpCheck)}else{return g.none}}),(function(e){var n=function(n){return function(){var a=uu(n,(function(n){return Sg.update(n.rows(),n.cols(),t,e,r)}));return a.fold((function(){return ga.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(e){var n=Ch.isDown(v)||c.isForward(v)?Yv.after:Yv.before;i.setRelativeSelection(Yv.on(e.first(),0),n(e.table()));r.clear(t);return gg.create(g.none(),true)}))}),(function(e){return g.some(gg.create(g.none(),true))}))}};if(Ch.isDown(v)&&m){return n([_h(+1,0)])}else if(Ch.isUp(v)&&m){return n([_h(-1,0)])}else if(c.isBackward(v)&&m){return n([_h(0,-1),_h(-1,0)])}else if(c.isForward(v)&&m){return n([_h(0,+1),_h(+1,0)])}else if(Ch.isNavigation(v)&&m===false){return a}else{return g.none}}));return p()};var s=function(e,i,a,o,u){return ga.retrieve(t,r.selectedSelector()).fold((function(){var s=e.raw();var l=s.which;var f=s.shiftKey===true;if(f===false){return g.none()}if(Ch.isNavigation(l)){return Sg.sync(t,n,i,a,o,u,r.selectRange)}else{return g.none()}}),g.none)};return{keydown:u,keyup:s}};var Ph={mouse:Dh,keyboard:Oh};var Ah=function(e,t){D(t,(function(t){xu(e,t)}))};var Bh=function(e){return function(t){yu(t,e)}};var Ih=function(e){return function(t){Ah(t,e)}};var Lh=function(e){var t=Bh(e.selected());var n=Ih([e.selected(),e.lastSelected(),e.firstSelected()]);var r=function(t){var r=Kn(t,e.selectedSelector());D(r,n)};var i=function(n,i,a,o){r(n);D(i,t);yu(a,e.firstSelected());yu(o,e.lastSelected())};return{clear:r,selectRange:i,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}};var Mh=function(e){var t=function(t){De(t,e.selected());De(t,e.firstSelected());De(t,e.lastSelected())};var n=function(t){Ee(t,e.selected(),"1")};var r=function(n){var r=Kn(n,e.selectedSelector());D(r,t)};var i=function(t,i,a,o){r(t);D(i,n);Ee(a,e.firstSelected(),"1");Ee(o,e.lastSelected(),"1")};return{clear:r,selectRange:i,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}};var Fh={byClass:Lh,byAttr:Mh};var Hh=function(e){return Cu(je.fromDom(e.target),"ephox-snooker-resizer-bar")===false};function zh(e,t){var a=ee(["mousedown","mouseover","mouseup","keyup","keydown"],[]);var o=g.none();var u=Fh.byAttr(Ea);e.on("init",(function(s){var l=e.getWin();var f=tc(e);var c=ic(e);var d=function(){var t=e.selection;var r=je.fromDom(t.getStart());var i=je.fromDom(t.getEnd());var a=aa.sharedOne(yr.table,[r,i]);a.fold((function(){u.clear(f)}),n)};var v=Ph.mouse(l,f,c,u);var m=Ph.keyboard(l,f,c,u);var p=function(e){return e.raw().shiftKey===true};var h=function(t,n){if(!p(t)){return}if(n.kill()){t.kill()}n.selection().each((function(t){var n=rm.relative(t.start(),t.finish());var r=hm(l,n);e.selection.setRng(r)}))};var b=function(t){var n=x(t);if(n.raw().shiftKey&&Ch.isNavigation(n.raw().which)){var r=e.selection.getRng();var i=je.fromDom(r.startContainer);var a=je.fromDom(r.endContainer);m.keyup(n,i,r.startOffset,a,r.endOffset).each((function(e){h(n,e)}))}};var y=function(n){var r=x(n);t().each((function(e){e.hideBars()}));var i=e.selection.getRng();var a=je.fromDom(e.selection.getStart());var o=je.fromDom(i.startContainer);var u=je.fromDom(i.endContainer);var s=dc.directionAt(a).isRtl()?Ch.rtl:Ch.ltr;m.keydown(r,o,i.startOffset,u,i.endOffset,s).each((function(e){h(r,e)}));t().each((function(e){e.showBars()}))};var w=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")};var x=function(e){var t=je.fromDom(e.target);var n=function(){e.stopPropagation()};var a=function(){e.preventDefault()};var o=r(a,n);return{target:i(t),x:i(w(e)?e.x:null),y:i(w(e)?e.y:null),stop:n,prevent:a,kill:o,raw:i(e)}};var C=function(e){return e.button===0};var k=function(e){if(e.buttons===undefined){return true}if(dd.ie&&dd.ie>=12&&e.buttons===0){return true}return(e.buttons&1)!==0};var S=function(e){if(C(e)&&Hh(e)){v.mousedown(x(e))}};var T=function(e){if(k(e)&&Hh(e)){v.mouseover(x(e))}};var E=function(e){if(C(e)&&Hh(e)){v.mouseup(x(e))}};e.on("mousedown",S);e.on("mouseover",T);e.on("mouseup",E);e.on("keyup",b);e.on("keydown",y);e.on("nodechange",d);o=g.some(a({mousedown:S,mouseover:T,mouseup:E,keyup:b,keydown:y}))}));var s=function(){o.each((function(e){}))};return{clear:u.clear,destroy:s}}var Uh=function(e){var t=function(){var t=tc(e);return ba.retrieve(t,Ea.selectedSelector()).fold((function(){if(e.selection.getStart()===undefined){return Oa.none()}else{return Oa.single(e.selection)}}),(function(e){return Oa.multiple(e)}))};return{get:t}};var Wh=Uc.each;var jh=function(e){var t=[];Wh("inserttable tableprops deletetable | cell row column".split(" "),(function(n){if(n==="|"){t.push({text:"-"})}else{t.push(e.menuItems[n])}}));e.addButton("table",{type:"menubutton",title:"Table",menu:t});function n(t){return function(){e.execCommand(t)}}e.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"});e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")});e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")});e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")});e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")});e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")});e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")});e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")});e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")});e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")});e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")});e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")});e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")});e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")});e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")});e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})};var Vh=function(e){var t=function(t){var n=e.dom.is(t,"table")&&e.getBody().contains(t);return n};var n=Ac(e);if(n.length>0){e.addContextToolbar(t,n.join(" "))}};var qh={addButtons:jh,addToolbars:Vh};var $h=function(e,t){var n=g.none();var r=[];var i=[];var a=[];var o=[];var u=function(e){e.disabled(true)};var s=function(e){e.disabled(false)};var l=function(){var e=this;r.push(e);n.fold((function(){u(e)}),(function(t){s(e)}))};var f=function(){var e=this;i.push(e);n.fold((function(){u(e)}),(function(t){s(e)}))};var c=function(){var e=this;a.push(e);n.fold((function(){u(e)}),(function(t){e.disabled(t.mergable().isNone())}))};var d=function(){var e=this;o.push(e);n.fold((function(){u(e)}),(function(t){e.disabled(t.unmergable().isNone())}))};var v=function(){n.fold((function(){D(r,u);D(i,u);D(a,u);D(o,u)}),(function(e){D(r,s);D(i,s);D(a,(function(t){t.disabled(e.mergable().isNone())}));D(o,(function(t){t.disabled(e.unmergable().isNone())}))}))};e.on("init",(function(){e.on("nodechange",(function(r){var i=g.from(e.dom.getParent(e.selection.getStart(),"th,td"));n=i.bind((function(e){var n=je.fromDom(e);var r=yr.table(n);return r.map((function(e){return Ua.forMenu(t,e,n)}))}));v()}))}));var m=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+n)+'" href="#" '+'data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>'}e+="</tr>"}e+="</table>";e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e};var p=function(e,t,n,r){var i=r.getEl().getElementsByTagName("table")[0];var a,o,u,s,l;var f=r.isRtl()||r.parent().rel==="tl-tr";i.nextSibling.innerHTML=t+1+" x "+(n+1);if(f){t=9-t}for(o=0;o<10;o++){for(a=0;a<10;a++){s=i.rows[o].childNodes[a].firstChild;l=(f?a>=t:a<=t)&&o<=n;e.dom.toggleClass(s,"mce-active",l);if(l){u=s}}}return u.parentNode};var h=Sc(e)===false?{text:"Table",icon:"table",context:"table",onclick:b("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(t){if(t.aria){this.parent().hideAll();t.stopImmediatePropagation();e.execCommand("mceInsertTable")}},onshow:function(){p(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active");e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:m(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n=t.target;var r,i;if(n.tagName.toUpperCase()==="A"){r=parseInt(n.getAttribute("data-mce-x"),10);i=parseInt(n.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel==="tl-tr"){r=9-r}if(r!==this.lastX||i!==this.lastY){p(e,r,i,t.control);this.lastX=r;this.lastY=i}}},onclick:function(t){var n=this;if(t.target.tagName.toUpperCase()==="A"){t.preventDefault();t.stopPropagation();n.parent().cancel();e.undoManager.transact((function(){Nd.insert(e,n.lastX+1,n.lastY+1)}));e.addVisual()}}}]};function b(t){return function(){e.execCommand(t)}}var y={text:"Table properties",context:"table",onPostRender:l,onclick:b("mceTableProps")};var w={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"};var x={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:b("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:b("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:b("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:b("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:b("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:b("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:b("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:b("mceTablePasteRowAfter"),onPostRender:f}]};var C={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:b("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:b("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:b("mceTableDeleteCol"),onPostRender:f}]};var k={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:b("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:b("mceTableMergeCells"),onPostRender:c},{text:"Split cell",onclick:b("mceTableSplitCells"),onPostRender:d}]};e.addMenuItem("inserttable",h);e.addMenuItem("tableprops",y);e.addMenuItem("deletetable",w);e.addMenuItem("row",x);e.addMenuItem("column",C);e.addMenuItem("cell",k)};var Kh={addMenuItems:$h};var Yh=function(e){return e.get().fold((function(){return}),(function(e){return _(e,(function(e){return e.dom()}))}))};var Xh=function(e,t){var n=_(e,je.fromDom);t.set(g.from(n))};var Gh=function(e,t){return{insertTable:function(t,n){return Nd.insert(e,t,n)},setClipboardRows:function(e){return Xh(e,t)},getClipboardRows:function(){return Yh(t)}}};function Jh(e){var t=Pv(e);var n=zh(e,t.lazyResize);var r=Fc(e,t.lazyWire);var i=Uh(e);var a=Vl(g.none());Ld.registerCommands(e,r,n,i,a);$a.registerEvents(e,i,r,n);Kh.addMenuItems(e,i);qh.addButtons(e);qh.addToolbars(e);e.on("PreInit",(function(){e.serializer.addTempAttr(Ea.firstSelected());e.serializer.addTempAttr(Ea.lastSelected())}));if(yc(e)){e.on("keydown",(function(n){vg.handle(n,e,r,t.lazyWire)}))}e.on("remove",(function(){t.destroy();n.destroy()}));return Gh(e,a)}t.add("table",Jh);function Zh(){}return Zh}(window)})()},560:function(e,t,n){n(561)},561:function(e,t){(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.util.Tools");var n=function(e,n){var r=e.dom;var i;var a=e.selection.getSelectedBlocks();if(a.length){i=r.getAttrib(a[0],"dir");t.each(a,(function(e){if(!r.getParent(e.parentNode,'*[dir="'+n+'"]',r.getRoot())){r.setAttrib(e,"dir",i!==n?n:null)}}));e.nodeChanged()}};var r={setDir:n};var i=function(e){e.addCommand("mceDirectionLTR",(function(){r.setDir(e,"ltr")}));e.addCommand("mceDirectionRTL",(function(){r.setDir(e,"rtl")}))};var a={register:i};var o=function(e){var n=[];t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),(function(t){n.push(t+"[dir="+e+"]")}));return n.join(",")};var u=function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:o("ltr")});e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:o("rtl")})};var s={register:u};e.add("directionality",(function(e){a.register(e);s.register(e)}));function l(){}return l}()})()},562:function(e,t,n){n(563)},563:function(e,t){(function(){var e=function(){"use strict";var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&e.nodeType===1&&e.contentEditable==="false"}function i(e,t,n,i,a){var o;var u=[];var s,l=0,f;var c,d,v;f=t.ownerDocument;c=a.getBlockElements();d=a.getWhiteSpaceElements();v=a.getShortEndedElements();function m(e,t){t=t||0;if(!e[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}var n=e.index;if(t>0){var r=e[t];if(!r){throw new Error("Invalid capture group")}n+=e[0].indexOf(r);e[0]=r}return[n,n+e[0].length,[e[0]]]}function g(e){var t;if(e.nodeType===3){return e.data}if(d[e.nodeName]&&!c[e.nodeName]){return""}t="";if(r(e)){return"\n"}if(c[e.nodeName]||v[e.nodeName]){t+="\n"}if(e=e.firstChild){do{t+=g(e)}while(e=e.nextSibling)}return t}function p(e,t,n){var i,a,o,u,s=[],l=0,f=e,m=t.shift(),g=0;e:while(true){if(c[f.nodeName]||v[f.nodeName]||r(f)){l++}if(f.nodeType===3){if(!a&&f.length+l>=m[1]){a=f;u=m[1]-l}else if(i){s.push(f)}if(!i&&f.length+l>m[0]){i=f;o=m[0]-l}l+=f.length}if(i&&a){f=n({startNode:i,startNodeIndex:o,endNode:a,endNodeIndex:u,innerNodes:s,match:m[2],matchIndex:g});l-=a.length-u;i=null;a=null;s=[];m=t.shift();g++;if(!m){break}}else if((!d[f.nodeName]||c[f.nodeName])&&f.firstChild){if(!r(f)){f=f.firstChild;continue}}else if(f.nextSibling){f=f.nextSibling;continue}while(true){if(f.nextSibling){f=f.nextSibling;break}else if(f.parentNode!==e){f=f.parentNode}else{break e}}}}function h(e){var t;if(typeof e!=="function"){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var r=n.cloneNode(false);r.setAttribute("data-mce-index",t);if(e){r.appendChild(f.createTextNode(e))}return r}}else{t=e}return function(e){var n;var r;var i;var a=e.startNode;var o=e.endNode;var u=e.matchIndex;if(a===o){var s=a;i=s.parentNode;if(e.startNodeIndex>0){n=f.createTextNode(s.data.substring(0,e.startNodeIndex));i.insertBefore(n,s)}var l=t(e.match[0],u);i.insertBefore(l,s);if(e.endNodeIndex<s.length){r=f.createTextNode(s.data.substring(e.endNodeIndex));i.insertBefore(r,s)}s.parentNode.removeChild(s);return l}n=f.createTextNode(a.data.substring(0,e.startNodeIndex));r=f.createTextNode(o.data.substring(e.endNodeIndex));var c=t(a.data.substring(e.startNodeIndex),u);for(var d=0,v=e.innerNodes.length;d<v;++d){var m=e.innerNodes[d];var g=t(m.data,u);m.parentNode.replaceChild(g,m)}var p=t(o.data.substring(0,e.endNodeIndex),u);i=a.parentNode;i.insertBefore(n,a);i.insertBefore(c,a);i.removeChild(a);i=o.parentNode;i.insertBefore(p,o);i.insertBefore(r,o);i.removeChild(o);return p}}s=g(t);if(!s){return}if(e.global){while(o=e.exec(s)){u.push(m(o,i))}}else{o=s.match(e);u.push(m(o,i))}if(u.length){l=u.length;p(t,u,h(n))}return l}var a={findAndReplaceDOMText:i};var o=function(e){var t=e.getAttribute("data-mce-index");if(typeof t==="number"){return""+t}return t};var u=function(e,t,n){var r,i;i=e.dom.create("span",{"data-mce-bogus":1});i.className="mce-match-marker";r=e.getBody();h(e,t,false);return a.findAndReplaceDOMText(n,r,i,false,e.schema)};var s=function(e){var t=e.parentNode;if(e.firstChild){t.insertBefore(e.firstChild,e)}e.parentNode.removeChild(e)};var l=function(e,t){var r;var i=[];r=n.toArray(e.getBody().getElementsByTagName("span"));if(r.length){for(var a=0;a<r.length;a++){var u=o(r[a]);if(u===null||!u.length){continue}if(u===t.toString()){i.push(r[a])}}}return i};var f=function(e,t,n){var r=t.get();var i=e.dom;n=n!==false;if(n){r++}else{r--}i.removeClass(l(e,t.get()),"mce-match-marker-selected");var a=l(e,r);if(a.length){i.addClass(l(e,r),"mce-match-marker-selected");e.selection.scrollIntoView(a[0]);return r}return-1};var c=function(e,t){var n=t.parentNode;e.remove(t);if(e.isEmpty(n)){e.remove(n)}};var d=function(e,t,n,r,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=n.replace(/\s/g,"[^\\S\\r\\n]");n=i?"\\b"+n+"\\b":n;var a=u(e,t,new RegExp(n,r?"g":"gi"));if(a){t.set(-1);t.set(f(e,t,true))}return a};var v=function(e,t){var n=f(e,t,true);if(n!==-1){t.set(n)}};var m=function(e,t){var n=f(e,t,false);if(n!==-1){t.set(n)}};var g=function(e){var t=o(e);return t!==null&&t.length>0};var p=function(e,t,r,i,a){var u,l,f,d,p,h=t.get(),w;i=i!==false;f=e.getBody();l=n.grep(n.toArray(f.getElementsByTagName("span")),g);for(u=0;u<l.length;u++){var x=o(l[u]);d=p=parseInt(x,10);if(a||d===t.get()){if(r.length){l[u].firstChild.nodeValue=r;s(l[u])}else{c(e.dom,l[u])}while(l[++u]){d=parseInt(o(l[u]),10);if(d===p){c(e.dom,l[u])}else{u--;break}}if(i){h--}}else if(p>t.get()){l[u].setAttribute("data-mce-index",p-1)}}t.set(h);if(i){w=b(e,t);v(e,t)}else{w=y(e,t);m(e,t)}return!a&&w};var h=function(e,t,r){var i,a,u,l;a=n.toArray(e.getBody().getElementsByTagName("span"));for(i=0;i<a.length;i++){var f=o(a[i]);if(f!==null&&f.length){if(f===t.get().toString()){if(!u){u=a[i].firstChild}l=a[i].firstChild}s(a[i])}}if(u&&l){var c=e.dom.createRng();c.setStart(u,0);c.setEnd(l,l.data.length);if(r!==false){e.selection.setRng(c)}return c}};var b=function(e,t){return l(e,t.get()+1).length>0};var y=function(e,t){return l(e,t.get()-1).length>0};var w={done:h,find:d,next:v,prev:m,replace:p,hasNext:b,hasPrev:y};var x=function(e,t){var n=function(n){return w.done(e,t,n)};var r=function(n,r,i){return w.find(e,t,n,r,i)};var i=function(){return w.next(e,t)};var a=function(){return w.prev(e,t)};var o=function(n,r,i){return w.replace(e,t,n,r,i)};return{done:n,find:r,next:i,prev:a,replace:o}};var C={get:x};var k=function(e,t){var r={},i;e.undoManager.add();i=n.trim(e.selection.getContent({format:"text"}));function a(){u.statusbar.find("#next").disabled(w.hasNext(e,t)===false);u.statusbar.find("#prev").disabled(w.hasPrev(e,t)===false)}function o(){e.windowManager.alert("Could not find the specified string.",(function(){u.find("#find")[0].focus()}))}var u=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus();w.done(e,t);e.undoManager.add()},onSubmit:function(n){var i,s,l,f;n.preventDefault();s=u.find("#case").checked();f=u.find("#words").checked();l=u.find("#find").value();if(!l.length){w.done(e,t,false);u.statusbar.items().slice(1).disabled(true);return}if(r.text===l&&r.caseState===s&&r.wholeWord===f){if(!w.hasNext(e,t)){o();return}w.next(e,t);a();return}i=w.find(e,t,l,s,f);if(!i){o()}u.statusbar.items().slice(1).disabled(i===0);a();r={text:l,caseState:s,wholeWord:f}},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:true,onclick:function(){if(!w.replace(e,t,u.find("#replace").value())){u.statusbar.items().slice(1).disabled(true);t.set(-1);r={}}}},{text:"Replace all",disabled:true,onclick:function(){w.replace(e,t,u.find("#replace").value(),true,true);u.statusbar.items().slice(1).disabled(true);r={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){w.prev(e,t);a()}},{text:"Next",name:"next",disabled:true,onclick:function(){w.next(e,t);a()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})};var S={open:k};var T=function(e,t){e.addCommand("SearchReplace",(function(){S.open(e,t)}))};var E={register:T};var N=function(e,t){return function(){S.open(e,t)}};var R=function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:N(e,t),separator:"before",context:"edit"});e.addButton("searchreplace",{tooltip:"Find and replace",onclick:N(e,t)});e.shortcuts.add("Meta+F","",N(e,t))};var _={register:R};t.add("searchreplace",(function(t){var n=e(-1);E.register(t,n);_.register(t,n);return C.get(t,n)}));function D(){}return D}()})()},564:function(e,t,n){n(565)},565:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var r=tinymce.util.Tools.resolve("tinymce.EditorManager");var i=tinymce.util.Tools.resolve("tinymce.Env");var a=tinymce.util.Tools.resolve("tinymce.util.Delay");var o=tinymce.util.Tools.resolve("tinymce.util.Tools");var u=tinymce.util.Tools.resolve("tinymce.util.VK");var s=function(e){return e.getParam("tabfocus_elements",":prev,:next")};var l=function(e){return e.getParam("tab_focus",s(e))};var f={getTabFocus:l};var c=n.DOM;var d=function(e){if(e.keyCode===u.TAB&&!e.ctrlKey&&!e.altKey&&!e.metaKey){e.preventDefault()}};var v=function(t){function n(n){var s,l,d,v;if(n.keyCode!==u.TAB||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented()){return}function m(e){l=c.select(":input:enabled,*[tabindex]:not(iframe)");function i(e){return e.nodeName==="BODY"||e.type!=="hidden"&&e.style.display!=="none"&&e.style.visibility!=="hidden"&&i(e.parentNode)}function a(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&r.get(n.id)&&e.tabIndex!==-1&&i(e)}o.each(l,(function(e,n){if(e.id===t.id){s=n;return false}}));if(e>0){for(v=s+1;v<l.length;v++){if(a(l[v])){return l[v]}}}else{for(v=s-1;v>=0;v--){if(a(l[v])){return l[v]}}}return null}d=o.explode(f.getTabFocus(t));if(d.length===1){d[1]=d[0];d[0]=":prev"}if(n.shiftKey){if(d[0]===":prev"){l=m(-1)}else{l=c.get(d[0])}}else{if(d[1]===":next"){l=m(1)}else{l=c.get(d[1])}}if(l){var g=r.get(l.id||l.name);if(l.id&&g){g.focus()}else{a.setTimeout((function(){if(!i.webkit){e.window.focus()}l.focus()}),10)}n.preventDefault()}}t.on("init",(function(){if(t.inline){c.setAttrib(t.getBody(),"tabIndex",null)}t.on("keyup",d);if(i.gecko){t.on("keypress keydown",n)}else{t.on("keydown",n)}}))};var m={setup:v};t.add("tabfocus",(function(e){m.setup(e)}));function g(){}return g}(window)})()},566:function(e,t,n){n(567)},567:function(e,t){(function(){var e=function(){"use strict";var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.Env");var r=tinymce.util.Tools.resolve("tinymce.util.Delay");var i=function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)};var a=function(e){return parseInt(e.getParam("autoresize_max_height",0),10)};var o=function(e){return e.getParam("autoresize_overflow_padding",1)};var u=function(e){return e.getParam("autoresize_bottom_margin",50)};var s=function(e){return e.getParam("autoresize_on_init",true)};var l={getAutoResizeMinHeight:i,getAutoResizeMaxHeight:a,getAutoResizeOverflowPadding:o,getAutoResizeBottomMargin:u,shouldAutoResizeOnInit:s};var f=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()};var c=function(e,t,n,i,a){r.setEditorTimeout(e,(function(){v(e,t);if(n--){c(e,t,n,i,a)}else if(a){a()}}),i)};var d=function(e,t){var n=e.getBody();if(n){n.style.overflowY=t?"":"hidden";if(!t){n.scrollTop=0}}};var v=function(e,t){var r,i,a,o,u;var s,c,m,g,p,h;var b=e.dom;i=e.getDoc();if(!i){return}if(f(e)){d(e,true);return}a=i.body;o=l.getAutoResizeMinHeight(e);s=b.getStyle(a,"margin-top",true);c=b.getStyle(a,"margin-bottom",true);m=b.getStyle(a,"padding-top",true);g=b.getStyle(a,"padding-bottom",true);p=b.getStyle(a,"border-top-width",true);h=b.getStyle(a,"border-bottom-width",true);u=a.offsetHeight+parseInt(s,10)+parseInt(c,10)+parseInt(m,10)+parseInt(g,10)+parseInt(p,10)+parseInt(h,10);if(isNaN(u)||u<=0){u=n.ie?a.scrollHeight:n.webkit&&a.clientHeight===0?0:a.offsetHeight}if(u>l.getAutoResizeMinHeight(e)){o=u}var y=l.getAutoResizeMaxHeight(e);if(y&&u>y){o=y;d(e,true)}else{d(e,false)}if(o!==t.get()){r=o-t.get();b.setStyle(e.iframeElement,"height",o+"px");t.set(o);if(n.webkit&&r<0){v(e,t)}}};var m=function(e,t){e.on("init",(function(){var t,n;var r=e.dom;t=l.getAutoResizeOverflowPadding(e);n=l.getAutoResizeBottomMargin(e);if(t!==false){r.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t})}if(n!==false){r.setStyles(e.getBody(),{paddingBottom:n})}}));e.on("nodechange setcontent keyup FullscreenStateChanged",(function(n){v(e,t)}));if(l.shouldAutoResizeOnInit(e)){e.on("init",(function(){c(e,t,20,100,(function(){c(e,t,5,1e3)}))}))}};var g={setup:m,resize:v};var p=function(e,t){e.addCommand("mceAutoResize",(function(){g.resize(e,t)}))};var h={register:p};t.add("autoresize",(function(t){if(!t.inline){var n=e(0);h.register(t,n);g.setup(t,n)}}));function b(){}return b}()})()},568:function(e,t,n){n(569)},569:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.util.VK");var r=function(e){return typeof e.link_assume_external_targets==="boolean"?e.link_assume_external_targets:false};var i=function(e){return typeof e.link_context_toolbar==="boolean"?e.link_context_toolbar:false};var a=function(e){return e.link_list};var o=function(e){return typeof e.default_link_target==="string"};var u=function(e){return e.default_link_target};var s=function(e){return e.target_list};var l=function(e,t){e.settings.target_list=t};var f=function(e){return s(e)!==false};var c=function(e){return e.rel_list};var d=function(e){return c(e)!==undefined};var v=function(e){return e.link_class_list};var m=function(e){return v(e)!==undefined};var g=function(e){return e.link_title!==false};var p=function(e){return typeof e.allow_unsafe_link_target==="boolean"?e.allow_unsafe_link_target:false};var h={assumeExternalTargets:r,hasContextToolbar:i,getLinkList:a,hasDefaultLinkTarget:o,getDefaultLinkTarget:u,getTargetList:s,setTargetList:l,shouldShowTargetList:f,getRelList:c,hasRelList:d,getLinkClassList:v,hasLinkClassList:m,shouldShowLinkTitle:g,allowUnsafeLinkTarget:p};var b=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var y=tinymce.util.Tools.resolve("tinymce.Env");var w=function(t,n){e.document.body.appendChild(t);t.dispatchEvent(n);e.document.body.removeChild(t)};var x=function(t){if(!y.ie||y.ie>10){var n=e.document.createElement("a");n.target="_blank";n.href=t;n.rel="noreferrer noopener";var r=e.document.createEvent("MouseEvents");r.initMouseEvent("click",true,true,e.window,0,0,0,0,0,false,false,false,false,0,null);w(n,r)}else{var i=e.window.open("","_blank");if(i){i.opener=null;var a=i.document;a.open();a.write('<meta http-equiv="refresh" content="0; url='+b.DOM.encode(t)+'">');a.close()}}};var C={open:x};var k=tinymce.util.Tools.resolve("tinymce.util.Tools");var S=function(e,t){var n=["noopener"];var r=e?e.split(/\s+/):[];var i=function(e){return k.trim(e.sort().join(" "))};var a=function(e){e=o(e);return e.length?e.concat(n):n};var o=function(e){return e.filter((function(e){return k.inArray(n,e)===-1}))};r=t?a(r):o(r);return r.length?i(r):null};var T=function(e){return e.replace(/\uFEFF/g,"")};var E=function(e,t){t=t||e.selection.getNode();if(O(t)){return e.dom.select("a[href]",t)[0]}else{return e.dom.getParent(t,"a[href]")}};var N=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return T(n)};var R=function(e){return e&&e.nodeName==="A"&&e.href};var _=function(e){return k.grep(e,R).length>0};var D=function(e){if(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||e.indexOf("href=")===-1)){return false}return true};var O=function(e){return e&&e.nodeName==="FIGURE"&&/\bimage\b/i.test(e.className)};var P=function(e,t){return function(n){e.undoManager.transact((function(){var r=e.selection.getNode();var i=E(e,r);var a={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};if(!h.hasRelList(e.settings)&&h.allowUnsafeLinkTarget(e.settings)===false){a.rel=S(a.rel,a.target==="_blank")}if(n.href===t.href){t.attach();t={}}if(i){e.focus();if(n.hasOwnProperty("text")){if("innerText"in i){i.innerText=n.text}else{i.textContent=n.text}}e.dom.setAttribs(i,a);e.selection.select(i);e.undoManager.add()}else{if(O(r)){I(e,r,a)}else if(n.hasOwnProperty("text")){e.insertContent(e.dom.createHTML("a",a,e.dom.encode(n.text)))}else{e.execCommand("mceInsertLink",false,a)}}}))}};var A=function(e){return function(){e.undoManager.transact((function(){var t=e.selection.getNode();if(O(t)){B(e,t)}else{e.execCommand("unlink")}}))}};var B=function(e,t){var n,r;r=e.dom.select("img",t)[0];if(r){n=e.dom.getParents(r,"a[href]",t)[0];if(n){n.parentNode.insertBefore(r,n);e.dom.remove(n)}}};var I=function(e,t,n){var r,i;i=e.dom.select("img",t)[0];if(i){r=e.dom.create("a",n);i.parentNode.insertBefore(r,i);r.appendChild(i)}};var L={link:P,unlink:A,isLink:R,hasLinks:_,isOnlyTextSelected:D,getAnchorElement:E,getAnchorText:N,toggleTargetRules:S};var M=tinymce.util.Tools.resolve("tinymce.util.Delay");var F=tinymce.util.Tools.resolve("tinymce.util.XHR");var H={};var z=function(e,t){var n=h.getLinkList(e.settings);if(typeof n==="string"){F.send({url:n,success:function(n){t(e,JSON.parse(n))}})}else if(typeof n==="function"){n((function(n){t(e,n)}))}else{t(e,n)}};var U=function(e,t,n){var r=function(e,n){n=n||[];k.each(e,(function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;if(t){t(i)}}n.push(i)}));return n};return r(e,n||[])};var W=function(e,t,n){var r=e.selection.getRng();M.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(r);n(t)}))}))};var j=function(e,t){var n={};var r=e.selection;var i=e.dom;var a,o;var u,s,l,f,c,d,v,m,g;var p=function(e){var t=u.find("#text");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}u.find("#href").value(e.control.value())};var b=function(t){var n=[];k.each(e.dom.select("a:not([href])"),(function(e){var r=e.name||e.id;if(r){n.push({text:r,value:"#"+r,selected:t.indexOf("#"+r)!==-1})}}));if(n.length){n.unshift({text:"None",value:""});return{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:p}}};var y=function(){if(!o&&s&&!n.text){this.parent().parent().find("#text")[0].value(this.value())}};var w=function(t){var r=t.meta||{};if(f){f.value(e.convertURL(this.value(),"href"))}k.each(t.meta,(function(e,t){var r=u.find("#"+t);if(t==="text"){if(o.length===0){r.value(e);n.text=e}}else{r.value(e)}}));if(r.attach){H={href:this.value(),attach:r.attach}}if(!r.text){y.call(this)}};var x=function(e){e.meta=u.toJSON()};s=L.isOnlyTextSelected(r.getContent());a=L.getAnchorElement(e);n.text=o=L.getAnchorText(e.selection,a);n.href=a?i.getAttrib(a,"href"):"";if(a){n.target=i.getAttrib(a,"target")}else if(h.hasDefaultLinkTarget(e.settings)){n.target=h.getDefaultLinkTarget(e.settings)}if(g=i.getAttrib(a,"rel")){n.rel=g}if(g=i.getAttrib(a,"class")){n.class=g}if(g=i.getAttrib(a,"title")){n.title=g}if(s){l={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){n.text=this.value()}}}if(t){f={type:"listbox",label:"Link list",values:U(t,(function(t){t.value=e.convertURL(t.value||t.url,"href")}),[{text:"None",value:""}]),onselect:p,value:e.convertURL(n.href,"href"),onPostRender:function(){f=this}}}if(h.shouldShowTargetList(e.settings)){if(h.getTargetList(e.settings)===undefined){h.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}])}d={name:"target",type:"listbox",label:"Target",values:U(h.getTargetList(e.settings))}}if(h.hasRelList(e.settings)){c={name:"rel",type:"listbox",label:"Rel",values:U(h.getRelList(e.settings),(function(t){if(h.allowUnsafeLinkTarget(e.settings)===false){t.value=L.toggleTargetRules(t.value,n.target==="_blank")}}))}}if(h.hasLinkClassList(e.settings)){v={name:"class",type:"listbox",label:"Class",values:U(h.getLinkClassList(e.settings),(function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})}}}))}}if(h.shouldShowLinkTitle(e.settings)){m={name:"title",type:"textbox",label:"Title",value:n.title}}u=e.windowManager.open({title:"Insert link",data:n,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:true,label:"Url",onchange:w,onkeyup:y,onpaste:y,onbeforecall:x},l,m,b(n.href),f,c,d,v],onSubmit:function(t){var r=h.assumeExternalTargets(e.settings);var i=L.link(e,H);var a=L.unlink(e);var u=k.extend({},n,t.data);var l=u.href;if(!l){a();return}if(!s||u.text===o){delete u.text}if(l.indexOf("@")>0&&l.indexOf("//")===-1&&l.indexOf("mailto:")===-1){W(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(e){if(e){u.href="mailto:"+l}i(u)}));return}if(r===true&&!/^\w+:/i.test(l)||r===false&&/^\s*www[\.|\d\.]/i.test(l)){W(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(e){if(e){u.href="http://"+l}i(u)}));return}i(u)}})};var V=function(e){z(e,j)};var q={open:V};var $=function(e,t){return e.dom.getParent(t,"a[href]")};var K=function(e){return $(e,e.selection.getStart())};var Y=function(e){var t=e.getAttribute("data-mce-href");return t?t:e.getAttribute("href")};var X=function(e){var t=e.plugins.contextmenu;return t?t.isContextMenuVisible():false};var G=function(e){return e.altKey===true&&e.shiftKey===false&&e.ctrlKey===false&&e.metaKey===false};var J=function(e,t){if(t){var n=Y(t);if(/^#/.test(n)){var r=e.$(n);if(r.length){e.selection.scrollIntoView(r[0],true)}}else{C.open(t.href)}}};var Z=function(e){return function(){q.open(e)}};var Q=function(e){return function(){J(e,K(e))}};var ee=function(e){return function(t){var n,r,i;if(h.hasContextToolbar(e.settings)&&!X(e)&&L.isLink(t)){n=e.selection;r=n.getRng();i=r.startContainer;if(i.nodeType===3&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length){return true}}return false}};var te=function(e){e.on("click",(function(t){var r=$(e,t.target);if(r&&n.metaKeyPressed(t)){t.preventDefault();J(e,r)}}));e.on("keydown",(function(t){var n=K(e);if(n&&t.keyCode===13&&G(t)){t.preventDefault();J(e,n)}}))};var ne=function(e){return function(){var t=this;e.on("nodechange",(function(n){t.active(!e.readonly&&!!L.getAnchorElement(e,n.element))}))}};var re=function(e){return function(){var t=this;var n=function(e){if(L.hasLinks(e.parents)){t.show()}else{t.hide()}};if(!L.hasLinks(e.dom.getParents(e.selection.getStart()))){t.hide()}e.on("nodechange",n);t.on("remove",(function(){e.off("nodechange",n)}))}};var ie={openDialog:Z,gotoSelectedLink:Q,leftClickedOnAHref:ee,setupGotoLinks:te,toggleActiveState:ne,toggleViewLinkState:re};var ae=function(e){e.addCommand("mceLink",ie.openDialog(e))};var oe={register:ae};var ue=function(e){e.addShortcut("Meta+K","",ie.openDialog(e))};var se={setup:ue};var le=function(e){e.addButton("link",{active:false,icon:"link",tooltip:"Insert/edit link",onclick:ie.openDialog(e),onpostrender:ie.toggleActiveState(e)});e.addButton("unlink",{active:false,icon:"unlink",tooltip:"Remove link",onclick:L.unlink(e),onpostrender:ie.toggleActiveState(e)});if(e.addContextToolbar){e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:ie.gotoSelectedLink(e)})}};var fe=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:ie.gotoSelectedLink(e),onPostRender:ie.toggleViewLinkState(e),prependToContext:true});e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:ie.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:true});e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:L.unlink(e),stateSelector:"a[href]"})};var ce=function(e){if(e.addContextToolbar){e.addContextToolbar(ie.leftClickedOnAHref(e),"openlink | link unlink")}};var de={setupButtons:le,setupMenuItems:fe,setupContextToolbars:ce};t.add("link",(function(e){de.setupButtons(e);de.setupMenuItems(e);de.setupContextToolbars(e);ie.setupGotoLinks(e);oe.register(e);se.setup(e)}));function ve(){}return ve}(window)})()},570:function(e,t,n){n(571)},571:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=function(e){return e.settings.image_dimensions===false?false:true};var r=function(e){return e.settings.image_advtab===true?true:false};var i=function(e){return e.getParam("image_prepend_url","")};var a=function(e){return e.getParam("image_class_list")};var o=function(e){return e.settings.image_description===false?false:true};var u=function(e){return e.settings.image_title===true?true:false};var s=function(e){return e.settings.image_caption===true?true:false};var l=function(e){return e.getParam("image_list",false)};var f=function(e){return e.getParam("images_upload_url",false)};var c=function(e){return e.getParam("images_upload_handler",false)};var d=function(e){return e.getParam("images_upload_url")};var v=function(e){return e.getParam("images_upload_handler")};var m=function(e){return e.getParam("images_upload_base_path")};var g=function(e){return e.getParam("images_upload_credentials")};var p={hasDimensions:n,hasAdvTab:r,getPrependUrl:i,getClassList:a,hasDescription:o,hasImageTitle:u,hasImageCaption:s,getImageList:l,hasUploadUrl:f,hasUploadHandler:c,getUploadUrl:d,getUploadHandler:v,getUploadBasePath:m,getUploadCredentials:g};var h=typeof e.window!=="undefined"?e.window:Function("return this;")();var b=function(e,t){var n=t!==undefined&&t!==null?t:h;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var y=function(e,t){var n=e.split(".");return b(n,t)};var w=function(e,t){return y(e,t)};var x=function(e,t){var n=w(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};var C={getOrDie:x};function k(){var e=C.getOrDie("FileReader");return new e}var S=tinymce.util.Tools.resolve("tinymce.util.Promise");var T=tinymce.util.Tools.resolve("tinymce.util.Tools");var E=tinymce.util.Tools.resolve("tinymce.util.XHR");var N=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))};var R=function(t,n){var r=e.document.createElement("img");function i(e,t){if(r.parentNode){r.parentNode.removeChild(r)}n({width:e,height:t})}r.onload=function(){var e=N(r.width,r.clientWidth);var t=N(r.height,r.clientHeight);i(e,t)};r.onerror=function(){i(0,0)};var a=r.style;a.visibility="hidden";a.position="fixed";a.bottom=a.left="0px";a.width=a.height="auto";e.document.body.appendChild(r);r.src=t};var _=function(e,t,n){function r(e,n){n=n||[];T.each(e,(function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;t(i)}n.push(i)}));return n}return r(e,n||[])};var D=function(e){if(e){e=e.replace(/px$/,"")}return e};var O=function(e){if(e.length>0&&/^[0-9]+$/.test(e)){e+="px"}return e};var P=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[0];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e};var A=function(e,t){var n=p.getImageList(e);if(typeof n==="string"){E.send({url:n,success:function(e){t(JSON.parse(e))}})}else if(typeof n==="function"){n(t)}else{t(n)}};var B=function(e,t,n){function r(){n.onload=n.onerror=null;if(e.selection){e.selection.select(n);e.nodeChanged()}}n.onload=function(){if(!t.width&&!t.height&&p.hasDimensions(e)){e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight})}r()};n.onerror=r};var I=function(e){return new S((function(t,n){var r=k();r.onload=function(){t(r.result)};r.onerror=function(){n(r.error.message)};r.readAsDataURL(e)}))};var L={getImageSize:R,buildListItems:_,removePixelSuffix:D,addPixelSuffix:O,mergeMargins:P,createImageList:A,waitLoadImage:B,blobToDataUri:I};var M=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var F=Object.prototype.hasOwnProperty;var H=function(e,t){return t};var z=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(F.call(a,o)){r[o]=e(r[o],a[o])}}}return r}};var U=z(H);var W=M.DOM;var j=function(e){if(e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight){return L.removePixelSuffix(e.style.marginLeft)}else{return""}};var V=function(e){if(e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom){return L.removePixelSuffix(e.style.marginTop)}else{return""}};var q=function(e){if(e.style.borderWidth){return L.removePixelSuffix(e.style.borderWidth)}else{return""}};var $=function(e,t){if(e.hasAttribute(t)){return e.getAttribute(t)}else{return""}};var K=function(e,t){return e.style[t]?e.style[t]:""};var Y=function(e){return e.parentNode!==null&&e.parentNode.nodeName==="FIGURE"};var X=function(e,t,n){e.setAttribute(t,n)};var G=function(e){var t=W.create("figure",{class:"image"});W.insertAfter(t,e);t.appendChild(e);t.appendChild(W.create("figcaption",{contentEditable:true},"Caption"));t.contentEditable="false"};var J=function(e){var t=e.parentNode;W.insertAfter(e,t);W.remove(t)};var Z=function(e){if(Y(e)){J(e)}else{G(e)}};var Q=function(e,t){var n=e.getAttribute("style");var r=t(n!==null?n:"");if(r.length>0){e.setAttribute("style",r);e.setAttribute("data-mce-style",r)}else{e.removeAttribute("style")}};var ee=function(e,t){return function(e,n,r){if(e.style[n]){e.style[n]=L.addPixelSuffix(r);Q(e,t)}else{X(e,n,r)}}};var te=function(e,t){if(e.style[t]){return L.removePixelSuffix(e.style[t])}else{return $(e,t)}};var ne=function(e,t){var n=L.addPixelSuffix(t);e.style.marginLeft=n;e.style.marginRight=n};var re=function(e,t){var n=L.addPixelSuffix(t);e.style.marginTop=n;e.style.marginBottom=n};var ie=function(e,t){var n=L.addPixelSuffix(t);e.style.borderWidth=n};var ae=function(e,t){e.style.borderStyle=t};var oe=function(e){return K(e,"borderStyle")};var ue=function(e){return e.nodeName==="FIGURE"};var se=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:false,hspace:"",vspace:"",border:"",borderStyle:""}};var le=function(t,n){var r=e.document.createElement("img");X(r,"style",n.style);if(j(r)||n.hspace!==""){ne(r,n.hspace)}if(V(r)||n.vspace!==""){re(r,n.vspace)}if(q(r)||n.border!==""){ie(r,n.border)}if(oe(r)||n.borderStyle!==""){ae(r,n.borderStyle)}return t(r.getAttribute("style"))};var fe=function(t,n){var r=e.document.createElement("img");me(t,U(n,{caption:false}),r);X(r,"alt",n.alt);if(n.caption){var i=W.create("figure",{class:"image"});i.appendChild(r);i.appendChild(W.create("figcaption",{contentEditable:true},"Caption"));i.contentEditable="false";return i}else{return r}};var ce=function(e,t){return{src:$(t,"src"),alt:$(t,"alt"),title:$(t,"title"),width:te(t,"width"),height:te(t,"height"),class:$(t,"class"),style:e($(t,"style")),caption:Y(t),hspace:j(t),vspace:V(t),border:q(t),borderStyle:K(t,"borderStyle")}};var de=function(e,t,n,r,i){if(n[r]!==t[r]){i(e,r,n[r])}};var ve=function(e,t){return function(n,r,i){e(n,i);Q(n,t)}};var me=function(e,t,n){var r=ce(e,n);de(n,r,t,"caption",(function(e,t,n){return Z(e)}));de(n,r,t,"src",X);de(n,r,t,"alt",X);de(n,r,t,"title",X);de(n,r,t,"width",ee("width",e));de(n,r,t,"height",ee("height",e));de(n,r,t,"class",X);de(n,r,t,"style",ve((function(e,t){return X(e,"style",t)}),e));de(n,r,t,"hspace",ve(ne,e));de(n,r,t,"vspace",ve(re,e));de(n,r,t,"border",ve(ie,e));de(n,r,t,"borderStyle",ve(ae,e))};var ge=function(e,t){var n=e.dom.styles.parse(t);var r=L.mergeMargins(n);var i=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(i)};var pe=function(e){var t=e.selection.getNode();var n=e.dom.getParent(t,"figure.image");if(n){return e.dom.select("img",n)[0]}if(t&&(t.nodeName!=="IMG"||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))){return null}return t};var he=function(e,t){var n=e.dom;var r=n.getParent(t.parentNode,(function(t){return e.schema.getTextBlockElements()[t.nodeName]}),e.getBody());if(r){return n.split(r,t)}else{return t}};var be=function(e){var t=pe(e);return t?ce((function(t){return ge(e,t)}),t):se()};var ye=function(e,t){var n=fe((function(t){return ge(e,t)}),t);e.dom.setAttrib(n,"data-mce-id","__mcenew");e.focus();e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];e.dom.setAttrib(r,"data-mce-id",null);if(ue(r)){var i=he(e,r);e.selection.select(i)}else{e.selection.select(r)}};var we=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))};var xe=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n);e.focus();e.nodeChanged();if(e.dom.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}}};var Ce=function(e,t){var n=pe(e);me((function(t){return ge(e,t)}),t,n);we(e,n);if(ue(n.parentNode)){var r=n.parentNode;he(e,r);e.selection.select(n.parentNode)}else{e.selection.select(n);L.waitLoadImage(e,t,n)}};var ke=function(e,t){var n=pe(e);if(n){if(t.src){Ce(e,t)}else{xe(e,n)}}else if(t.src){ye(e,t)}};var Se=function(e){return function(t){var n=e.dom;var r=t.control.rootControl;if(!p.hasAdvTab(e)){return}var i=r.toJSON();var a=n.parseStyle(i.style);r.find("#vspace").value("");r.find("#hspace").value("");a=L.mergeMargins(a);if(a["margin-top"]&&a["margin-bottom"]||a["margin-right"]&&a["margin-left"]){if(a["margin-top"]===a["margin-bottom"]){r.find("#vspace").value(L.removePixelSuffix(a["margin-top"]))}else{r.find("#vspace").value("")}if(a["margin-right"]===a["margin-left"]){r.find("#hspace").value(L.removePixelSuffix(a["margin-right"]))}else{r.find("#hspace").value("")}}if(a["border-width"]){r.find("#border").value(L.removePixelSuffix(a["border-width"]))}else{r.find("#border").value("")}if(a["border-style"]){r.find("#borderStyle").value(a["border-style"])}else{r.find("#borderStyle").value("")}r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(a))))}};var Te=function(e,t){t.find("#style").each((function(n){var r=le((function(t){return ge(e,t)}),U(se(),t.toJSON()));n.value(r)}))};var Ee=function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:Se(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){Te(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){Te(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}};var Ne={makeTab:Ee};var Re=function(e,t){e.state.set("oldVal",e.value());t.state.set("oldVal",t.value())};var _e=function(e,t){var n=e.find("#width")[0];var r=e.find("#height")[0];var i=e.find("#constrain")[0];if(n&&r&&i){t(n,r,i.checked())}};var De=function(e,t,n){var r=e.state.get("oldVal");var i=t.state.get("oldVal");var a=e.value();var o=t.value();if(n&&r&&i&&a&&o){if(a!==r){o=Math.round(a/r*o);if(!isNaN(o)){t.value(o)}}else{a=Math.round(o/i*a);if(!isNaN(a)){e.value(a)}}}Re(e,t)};var Oe=function(e){_e(e,Re)};var Pe=function(e){_e(e,De)};var Ae=function(){var e=function(e){Pe(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]}};var Be={createUi:Ae,syncSize:Oe,updateSize:Pe};var Ie=function(e,t){var n,r,i;var a=e.meta||{};var o=e.control;var u=o.rootControl;var s=u.find("#image-list")[0];if(s){s.value(t.convertURL(o.value(),"src"))}T.each(a,(function(e,t){u.find("#"+t).value(e)}));if(!a.width&&!a.height){n=t.convertURL(o.value(),"src");r=p.getPrependUrl(t);i=new RegExp("^(?:[a-z]+:)?//","i");if(r&&!i.test(n)&&n.substring(0,r.length)!==r){n=r+n}o.value(n);L.getImageSize(t.documentBaseURI.toAbsolute(o.value()),(function(e){if(e.width&&e.height&&p.hasDimensions(t)){u.find("#width").value(e.width);u.find("#height").value(e.height);Be.syncSize(u)}}))}};var Le=function(e){e.meta=e.control.rootControl.toJSON()};var Me=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:true,onchange:function(t){Ie(t,e)},onbeforecall:Le},t];if(p.hasDescription(e)){n.push({name:"alt",type:"textbox",label:"Image description"})}if(p.hasImageTitle(e)){n.push({name:"title",type:"textbox",label:"Image Title"})}if(p.hasDimensions(e)){n.push(Be.createUi())}if(p.getClassList(e)){n.push({name:"class",type:"listbox",label:"Class",values:L.buildListItems(p.getClassList(e),(function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})}}}))})}if(p.hasImageCaption(e)){n.push({name:"caption",type:"checkbox",label:"Caption"})}return n};var Fe=function(e,t){return{title:"General",type:"form",items:Me(e,t)}};var He={makeTab:Fe,getGeneralItems:Me};var ze=function(){return C.getOrDie("URL")};var Ue=function(e){return ze().createObjectURL(e)};var We=function(e){ze().revokeObjectURL(e)};var je={createObjectURL:Ue,revokeObjectURL:We};var Ve=tinymce.util.Tools.resolve("tinymce.ui.Factory");function qe(){var e=C.getOrDie("XMLHttpRequest");return new e}var $e=function(){};var Ke=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};function Ye(t){var n=function(n,r,i,a){var o,u;o=qe();o.open("POST",t.url);o.withCredentials=t.credentials;o.upload.onprogress=function(e){a(e.loaded/e.total*100)};o.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+o.status)};o.onload=function(){var e;if(o.status<200||o.status>=300){i("HTTP Error: "+o.status);return}e=JSON.parse(o.responseText);if(!e||typeof e.location!=="string"){i("Invalid JSON: "+o.responseText);return}r(Ke(t.basePath,e.location))};u=new e.FormData;u.append("file",n.blob(),n.filename());o.send(u)};var r=function(e,t){return new S((function(n,r){try{t(e,n,r,$e)}catch(e){r(e.message)}}))};var i=function(e){return e===n};var a=function(e){return!t.url&&i(t.handler)?S.reject("Upload url missing from the settings."):r(e,t.handler)};t=T.extend({credentials:false,handler:n},t);return{upload:a}}var Xe=function(e){return function(t){var n=Ve.get("Throbber");var r=t.control.rootControl;var i=new n(r.getEl());var a=t.control.value();var o=je.createObjectURL(a);var u=Ye({url:p.getUploadUrl(e),basePath:p.getUploadBasePath(e),credentials:p.getUploadCredentials(e),handler:p.getUploadHandler(e)});var s=function(){i.hide();je.revokeObjectURL(o)};i.show();return L.blobToDataUri(a).then((function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:o,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return u.upload(n).then((function(e){var t=r.find("#src");t.value(e);r.find("tabpanel")[0].activateTab(0);t.fire("change");s();return e}))})).catch((function(t){e.windowManager.alert(t);s()}))}};var Ge=".jpg,.jpeg,.png,.gif";var Je=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:Ge,onchange:Xe(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:Ge,height:100,onchange:Xe(e)}]}};var Ze={makeTab:Je};function Qe(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}}var et=function(e,t){var n=t.control.getRoot();Be.updateSize(n);e.undoManager.transact((function(){var t=U(be(e),n.toJSON());ke(e,t)}));e.editorUpload.uploadImagesAuto()};function tt(e){function t(t){var n=be(e);var r,i;if(t){i={type:"listbox",label:"Image list",name:"image-list",values:L.buildListItems(t,(function(t){t.value=e.convertURL(t.value||t.url,"src")}),[{text:"None",value:""}]),value:n.src&&e.convertURL(n.src,"src"),onselect:function(e){var t=r.find("#alt");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}r.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){i=this}}}if(p.hasAdvTab(e)||p.hasUploadUrl(e)||p.hasUploadHandler(e)){var a=[He.makeTab(e,i)];if(p.hasAdvTab(e)){a.push(Ne.makeTab(e))}if(p.hasUploadUrl(e)||p.hasUploadHandler(e)){a.push(Ze.makeTab(e))}r=e.windowManager.open({title:"Insert/edit image",data:n,bodyType:"tabpanel",body:a,onSubmit:Qe(et,e)})}else{r=e.windowManager.open({title:"Insert/edit image",data:n,body:He.getGeneralItems(e,i),onSubmit:Qe(et,e)})}Be.syncSize(r)}function n(){L.createImageList(e,t)}return{open:n}}var nt=function(e){e.addCommand("mceImage",tt(e).open)};var rt={register:nt};var it=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)};var at=function(e){return function(t){var n=t.length,r;var i=function(t){t.attr("contenteditable",e?"true":null)};while(n--){r=t[n];if(it(r)){r.attr("contenteditable",e?"false":null);T.each(r.getAll("figcaption"),i)}}}};var ot=function(e){e.on("preInit",(function(){e.parser.addNodeFilter("figure",at(true));e.serializer.addNodeFilter("figure",at(false))}))};var ut={setup:ot};var st=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:tt(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"});e.addMenuItem("image",{icon:"image",text:"Image",onclick:tt(e).open,context:"insert",prependToContext:true})};var lt={register:st};t.add("image",(function(e){ut.setup(e);lt.register(e);rt.register(e)}));function ft(){}return ft}(window)})()},572:function(e,t,n){n(573)},573:function(e,t,n){(function(e,t){(function(){var n=function(n){"use strict";var r=function(e){var t=e;var n=function(){return t};var i=function(e){t=e};var a=function(){return r(n())};return{get:n,set:i,clone:a}};var i=tinymce.util.Tools.resolve("tinymce.PluginManager");var a=function(e){if(/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)&&i.get("powerpaste")){if(typeof n.window.console!=="undefined"&&n.window.console.log){n.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")}return true}else{return false}};var o={hasProPlugin:a};var u=function(e,t){return{clipboard:e,quirks:t}};var s={get:u};var l=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})};var f=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})};var c=function(e,t){return e.fire("PastePlainTextToggle",{state:t})};var d=function(e,t){return e.fire("paste",{ieFake:t})};var v={firePastePreProcess:l,firePastePostProcess:f,firePastePlainTextToggle:c,firePaste:d};var m=function(e){return e.getParam("paste_plaintext_inform",true)};var g=function(e){return e.getParam("paste_block_drop",false)};var p=function(e){return e.getParam("paste_data_images",false)};var h=function(e){return e.getParam("paste_filter_drop",true)};var b=function(e){return e.getParam("paste_preprocess")};var y=function(e){return e.getParam("paste_postprocess")};var w=function(e){return e.getParam("paste_webkit_styles")};var x=function(e){return e.getParam("paste_remove_styles_if_webkit",true)};var C=function(e){return e.getParam("paste_merge_formats",true)};var k=function(e){return e.getParam("smart_paste",true)};var S=function(e){return e.getParam("paste_as_text",false)};var T=function(e){return e.getParam("paste_retain_style_properties")};var E=function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,"+"-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,"+"td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)};var N=function(e){return e.getParam("paste_convert_word_fake_lists",true)};var R=function(e){return e.getParam("paste_enable_default_filters",true)};var _={shouldPlainTextInform:m,shouldBlockDrop:g,shouldPasteDataImages:p,shouldFilterDrop:h,getPreProcess:b,getPostProcess:y,getWebkitStyles:w,shouldRemoveWebKitStyles:x,shouldMergeFormats:C,isSmartPasteEnabled:k,isPasteAsTextEnabled:S,getRetainStyleProps:T,getWordValidElements:E,shouldConvertWordFakeLists:N,shouldUseDefaultFilters:R};var D=function(e,t){return t.get()===false&&_.shouldPlainTextInform(e)};var O=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})};var P=function(e,t,n){if(t.pasteFormat.get()==="text"){t.pasteFormat.set("html");v.firePastePlainTextToggle(e,false)}else{t.pasteFormat.set("text");v.firePastePlainTextToggle(e,true);if(D(e,n)){O(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");n.set(true)}}e.focus()};var A={togglePlainTextPaste:P};var B=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",(function(){A.togglePlainTextPaste(e,t,n)}));e.addCommand("mceInsertClipboardContent",(function(e,n){if(n.content){t.pasteHtml(n.content,n.internal)}if(n.text){t.pasteText(n.text)}}))};var I={register:B};var L=tinymce.util.Tools.resolve("tinymce.Env");var M=tinymce.util.Tools.resolve("tinymce.util.Delay");var F=tinymce.util.Tools.resolve("tinymce.util.Tools");var H=tinymce.util.Tools.resolve("tinymce.util.VK");var z="x-tinymce/html";var U="\x3c!-- "+z+" --\x3e";var W=function(e){return U+e};var j=function(e){return e.replace(U,"")};var V=function(e){return e.indexOf(U)!==-1};var q={mark:W,unmark:j,isMarked:V,internalHtmlMime:function(){return z}};var $=tinymce.util.Tools.resolve("tinymce.html.Entities");var K=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)};var Y=function(e){return e.replace(/\r?\n/g,"<br>")};var X=function(e,t){var n;var r=[];var i="<"+e;if(typeof t==="object"){for(n in t){if(t.hasOwnProperty(n)){r.push(n+'="'+$.encodeAllRaw(t[n])+'"')}}if(r.length){i+=" "+r.join(" ")}}return i+">"};var G=function(e,t,n){var r=e.split(/\n\n/);var i=X(t,n);var a="</"+t+">";var o=F.map(r,(function(e){return e.split(/\n/).join("<br />")}));var u=function(e){return i+e+a};return o.length===1?o[0]:F.map(o,u).join("")};var J=function(e,t,n){return t?G(e,t,n):Y(e)};var Z={isPlainText:K,convert:J,toBRs:Y,toBlockElements:G};var Q=tinymce.util.Tools.resolve("tinymce.html.DomParser");var ee=tinymce.util.Tools.resolve("tinymce.html.Serializer");var te=tinymce.util.Tools.resolve("tinymce.html.Node");var ne=tinymce.util.Tools.resolve("tinymce.html.Schema");function re(e,t){F.each(t,(function(t){if(t.constructor===RegExp){e=e.replace(t,"")}else{e=e.replace(t[0],t[1])}}));return e}function ie(e){var t=ne();var n=Q({},t);var r="";var i=t.getShortEndedElements();var a=F.makeMap("script noscript style textarea video audio iframe object"," ");var o=t.getBlockElements();function u(e){var t=e.name,n=e;if(t==="br"){r+="\n";return}if(t==="wbr"){return}if(i[t]){r+=" "}if(a[t]){r+=" ";return}if(e.type===3){r+=e.value}if(!e.shortEnded){if(e=e.firstChild){do{u(e)}while(e=e.next)}}if(o[t]&&n.next){r+="\n";if(t==="p"){r+="\n"}}}e=re(e,[/<!\[[^\]]+\]>/g]);u(n.parse(e));return r}function ae(e){function t(e,t,n){if(!t&&!n){return" "}return""}e=re(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return e}function oe(e){var t=0;return function(){return e+t++}}var ue=function(){return n.navigator.userAgent.indexOf(" Edge/")!==-1};var se={filter:re,innerText:ie,trimHtml:ae,createIdGenerator:oe,isMsEdge:ue};function le(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function fe(e){var t,n;n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];e=e.replace(/^[\u00a0 ]+/,"");F.each(n,(function(n){if(n.test(e)){t=true;return false}}));return t}function ce(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function de(e){var t,n,r=1;function i(e){var t="";if(e.type===3){return e.value}if(e=e.firstChild){do{t+=i(e)}while(e=e.next)}return t}function a(e,t){if(e.type===3){if(t.test(e.value)){e.value=e.value.replace(t,"");return false}}if(e=e.firstChild){do{if(!a(e,t)){return false}}while(e=e.next)}return true}function o(e){if(e._listIgnore){e.remove();return}if(e=e.firstChild){do{o(e)}while(e=e.next)}}function u(e,i,u){var s=e._listLevel||r;if(s!==r){if(s<r){if(t){t=t.parent.parent}}else{n=t;t=null}}if(!t||t.name!==i){n=n||t;t=new te(i,1);if(u>1){t.attr("start",""+u)}e.wrap(t)}else{t.append(e)}e.name="li";if(s>r&&n){n.lastChild.append(t)}r=s;o(e);a(e,/^\u00a0+/);a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);a(e,/^\u00a0+/)}var s=[];var l=e.firstChild;while(typeof l!=="undefined"&&l!==null){s.push(l);l=l.walk();if(l!==null){while(typeof l!=="undefined"&&l.parent!==e){l=l.walk()}}}for(var f=0;f<s.length;f++){e=s[f];if(e.name==="p"&&e.firstChild){var c=i(e);if(ce(c)){u(e,"ul");continue}if(fe(c)){var d=/([0-9]+)\./.exec(c);var v=1;if(d){v=parseInt(d[1],10)}u(e,"ol",v);continue}if(e._listLevel){u(e,"ul",1);continue}t=null}else{n=t;t=null}}}function ve(e,t,n,r){var i={},a;var o=e.dom.parseStyle(r);F.each(o,(function(o,u){switch(u){case"mso-list":a=/\w+ \w+([0-9]+)/i.exec(r);if(a){n._listLevel=parseInt(a[1],10)}if(/Ignore/i.test(o)&&n.firstChild){n._listIgnore=true;n.firstChild._listIgnore=true}break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":if(o!=="normal"){i[u]=o}return;case"mso-element":if(/^(comment|comment-list)$/i.test(o)){n.remove();return}break}if(u.indexOf("mso-comment")===0){n.remove();return}if(u.indexOf("mso-")===0){return}if(_.getRetainStyleProps(e)==="all"||t&&t[u]){i[u]=o}}));if(/(bold)/i.test(i["font-weight"])){delete i["font-weight"];n.wrap(new te("b",1))}if(/(italic)/i.test(i["font-style"])){delete i["font-style"];n.wrap(new te("i",1))}i=e.dom.serializeStyle(i,n.name);if(i){return i}return null}var me=function(e,t){var n,r;n=_.getRetainStyleProps(e);if(n){r=F.makeMap(n.split(/[, ]/))}t=se.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var i=_.getWordValidElements(e);var a=ne({valid_elements:i,valid_children:"-li[p]"});F.each(a.elements,(function(e){if(!e.attributes.class){e.attributes.class={};e.attributesOrder.push("class")}if(!e.attributes.style){e.attributes.style={};e.attributesOrder.push("style")}}));var o=Q({},a);o.addAttributeFilter("style",(function(t){var n=t.length,i;while(n--){i=t[n];i.attr("style",ve(e,r,i,i.attr("style")));if(i.name==="span"&&i.parent&&!i.attributes.length){i.unwrap()}}}));o.addAttributeFilter("class",(function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r)){n.remove()}n.attr("class",null)}}));o.addNodeFilter("del",(function(e){var t=e.length;while(t--){e[t].remove()}}));o.addNodeFilter("a",(function(e){var t=e.length,n,r,i;while(t--){n=e[t];r=n.attr("href");i=n.attr("name");if(r&&r.indexOf("#_msocom_")!==-1){n.remove();continue}if(r&&r.indexOf("file://")===0){r=r.split("#")[1];if(r){r="#"+r}}if(!r&&!i){n.unwrap()}else{if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){n.unwrap();continue}n.attr({href:r,name:i})}}}));var u=o.parse(t);if(_.shouldConvertWordFakeLists(e)){de(u)}t=ee({validate:e.settings.validate},a).serialize(u);return t};var ge=function(e,t){return _.shouldUseDefaultFilters(e)?me(e,t):t};var pe={preProcess:ge,isWordContent:le};var he=function(e,t){var n=Q({},e.schema);n.addNodeFilter("meta",(function(e){F.each(e,(function(e){return e.remove()}))}));var r=n.parse(t,{forced_root_block:false,isRootContent:true});return ee({validate:e.settings.validate},e.schema).serialize(r)};var be=function(e,t){return{content:e,cancelled:t}};var ye=function(e,t,n,r){var i=e.dom.create("div",{style:"display:none"},t);var a=v.firePastePostProcess(e,i,n,r);return be(a.node.innerHTML,a.isDefaultPrevented())};var we=function(e,t,n,r){var i=v.firePastePreProcess(e,t,n,r);var a=he(e,i.content);if(e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()){return ye(e,a,n,r)}else{return be(a,i.isDefaultPrevented())}};var xe=function(e,t,n){var r=pe.isWordContent(t);var i=r?pe.preProcess(e,t):t;return we(e,i,n,r)};var Ce={process:xe};var ke=function(e,t){e.insertContent(t,{merge:_.shouldMergeFormats(e),paste:true});return true};var Se=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)};var Te=function(e){return Se(e)&&/.(gif|jpe?g|png)$/.test(e)};var Ee=function(e,t,n){e.undoManager.extra((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')}));return true};var Ne=function(e,t,n){e.undoManager.extra((function(){n(e,t)}),(function(){e.execCommand("mceInsertLink",false,t)}));return true};var Re=function(e,t,n){return e.selection.isCollapsed()===false&&Se(t)?Ne(e,t,n):false};var _e=function(e,t,n){return Te(t)?Ee(e,t,n):false};var De=function(e,t){F.each([Re,_e,ke],(function(n){return n(e,t,ke)!==true}))};var Oe=function(e,t){if(_.isSmartPasteEnabled(e)===false){ke(e,t)}else{De(e,t)}};var Pe={isImageUrl:Te,isAbsoluteUrl:Se,insertContent:Oe};var Ae=function(){};var Be=function(e){return function(){return e}};function Ie(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}var i=t.concat(n);return e.apply(null,i)}}var Le=Be(false);var Me=Be(true);var Fe=function(){return He};var He=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r={fold:function(e,t){return e()},is:Le,isSome:Le,isNone:Me,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:Be(null),getOrUndefined:Be(undefined),or:n,orThunk:t,map:Fe,each:Ae,bind:Fe,exists:Le,forall:Me,filter:Fe,equals:e,equals_:e,toArray:function(){return[]},toString:Be("none()")};if(Object.freeze){Object.freeze(r)}return r}();var ze=function(e){var t=Be(e);var n=function(){return i};var r=function(t){return t(e)};var i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Me,isNone:Le,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return ze(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:He},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(Le,(function(t){return n(e,t)}))}};return i};var Ue=function(e){return e===null||e===undefined?He:ze(e)};var We={some:ze,none:Fe,from:Ue};var je=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var Ve=function(e){return function(t){return je(t)===e}};var qe=Ve("function");var $e=Array.prototype.slice;var Ke=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i)}return r};var Ye=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}};var Xe=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r)){n.push(a)}}return n};var Ge=qe(Array.from)?Array.from:function(e){return $e.call(e)};var Je={},Ze={exports:Je};(function(n,r,i,a){(function(e){if(typeof r==="object"&&typeof i!=="undefined"){i.exports=e()}else if(typeof n==="function"&&n.amd){n([],e)}else{var a;if(typeof window!=="undefined"){a=window}else if(typeof t!=="undefined"){a=t}else if(typeof self!=="undefined"){a=self}else{a=this}a.EphoxContactWrapper=e()}})((function(){return function(){function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var l="function"==typeof a&&a;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};t[u][0].call(c.exports,(function(e){var n=t[u][1][e];return i(n||e)}),c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof a&&a,u=0;u<r.length;u++)i(r[u]);return i}return e}()({1:[function(e,t,n){var r=t.exports={};var i;var a;function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=o}}catch(e){i=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=u}}catch(e){a=u}})();function s(e){if(i===setTimeout){return setTimeout(e,0)}if((i===o||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function l(e){if(a===clearTimeout){return clearTimeout(e)}if((a===u||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var f=[];var c=false;var d;var v=-1;function m(){if(!c||!d){return}c=false;if(d.length){f=d.concat(f)}else{v=-1}if(f.length){g()}}function g(){if(c){return}var e=s(m);c=true;var t=f.length;while(t){d=f;f=[];while(++v<t){if(d){d[v].run()}}v=-1;t=f.length}d=null;c=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}f.push(new p(e,t));if(f.length===1&&!c){s(g)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function h(){}r.on=h;r.addListener=h;r.once=h;r.off=h;r.removeListener=h;r.removeAllListeners=h;r.emit=h;r.prependListener=h;r.prependOnceListener=h;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],2:[function(t,n,r){(function(t){(function(r){var i=setTimeout;function a(){}function o(e,t){return function(){e.apply(t,arguments)}}function u(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof e!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];v(e,this)}function s(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;u._immediateFn((function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?l:f)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){f(t.promise,e);return}l(t.promise,r)}))}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof u){e._state=3;e._value=t;c(e);return}else if(typeof n==="function"){v(o(n,t),e);return}}e._state=1;e._value=t;c(e)}catch(t){f(e,t)}}function f(e,t){e._state=2;e._value=t;c(e)}function c(e){if(e._state===2&&e._deferreds.length===0){u._immediateFn((function(){if(!e._handled){u._unhandledRejectionFn(e._value)}}))}for(var t=0,n=e._deferreds.length;t<n;t++){s(e,e._deferreds[t])}e._deferreds=null}function d(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function v(e,t){var n=false;try{e((function(e){if(n)return;n=true;l(t,e)}),(function(e){if(n)return;n=true;f(t,e)}))}catch(e){if(n)return;n=true;f(t,e)}}u.prototype["catch"]=function(e){return this.then(null,e)};u.prototype.then=function(e,t){var n=new this.constructor(a);s(this,new d(e,t,n));return n};u.all=function(e){var t=Array.prototype.slice.call(e);return new u((function(e,n){if(t.length===0)return e([]);var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var u=o.then;if(typeof u==="function"){u.call(o,(function(e){i(a,e)}),n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}}))};u.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===u){return e}return new u((function(t){t(e)}))};u.reject=function(e){return new u((function(t,n){n(e)}))};u.race=function(e){return new u((function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}}))};u._immediateFn=typeof t==="function"?function(e){t(e)}:function(e){i(e,0)};u._unhandledRejectionFn=function t(n){if(typeof e!=="undefined"&&e){e.warn("Possible Unhandled Promise Rejection:",n)}};u._setImmediateFn=function e(t){u._immediateFn=t};u._setUnhandledRejectionFn=function e(t){u._unhandledRejectionFn=t};if(typeof n!=="undefined"&&n.exports){n.exports=u}else if(!r.Promise){r.Promise=u}})(this)}).call(this,t("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var i=e("process/browser.js").nextTick;var a=Function.prototype.apply;var o=Array.prototype.slice;var u={};var s=0;n.setTimeout=function(){return new l(a.call(setTimeout,window,arguments),clearTimeout)};n.setInterval=function(){return new l(a.call(setInterval,window,arguments),clearInterval)};n.clearTimeout=n.clearInterval=function(e){e.close()};function l(e,t){this._id=e;this._clearFn=t}l.prototype.unref=l.prototype.ref=function(){};l.prototype.close=function(){this._clearFn.call(window,this._id)};n.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};n.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout((function t(){if(e._onTimeout)e._onTimeout()}),t)}};n.setImmediate=typeof t==="function"?t:function(e){var t=s++;var r=arguments.length<2?false:o.call(arguments,1);u[t]=true;i((function i(){if(u[t]){if(r){e.apply(null,r)}else{e.call(null)}n.clearImmediate(t)}}));return t};n.clearImmediate=typeof r==="function"?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill");var i=function(){if(typeof window!=="undefined"){return window}else{return Function("return this;")()}}();t.exports={boltExport:i.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}))})(undefined,Je,Ze,undefined);var Qe=Ze.exports.boltExport;var et=function(e){var t=We.none();var r=[];var i=function(e){return et((function(t){a((function(n){t(e(n))}))}))};var a=function(e){if(u()){l(e)}else{r.push(e)}};var o=function(e){t=We.some(e);s(r);r=[]};var u=function(){return t.isSome()};var s=function(e){Ye(e,l)};var l=function(e){t.each((function(t){n.setTimeout((function(){e(t)}),0)}))};e(o);return{get:a,map:i,isReady:u}};var tt=function(e){return et((function(t){t(e)}))};var nt={nu:et,pure:tt};var rt=function(e){n.setTimeout((function(){throw e}),0)};var it=function(e){var t=function(t){e().then(t,rt)};var n=function(t){return it((function(){return e().then(t)}))};var r=function(t){return it((function(){return e().then((function(e){return t(e).toPromise()}))}))};var i=function(t){return it((function(){return e().then((function(){return t.toPromise()}))}))};var a=function(){return nt.nu(t)};var o=function(){var t=null;return it((function(){if(t===null){t=e()}return t}))};var u=e;return{map:n,bind:r,anonBind:i,toLazy:a,toCached:o,toPromise:u,get:t}};var at=function(e){return it((function(){return new Qe(e)}))};var ot=function(e){return it((function(){return Qe.resolve(e)}))};var ut={nu:at,pure:ot};var st=function(e,t){return t((function(t){var n=[];var r=0;var i=function(i){return function(a){n[i]=a;r++;if(r>=e.length){t(n)}}};if(e.length===0){t([])}else{Ye(e,(function(e,t){e.get(i(t))}))}}))};var lt=function(e){return st(e,ut.nu)};var ft=function(e,t){return lt(Ke(e,t))};var ct=ft;var dt=function(){var e=r(We.none());var t=function(){e.set(We.none())};var n=function(t){e.set(We.some(t))};var i=function(t){e.get().each(t)};var a=function(){return e.get().isSome()};return{clear:t,set:n,isSet:a,on:i}};var vt=function(e,t,n){var r=n?n:q.isMarked(t);var i=Ce.process(e,q.unmark(t),r);if(i.cancelled===false){Pe.insertContent(e,i.content)}};var mt=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n");t=Z.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs);vt(e,t,false)};var gt=function(e){var t={};var n="data:text/mce-internal,";if(e){if(e.getData){var r=e.getData("Text");if(r&&r.length>0){if(r.indexOf(n)===-1){t["text/plain"]=r}}}if(e.types){for(var i=0;i<e.types.length;i++){var a=e.types[i];try{t[a]=e.getData(a)}catch(e){t[a]=""}}}}return t};var pt=function(e,t){var n=gt(t.clipboardData||e.getDoc().dataTransfer);return se.isMsEdge()?F.extend(n,{"text/html":""}):n};var ht=function(e,t){return t in e&&e[t].length>0};var bt=function(e){return ht(e,"text/html")||ht(e,"text/plain")};var yt=function(e){var t;t=e.indexOf(",");if(t!==-1){return e.substr(t+1)}return null};var wt=function(e,t){return e.images_dataimg_filter?e.images_dataimg_filter(t):true};var xt=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null};var Ct=se.createIdGenerator("mceclip");var kt=function(e,t){var r=yt(t.uri);var i=Ct();var a=e.settings.images_reuse_filename&&t.blob.name?xt(e,t.blob.name):i;var o=new n.Image;o.src=t.uri;if(wt(e.settings,o)){var u=e.editorUpload.blobCache;var s=void 0,l=void 0;l=u.findFirst((function(e){return e.base64()===r}));if(!l){s=u.create(i,t.blob,r,a);u.add(s)}else{s=l}vt(e,'<img src="'+s.blobUri()+'">',false)}else{vt(e,'<img src="'+t.uri+'">',false)}};var St=function(e){return e.type==="paste"};var Tt=function(e){return ct(e,(function(e){return ut.nu((function(t){var n=e.getAsFile?e.getAsFile():e;var r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})};r.readAsDataURL(n)}))}))};var Et=function(e){var t=e.items?Ke(Ge(e.items),(function(e){return e.getAsFile()})):[];var n=e.files?Ge(e.files):[];var r=Xe(t.length>0?t:n,(function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)}));return r};var Nt=function(e,t,n){var r=St(t)?t.clipboardData:t.dataTransfer;if(e.settings.paste_data_images&&r){var i=Et(r);if(i.length>0){t.preventDefault();Tt(i).get((function(t){if(n){e.selection.setRng(n)}Ye(t,(function(t){kt(e,t)}))}));return true}}return false};var Rt=function(e){var t=e.clipboardData;return n.navigator.userAgent.indexOf("Android")!==-1&&t&&t.items&&t.items.length===0};var _t=function(e){return H.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45};var Dt=function(e,t,r){var i=dt();var a;e.on("keydown",(function(r){function o(e){if(_t(e)&&!e.isDefaultPrevented()){t.remove()}}if(_t(r)&&!r.isDefaultPrevented()){a=r.shiftKey&&r.keyCode===86;if(a&&L.webkit&&n.navigator.userAgent.indexOf("Version/")!==-1){return}r.stopImmediatePropagation();i.set(r);window.setTimeout((function(){i.clear()}),100);if(L.ie&&a){r.preventDefault();v.firePaste(e,true);return}t.remove();t.create();e.once("keyup",o);e.once("paste",(function(){e.off("keyup",o)}))}}));function o(n,r,i,a){var o,u;if(ht(n,"text/html")){o=n["text/html"]}else{o=t.getHtml();a=a?a:q.isMarked(o);if(t.isDefaultContent(o)){i=true}}o=se.trimHtml(o);t.remove();u=a===false&&Z.isPlainText(o);if(!o.length||u){i=true}if(i){if(ht(n,"text/plain")&&u){o=n["text/plain"]}else{o=se.innerText(o)}}if(t.isDefaultContent(o)){if(!r){e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}return}if(i){mt(e,o)}else{vt(e,o,a)}}var u=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",(function(n){var s=i.isSet();var l=pt(e,n);var f=r.get()==="text"||a;var c=ht(l,q.internalHtmlMime());a=false;if(n.isDefaultPrevented()||Rt(n)){t.remove();return}if(!bt(l)&&Nt(e,n,u())){t.remove();return}if(!s){n.preventDefault()}if(L.ie&&(!s||n.ieFake)&&!ht(l,"text/html")){t.create();e.dom.bind(t.getEl(),"paste",(function(e){e.stopPropagation()}));e.getDoc().execCommand("Paste",false,null);l["text/html"]=t.getHtml()}if(ht(l,"text/html")){n.preventDefault();if(!c){c=q.isMarked(l["text/html"])}o(l,s,f,c)}else{M.setEditorTimeout(e,(function(){o(l,s,f,c)}),0)}}))};var Ot=function(e,t,n){Dt(e,t,n);var r;e.parser.addNodeFilter("img",(function(t,n,i){var a=function(e){return e.data&&e.data.paste===true};var o=function(e){if(!e.attr("data-mce-object")&&r!==L.transparentSrc){e.remove()}};var u=function(e){return e.indexOf("webkit-fake-url")===0};var s=function(e){return e.indexOf("data:")===0};if(!e.settings.paste_data_images&&a(i)){var l=t.length;while(l--){r=t[l].attributes.map.src;if(!r){continue}if(u(r)){o(t[l])}else if(!e.settings.allow_html_data_urls&&s(r)){o(t[l])}}}}))};var Pt=function(e){return L.ie&&e.inline?n.document.body:e.getBody()};var At=function(e){return Pt(e)!==e.getBody()};var Bt=function(e,t,n){if(At(e)){e.dom.bind(t,"paste keyup",(function(t){if(!Wt(e,n)){e.fire("paste")}}))}};var It=function(e,t,n){var r=e.dom,i=e.getBody();var a;t.set(e.selection.getRng());a=e.dom.add(Pt(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);if(L.ie||L.gecko){r.setStyle(a,"left",r.getStyle(i,"direction",true)==="rtl"?65535:-65535)}r.bind(a,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()}));Bt(e,a,n);a.focus();e.selection.select(a,true)};var Lt=function(e,t){if(Mt(e)){var n=void 0;var r=t.get();while(n=e.dom.get("mcepastebin")){e.dom.remove(n);e.dom.unbind(n)}if(r){e.selection.setRng(r)}}t.set(null)};var Mt=function(e){return e.dom.get("mcepastebin")};var Ft=function(e){var t,n,r,i,a;var o=function(t,n){t.appendChild(n);e.dom.remove(n,true)};n=F.grep(Pt(e).childNodes,(function(e){return e.id==="mcepastebin"}));t=n.shift();F.each(n,(function(e){o(t,e)}));i=e.dom.select("div[id=mcepastebin]",t);for(r=i.length-1;r>=0;r--){a=e.dom.create("div");t.insertBefore(a,i[r]);o(a,i[r])}return t?t.innerHTML:""};var Ht=function(e){return e.get()};var zt=function(e,t){return t===e};var Ut=function(e){return e&&e.id==="mcepastebin"};var Wt=function(e,t){var n=Mt(e);return Ut(n)&&zt(t,n.innerHTML)};var jt=function(e){var t=r(null);var n="%MCEPASTEBIN%";return{create:function(){return It(e,t,n)},remove:function(){return Lt(e,t)},getEl:function(){return Mt(e)},getHtml:function(){return Ft(e)},getLastRng:function(){return Ht(t)},isDefault:function(){return Wt(e,n)},isDefaultContent:function(e){return zt(n,e)}}};var Vt=function(e,t){var n=jt(e);e.on("preInit",(function(){return Ot(e,n,t)}));return{pasteFormat:t,pasteHtml:function(t,n){return vt(e,t,n)},pasteText:function(t){return mt(e,t)},pasteImageData:function(t,n){return Nt(e,t,n)},getDataTransferItems:gt,hasHtmlOrText:bt,hasContentType:ht}};var qt=function(){};var $t=function(e){return L.iOS===false&&e!==undefined&&typeof e.setData==="function"&&se.isMsEdge()!==true};var Kt=function(e,t,n){if($t(e)){try{e.clearData();e.setData("text/html",t);e.setData("text/plain",n);e.setData(q.internalHtmlMime(),t);return true}catch(e){return false}}else{return false}};var Yt=function(e,t,n,r){if(Kt(e.clipboardData,t.html,t.text)){e.preventDefault();r()}else{n(t.html,r)}};var Xt=function(e){return function(t,n){var r=q.mark(t);var i=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"});var a=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});i.appendChild(a);e.dom.add(e.getBody(),i);var o=e.selection.getRng();a.focus();var u=e.dom.createRng();u.selectNodeContents(a);e.selection.setRng(u);setTimeout((function(){e.selection.setRng(o);i.parentNode.removeChild(i);n()}),0)}};var Gt=function(e){return{html:e.selection.getContent({contextual:true}),text:e.selection.getContent({format:"text"})}};var Jt=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())};var Zt=function(e){return!e.selection.isCollapsed()||Jt(e)};var Qt=function(e){return function(t){if(Zt(e)){Yt(t,Gt(e),Xt(e),(function(){setTimeout((function(){e.execCommand("Delete")}),0)}))}}};var en=function(e){return function(t){if(Zt(e)){Yt(t,Gt(e),Xt(e),qt)}}};var tn=function(e){e.on("cut",Qt(e));e.on("copy",en(e))};var nn={register:tn};var rn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");var an=function(e,t){return rn.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())};var on=function(e){var t=e["text/plain"];return t?t.indexOf("file://")===0:false};var un=function(e,t){e.focus();e.selection.setRng(t)};var sn=function(e,t,n){if(_.shouldBlockDrop(e)){e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault();e.stopPropagation()}))}if(!_.shouldPasteDataImages(e)){e.on("drop",(function(e){var t=e.dataTransfer;if(t&&t.files&&t.files.length>0){e.preventDefault()}}))}e.on("drop",(function(r){var i,a;a=an(e,r);if(r.isDefaultPrevented()||n.get()){return}i=t.getDataTransferItems(r.dataTransfer);var o=t.hasContentType(i,q.internalHtmlMime());if((!t.hasHtmlOrText(i)||on(i))&&t.pasteImageData(r,a)){return}if(a&&_.shouldFilterDrop(e)){var u=i["mce-internal"]||i["text/html"]||i["text/plain"];if(u){r.preventDefault();M.setEditorTimeout(e,(function(){e.undoManager.transact((function(){if(i["mce-internal"]){e.execCommand("Delete")}un(e,a);u=se.trimHtml(u);if(!i["text/html"]){t.pasteText(u)}else{t.pasteHtml(u,o)}}))}))}}}));e.on("dragstart",(function(e){n.set(true)}));e.on("dragover dragend",(function(t){if(_.shouldPasteDataImages(e)&&n.get()===false){t.preventDefault();un(e,an(e,t))}if(t.type==="dragend"){n.set(false)}}))};var ln={setup:sn};var fn=function(e){var t=e.plugins.paste;var n=_.getPreProcess(e);if(n){e.on("PastePreProcess",(function(e){n.call(t,t,e)}))}var r=_.getPostProcess(e);if(r){e.on("PastePostProcess",(function(e){r.call(t,t,e)}))}};var cn={setup:fn};function dn(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))}function vn(e,t){e.on("PastePostProcess",(function(n){t(e,n.node)}))}function mn(e,t){if(!pe.isWordContent(t)){return t}var n=[];F.each(e.schema.getBlockElements(),(function(e,t){n.push(t)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");t=se.filter(t,[[r,"$1"]]);t=se.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return t}function gn(e,t,n,r){if(r||n){return t}var i=_.getWebkitStyles(e);var a;if(_.shouldRemoveWebKitStyles(e)===false||i==="all"){return t}if(i){a=i.split(/[, ]/)}if(a){var o=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,r){var i=o.parseStyle(o.decode(n));var s={};if(a==="none"){return t+r}for(var l=0;l<a.length;l++){var f=i[a[l]],c=o.getStyle(u,a[l],true);if(/color/.test(a[l])){f=o.toHex(f);c=o.toHex(c)}if(c!==f){s[a[l]]=f}}s=o.serializeStyle(s,"span");if(s){return t+' style="'+s+'"'+r}return t+r}))}else{t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,r){return t+' style="'+n+'"'+r}));return t}function pn(e,t){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,true)}))}var hn=function(e){if(L.webkit){dn(e,gn)}if(L.ie){dn(e,mn);vn(e,pn)}};var bn={setup:hn};var yn=function(e,t,n){var r=n.control;r.active(t.pasteFormat.get()==="text");e.on("PastePlainTextToggle",(function(e){r.active(e.state)}))};var wn=function(e,t){var n=Ie(yn,e,t);e.addButton("pastetext",{active:false,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n});e.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};var xn={register:wn};i.add("paste",(function(e){if(o.hasProPlugin(e)===false){var t=r(false);var n=r(false);var i=r(_.isPasteAsTextEnabled(e)?"text":"html");var a=Vt(e,i);var u=bn.setup(e);xn.register(e,a);I.register(e,a,t);cn.setup(e);nn.register(e);ln.setup(e,a,n);return s.get(a,u)}}));function Cn(){}return Cn}(window)})()}).call(this,n(5),n(6))},574:function(e,t,n){n(575)},575:function(e,t){(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var n=function(e){return e.getParam("code_dialog_width",600)};var r=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))};var i={getMinWidth:n,getMinHeight:r};var a=function(e,t){e.focus();e.undoManager.transact((function(){e.setContent(t)}));e.selection.setCursorLocation();e.nodeChanged()};var o=function(e){return e.getContent({source_view:true})};var u={setContent:a,getContent:o};var s=function(e){var t=i.getMinWidth(e);var n=i.getMinHeight(e);var r=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:true,minWidth:t,minHeight:n,spellcheck:false,style:"direction: ltr; text-align: left"},onSubmit:function(t){u.setContent(e,t.data.code)}});r.find("#code").value(u.getContent(e))};var l={open:s};var f=function(e){e.addCommand("mceCodeEditor",(function(){l.open(e)}))};var c={register:f};var d=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){l.open(e)}});e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){l.open(e)}})};var v={register:d};e.add("code",(function(e){c.register(e);v.register(e);return{}}));function m(){}return m}()})()},576:function(e,t,n){n(577)},577:function(e,t){(function(){var e=function(e){"use strict";var t=function(e){var n=e;var r=function(){return n};var i=function(e){n=e};var a=function(){return t(r())};return{get:r,set:i,clone:a}};var n=tinymce.util.Tools.resolve("tinymce.PluginManager");var r=function(e){return{isFullscreen:function(){return e.get()!==null}}};var i={get:r};var a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var o=function(e,t){e.fire("FullscreenStateChanged",{state:t})};var u={fireFullscreenStateChanged:o};var s=a.DOM;var l=function(){var t;var n;var r=e.window;var i=e.document;var a=i.body;if(a.offsetWidth){t=a.offsetWidth;n=a.offsetHeight}if(r.innerWidth&&r.innerHeight){t=r.innerWidth;n=r.innerHeight}return{w:t,h:n}};var f=function(){var e=s.getViewPort();return{x:e.x,y:e.y}};var c=function(t){e.window.scrollTo(t.x,t.y)};var d=function(t,n){var r=e.document.body;var i=e.document.documentElement;var a;var o,d,v;var m=n.get();var g=function(){s.setStyle(d,"height",l().h-(o.clientHeight-d.clientHeight))};var p=function(){s.unbind(e.window,"resize",g)};o=t.getContainer();a=o.style;d=t.getContentAreaContainer().firstChild;v=d.style;if(!m){var h={scrollPos:f(),containerWidth:a.width,containerHeight:a.height,iframeWidth:v.width,iframeHeight:v.height,resizeHandler:g,removeHandler:p};v.width=v.height="100%";a.width=a.height="";s.addClass(r,"mce-fullscreen");s.addClass(i,"mce-fullscreen");s.addClass(o,"mce-fullscreen");s.bind(e.window,"resize",g);t.on("remove",p);g();n.set(h);u.fireFullscreenStateChanged(t,true)}else{v.width=m.iframeWidth;v.height=m.iframeHeight;if(m.containerWidth){a.width=m.containerWidth}if(m.containerHeight){a.height=m.containerHeight}s.removeClass(r,"mce-fullscreen");s.removeClass(i,"mce-fullscreen");s.removeClass(o,"mce-fullscreen");c(m.scrollPos);s.unbind(e.window,"resize",m.resizeHandler);t.off("remove",m.removeHandler);n.set(null);u.fireFullscreenStateChanged(t,false)}};var v={toggleFullscreen:d};var m=function(e,t){e.addCommand("mceFullScreen",(function(){v.toggleFullscreen(e,t)}))};var g={register:m};var p=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",(function(e){n.active(e.state)}))}};var h=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:true,cmd:"mceFullScreen",onPostRender:p(e),context:"view"});e.addButton("fullscreen",{active:false,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:p(e)})};var b={register:h};n.add("fullscreen",(function(e){var n=t(null);if(e.settings.inline){return i.get(n)}g.register(e,n);b.register(e);e.addShortcut("Ctrl+Shift+F","","mceFullScreen");return i.get(n)}));function y(){}return y}(window)})()},578:function(e,t,n){n(579)},579:function(e,t){(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=function(e,t){var n;e.dom.getParents(e.selection.getStart(),(function(e){var r;if(r=e.style[t==="forecolor"?"color":"background-color"]){n=n?n:r}}));return n};var n=function(e){var t;var n=[];for(t=0;t<e.length;t+=2){n.push({text:e[t+1],color:"#"+e[t]})}return n};var r=function(e,t,n){e.undoManager.transact((function(){e.focus();e.formatter.apply(t,{value:n});e.nodeChanged()}))};var i=function(e,t){e.undoManager.transact((function(){e.focus();e.formatter.remove(t,{value:null},null,true);e.nodeChanged()}))};var a={getCurrentColor:t,mapColors:n,applyFormat:r,removeFormat:i};var o=function(e){e.addCommand("mceApplyTextcolor",(function(t,n){a.applyFormat(e,t,n)}));e.addCommand("mceRemoveTextcolor",(function(t){a.removeFormat(e,t)}))};var u={register:o};var s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var l=tinymce.util.Tools.resolve("tinymce.util.Tools");var f=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];var c=function(e){return e.getParam("textcolor_map",f)};var d=function(e){return e.getParam("forecolor_map",c(e))};var v=function(e){return e.getParam("backcolor_map",c(e))};var m=function(e){return e.getParam("textcolor_rows",5)};var g=function(e){return e.getParam("textcolor_cols",8)};var p=function(e){return e.getParam("forecolor_rows",m(e))};var h=function(e){return e.getParam("backcolor_rows",m(e))};var b=function(e){return e.getParam("forecolor_cols",g(e))};var y=function(e){return e.getParam("backcolor_cols",g(e))};var w=function(e){return e.getParam("color_picker_callback",null)};var x=function(e){return typeof w(e)==="function"};var C={getForeColorMap:d,getBackColorMap:v,getForeColorRows:p,getBackColorRows:h,getForeColorCols:b,getBackColorCols:y,getColorPickerCallback:w,hasColorPicker:x};var k=tinymce.util.Tools.resolve("tinymce.util.I18n");var S=function(e,t,n,r){var i,o,u,l,f,c,d,v=0;var m=s.DOM.uniqueId("mcearia");var g=function(e,t){var n=e==="transparent";return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'">'+'<div id="'+m+"-"+v+++'"'+' data-mce-color="'+(e?e:"")+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(e?"background-color: "+e:"")+'"'+' title="'+k.translate(t)+'">'+(n?"&#215;":"")+"</div>"+"</td>"};i=a.mapColors(n);i.push({text:k.translate("No color"),color:"transparent"});u='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';l=i.length-1;for(c=0;c<t;c++){u+="<tr>";for(f=0;f<e;f++){d=c*e+f;if(d>l){u+="<td></td>"}else{o=i[d];u+=g(o.color,o.text)}}u+="</tr>"}if(r){u+="<tr>"+'<td colspan="'+e+'" class="mce-custom-color-btn">'+'<div id="'+m+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" '+'role="button" tabindex="-1" aria-labelledby="'+m+'-c" style="width: 100%">'+'<button type="button" role="presentation" tabindex="-1">'+k.translate("Custom...")+"</button>"+"</div>"+"</td>"+"</tr>";u+="<tr>";for(f=0;f<e;f++){u+=g("","Custom color")}u+="</tr>"}u+="</tbody></table>";return u};var T={getHtml:S};var E=function e(t,n){t.style.background=n;t.setAttribute("data-mce-color",n)};var N=function(e){return function(t){var n=t.control;if(n._color){e.execCommand("mceApplyTextcolor",n.settings.format,n._color)}else{e.execCommand("mceRemoveTextcolor",n.settings.format)}}};var R=function(e,t){return function(n){var r=this.parent();var i;var o=a.getCurrentColor(e,r.settings.format);var u=function(t){e.execCommand("mceApplyTextcolor",r.settings.format,t);r.hidePanel();r.color(t)};var f=function(){e.execCommand("mceRemoveTextcolor",r.settings.format);r.hidePanel();r.resetColor()};if(s.DOM.getParent(n.target,".mce-custom-color-btn")){r.hidePanel();var c=C.getColorPickerCallback(e);c.call(e,(function(e){var n=r.panel.getEl().getElementsByTagName("table")[0];var i,a,o;i=l.map(n.rows[n.rows.length-1].childNodes,(function(e){return e.firstChild}));for(o=0;o<i.length;o++){a=i[o];if(!a.getAttribute("data-mce-color")){break}}if(o===t){for(o=0;o<t-1;o++){E(i[o],i[o+1].getAttribute("data-mce-color"))}}E(a,e);u(e)}),o)}i=n.target.getAttribute("data-mce-color");if(i){if(this.lastId){s.DOM.get(this.lastId).setAttribute("aria-selected","false")}n.target.setAttribute("aria-selected",true);this.lastId=n.target.id;if(i==="transparent"){f()}else{u(i)}}else if(i!==null){r.hidePanel()}}};var _=function(e,t){return function(){var n=t?C.getForeColorCols(e):C.getBackColorCols(e);var r=t?C.getForeColorRows(e):C.getBackColorRows(e);var i=t?C.getForeColorMap(e):C.getBackColorMap(e);var a=C.hasColorPicker(e);return T.getHtml(n,r,i,a)}};var D=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:_(e,true),onclick:R(e,C.getForeColorCols(e))},onclick:N(e)});e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:_(e,false),onclick:R(e,C.getBackColorCols(e))},onclick:N(e)})};var O={register:D};e.add("textcolor",(function(e){u.register(e);O.register(e)}));function P(){}return P}()})()},580:function(e,t,n){n(581)},581:function(e,t){(function(){var e=function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");var t=tinymce.util.Tools.resolve("tinymce.util.Color");var n=function(e,t){e.find("#preview")[0].getEl().style.background=t};var r=function(e,r){var i=t(r),a=i.toRgb();e.fromJSON({r:a.r,g:a.g,b:a.b,hex:i.toHex().substr(1)});n(e,i.toHex())};var i=function(e,t,i){var a=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:i,onchange:function(){var e=this.rgb();if(a){a.find("#r").value(e.r);a.find("#g").value(e.g);a.find("#b").value(e.b);a.find("#hex").value(this.value().substr(1));n(a,this.value())}}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:false,onchange:function(){var e=a.find("colorpicker")[0];var t,n;t=this.name();n=this.value();if(t==="hex"){n="#"+n;r(a,n);e.value(n);return}n={r:a.find("#r").value(),g:a.find("#g").value(),b:a.find("#b").value()};e.value(n);r(a,n)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+a.toJSON().hex)}});r(a,i)};var a={open:i};e.add("colorpicker",(function(e){if(!e.settings.color_picker_callback){e.settings.color_picker_callback=function(t,n){a.open(e,t,n)}}}));function o(){}return o}()})()},582:function(e,t,n){n(583)},583:function(e,t){(function(){var e=function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");var r=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");var i=tinymce.util.Tools.resolve("tinymce.util.VK");var a=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");var o=tinymce.util.Tools.resolve("tinymce.util.Tools");var u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var s=function(e){return e&&e.nodeType===3};var l=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)};var f=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)};var c=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)};var d=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)};var v=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)};var m=function(e){return e&&e.nodeName==="BR"};var g=function(e){return e.parentNode.firstChild===e};var p=function(e){return e.parentNode.lastChild===e};var h=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]};var b=function(e,t){return e&&e.nodeName in t};var y=function(e,t){if(!m(t)){return false}if(e.isBlock(t.nextSibling)&&!m(t.previousSibling)){return true}return false};var w=function(e,t,n){var r=e.isEmpty(t);if(n&&e.select("span[data-mce-type=bookmark]",t).length>0){return false}return r};var x=function(e,t){return e.isChildOf(t,e.getRoot())};var C={isTextNode:s,isListNode:l,isOlUlNode:f,isDlItemNode:d,isListItemNode:c,isTableCellNode:v,isBr:m,isFirstChild:g,isLastChild:p,isTextBlock:h,isBlock:b,isBogusBr:y,isEmpty:w,isChildOfBody:x};var k=function(e,t){if(C.isTextNode(e)){return{container:e,offset:t}}var r=n.getNode(e,t);if(C.isTextNode(r)){return{container:r,offset:t>=e.childNodes.length?r.data.length:0}}else if(r.previousSibling&&C.isTextNode(r.previousSibling)){return{container:r.previousSibling,offset:r.previousSibling.data.length}}else if(r.nextSibling&&C.isTextNode(r.nextSibling)){return{container:r.nextSibling,offset:0}}return{container:e,offset:t}};var S=function(e){var t=e.cloneRange();var n=k(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=k(e.endContainer,e.endOffset);t.setEnd(r.container,r.offset);return t};var T={getNormalizedPoint:k,normalizeRange:S};var E=u.DOM;var N=function(e){var t={};var n=function(n){var r,i,a;i=e[n?"startContainer":"endContainer"];a=e[n?"startOffset":"endOffset"];if(i.nodeType===1){r=E.create("span",{"data-mce-type":"bookmark"});if(i.hasChildNodes()){a=Math.min(a,i.childNodes.length-1);if(n){i.insertBefore(r,i.childNodes[a])}else{E.insertAfter(r,i.childNodes[a])}}else{i.appendChild(r)}i=r;a=0}t[n?"startContainer":"endContainer"]=i;t[n?"startOffset":"endOffset"]=a};n(true);if(!e.collapsed){n()}return t};var R=function(e){function t(t){var n,r,i;var a=function(e){var t=e.parentNode.firstChild,n=0;while(t){if(t===e){return n}if(t.nodeType!==1||t.getAttribute("data-mce-type")!=="bookmark"){n++}t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"];r=e[t?"startOffset":"endOffset"];if(!n){return}if(n.nodeType===1){r=a(n);n=n.parentNode;E.remove(i);if(!n.hasChildNodes()&&E.isBlock(n)){n.appendChild(E.create("br"))}}e[t?"startContainer":"endContainer"]=n;e[t?"startOffset":"endOffset"]=r}t(true);t();var n=E.createRng();n.setStart(e.startContainer,e.startOffset);if(e.endContainer){n.setEnd(e.endContainer,e.endOffset)}return T.normalizeRange(n)};var _={createBookmark:N,resolveBookmark:R};var D=function(){};var O=function(e){return function(){return e}};var P=function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return!e.apply(null,t)}};var A=O(false);var B=O(true);var I=function(){return L};var L=function(){var e=function(e){return e.isNone()};var t=function(e){return e()};var n=function(e){return e};var r={fold:function(e,t){return e()},is:A,isSome:A,isNone:B,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:O(null),getOrUndefined:O(undefined),or:n,orThunk:t,map:I,each:D,bind:I,exists:A,forall:B,filter:I,equals:e,equals_:e,toArray:function(){return[]},toString:O("none()")};if(Object.freeze){Object.freeze(r)}return r}();var M=function(e){var t=O(e);var n=function(){return i};var r=function(t){return t(e)};var i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:B,isNone:A,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return M(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:L},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(A,(function(t){return n(e,t)}))}};return i};var F=function(e){return e===null||e===undefined?L:M(e)};var H={some:M,none:I,from:F};var z=function(e){if(e===null){return"null"}var t=typeof e;if(t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")){return"array"}if(t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")){return"string"}return t};var U=function(e){return function(t){return z(t)===e}};var W=U("string");var j=U("array");var V=U("boolean");var q=U("function");var $=U("number");var K=Array.prototype.slice;var Y=Array.prototype.push;var X=function(e,t){var n=e.length;var r=new Array(n);for(var i=0;i<n;i++){var a=e[i];r[i]=t(a,i)}return r};var G=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n)}};var J=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r)){n.push(a)}}return n};var Z=function(e,t){if(e.length===0){return[]}else{var n=t(e[0]);var r=[];var i=[];for(var a=0,o=e.length;a<o;a++){var u=e[a];var s=t(u);if(s!==n){r.push(i);i=[]}n=s;i.push(u)}if(i.length!==0){r.push(i)}return r}};var Q=function(e,t,n){G(e,(function(e){n=t(n,e)}));return n};var ee=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n)){return H.some(i)}}return H.none()};var te=function(e){var t=[];for(var n=0,r=e.length;n<r;++n){if(!j(e[n])){throw new Error("Arr.flatten item "+n+" was not an array, input: "+e)}Y.apply(t,e[n])}return t};var ne=function(e,t){var n=X(e,t);return te(n)};var re=function(e){var t=K.call(e,0);t.reverse();return t};var ie=function(e){return e.length===0?H.none():H.some(e[0])};var ae=function(e){return e.length===0?H.none():H.some(e[e.length-1])};var oe=q(Array.from)?Array.from:function(e){return K.call(e)};var ue=typeof e.window!=="undefined"?e.window:Function("return this;")();var se=function(e,t){var n=t!==undefined&&t!==null?t:ue;for(var r=0;r<e.length&&n!==undefined&&n!==null;++r){n=n[e[r]]}return n};var le=function(e,t){var n=e.split(".");return se(n,t)};var fe=function(e,t){return le(e,t)};var ce=function(e,t){var n=fe(e,t);if(n===undefined||n===null){throw new Error(e+" not available on this browser")}return n};var de={getOrDie:ce};var ve=function(e){return de.getOrDie("HTMLElement",e)};var me=function(e){var t=le("ownerDocument.defaultView",e);return ve(t).prototype.isPrototypeOf(e)};var ge={isPrototypeOf:me};var pe=tinymce.util.Tools.resolve("tinymce.dom.DomQuery");var he=function(e){var t=e.selection.getStart(true);return e.dom.getParent(t,"OL,UL,DL",Se(e,t))};var be=function(e,t){return e&&t.length===1&&t[0]===e};var ye=function(e){return o.grep(e.querySelectorAll("ol,ul,dl"),(function(e){return C.isListNode(e)}))};var we=function(e){var t=he(e);var n=e.selection.getSelectedBlocks();if(be(t,n)){return ye(t)}else{return o.grep(n,(function(e){return C.isListNode(e)&&t!==e}))}};var xe=function(e,t){var n=o.map(t,(function(t){var n=e.dom.getParent(t,"li,dd,dt",Se(e,t));return n?n:t}));return pe.unique(n)};var Ce=function(e){var t=e.selection.getSelectedBlocks();return o.grep(xe(e,t),(function(e){return C.isListItemNode(e)}))};var ke=function(e){return J(Ce(e),C.isDlItemNode)};var Se=function(e,t){var n=e.dom.getParents(t,"TD,TH");var r=n.length>0?n[0]:e.getBody();return r};var Te=function(e,t){var n=e.dom.getParents(t,"ol,ul",Se(e,t));return ae(n)};var Ee=function(e){var t=Te(e,e.selection.getStart());var n=J(e.selection.getSelectedBlocks(),C.isOlUlNode);return t.toArray().concat(n)};var Ne=function(e){var t=Ee(e);return Re(e,t)};var Re=function(e,t){var n=X(t,(function(t){return Te(e,t).getOr(t)}));return pe.unique(n)};var _e=function(e){var t=he(e);return ge.isPrototypeOf(t)};var De={isList:_e,getParentList:he,getSelectedSubLists:we,getSelectedListItems:Ce,getClosestListRootElm:Se,getSelectedDlItems:ke,getSelectedListRoots:Ne};var Oe=function(t,n){var r=n||e.document;var i=r.createElement("div");i.innerHTML=t;if(!i.hasChildNodes()||i.childNodes.length>1){e.console.error("HTML does not have a single root node",t);throw new Error("HTML must have a single root node")}return Be(i.childNodes[0])};var Pe=function(t,n){var r=n||e.document;var i=r.createElement(t);return Be(i)};var Ae=function(t,n){var r=n||e.document;var i=r.createTextNode(t);return Be(i)};var Be=function(e){if(e===null||e===undefined){throw new Error("Node cannot be null or undefined")}return{dom:O(e)}};var Ie=function(e,t,n){var r=e.dom();return H.from(r.elementFromPoint(t,n)).map(Be)};var Le={fromHtml:Oe,fromTag:Pe,fromText:Ae,fromDom:Be,fromPoint:Ie};var Me=function(e,t,n){return e.isSome()&&t.isSome()?H.some(n(e.getOrDie(),t.getOrDie())):H.none()};var Fe=function(t,n){var r=n||e.document;var i=r.createDocumentFragment();G(t,(function(e){i.appendChild(e.dom())}));return Le.fromDom(i)};var He=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(e.length!==t.length){throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments")}var r={};G(e,(function(e,n){r[e]=O(t[n])}));return r}};var ze=Object.keys;var Ue=function(e,t){var n=ze(e);for(var r=0,i=n.length;r<i;r++){var a=n[r];var o=e[a];t(o,a)}};var We=function(){var e=de.getOrDie("Node");return e};var je=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var Ve=function(e,t){return je(e,t,We().DOCUMENT_POSITION_PRECEDING)};var qe=function(e,t){return je(e,t,We().DOCUMENT_POSITION_CONTAINED_BY)};var $e={documentPositionPreceding:Ve,documentPositionContainedBy:qe};var Ke=function(e){var t=false;var n;return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}if(!t){t=true;n=e.apply(null,r)}return n}};var Ye=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var Xe=function(e,t){var n=Ye(e,t);if(!n){return{major:0,minor:0}}var r=function(e){return Number(t.replace(n,"$"+e))};return Ze(r(1),r(2))};var Ge=function(e,t){var n=String(t).toLowerCase();if(e.length===0){return Je()}return Xe(e,n)};var Je=function(){return Ze(0,0)};var Ze=function(e,t){return{major:e,minor:t}};var Qe={nu:Ze,detect:Ge,unknown:Je};var et="Edge";var tt="Chrome";var nt="IE";var rt="Opera";var it="Firefox";var at="Safari";var ot=function(e,t){return function(){return t===e}};var ut=function(){return st({current:undefined,version:Qe.unknown()})};var st=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isEdge:ot(et,t),isChrome:ot(tt,t),isIE:ot(nt,t),isOpera:ot(rt,t),isFirefox:ot(it,t),isSafari:ot(at,t)}};var lt={unknown:ut,nu:st,edge:O(et),chrome:O(tt),ie:O(nt),opera:O(rt),firefox:O(it),safari:O(at)};var ft="Windows";var ct="iOS";var dt="Android";var vt="Linux";var mt="OSX";var gt="Solaris";var pt="FreeBSD";var ht=function(e,t){return function(){return t===e}};var bt=function(){return yt({current:undefined,version:Qe.unknown()})};var yt=function(e){var t=e.current;var n=e.version;return{current:t,version:n,isWindows:ht(ft,t),isiOS:ht(ct,t),isAndroid:ht(dt,t),isOSX:ht(mt,t),isLinux:ht(vt,t),isSolaris:ht(gt,t),isFreeBSD:ht(pt,t)}};var wt={unknown:bt,nu:yt,windows:O(ft),ios:O(ct),android:O(dt),linux:O(vt),osx:O(mt),solaris:O(gt),freebsd:O(pt)};var xt=function(e,t,n){var r=e.isiOS()&&/ipad/i.test(n)===true;var i=e.isiOS()&&!r;var a=e.isAndroid()&&e.version.major===3;var o=e.isAndroid()&&e.version.major===4;var u=r||a||o&&/mobile/i.test(n)===true;var s=e.isiOS()||e.isAndroid();var l=s&&!u;var f=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===false;return{isiPad:O(r),isiPhone:O(i),isTablet:O(u),isPhone:O(l),isTouch:O(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:O(f)}};var Ct=function(e,t){var n=String(t).toLowerCase();return ee(e,(function(e){return e.search(n)}))};var kt=function(e,t){return Ct(e,t).map((function(e){var n=Qe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var St=function(e,t){return Ct(e,t).map((function(e){var n=Qe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))};var Tt={detectBrowser:kt,detectOs:St};var Et=function(e,t){return e.indexOf(t)!==-1};var Nt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var Rt=function(e){return function(t){return Et(t,e)}};var _t=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Et(e,"edge/")&&Et(e,"chrome")&&Et(e,"safari")&&Et(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Nt],search:function(e){return Et(e,"chrome")&&!Et(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Et(e,"msie")||Et(e,"trident")}},{name:"Opera",versionRegexes:[Nt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rt("firefox")},{name:"Safari",versionRegexes:[Nt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Et(e,"safari")||Et(e,"mobile/"))&&Et(e,"applewebkit")}}];var Dt=[{name:"Windows",search:Rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Et(e,"iphone")||Et(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Rt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rt("linux"),versionRegexes:[]},{name:"Solaris",search:Rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rt("freebsd"),versionRegexes:[]}];var Ot={browsers:O(_t),oses:O(Dt)};var Pt=function(e){var t=Ot.browsers();var n=Ot.oses();var r=Tt.detectBrowser(t,e).fold(lt.unknown,lt.nu);var i=Tt.detectOs(n,e).fold(wt.unknown,wt.nu);var a=xt(i,r,e);return{browser:r,os:i,deviceType:a}};var At={detect:Pt};var Bt=Ke((function(){var t=e.navigator.userAgent;return At.detect(t)}));var It={detect:Bt};var Lt=e.Node.ATTRIBUTE_NODE;var Mt=e.Node.CDATA_SECTION_NODE;var Ft=e.Node.COMMENT_NODE;var Ht=e.Node.DOCUMENT_NODE;var zt=e.Node.DOCUMENT_TYPE_NODE;var Ut=e.Node.DOCUMENT_FRAGMENT_NODE;var Wt=e.Node.ELEMENT_NODE;var jt=e.Node.TEXT_NODE;var Vt=e.Node.PROCESSING_INSTRUCTION_NODE;var qt=e.Node.ENTITY_REFERENCE_NODE;var $t=e.Node.ENTITY_NODE;var Kt=e.Node.NOTATION_NODE;var Yt=Wt;var Xt=function(e,t){var n=e.dom();if(n.nodeType!==Yt){return false}else{var r=n;if(r.matches!==undefined){return r.matches(t)}else if(r.msMatchesSelector!==undefined){return r.msMatchesSelector(t)}else if(r.webkitMatchesSelector!==undefined){return r.webkitMatchesSelector(t)}else if(r.mozMatchesSelector!==undefined){return r.mozMatchesSelector(t)}else{throw new Error("Browser lacks native selectors")}}};var Gt=function(e,t){return e.dom()===t.dom()};var Jt=function(e,t){var n=e.dom();var r=t.dom();return n===r?false:n.contains(r)};var Zt=function(e,t){return $e.documentPositionContainedBy(e.dom(),t.dom())};var Qt=It.detect().browser;var en=Qt.isIE()?Zt:Jt;var tn=Xt;var nn=function(e){return H.from(e.dom().parentNode).map(Le.fromDom)};var rn=function(e){return X(e.dom().childNodes,Le.fromDom)};var an=function(e,t){var n=e.dom().childNodes;return H.from(n[t]).map(Le.fromDom)};var on=function(e){return an(e,0)};var un=function(e){return an(e,e.dom().childNodes.length-1)};var sn=He("element","offset");var ln=function(e,t){var n=nn(e);n.each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))};var fn=function(e,t){e.dom().appendChild(t.dom())};var cn=function(e,t){G(t,(function(t){ln(e,t)}))};var dn=function(e,t){G(t,(function(t){fn(e,t)}))};var vn=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var mn=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var gn=function(e){return e.dom().nodeType};var pn=function(e){return function(t){return gn(t)===e}};var hn=pn(Wt);var bn=function(t,n,r){if(W(r)||V(r)||$(r)){t.setAttribute(n,r+"")}else{e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t);throw new Error("Attribute value was not simple")}};var yn=function(e,t){var n=e.dom();Ue(t,(function(e,t){bn(n,t,e)}))};var wn=function(e){return Q(e.dom().attributes,(function(e,t){e[t.name]=t.value;return e}),{})};var xn=function(e){return e.style!==undefined&&q(e.style.getPropertyValue)};var Cn=function(t,n,r){if(!W(r)){e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t);throw new Error("CSS value must be a string: "+r)}if(xn(t)){t.style.setProperty(n,r)}};var kn=function(e,t,n){var r=e.dom();Cn(r,t,n)};var Sn=function(e,t){return Le.fromDom(e.dom().cloneNode(t))};var Tn=function(e){return Sn(e,true)};var En=function(e,t){var n=Le.fromTag(t);var r=wn(e);yn(n,r);return n};var Nn=function(e,t){var n=En(e,t);ln(e,n);var r=rn(e);dn(n,r);vn(e);return n};var Rn=function(e,t){fn(e.item,t.list)};var _n=function(e){for(var t=1;t<e.length;t++){Rn(e[t-1],e[t])}};var Dn=function(e,t){Me(ae(e),ie(t),Rn)};var On=function(e,t){var n={list:Le.fromTag(t,e),item:Le.fromTag("li",e)};fn(n.list,n.item);return n};var Pn=function(e,t,n){var r=[];for(var i=0;i<n;i++){r.push(On(e,t.listType))}return r};var An=function(e,t){for(var n=0;n<e.length-1;n++){kn(e[n].item,"list-style-type","none")}ae(e).each((function(e){yn(e.list,t.listAttributes);yn(e.item,t.itemAttributes);dn(e.item,t.content)}))};var Bn=function(e,t){if(mn(e.list)!==t.listType){e.list=Nn(e.list,t.listType)}yn(e.list,t.listAttributes)};var In=function(e,t,n){var r=Le.fromTag("li",e);yn(r,t);dn(r,n);return r};var Ln=function(e,t){fn(e.list,t);e.item=t};var Mn=function(e,t,n){var r=t.slice(0,n.depth);ae(r).each((function(t){var r=In(e,n.itemAttributes,n.content);Ln(t,r);Bn(t,n)}));return r};var Fn=function(e,t,n){var r=Pn(e,n,n.depth-t.length);_n(r);An(r,n);Dn(t,r);return t.concat(r)};var Hn=function(e,t){var n=Q(t,(function(t,n){return n.depth>t.length?Fn(e,t,n):Mn(e,t,n)}),[]);return ie(n).map((function(e){return e.list}))};var zn=function(e){return tn(e,"OL,UL")};var Un=function(e){return on(e).map(zn).getOr(false)};var Wn=function(e){return un(e).map(zn).getOr(false)};var jn=function(e){return e.depth>0};var Vn=function(e){return e.isSelected};var qn=function(e){var t=rn(e);var n=Wn(e)?t.slice(0,-1):t;return X(n,Tn)};var $n=function(e,t,n){return nn(e).filter(hn).map((function(r){return{depth:t,isSelected:n,content:qn(e),itemAttributes:wn(e),listAttributes:wn(r),listType:mn(r)}}))};var Kn=function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}};var Yn=Object.prototype.hasOwnProperty;var Xn=function(e,t){return t};var Gn=function(e){return function(){var t=new Array(arguments.length);for(var n=0;n<t.length;n++){t[n]=arguments[n]}if(t.length===0){throw new Error("Can't merge zero objects")}var r={};for(var i=0;i<t.length;i++){var a=t[i];for(var o in a){if(Yn.call(a,o)){r[o]=e(r[o],a[o])}}}return r}};var Jn=Gn(Xn);var Zn=function(e,t){e.listType=t.listType;e.listAttributes=Jn({},t.listAttributes)};var Qn=function(e,t){var n=e[t].depth;for(var r=t-1;r>=0;r--){if(e[r].depth===n){return H.some(e[r])}if(e[r].depth<n){break}}return H.none()};var er=function(e){G(e,(function(t,n){Qn(e,n).each((function(e){Zn(t,e)}))}))};var tr=function(e){var t=e;var n=function(){return t};var r=function(e){t=e};var i=function(){return tr(n())};return{get:n,set:r,clone:i}};var nr=function(e,t,n,r){return on(r).filter(zn).fold((function(){t.each((function(e){if(Gt(e.start,r)){n.set(true)}}));var i=$n(r,e,n.get());t.each((function(e){if(Gt(e.end,r)){n.set(false)}}));var a=un(r).filter(zn).map((function(r){return rr(e,t,n,r)})).getOr([]);return i.toArray().concat(a)}),(function(r){return rr(e,t,n,r)}))};var rr=function(e,t,n,r){return ne(rn(r),(function(r){var i=zn(r)?rr:nr;var a=e+1;return i(a,t,n,r)}))};var ir=function(e,t){var n=tr(false);var r=0;return X(e,(function(e){return{sourceList:e,entries:rr(r,t,n,e)}}))};var ar=tinymce.util.Tools.resolve("tinymce.Env");var or=function(e,t){var n=e.dom;var r=e.schema.getBlockElements();var i=n.createFragment();var a,o,u,s;if(e.settings.forced_root_block){u=e.settings.forced_root_block}if(u){o=n.create(u);if(o.tagName===e.settings.forced_root_block){n.setAttribs(o,e.settings.forced_root_block_attrs)}if(!C.isBlock(t.firstChild,r)){i.appendChild(o)}}if(t){while(a=t.firstChild){var l=a.nodeName;if(!s&&(l!=="SPAN"||a.getAttribute("data-mce-type")!=="bookmark")){s=true}if(C.isBlock(a,r)){i.appendChild(a);o=null}else{if(u){if(!o){o=n.create(u);i.appendChild(o)}o.appendChild(a)}else{i.appendChild(a)}}}}if(!e.settings.forced_root_block){i.appendChild(n.create("br"))}else{if(!s&&(!ar.ie||ar.ie>10)){o.appendChild(n.create("br",{"data-mce-bogus":"1"}))}}return i};var ur=function(e,t){return X(t,(function(t){var n=Fe(t.content);return Le.fromDom(or(e,n.dom()))}))};var sr=function(e,t){er(t);return Hn(e.contentDocument,t).toArray()};var lr=function(e,t){return ne(Z(t,jn),(function(t){var n=ie(t).map(jn).getOr(false);return n?sr(e,t):ur(e,t)}))};var fr=function(e,t){G(J(e,Vn),(function(e){return Kn(t,e)}))};var cr=function(e){var t=X(De.getSelectedListItems(e),Le.fromDom);return Me(ee(t,P(Un)),ee(re(t),P(Un)),(function(e,t){return{start:e,end:t}}))};var dr=function(e,t,n){var r=ir(t,cr(e));G(r,(function(t){fr(t.entries,n);cn(t.sourceList,lr(e,t.entries));vn(t.sourceList)}))};var vr=u.DOM;var mr=function(e,t,n){var r,i,a,u,s;var l=function(e){o.each(a,(function(t){e.parentNode.insertBefore(t,n.parentNode)}));vr.remove(e)};a=vr.select('span[data-mce-type="bookmark"]',t);s=or(e,n);r=vr.createRng();r.setStartAfter(n);r.setEndAfter(t);i=r.extractContents();for(u=i.firstChild;u;u=u.firstChild){if(u.nodeName==="LI"&&e.dom.isEmpty(u)){vr.remove(u);break}}if(!e.dom.isEmpty(i)){vr.insertAfter(i,t)}vr.insertAfter(s,t);if(C.isEmpty(e.dom,n.parentNode)){l(n.parentNode)}vr.remove(n);if(C.isEmpty(e.dom,t)){vr.remove(t)}};var gr={splitList:mr};var pr=function(e,t){if(tn(t,"dd")){Nn(t,"dt")}else if(tn(t,"dt")){nn(t).each((function(n){return gr.splitList(e,n.dom(),t.dom())}))}};var hr=function(e){if(tn(e,"dt")){Nn(e,"dd")}};var br=function(e,t,n){if(t==="Indent"){G(n,hr)}else{G(n,(function(t){return pr(e,t)}))}};var yr=function(e,t){var n=X(De.getSelectedListRoots(e),Le.fromDom);var r=X(De.getSelectedDlItems(e),Le.fromDom);var i=false;if(n.length||r.length){var a=e.selection.getBookmark();dr(e,n,t);br(e,t,r);e.selection.moveToBookmark(a);e.selection.setRng(T.normalizeRange(e.selection.getRng()));e.nodeChanged();i=true}return i};var wr=function(e){return yr(e,"Indent")};var xr=function(e){return yr(e,"Outdent")};var Cr=function(e){return yr(e,"Flatten")};var kr=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)};var Sr=function(e,t){o.each(t,(function(t,n){e.setAttribute(n,t)}))};var Tr=function(e,t,n){Sr(t,n["list-attributes"]);o.each(e.select("li",t),(function(e){Sr(e,n["list-item-attributes"])}))};var Er=function(e,t,n){kr(e,t,n);Tr(e,t,n)};var Nr=function(e,t,n){o.each(n,(function(n){var r;return e.setStyle(t,(r={},r[n]="",r))}))};var Rr=function(e,t,n,r){var i,a;i=t[n?"startContainer":"endContainer"];a=t[n?"startOffset":"endOffset"];if(i.nodeType===1){i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i}if(!n&&C.isBr(i.nextSibling)){i=i.nextSibling}while(i.parentNode!==r){if(C.isTextBlock(e,i)){return i}if(/^(TD|TH)$/.test(i.parentNode.nodeName)){return i}i=i.parentNode}return i};var _r=function(e,t,n){var r=[],i=e.dom;var u=Rr(e,t,true,n);var s=Rr(e,t,false,n);var l;var f=[];for(var c=u;c;c=c.nextSibling){f.push(c);if(c===s){break}}o.each(f,(function(t){if(C.isTextBlock(e,t)){r.push(t);l=null;return}if(i.isBlock(t)||C.isBr(t)){if(C.isBr(t)){i.remove(t)}l=null;return}var o=t.nextSibling;if(a.isBookmarkNode(t)){if(C.isTextBlock(e,o)||!o&&t.parentNode===n){l=null;return}}if(!l){l=i.create("p");t.parentNode.insertBefore(l,t);r.push(l)}l.appendChild(t)}));return r};var Dr=function(e,t,n){var r=e.getStyle(t,"list-style-type");var i=n?n["list-style-type"]:"";i=i===null?"":i;return r===i};var Or=function(e,t,n){if(n===void 0){n={}}var r=e.selection.getRng(true);var i;var a="LI";var u=De.getClosestListRootElm(e,e.selection.getStart(true));var s=e.dom;if(s.getContentEditable(e.selection.getNode())==="false"){return}t=t.toUpperCase();if(t==="DL"){a="DT"}i=_.createBookmark(r);o.each(_r(e,r,u),(function(r){var i,o;o=r.previousSibling;if(o&&C.isListNode(o)&&o.nodeName===t&&Dr(s,o,n)){i=o;r=s.rename(r,a);o.appendChild(r)}else{i=s.create(t);r.parentNode.insertBefore(i,r);i.appendChild(r);r=s.rename(r,a)}Nr(s,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]);Er(s,i,n);Lr(e.dom,i)}));e.selection.setRng(_.resolveBookmark(i))};var Pr=function(e,t){return e&&t&&C.isListNode(e)&&e.nodeName===t.nodeName};var Ar=function(e,t,n){var r=e.getStyle(t,"list-style-type",true);var i=e.getStyle(n,"list-style-type",true);return r===i};var Br=function(e,t){return e.className===t.className};var Ir=function(e,t,n){return Pr(t,n)&&Ar(e,t,n)&&Br(t,n)};var Lr=function(e,t){var n,r;n=t.nextSibling;if(Ir(e,t,n)){while(r=n.firstChild){t.appendChild(r)}e.remove(n)}n=t.previousSibling;if(Ir(e,t,n)){while(r=n.lastChild){t.insertBefore(r,t.firstChild)}e.remove(n)}};var Mr=function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);Er(e,i,r)}else{Er(e,t,r)}};var Fr=function(e,t,n,r,i){if(t.nodeName===r&&!Hr(i)){Cr(e)}else{var a=_.createBookmark(e.selection.getRng(true));o.each([t].concat(n),(function(t){Mr(e.dom,t,r,i)}));e.selection.setRng(_.resolveBookmark(a))}};var Hr=function(e){return"list-style-type"in e};var zr=function(e,t,n,r){if(t===e.getBody()){return}if(t){if(t.nodeName===n&&!Hr(r)){Cr(e)}else{var i=_.createBookmark(e.selection.getRng(true));Er(e.dom,t,r);Lr(e.dom,e.dom.rename(t,n));e.selection.setRng(_.resolveBookmark(i))}}else{Or(e,n,r)}};var Ur=function(e,t,n){var r=De.getParentList(e);var i=De.getSelectedSubLists(e);n=n?n:{};if(r&&i.length>0){Fr(e,r,i,t,n)}else{zr(e,r,t,n)}};var Wr={toggleList:Ur,mergeWithAdjacentLists:Lr};var jr=u.DOM;var Vr=function(e,t){var n;var r=t.parentNode;if(r.nodeName==="LI"&&r.firstChild===t){n=r.previousSibling;if(n&&n.nodeName==="LI"){n.appendChild(t);if(C.isEmpty(e,r)){jr.remove(r)}}else{jr.setStyle(r,"listStyleType","none")}}if(C.isListNode(r)){n=r.previousSibling;if(n&&n.nodeName==="LI"){n.appendChild(t)}}};var qr=function(e,t){o.each(o.grep(e.select("ol,ul",t)),(function(t){Vr(e,t)}))};var $r={normalizeList:Vr,normalizeLists:qr};var Kr=function(e,t,i,a){var o=t.startContainer;var u=t.startOffset;var s,l;if(o.nodeType===3&&(i?u<o.data.length:u>0)){return o}s=e.schema.getNonEmptyElements();if(o.nodeType===1){o=n.getNode(o,u)}l=new r(o,a);if(i){if(C.isBogusBr(e.dom,o)){l.next()}}while(o=l[i?"next":"prev2"]()){if(o.nodeName==="LI"&&!o.hasChildNodes()){return o}if(s[o.nodeName]){return o}if(o.nodeType===3&&o.data.length>0){return o}}};var Yr=function(e,t){var n=t.childNodes;return n.length===1&&!C.isListNode(n[0])&&e.isBlock(n[0])};var Xr=function(e,t){if(Yr(e,t)){e.remove(t.firstChild,true)}};var Gr=function(e,t,n){var r,i;i=Yr(e,n)?n.firstChild:n;Xr(e,t);if(!C.isEmpty(e,t,true)){while(r=t.firstChild){i.appendChild(r)}}};var Jr=function(e,t,n){var r,i;var a=t.parentNode;if(!C.isChildOfBody(e,t)||!C.isChildOfBody(e,n)){return}if(C.isListNode(n.lastChild)){i=n.lastChild}if(a===n.lastChild){if(C.isBr(a.previousSibling)){e.remove(a.previousSibling)}}r=n.lastChild;if(r&&C.isBr(r)&&t.hasChildNodes()){e.remove(r)}if(C.isEmpty(e,n,true)){e.$(n).empty()}Gr(e,t,n);if(i){n.appendChild(i)}var o=en(Le.fromDom(n),Le.fromDom(t));var u=o?e.getParents(t,C.isListNode,n):[];e.remove(t);G(u,(function(t){if(C.isEmpty(e,t)&&t!==e.getRoot()){e.remove(t)}}))};var Zr=function(e,t,n){e.dom.$(n).empty();Jr(e.dom,t,n);e.selection.setCursorLocation(n)};var Qr=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r)){Zr(e,n,r)}else{var a=_.createBookmark(t);Jr(i,n,r);e.selection.setRng(_.resolveBookmark(a))}};var ei=function(e,t,n,r){var i=_.createBookmark(t);Jr(e.dom,n,r);var a=_.resolveBookmark(i);e.selection.setRng(a)};var ti=function(e,t){var n=e.dom,r=e.selection;var i=r.getStart();var a=De.getClosestListRootElm(e,i);var o=n.getParent(r.getStart(),"LI",a);var u,s,l;if(o){u=o.parentNode;if(u===e.getBody()&&C.isEmpty(n,u)){return true}s=T.normalizeRange(r.getRng(true));l=n.getParent(Kr(e,s,t,a),"LI",a);if(l&&l!==o){if(t){Qr(e,s,l,o)}else{ei(e,s,o,l)}return true}else if(!l){if(!t){Cr(e);return true}}}return false};var ni=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t);if(r&&e.isEmpty(r)){e.remove(r)}};var ri=function(e,t){var n=e.dom;var r=e.selection.getStart();var i=De.getClosestListRootElm(e,r);var a=n.getParent(r,n.isBlock,i);if(a&&n.isEmpty(a)){var o=T.normalizeRange(e.selection.getRng(true));var u=n.getParent(Kr(e,o,t,i),"LI",i);if(u){e.undoManager.transact((function(){ni(n,a,i);Wr.mergeWithAdjacentLists(n,u.parentNode);e.selection.select(u,true);e.selection.collapse(t)}));return true}}return false};var ii=function(e,t){return ti(e,t)||ri(e,t)};var ai=function(e){var t=e.selection.getStart();var n=De.getClosestListRootElm(e,t);var r=e.dom.getParent(t,"LI,DT,DD",n);if(r||De.getSelectedListItems(e).length>0){e.undoManager.transact((function(){e.execCommand("Delete");$r.normalizeLists(e.dom,e.getBody())}));return true}return false};var oi=function(e,t){return e.selection.isCollapsed()?ii(e,t):ai(e)};var ui=function(e){e.on("keydown",(function(t){if(t.keyCode===i.BACKSPACE){if(oi(e,false)){t.preventDefault()}}else if(t.keyCode===i.DELETE){if(oi(e,true)){t.preventDefault()}}}))};var si={setup:ui,backspaceDelete:oi};var li=function(e){return{backspaceDelete:function(t){si.backspaceDelete(e,t)}}};var fi={get:li};var ci=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}};var di=function(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();if(n==="indent"){wr(e)}else if(n==="outdent"){xr(e)}}));e.addCommand("InsertUnorderedList",(function(t,n){Wr.toggleList(e,"UL",n)}));e.addCommand("InsertOrderedList",(function(t,n){Wr.toggleList(e,"OL",n)}));e.addCommand("InsertDefinitionList",(function(t,n){Wr.toggleList(e,"DL",n)}));e.addCommand("RemoveList",(function(){Cr(e)}));e.addQueryStateHandler("InsertUnorderedList",ci(e,"UL"));e.addQueryStateHandler("InsertOrderedList",ci(e,"OL"));e.addQueryStateHandler("InsertDefinitionList",ci(e,"DL"))};var vi={register:di};var mi=function(e){return e.getParam("lists_indent_on_tab",true)};var gi={shouldIndentOnTab:mi};var pi=function(e){e.on("keydown",(function(t){if(t.keyCode!==i.TAB||i.metaKeyPressed(t)){return}e.undoManager.transact((function(){if(t.shiftKey?xr(e):wr(e)){t.preventDefault()}}))}))};var hi=function(e){if(gi.shouldIndentOnTab(e)){pi(e)}si.setup(e)};var bi={setup:hi};var yi=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r)){return n}}return-1};var wi=function(e,t){return function(n){var r=n.control;e.on("NodeChange",(function(e){var n=yi(e.parents,C.isTableCellNode);var i=n!==-1?e.parents.slice(0,n):e.parents;var a=o.grep(i,C.isListNode);r.active(a.length>0&&a[0].nodeName===t)}))}};var xi=function(e){var t=function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return o.inArray(n.split(/[ ,]/),t)!==-1};if(!t(e,"advlist")){e.addButton("numlist",{active:false,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:wi(e,"OL")});e.addButton("bullist",{active:false,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:wi(e,"UL")})}e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})};var Ci={register:xi};t.add("lists",(function(e){bi.setup(e);Ci.register(e);vi.register(e);return fi.get(e)}));function ki(){}return ki}(window)})()},584:function(e,t){tinymce.PluginManager.add("stickytoolbar",(function(e,t){var n=e.settings.sticky_offset?e.settings.sticky_offset:0;e.on("init",(function(){e.setSticky()}));$(window).on("scroll",(function(){e.setSticky()}));e.setSticky=function(){n=e.settings.sticky_offset?e.settings.sticky_offset:0;var t=e.editorContainer;var r=$(t).find(".mce-toolbar-grp");var i=$(t).find(".mce-statusbar");if(e.isSticky()){$(t).css({paddingTop:r.outerHeight()});if(e.isAtBottom()){r.css({top:"auto",bottom:i.outerHeight(),position:"absolute",width:"100%",borderBottom:"none"})}else{r.css({top:n,bottom:"auto",position:"fixed",width:$(t).width(),borderBottom:"1px solid rgba(0,0,0,0.2)"})}}else{$(t).css({paddingTop:0});r.css({top:0,position:"relative",width:"auto",borderBottom:"none"})}};e.isSticky=function(){var t=e.editorContainer,r=t.getBoundingClientRect().top;if(r<n){return true}return false};e.isAtBottom=function(){const t=e.getContainer();const r=t.getBoundingClientRect().top,i=t.querySelector(".mce-statusbar"),a=t.querySelector(".mce-top-part");const o=i?i.offsetHeight:0,u=a?a.offsetHeight:0;const s=-(t.offsetHeight-u-o);if(r<s+n){return true}return false}}))},6:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){if(typeof window==="object")n=window}e.exports=n},7:function(e,t,n){(function(e,r){var i=Object.getOwnPropertyDescriptors||function e(t){var n=Object.keys(t);var r={};for(var i=0;i<n.length;i++){r[n[i]]=Object.getOwnPropertyDescriptor(t,n[i])}return r};var a=/%[sdj%]/g;t.format=function(e){if(!k(e)){var t=[];for(var n=0;n<arguments.length;n++){t.push(s(arguments[n]))}return t.join(" ")}var n=1;var r=arguments;var i=r.length;var o=String(e).replace(a,(function(e){if(e==="%%")return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}));for(var u=r[n];n<i;u=r[++n]){if(w(u)||!N(u)){o+=" "+u}else{o+=" "+s(u)}}return o};t.deprecate=function(n,i){if(typeof e!=="undefined"&&e.noDeprecation===true){return n}if(typeof e==="undefined"){return function(){return t.deprecate(n,i).apply(this,arguments)}}var a=false;function o(){if(!a){if(e.throwDeprecation){throw new Error(i)}else if(e.traceDeprecation){r.trace(i)}else{r.error(i)}a=true}return n.apply(this,arguments)}return o};var o={};var u;t.debuglog=function(n){if(T(u))u=e.env.NODE_DEBUG||"";n=n.toUpperCase();if(!o[n]){if(new RegExp("\\b"+n+"\\b","i").test(u)){var i=e.pid;o[n]=function(){var e=t.format.apply(t,arguments);r.error("%s %d: %s",n,i,e)}}else{o[n]=function(){}}}return o[n]};function s(e,n){var r={seen:[],stylize:f};if(arguments.length>=3)r.depth=arguments[2];if(arguments.length>=4)r.colors=arguments[3];if(y(n)){r.showHidden=n}else if(n){t._extend(r,n)}if(T(r.showHidden))r.showHidden=false;if(T(r.depth))r.depth=2;if(T(r.colors))r.colors=false;if(T(r.customInspect))r.customInspect=true;if(r.colors)r.stylize=l;return d(r,e,r.depth)}t.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(e,t){var n=s.styles[t];if(n){return"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m"}else{return e}}function f(e,t){return e}function c(e){var t={};e.forEach((function(e,n){t[e]=true}));return t}function d(e,n,r){if(e.customInspect&&n&&D(n.inspect)&&n.inspect!==t.inspect&&!(n.constructor&&n.constructor.prototype===n)){var i=n.inspect(r,e);if(!k(i)){i=d(e,i,r)}return i}var a=v(e,n);if(a){return a}var o=Object.keys(n);var u=c(o);if(e.showHidden){o=Object.getOwnPropertyNames(n)}if(_(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return m(n)}if(o.length===0){if(D(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(E(n)){return e.stylize(RegExp.prototype.toString.call(n),"regexp")}if(R(n)){return e.stylize(Date.prototype.toString.call(n),"date")}if(_(n)){return m(n)}}var l="",f=false,y=["{","}"];if(b(n)){f=true;y=["[","]"]}if(D(n)){var w=n.name?": "+n.name:"";l=" [Function"+w+"]"}if(E(n)){l=" "+RegExp.prototype.toString.call(n)}if(R(n)){l=" "+Date.prototype.toUTCString.call(n)}if(_(n)){l=" "+m(n)}if(o.length===0&&(!f||n.length==0)){return y[0]+l+y[1]}if(r<0){if(E(n)){return e.stylize(RegExp.prototype.toString.call(n),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(n);var x;if(f){x=g(e,n,r,u,o)}else{x=o.map((function(t){return p(e,n,r,u,t,f)}))}e.seen.pop();return h(x,l,y)}function v(e,t){if(T(t))return e.stylize("undefined","undefined");if(k(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(C(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(w(t))return e.stylize("null","null")}function m(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,n,r,i){var a=[];for(var o=0,u=t.length;o<u;++o){if(L(t,String(o))){a.push(p(e,t,n,r,String(o),true))}else{a.push("")}}i.forEach((function(i){if(!i.match(/^\d+$/)){a.push(p(e,t,n,r,i,true))}}));return a}function p(e,t,n,r,i,a){var o,u,s;s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(s.get){if(s.set){u=e.stylize("[Getter/Setter]","special")}else{u=e.stylize("[Getter]","special")}}else{if(s.set){u=e.stylize("[Setter]","special")}}if(!L(r,i)){o="["+i+"]"}if(!u){if(e.seen.indexOf(s.value)<0){if(w(n)){u=d(e,s.value,null)}else{u=d(e,s.value,n-1)}if(u.indexOf("\n")>-1){if(a){u=u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2)}else{u="\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")}}}else{u=e.stylize("[Circular]","special")}}if(T(o)){if(a&&i.match(/^\d+$/)){return u}o=JSON.stringify(""+i);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+u}function h(e,t,n){var r=0;var i=e.reduce((function(e,t){r++;if(t.indexOf("\n")>=0)r++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(i>60){return n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]}return n[0]+t+" "+e.join(", ")+" "+n[1]}function b(e){return Array.isArray(e)}t.isArray=b;function y(e){return typeof e==="boolean"}t.isBoolean=y;function w(e){return e===null}t.isNull=w;function x(e){return e==null}t.isNullOrUndefined=x;function C(e){return typeof e==="number"}t.isNumber=C;function k(e){return typeof e==="string"}t.isString=k;function S(e){return typeof e==="symbol"}t.isSymbol=S;function T(e){return e===void 0}t.isUndefined=T;function E(e){return N(e)&&P(e)==="[object RegExp]"}t.isRegExp=E;function N(e){return typeof e==="object"&&e!==null}t.isObject=N;function R(e){return N(e)&&P(e)==="[object Date]"}t.isDate=R;function _(e){return N(e)&&(P(e)==="[object Error]"||e instanceof Error)}t.isError=_;function D(e){return typeof e==="function"}t.isFunction=D;function O(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}t.isPrimitive=O;t.isBuffer=n(9);function P(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date;var t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}t.log=function(){r.log("%s - %s",I(),t.format.apply(t,arguments))};t.inherits=n(10);t._extend=function(e,t){if(!t||!N(t))return e;var n=Object.keys(t);var r=n.length;while(r--){e[n[r]]=t[n[r]]}return e};function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;t.promisify=function e(t){if(typeof t!=="function")throw new TypeError('The "original" argument must be of type Function');if(M&&t[M]){var n=t[M];if(typeof n!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(n,M,{value:n,enumerable:false,writable:false,configurable:true});return n}function n(){var e,n;var r=new Promise((function(t,r){e=t;n=r}));var i=[];for(var a=0;a<arguments.length;a++){i.push(arguments[a])}i.push((function(t,r){if(t){n(t)}else{e(r)}}));try{t.apply(this,i)}catch(e){n(e)}return r}Object.setPrototypeOf(n,Object.getPrototypeOf(t));if(M)Object.defineProperty(n,M,{value:n,enumerable:false,writable:false,configurable:true});return Object.defineProperties(n,i(t))};t.promisify.custom=M;function F(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e;e=n}return t(e)}function H(t){if(typeof t!=="function"){throw new TypeError('The "original" argument must be of type Function')}function n(){var n=[];for(var r=0;r<arguments.length;r++){n.push(arguments[r])}var i=n.pop();if(typeof i!=="function"){throw new TypeError("The last argument must be of type Function")}var a=this;var o=function(){return i.apply(a,arguments)};t.apply(this,n).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(F,t,o)}))}Object.setPrototypeOf(n,Object.getPrototypeOf(t));Object.defineProperties(n,i(t));return n}t.callbackify=H}).call(this,n(8),n(5))},8:function(e,t){var n=e.exports={};var r;var i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=a}}catch(e){r=a}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=o}}catch(e){i=o}})();function u(e){if(r===setTimeout){return setTimeout(e,0)}if((r===a||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function s(e){if(i===clearTimeout){return clearTimeout(e)}if((i===o||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var l=[];var f=false;var c;var d=-1;function v(){if(!f||!c){return}f=false;if(c.length){l=c.concat(l)}else{d=-1}if(l.length){m()}}function m(){if(f){return}var e=u(v);f=true;var t=l.length;while(t){c=l;l=[];while(++d<t){if(c){c[d].run()}}d=-1;t=l.length}c=null;f=false;s(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}l.push(new g(e,t));if(l.length===1&&!f){u(m)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function p(){}n.on=p;n.addListener=p;n.once=p;n.off=p;n.removeListener=p;n.removeAllListeners=p;n.emit=p;n.prependListener=p;n.prependOnceListener=p;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},9:function(e,t){e.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}}});