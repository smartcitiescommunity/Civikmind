var x_before_drag=0;var y_before_drag=0;var dirty=false;var initRack=function(){$(document).on("click","#sviewlist",(function(){$("#viewlist").show();$("#viewgraph").hide();$(this).addClass("selected");$("#sviewgraph").removeClass("selected")})).on("click","#sviewgraph",(function(){$("#viewlist").hide();$("#viewgraph").show();$(this).addClass("selected");$("#sviewlist").removeClass("selected")})).on("click","#toggle_images",(function(){$("#toggle_text").toggle();$(this).toggleClass("active");$("#viewgraph").toggleClass("clear_picture")})).on("click","#toggle_text",(function(){$(this).toggleClass("active");$("#viewgraph").toggleClass("clear_text")})).on("click",".cell_add",(function(){var t=grid_rack_units-$(this).index();var e=$(this).parents(".rack_side").hasClass("rack_front")?0:1;$.ajax({url:grid_link_url,data:{racks_id:grid_rack_id,orientation:e,position:t,ajax:true},success:function(t){$("#grid-dialog").html(t).dialog({modal:true,width:"auto"})}})}));$(".grid-stack").each((function(){$(this).gridstack({cellHeight:20,verticalMargin:1,float:true,disableOneColumnMode:true,animate:true,removeTimeout:100,disableResize:true,draggable:{handle:".grid-stack-item-content",appendTo:"body",containment:".grid-stack",cursor:"move",scroll:true}})}));$(".grid-stack").on("dragstart",(function(t){var e=$(t.target);var i=e.data("_gridstack_node");x_before_drag=Number(i.x);y_before_drag=Number(i.y);e.qtip("hide",true)})).on("click",".grid-stack-item",(function(t){var e=$(t.target);var i=e.find(".itemrack_name").attr("href");if(i){window.location=i}}));$("#viewgraph .cell_add, #viewgraph .grid-stack-item").each((function(){var t=$(this).find(".tipcontent");if(t.length){$(this).qtip({position:{my:"left center",at:"right center"},content:{text:t},style:{classes:"qtip-shadow qtip-bootstrap rack_tipcontent"}})}}));for(var t=grid_rack_units;t>=1;t--){$(".indexes").append("<li>"+t+"</li>");$(".racks_add").append('<div class="cell_add"><span class="tipcontent">'+grid_rack_add_tip+"</span></div>")}$(".grid-stack").each((function(t,e){$(e).data("gridstack").locked(".grid-stack-item",true)}));$(".grid-stack .grid-stack-item").draggable("option","containment","parent")};var getHpos=function(t,e,i){if(!e){return 0}else if(t==0&&!i){return 1}else if(t==0&&i){return 2}else if(t==1&&i){return 1}else if(t==1&&!i){return 2}};